var TargetID="CV";var rule_declare_expressions_ValidationTypes=new Array();var select_elements_name_target_array=new Array();var select_elements_name_value_array=new Array();var calculateExpression=new validation_ValidationType("calculateexpression");calculateExpression.addEventFunction("onchange",calculateExpressions);calculateExpression.addEventFunction("onclick",calculateExpressions);var disableLUOnChange=false;function rule_declare_expression(B,A){rule_declare_expressions_ValidationTypes[B]=A}function init_expression_calculation(D){var A=rule_declare_expressions_ValidationTypes[D.name];if(A==null){A=rule_declare_expressions_ValidationTypes[validation_getEntryHandleForPageProperties(D.name)]}if(A!=null){var C=validation_removeSpaces(D.getAttribute("validationType")).split(",");for(var B=0;B<C.length;B++){if(C[B]=="calculateexpression"){return }}if(D.getAttribute("validationType")==""){D.setAttribute("validationType","calculateexpression")}else{D.setAttribute("validationType",D.getAttribute("validationType")+",calculateexpression")}return true}return }function calculateExpressions(M,A){if(disableLUOnChange){return }if(!pega.util.Dom.getElementsById(TargetID,document)){return }if((A=="onchange")&&((M.type=="checkbox")||(M.type=="radio"))){return"terminate"}else{if((A=="onclick")&&!((M.type=="checkbox")||(M.type=="radio"))){return"terminate"}}var E=rule_declare_expressions_ValidationTypes[M.name];var J=rule_declare_expressions_ValidationTypes[validation_getEntryHandleForPageProperties(M.name)];if(!E&&J){E=J}else{if(E&&J){var F=new Hashtable();var L=F.length;for(var D=0;D<L;D++){F.put(E[D],"true")}L=J.length;for(var D=0;D<L;D++){F.put(J[D],"true")}E=new Array();L=F.size();for(var D=0;D<L;D++){E.push(F.keys()[D])}F=null}}if(E!=null){var I=matchTargets(M,E);var K;if(I==""){return }else{var C=I.split("~~");I=C[0];K=C[1]}var H=new SafeURL();if(M.type=="checkbox"){H.put(M.name,M.checked)}else{var B=M.value;if(M.tagName&&M.tagName.match(/^(input)$/gi)&&M.getAttribute("data-formatting")&&M.getAttribute("data-formatting")==="done"){B=M.getAttribute("data-value")}H.put(M.name,B)}var G=document.getElementsByTagName("select");for(var D=0;D<G.length;D++){if(rule_declare_expressions_ValidationTypes[validation_getEntryHandleForPageProperties(G[D].name)]!=null){H.put(G[D].name,G[D].value)}}if(I){callGetTargets(I,H,M,K)}}}function getFromServer(F,G,A){if(A){if((typeof window.rowDeleted)=="undefined"){window.rowDeleted=false}if(!pega.util.Dom.inDocument(A)){if(window.rowDeleted){if(pega.c&&pega.c.actionSequencer&&!pega.u.d.isAjaxInProgress()){pega.c.actionSequencer.resume()}return }else{var H=document.getElementsByName(A.name);if(!H){if(pega.c&&pega.c.actionSequencer&&!pega.u.d.isAjaxInProgress()){pega.c.actionSequencer.resume()}return }var D=0;if(A.type=="radio"){var C=H.length;while(D<C){if(H[D].id==A.id){break}D++}}else{D=H.length-1}if(!pega.util.Dom.inDocument(H[D])){if(pega.c&&pega.c.actionSequencer&&!pega.u.d.isAjaxInProgress()){pega.c.actionSequencer.resume()}return }A=H[D]}}window.rowDeleted=false;if(typeof pega!="undefined"&&typeof pega.u!="undefined"&&typeof pega.u.d!="undefined"&&pega.u.d.preReloadEle&&pega.util.Dom.isAncestor(pega.u.d.preReloadEle,input[0])){if(pega.c&&pega.c.actionSequencer&&!pega.u.d.isAjaxInProgress()){pega.c.actionSequencer.resume()}return }}if(pega.c&&pega.c.actionSequencer){pega.c.actionSequencer.pause()}var B=new Array();var E=(A&&A!="")?$(A).closest("*[data-harness-id]")[0].getAttribute("data-harness-id"):pega.ctx.pzHarnessID;if(E){B.inputHarnessId=E}var I={success:this.setTargetValuesSuccess,failure:this.setTargetValuesFail,scope:this,argument:B};if(pega.ui.ChangeTrackerMap.getTracker().id){F+="&AJAXTrackID="+pega.ui.ChangeTrackerMap.getTracker().id}responseObj=pega.u.d.asyncRequest("POST",SafeURL_createFromURL(F),I,G)}function updateExpressionTargetsFromList(C){var A=true;var F=false;var G="";var B="";var I="";var H=pega.util.Dom.getElementsById(TargetID,document);if(H==null){return }for(var D=0;D<H.length;D++){var J=H[D].getAttribute("name");for(var E=0;E<C.length;E++){if(pega.u.property.toReference(J)==C[E]){B+=getTargetString(H[D]);G=getTargetFormat(H[D]);if(G!=""){A=false}if(G&&G!="NF"){F=true}if(G==""){G="-"}I+=G+"|";break}}}B=B.substring(0,B.length-1);if(A){I=""}else{if(!A&&!F){I="NF"}}if(B===""){return }callGetTargets(B,"","",I)}function setTargetValuesSuccess(L){if(pega.c&&pega.c.actionSequencer&&!pega.u.d.gIsScriptsLoading&&!pega.u.d.isAjaxInProgress()){pega.c.actionSequencer.resume()}var G=L.responseText;var J=pega.tools.XMLDocument.get();J.loadXML(G);var O=L.argument.inputHarnessId;if(J.documentElement!=null){if(G){pega.ui.ChangeTrackerMap.getTracker().parseForChangeTrackerDiv(G,true)}var S=J.documentElement.selectNodes("target");if(S!=null){for(var P=0;P<S.length;P++){var Q=S[P].childNodes[0].text;var E=S[P].childNodes[1].text;var D=[];var B=false;if(O){var R=document.querySelectorAll("[data-harness-id = '"+O+"']");for(var F=0;F<R.length;F++){var K=pega.util.Dom.getElementsById(TargetID,R[F]);if(K){D=D.concat(K)}}B=true}if(!O||D.length===0){D=pega.util.Dom.getElementsById(TargetID,document)}if((Array.isArray(D)&&D.length!==0)||(!Array.isArray(D)&&D)){for(var N=0;N<D.length;N++){var M=$(D[N]).closest("*[data-harness-id]");var I=(B&&M&&M.length)?M[0].getAttribute("data-harness-id"):null;if(Q==D[N].getAttribute("name")&&I==O){if(E.indexOf("<SPAN")>-1){D[N].parentNode.innerHTML=E}else{if(D[N].innerHTML!=E){D[N].innerHTML=E}}}}}else{var M=$(D).closest("*[data-harness-id]");var I=(B&&M&&M.length)?M[0].getAttribute("data-harness-id"):null;if(D&&Q==D.getAttribute("name")&&I==O){D.parentNode.innerHTML=E}}}}var C=trim(J.documentElement.selectNodes("errors")[0].text);if(!C){return }if(pega.u.d.formErrorType=="NONE"){var H=document.createElement("DIV");pega.u.d.loadDOMObject(H,C);pega.u.d.updateErrorSection(H)}else{var A=pega.util.Dom.getElementsById("PegaRULESErrorFlag",document);if(!A){displayFormErrors(C)}}}}function setTargetValuesFail(A){if(pega.c&&pega.c.actionSequencer&&!pega.u.d.gIsScriptsLoading&&!pega.u.d.isAjaxInProgress()){pega.c.actionSequencer.resume()}}function matchTargets(G,C){input=G.name;var M="";var Q="";var R=true;var I=true;var D=false;var L="";for(var P=0;P<C.length;P++){var H=C[P];var K=H.split("$p");var F=input.split("$p");var B=getMatchedTarget(F,K);var O=$(G).closest("*[data-harness-id]")[0].getAttribute("data-harness-id");var A=false;var E;if(O){E=pega.util.Dom.getElementsById(TargetID,pega.ctx.dom.querySelectorAll("[data-harness-id = '"+O+"']")[0]);A=true}if(!O||!E){E=pega.util.Dom.getElementsById(TargetID,document)}if(E){for(var N=0;N<E.length;N++){var J=A?$(E[N]).closest("*[data-harness-id]")[0].getAttribute("data-harness-id"):null;if(B==E[N].getAttribute("name")&&J==O){M+=getTargetString(E[N]);L=getTargetFormat(E[N]);if(L!=""){R=false}if(L&&L!="NF"){D=true}if(L==""){L="-"}Q+=L+"|"}}}else{if(B==E.getAttribute("name")){M+=getTargetString(E);L=getTargetFormat(E);if(L!=""){R=false}if(L&&L!="NF"){D=true}if(L==""){L="-"}Q+=L+"|"}}}M=M.substring(0,M.length-1);if(R){Q=""}else{if(!R&&!D){Q="NF"}}return M+"~~"+Q}function getMatchedTarget(E,D){while(E.length>0){if(E.length==D.length){for(var C=0;C<D.length-1;C++){var B=D[C].length;if(D[C]==E[C].substring(0,B)){D[C]=E[C]}}break}else{E.splice(E.length-1,1)}}if(E.length==D.length){var A=D[0];for(var C=1;C<D.length;C++){A+="$p"+D[C]}return A}return }function fireExpression(){var G=true;var F=false;var E="";var B=pega.util.Dom.getElementsById(TargetID,document);if(B==null){return }var C="";var A=B.length;var H="";for(var D=0;D<A;D++){C+=getTargetString(B[D]);E=getTargetFormat(B[D]);if(E!=""){G=false}if(E&&E!="NF"){F=true}if(E==""){E="-"}H+=E+"|"}C=C.substring(0,C.length-1);if(G){H=""}else{if(!G&&!F){H="NF"}}if(C){callGetTargets(C,"","",H)}}function getTargetString(A){return A.getAttribute("name")+"!"+A.getAttribute("RHP_NAME")+","}function getTargetFormat(B){var A=B.getAttribute("data-ctlformat");return A?A:""}function callGetTargets(B,C,E,A){var D=SafeURL_createFromURL(pega.u.d.url);if(C==null||!C){var C=new SafeURL()}D.put("pyActivity","GetTargets");D.put("pzKeepPageMessages","true");C.put("Targets",B);C.put("CtlFormat",A);C.put("bClientValidation",pega.ui.HarnessContextMap.getCurrentHarnessContext().getProperty("bClientValidation"));C.put("FormError",pega.u.d.formErrorType);C.put("FieldError",pega.u.d.fieldErrorType);C.put("pyCustomError",pega.u.d.pyCustomError);C.put("FormError",pega.u.d.formErrorType);C.put("pzFromFrame"," ");if(pega.c&&pega.c.actionSequencer){pega.c.actionSequencer.pause()}gTimeout=window.setTimeout(function(){if(pega.u.d.fixBaseThreadTxnId){pega.u.d.fixBaseThreadTxnId(D)}getFromServer(D.toURL(),C.toQueryString(),E)},500)};