var pega;(function(A){var B;(function(D){D.AppView=A.ui.appview;var C;(function(U){var T={};var M="appview-nav-toggle-one";var F="appview-nav-toggle-two";var O="nav-toggle-one";var P="nav-toggle-two";var L=false;var S=null;var K=false;var G=false;var N=false;var J=null;var I=null;U.REGION_TOP="TOP";U.REGION_LEFT="LEFT";U.REGION_RIGHT="RIGHT";U.REGION_BOTTOM="BOTTOM";var Q={};Q[U.REGION_TOP]=false;Q[U.REGION_LEFT]=false;Q[U.REGION_RIGHT]=false;Q[U.REGION_BOTTOM]=false;var E=-1;var H={};H[U.REGION_TOP]=false;H[U.REGION_LEFT]=false;H[U.REGION_RIGHT]=false;H[U.REGION_BOTTOM]=false;function R(W){var X=$(".nav-toggle-one");if(W&&W.srcElement){var V=W.srcElement;while(V){if(V.tagName=="LI"){X=V;break}V=V.parentNode}}return X}U.onScreenLayoutLoad=function(V){S=V;$(".nav-toggle-one").click(function(){A.ui.appview.showRegion(A.ui.appview.REGION_LEFT)});$(".nav-toggle-two").click(function(){A.ui.appview.showRegion(A.ui.appview.REGION_RIGHT)});$("#screen-layout-mask").click(function(){A.ui.appview.hideRegion(A.ui.appview.REGION_LEFT)});this.determineNavToggleState();$(window).resize(function(){A.ui.appview.determineNavToggleState()});this.subscribeToModalDialog();this.subscribeToPopOver();if(A.mobile&&A.mobile.isHybridClient&&window.localeDirection==="ltr"){if($(".screen-layout").hasClass("screen-layout-header_left")&&!T[this.REGION_LEFT]){this.setAnimationConfig(this.REGION_LEFT,{width:$("#sidebar-region-one").css("width")})}if(Object.keys(T).length){A.mobile.hybrid.callWhenLaunchboxLoaded(function(){A.ui.appview.launch()})}}};U.launch=function(){if(window.launchbox&&window.launchbox.SideBar){window.launchbox.SideBar.configure(T);window.launchbox.SideBar.onBeforeShow.bind(function(W){A.ui.appview.onBeforeShow(W)});window.launchbox.SideBar.onAfterHide.bind(function(W){A.ui.appview.onAfterHide(W)});for(var V in H){if(T[V]){H[V]=true}}this.determineNavToggleState()}else{console.error("SideBar not defined!")}};U.subscribeToPopOver=function(){if(A.u.d&&A.u.d.addPopOverListener){A.u.d.addPopOverListener({onContentReady:function(){A.ui.appview.disableNavToggle();var V=A.mobile.hybrid.getLaunchBox();if(V&&V.SideBar){V.SideBar.hide()}},onClose:function(){A.ui.appview.determineNavToggleState()}});clearInterval(I)}else{if(!I){I=setInterval(function(){A.ui.appview.subscribeToPopOver()},10)}}};U.subscribeToModalDialog=function(){if(A.u.d&&A.u.d.modalDialog&&A.u.d.modalDialog.subscribe){A.u.d.modalDialog.subscribe("beforeShow",function(){A.ui.appview.disableNavToggle()});A.u.d.modalDialog.subscribe("hide",function(){A.ui.appview.determineNavToggleState()});clearInterval(J)}else{if(!J){J=setInterval(function(){A.ui.appview.subscribeToModalDialog()},10)}}};U.enableNavToggle=function(){if(H[this.REGION_LEFT]){window.launchbox.SideBar.presentsWithGesture=true}};U.disableNavToggle=function(){if(H[this.REGION_LEFT]){window.launchbox.SideBar.presentsWithGesture=false}};U.showRegion=function(W,V){if(!W){W=this.REGION_LEFT}if(H[W]){window.launchbox.SideBar.show(W);L=false;E=A.mobile.nativenav?A.mobile.nativenav.addToHistory(this.hideRegion,this):-1}else{if(S){S.showPanel(W)}L=true}Q[W]=true;$(R(V)).addClass("appview-menu-shown")};U.hideRegion=function(W,V){if(!W){W=this.REGION_LEFT}if(H[this.REGION_LEFT]&&!L){window.launchbox.SideBar.hide(W)}else{if(S){S.hidePanel(W)}L=false}Q[W]=false;$(R(V)).removeClass("appview-menu-shown")};U.isRegionShown=function(V){return Q[V]};U.toggle=function(W,V){if(!W){W=this.REGION_LEFT}if(this.isRegionShown(W)){this.hideRegion(W,V)}else{this.showRegion(W,V)}};U.onBeforeShow=function(V){Q[V]=true;$(".screen-layout").addClass("screen-layout-expanded-s1 screen-layout-expanded-s1-animated screen-layout-expanded-s1-animate");document.elementFromPoint(0,0).nodeName;window.launchbox.SideBar.notifyContentReady()};U.onAfterHide=function(V){Q[V]=false;$(".screen-layout").removeClass("screen-layout-expanded-s1 screen-layout-expanded-s1-animated screen-layout-expanded-s1-animate");document.elementFromPoint(0,0).nodeName;if(A.ui&&A.ui.DCUtil){if(A.ui.DCUtil.isLoadingInProgress){A.ui.DCUtil.onLoadingFinished=window.launchbox.SideBar.notifyContentReady}else{window.launchbox.SideBar.notifyContentReady()}}(A.mobile&&A.mobile.nativenav)?A.mobile.nativenav.removeFromHistory(E):null;E="-1"};U.setAnimationConfig=function(W,V){T[W]=V;T.width=V.width;T.regionId=W};U.determineNavToggleState=function(){var V=$("."+O).last().css("display");if(V!="none"&&V!=undefined){this.enableNavToggle()}else{this.disableNavToggle()}}})(C=D.appview||(D.appview={}))})(B=A.ui||(A.ui={}))})(pega||(pega={}));
var legacyConditionEngine={ClientEventAPI:{parTRObject:null,CTDivs:null,returnArray:null,srcValue:null,srcIdvalue:null,inRepeat:false,elValues:[],srcValueURL:new SafeURL(),at_sectionsTable:new Array(),rw_preActivities:new Array(),dataTransforms:new Array(),serverRefresh:false,onload:function(){this.SWArray=[];this.RWArray=[];this.srcValueURL=new SafeURL();var A=false;if(typeof window.getErrorDB=="function"&&this.src&&this.src.getAttribute){A=getErrorDB().isHavingError(this.src.getAttribute("name"))}if(this.eventType=="SERVER"&&!A){if(this.dataTransformName&&this.dataTransformName!=""){this.dataTransforms.push(this.dataTransformName)}pega.u.d.reloadSection(null,this.activityName,this.activityParams,false,true,this.index,false,this.ev,this.dataTransformName?this.dataTransforms:null);this.dataTransforms=[]}else{if(this.eventType=="POSTCELL"&&!A){pega.control.postValue.initiatePost(this,"clientEvent")}else{if(this.eventType=="CLIENT"&&!A){pega.u.d.evaluateClientConditions("ELEM",pega.u.property.toReference(this.src.getAttribute("name")),undefined,undefined,this.src);if(!this.serverRefresh){pega.u.d.resizeHarness()}this.serverRefresh=false;this.isClientEvent=false}}}},applyConditions:function(){var E=pega.ui.HarnessContextMgr;pega.ctx.temp_currentCT=pega.ui.ChangeTrackerMap.getTracker();pega.ctx.temp_currentCT.tempPropMap={};pega.ctx.temp_currentCT.tempPropValuesMap={};if(E.get("isUITemplatized")){pega.ctx.ignoreCachingSectionList=true;if(this.src){pega.ui.ExpressionEvaluator.handlePropertyChange(this.src)}pega.ui.ExpressionEvaluator.handleChangedProperties(pega.ctx.temp_currentCT);pega.ctx.ignoreCachingSectionList=false;if(!pega.ui.ExpressionEvaluator.getNTExpressionStatus()){pega.ctx.temp_currentCT.clearChanges();pega.ctx.ct_sectionsList=new Array();pega.ui.EventsEmitter.publishSync(pega.ctx.AFTER_EXPRESSIONS_HANDLED_ON_PROPERTY_CHANGES);this.at_sectionsTable=new Array();this.rw_preActivities=[];this.dataTransforms=[];return }}this.initializeVariables();this.findClientTargetDivs();var A=false;if(!pega.ui.ChangeTrackerMap.isSingleTracker()){if(pega.ctx.temp_currentCT.isPrimary){this.CTDivs=pega.ctx.dom.$("DIV#CT");A=true}else{if(pega.u.d.bModalDialogOpen&&pega.u.d.modalDialog.body){this.CTDivs=pega.ctx.dom.$(pega.u.d.modalDialog.body).find("DIV#CT")}else{if(pega.ctx.isMDC){this.CTDivs=pega.ctx.dom.$("DIV#CT")}else{if(pega.u.d.ServerProxy.isDestinationRemote()){var G=document.getElementById("PEGA_HARNESS");if(G&&pega.ctx.temp_currentCT.threadName===G.getAttribute("thread_name")){this.CTDivs=$(G).find("DIV#CT")}}else{var C=pega.ctx.dom.$("DIV#pyFlowActionHTML");if(C&&C.length>0){for(var D=0;D<C.length;D++){if(pega.ctx.temp_currentCT.threadName===C[D].getAttribute("THREAD_NAME")){this.CTDivs=$(C[D]).find("DIV#CT");break}}}}}}}}if(this.CTDivs){var H=this.CTDivs.length;var B;for(var F=0;F<H;F++){B=this.CTDivs[F];if(A&&B.getAttribute("thread_name")){this.CTDivs.splice(F,1);F--;H--;continue}if(B.getAttribute("SWP")||B.getAttribute("SHOW_WHEN")||B.getAttribute("DISABLE_WHEN")){this.SWArray.push(B)}if(B.getAttribute("RWP")){this.RWArray.push(B)}}}this.executeVisibleWhen();pega.u.d.evaluateRequiredWhens();pega.u.d.evaluateActiveWhens();this.executeRefreshWhen();this.executeReloadCellWhen();this.executeReloadLayoutWhen();if(!this.serverRefresh){pega.u.d.resizeHarness()}this.serverRefresh=false;this.isClientEvent=false;pega.ctx.temp_currentCT.clearChanges();pega.ctx.temp_currentCT.tempPropMap=undefined;pega.ctx.temp_currentCT.tempPropValuesMap=undefined;pega.ctx.temp_currentCT=undefined;pega.ctx.ct_postedProp=undefined;if(!pega.u.d.isAjaxInProgress()){pega.ctx.ct_sectionsList=new Array();pega.ui.EventsEmitter.publishSync(pega.ctx.AFTER_EXPRESSIONS_HANDLED_ON_PROPERTY_CHANGES)}},initializeVariables:function(){this.activityName=undefined;this.activityParams=undefined;this.srcValueURL=new SafeURL();if(this&&this.src){if(this.src.tagName=="A"){this.srcValue=this.src.value}else{if((this.src.tagName==="TEXTAREA"||this.src.tagName==="SELECT")&&!pega.ctx.dom.isInContext(this.src)&&pega.ctx.dom.getElementsByName(this.src.name)&&pega.ctx.dom.getElementsByName(this.src.name).length>0){this.src=pega.ctx.dom.getElementsByName(this.src.name)[0]}this.srcValue=pega.u.d.getDOMElementValue(this.src)}this.srcIdvalue=this.src.getAttribute("PN");if(this.index&&this.index!=-1){this.inRepeat=true}else{if(typeof pega.u.d.isInRepeat==="function"){this.inRepeat=pega.u.d.isInRepeat(this.src);if(this.inRepeat){this.index=pega.u.d.getRepeatRow(this.src)}}}var A=pega.ctx.dom.$("*[name='"+this.src.name+"']");if(this.inRepeat&&A&&A.length&&A.length>1){if(this.src.id==this.srcIdvalue){this.srcIdvalue=this.src.id+(this.index?this.index:"")}else{this.srcIdvalue=this.src.id}}}},findClientTargetDivs:function(){var A=null;var H=null;if(this.index!=-1){this.parTRObject=pega.u.d.getRepeatRow(this.src,true);if(!this.parTRObject){this.parTRObject=pega.ctx.dom.getContextRoot()}if(this.srcIdvalue){A=$(this.parTRObject).find("DIV#"+this.srcIdvalue.replace(/[!"#$%&'()*+,.\/:;<=>?@[\\\]^`{|}~]/g,"\\$&"))}H=$(this.parTRObject).find("DIV#CT");if(H==null&&this.parTRObject.tagName=="TD"){H=new Array();var F=this.parTRObject.getAttribute("PL_INDEX");var I=pega.u.d.findParentTable(this.parTRObject);var C=I.rows.length;for(var E=0,D=0;E<C;E++){var B=I.rows[E].cells[F];var G=$(B).find("DIV#CT");if(G){H[D++]=G[0]}}}}else{if(this.index==-1){if(this.srcIdvalue){A=pega.ctx.dom.$("DIV#"+this.srcIdvalue.replace(/[!"#$%&'()*+,.\/:;<=>?@[\\\]^`{|}~]/g,"\\$&"))}H=pega.ctx.dom.$("DIV#CT")}}if(A&&A.length>0&&H){A=A.concat(H)}else{if(H){A=H}}this.CTDivs=A},executeVisibleWhen:function(){var divLength=this.SWArray.length;var tempObj;pega.ctx.elementsMadeVisible=[];pega.ctx.elementsDisabled=[];if(pega.u.property.toReference){var completeName=pega.u.property.toReference(this.src.name);var ctDivs=this.SWArray;if(ctDivs){for(var i=0;i<ctDivs.length;i++){var currDiv=ctDivs[i];var configuredCondition=currDiv.getAttribute("SHOW_WHEN");var reserveSpace=currDiv.getAttribute("RESERVE_SPACE");var stringType=currDiv.getAttribute("STRING_TYPE");var isVisibleWhen=true;if(!configuredCondition){configuredCondition=currDiv.getAttribute("DISABLE_WHEN");if(!configuredCondition){continue}else{isVisibleWhen=false}}var sectionBaseRef=null;if(isVisibleWhen){var sectionData="";if(currDiv.getAttribute("data-simplelayout")){sectionData=pega.u.d.calcAndAttachSectionBaseRef(currDiv,true)}else{sectionData=pega.u.d.calcAndAttachSectionBaseRef(currDiv)}sectionBaseRef=sectionData.sectionBaseRef;if(sectionBaseRef=="nosection"){var gridObj=null;if(typeof (Grids)!="undefined"){gridObj=Grids.getElementsGrid(currDiv)}sectionBaseRef=pega.u.d.getBaseRef(currDiv,null,gridObj);if(sectionBaseRef==""){sectionBaseRef=pega.u.d.getElementRowPageRef(currDiv)}sectionData.baseRef4ConditionEval=sectionBaseRef}}else{sectionBaseRef=pega.u.d.getBaseRef(currDiv);if(sectionBaseRef==""){sectionBaseRef=pega.u.d.getElementRowPageRef(currDiv)}var sectionData={};sectionData.baseRef4ConditionEval=sectionBaseRef}if(sectionBaseRef==null||sectionBaseRef=="nosection"){continue}var conditionTokensNOperator=pega.u.d.getConditionTokensAndOperator(configuredCondition);var conditionTokens=conditionTokensNOperator.conditionTokens;var combOperator=conditionTokensNOperator.combOperator;var resultsArr=[];for(var j=0;j<conditionTokens.length;j++){var currentToken=pega.lang.trim(conditionTokens[j]);resultsArr[j]=pega.u.d.isRegularTarget(currentToken,sectionData.baseRef4ConditionEval,currDiv)}var rwcpValue=currDiv.getAttribute("FULLPROPS");var executeExpression=false;if(rwcpValue){var rwcpArray=rwcpValue.split(",");for(var l=0;l<rwcpArray.length;l++){if(pega.u.d.isExpressionMatching(null,completeName,rwcpArray[l],rwcpArray[l])){executeExpression=true;break}else{if(pega.u.d.temp_currentCT.isExpressionMatchingWithTrackedProps(rwcpArray[l])){executeExpression=true;break}}}}if(executeExpression){var expression="";for(var k=0;k<resultsArr.length;k++){if(k==0){expression=resultsArr[k]}else{expression=expression+combOperator+resultsArr[k]}}if(eval(expression)){if(isVisibleWhen&&reserveSpace=="true"){currDiv.style.visibility="visible";currDiv.setAttribute("aria-hidden","false")}else{if(isVisibleWhen){var isWrapperDiv="false";var child=$(currDiv).children().first()[0];if(child){var wrapperClass=child.className.replace("layout-content","");if(wrapperClass!=child.className){isWrapperDiv="true"}}conditionEngine.columnLayout_show(currDiv);if(currDiv.className==""&&child&&child.className=="content-inner"&&isWrapperDiv=="false"){var prevClass=1;if($(currDiv).prev()){prevClass=$(currDiv).prev().className.match(/\d+/);prevClass++;currDiv.className="content-item content-"+stringType+" item-"+prevClass}else{currDiv.className="content-item content-"+stringType+" item-"+prevClass}var tempDiv=currDiv;while($(tempDiv).next()){if($(tempDiv).next().className!=""){prevClass++;$(tempDiv).next().className=$(tempDiv).next().className.replace(/\d+/,"");$(tempDiv).next().className=$(tempDiv).next().className.replace("item-","item-"+prevClass.toString())}tempDiv=$(tempDiv).next()}currDiv.style.display=""}else{if(currDiv.parentNode&&currDiv.parentNode.className.indexOf("content-layout-group")!=-1&&currDiv.className.indexOf("layout")==0){var bNoVisibleLayout=true;var layoutGroupNode=currDiv.parentNode;var layoutchild=$(layoutGroupNode).children().first()[0];while($(layoutchild).next()){layoutchild=$(layoutchild).next()[0];if(layoutchild&&layoutchild.style.display!="none"&&layoutchild.className.indexOf("layout")==0){bNoVisibleLayout=false;break}}if(bNoVisibleLayout){LayoutGroupModule.setLayoutActive(currDiv)}}currDiv.style.display=""}}else{pega.u.d.controlDisabler(currDiv)}}}else{if(isVisibleWhen){var madeVisible=false;for(var k=0;k<pega.ctx.elementsMadeVisible.length;k++){if(pega.ctx.elementsMadeVisible[k]==currDiv){madeVisible=true}}if(!madeVisible&&reserveSpace=="true"){currDiv.style.visibility="hidden";currDiv.setAttribute("aria-hidden","true")}else{if(!madeVisible){var isWrapperDiv="false";var child=$(currDiv).children().first()[0];if(child){var wrapperClass=child.className.replace("layout-content","");if(wrapperClass!=child.className){isWrapperDiv="true"}}conditionEngine.columnLayout_hide(currDiv);if(child&&child.className=="content-inner"&&isWrapperDiv=="false"){var classNum="1";if(currDiv.className!=""){classNum=currDiv.className.match(/\d+/)}else{var tempDiv=$(currDiv).prev();while(tempDiv&&tempDiv.className==""){tempDiv=$(tempDiv).prev()}if(tempDiv&&tempDiv.className!=""){classNum=tempDiv.className.match(/\d+/);classNum++}}currDiv.className="";currDiv.style.display="none";while($(currDiv).next()){currDiv=$(currDiv).next();var nextClass=currDiv.className;if(nextClass!=""){currDiv.className=currDiv.className.replace(/\d+/,"");currDiv.className=currDiv.className.replace("item-","item-"+classNum.toString());classNum++}}}else{currDiv.style.display="none";if(currDiv.parentNode&&currDiv.parentNode.className.indexOf("content-layout-group")!=-1&&currDiv.className.indexOf("layout")==0&&currDiv.className.indexOf(" active")!=-1){LayoutGroupModule.setLayoutInactive(currDiv);var layoutGroupNode=currDiv.parentNode;var layoutchild=$(layoutGroupNode).children().first()[0];while($(layoutchild).next()){layoutchild=$(layoutchild).next()[0];if(layoutchild&&layoutchild.style.display!="none"&&layoutchild.className.indexOf("layout")==0){LayoutGroupModule.setLayoutActive(layoutchild);break}}}}}}}else{var madeDisabled=false;for(var k=0;k<pega.u.d.elementsDisabled.length;k++){if(pega.u.d.elementsDisabled[k]==currDiv){madeDisabled=true}}if(!madeDisabled){pega.u.d.controlEnabler(currDiv)}}}}}if(typeof LayoutGroupModule!="undefined"){LayoutGroupModule.updateStretchTabWidths()}}}},getElementValues:function(){if(this.clientTargets.length==1){this.elValues[0]=this.srcValue;this.srcValueURL.put(this.src.name,this.srcValue)}else{for(var B=0;B<this.clientTargets.length;B++){if(this.inRepeat){var A=this.clientTargets[B].split(".");if(A){var C=$(this.parTRObject).find("#"+A[A.length-1].replace(/[!"#$%&'()*+,.\/:;<=>?@[\\\]^`{|}~]/g,"\\$&"))}else{var C=$(this.parTRObject).find("#"+this.clientTargets[B].substring(1).replace(/[!"#$%&'()*+,.\/:;<=>?@[\\\]^`{|}~]/g,"\\$&"))}if(C){C=C[0]}}else{var A=this.clientTargets[B].split(".");if(A){var C=pega.ctx.dom.getElementById(A[A.length-1])}else{var C=pega.ctx.dom.getElementById(this.clientTargets[B].substring(1))}}if(C){this.elValues[B]=pega.u.d.getDOMElementValue(C);if(C.name&&this.elValues[B]!=null){this.srcValueURL.put(C.name,this.elValues[B])}}else{this.elValues[B]=null}}}},executeReloadCellWhen:function(){var A=pega.u.d.getRefreshableTargets("changes",this.src,true);pega.u.d.reloadCells(A)},executeReloadLayoutWhen:function(){this.at_sectionsTable=new Array();this.rw_preActivities=[];this.dataTransforms=[];this.at_layouts2refresh=null;if(pega.u.property.toReference){var B=pega.u.d.getRefreshableTargets("changes",this.src,false,true);var N=null;var C=null;var M=null;var E=null;var K=null;if(B){N=B.sections;if((pega&&pega.u&&pega.u.d&&pega.u.d.ServerProxy&&pega.u.d.ServerProxy.isDestinationLocal())&&N){var A="";for(var H=0;H<N.length;H++){A+="'"+N[H].getAttribute("node_name")+"'";if(H!=N.length-1){A+=","}}alert("Refresh when configured on layout(s) in "+A+" section(s) is not supported in offline");return }C=B.preActivities;M=B.dataTransforms;E=B.declarePageParams;K=B.cells2refresh}if(K){this.at_layouts2refresh=new Array()}if(N){var I=pega.u.d.getDOMElementValue(this.src);this.srcValueURL.put(this.src.name,I);for(var H=0;H<N.length;H++){var L=false;for(var F=0;F<this.at_sectionsTable.length;F++){if(this.at_sectionsTable[F]==N[H]&&this.at_layouts2refresh[F].getAttribute("data-methodName")==K[H].getAttribute("data-methodName")){L=true;break}}if(!L){this.at_sectionsTable.push(N[H]);this.at_layouts2refresh.push(K[H])}}}if(C){for(var H=0;H<C.length;H++){var G=false;for(var F=0;F<this.rw_preActivities.length;F++){if(this.rw_preActivities[F]==C[H]){G=true;break}}if(!G){this.rw_preActivities.push(C[H])}}}if(M){for(var H=0;H<M.length;H++){var D=false;for(var F=0;F<this.dataTransforms.length;F++){if(this.dataTransforms[F]==M[H]){D=true;break}}if(!D){this.dataTransforms.push(M[H])}}}}if(this.at_sectionsTable.length>0){var J=this.srcValueURL;pega.u.d.reloadSections(J,this.at_sectionsTable,this.activityName,this.activityParams,this.index,this.ev,this.rw_preActivities,this.dataTransforms,E,this.at_layouts2refresh);this.serverRefresh=true}},executeRefreshWhen:function(){this.at_sectionsTable=new Array();this.rw_preActivities=[];this.dataTransforms=[];var B=this.RWArray.length;if(pega.u.property.toReference){var L=pega.u.d.getRefreshableTargets("changes",this.src);var M=null;var S=null;var G=null;var Q=null;var I=null;var C=null;if(L){M=L.sections;S=L.preActivities;G=L.dataTransforms;Q=L.declarePageParams;C=L.gridsToRefresh;I=L.gridsWithRowsToRefresh}if(M){var V=pega.u.d.getDOMElementValue(this.src);this.srcValueURL.put(this.src.name,V);for(var P=0;P<M.length;P++){var J=false;for(var N=0;N<this.at_sectionsTable.length;N++){if(this.at_sectionsTable[N]==M[P]){J=true;break}}if(!J){this.at_sectionsTable.push(M[P])}}}if(S){for(var P=0;P<S.length;P++){var H=false;for(var N=0;N<this.rw_preActivities.length;N++){if(this.rw_preActivities[N]==S[P]){H=true;break}}if(!H){this.rw_preActivities.push(S[P])}}}if(G){for(var P=0;P<G.length;P++){var O=false;for(var N=0;N<this.dataTransforms.length;N++){if(this.dataTransforms[N]==G[P]){O=true;break}}if(!O){this.dataTransforms.push(G[P])}}}if(C){for(var D in C){var A=C[D];var F=Grids.map[D];var U=null;if(A.length!==0){var K=new SafeURL();try{K.put("declarePageParams",decodeURIComponent(JSON.stringify(A)))}catch(R){K.put("declarePageParams",JSON.stringify(A))}U={dpParams:K}}F.doGridAction({target:F.gridDiv},"REFRESHLIST",null,U)}}if(I){var T=null;for(var P=0;P<I.length;P++){if(P==0){T=new pega.tools.Queue()}if(I[P].rowsToRefresh){T.enqueue({GridToRefresh:I[P]})}}if(T){pega.u.d.gridLoadManager=new pega.ui.GridRowsLoadManager({loadQueue:T});pega.u.d.gridLoadManager.startLoading()}}}if(this.at_sectionsTable.length>0){var E=this.srcValueURL;pega.u.d.reloadSections(E,this.at_sectionsTable,this.activityName,this.activityParams,this.index,this.ev,this.rw_preActivities,this.dataTransforms,Q);this.serverRefresh=true}},refresh:function(C){var J=[];var A=C.getAttribute("RW");var K=C.getAttribute("RWA");var B=C.getAttribute("PDT");var L=C.index;var G=false;if(this.inRepeat==true){L=pega.u.d.getRepeatRow(C)}if(!L&&!(this.inRepeat==true)){L=-1}if(L==this.index){G=pega.u.d.evaluate(A,this.clientTargets,this.elValues)}if(G){J.push(C)}var H=J.length;if(H>0){for(var F=0;F<H;F++){var I=J[F];var E=null;while(E==null&&I!=null){E=pega.u.d.getIncludedSection(J[F]);I=I.parentNode}if(E!=null){var D=E.getAttribute("node_name");this.at_sectionsTable.push(E);if(K&&K!=""){this.rw_preActivities.push(K+"<||>"+pega.u.d.getBaseRef(E))}if(B&&B!=""){this.dataTransforms.push(B+"<||>"+pega.u.d.getBaseRef(E))}}}}},executeDisableWhen:function(B){var A=B.getAttribute("name");if(A==this.srcIdvalue){pega.u.d.enableDisable(B,this.index,this.srcValue,this.srcIdvalue,this.inRepeat)}}},getRefreshableTargets:function(origin,data,rcw,layoutrefresh){var sections2refresh=null;var preActivities=null;var dataTransforms=null;var cells2refresh=null;var completeName=null;var secDeclarePageParams=null;var gridsToRefresh=null;var gridsWithRowsToRefresh=[];var rwAttrList=(rcw?["RC"]:["RW","data-dprw","IRW","RRW"]);var ctDivs=null;if(origin=="changes"){completeName=pega.u.property.toReference(data.name)}if(layoutrefresh){rcw=true;ctDivs=pega.ctx.dom.$("div[data-refresh='true']")}else{ctDivs=pega.ctx.dom.$("DIV#CT")}if(ctDivs){for(var i=0;i<ctDivs.length;i++){var currDiv=ctDivs[i];var isGrid=false;if(currDiv.getAttribute("RLW")){isGrid=true}var gridMixed=false;if(currDiv.getAttribute("RRW")&&currDiv.getAttribute("type")!="allGlobals"){this.addGridRowsToCTDivs(ctDivs,currDiv,gridsWithRowsToRefresh,data);var skipIteration=true;for(var k=0;k<rwAttrList.length;k++){if(rwAttrList[k]!="RRW"){if(currDiv.getAttribute(rwAttrList[k])!=undefined){skipIteration=false;break}}}if(skipIteration){continue}}if(currDiv.rowRef&&currDiv.rowRef!=""){isGrid=true;gridMixed=true}if(!isGrid){var sectionData=pega.u.d.calcAndAttachSectionBaseRef(currDiv,rcw);var sectionBaseRef=sectionData.sectionBaseRef;if(sectionBaseRef=="nosection"){continue}var baseRef4ConditionEval=sectionData.baseRef4ConditionEval}else{if(gridMixed){var baseRef4ConditionEval=currDiv.rowRef;var sectionBaseRef=currDiv.rowRef}else{var baseRef4ConditionEval=this.getBaseRef(currDiv);var sectionBaseRef=baseRef4ConditionEval}}for(var idx=0;idx<rwAttrList.length;idx++){if(gridMixed&&rwAttrList[idx]=="RRW"){var configuredCondition=currDiv.configuredCondition}else{var configuredCondition=currDiv.getAttribute(rwAttrList[idx])}if(!configuredCondition){continue}var conditionTokensNOperator=this.getConditionTokensAndOperator(configuredCondition);var conditionTokens=conditionTokensNOperator.conditionTokens;var combOperator=conditionTokensNOperator.combOperator;var resultsArr=[];var changesRegEx=/\s+changes/i;var addDelRegEx=/\s+adddelete/i;for(var j=0;j<conditionTokens.length;j++){var currentToken=pega.lang.trim(conditionTokens[j]);if(changesRegEx.test(currentToken)){if(origin=="changes"){resultsArr[j]=this.isChangesTarget(completeName,currentToken,baseRef4ConditionEval,currDiv)}else{resultsArr[j]=false}}else{if(addDelRegEx.test(currentToken)){if(origin=="adddelete"){resultsArr[j]=this.isAddDeleteTarget(data,currentToken,baseRef4ConditionEval,currDiv)}else{resultsArr[j]=false}}else{resultsArr[j]=this.isRegularTarget(currentToken,baseRef4ConditionEval,currDiv)}}}var rwcpValue=currDiv.getAttribute("FULLPROPS");var executeExpression=false;if(rwcpValue){var rwcpArray=rwcpValue.split(",");for(var l=0;l<rwcpArray.length;l++){if(origin=="adddelete"){if(rwcpArray[l].indexOf("-A$D")){var correctConfig=rwcpArray[l].replace("-A$D","");if(pega.u.d.isExpressionMatching(data,this.getCompleteListName(data),correctConfig,correctConfig)){executeExpression=true;break}else{if(pega.u.d.temp_currentCT.isExpressionMatchingWithTrackedProps(correctConfig,true)){executeExpression=true;break}}}else{if(pega.u.d.temp_currentCT.isExpressionMatchingWithTrackedProps(correctConfig)){executeExpression=true;break}}}else{if(pega.u.d.isExpressionMatching(null,completeName,rwcpArray[l],rwcpArray[l])){executeExpression=true;break}else{if(pega.u.d.temp_currentCT.isExpressionMatchingWithTrackedProps(rwcpArray[l])){executeExpression=true;break}}}}}if(executeExpression){var expression="";for(var k=0;k<resultsArr.length;k++){if(k==0){expression=resultsArr[k]}else{expression=expression+combOperator+resultsArr[k]}}if(!isGrid&&eval(expression)&&!pega.u.d.isDuplicateRefresh(sectionData.includedSec.getAttribute("node_name"),sectionBaseRef,currDiv)){if(!sections2refresh){sections2refresh=[]}var preActivity=currDiv.getAttribute("RWA");if(preActivity){if(!preActivities){preActivities=[]}preActivities.push(preActivity+"<||>"+sectionBaseRef)}var dataTransform=currDiv.getAttribute("PDT");if(dataTransform){if(!dataTransforms){dataTransforms=[]}dataTransforms.push(dataTransform+"<||>"+sectionBaseRef)}var declarePageParams=sectionData.includedSec.getAttribute("data-declare-params");if(declarePageParams&&declarePageParams!=""){if(secDeclarePageParams==null){secDeclarePageParams={}}try{declarePageParams=pega.c.eventParser.replaceTokensWrapper(declarePageParams,"","",false,false);var paramsList=eval("("+declarePageParams+")");if(paramsList){var uniqueId=sectionData.includedSec.getAttribute("uniqueid");secDeclarePageParams[uniqueId]={};var key="";for(key in paramsList){secDeclarePageParams[uniqueId][key]=paramsList[key]}}}catch(e){}}sections2refresh.push(sectionData.includedSec);if(!cells2refresh){cells2refresh=[]}cells2refresh.push(currDiv)}if(isGrid&&eval(expression)){if(!gridsToRefresh){gridsToRefresh={}}if(!gridMixed&&$(currDiv).children().first()[0]){var gridID=$(currDiv).children().first()[0].id;var gridObj=Grids.map[gridID];gridsToRefresh[gridID]={};if(rwAttrList[idx]=="IRW"){var gridDatasrc=gridObj.gridDiv.getAttribute("dataSource");var configuredPage=gridObj.getConfiguredPLPGProperty();configuredPage=configuredPage.substr(0,configuredPage.indexOf("."));var pageWithHash=gridDatasrc.substr(0,gridDatasrc.indexOf("."));gridDatasrc=gridDatasrc.replace(pageWithHash,configuredPage).replace(/\./g,"_");var declarePageParams=currDiv.getAttribute("data-declare-params");if(declarePageParams&&declarePageParams!=""){declarePageParams=pega.c.eventParser.replaceTokensWrapper(declarePageParams,"","",true,false);var paramsList=eval("("+declarePageParams+")");if(paramsList){gridsToRefresh[gridID][gridDatasrc]={};for(key in paramsList){gridsToRefresh[gridID][gridDatasrc][key]=paramsList[key]}}}}}if(gridMixed&&currDiv.gridObj){if(!currDiv.gridObj.rowsToRefresh){currDiv.gridObj.rowsToRefresh=[]}currDiv.gridObj.rowsToRefresh.push(currDiv.rowRef);this.cleanGridRow(currDiv)}}}}}}return{sections:sections2refresh,preActivities:preActivities,dataTransforms:dataTransforms,cells2refresh:cells2refresh,gridsToRefresh:gridsToRefresh,declarePageParams:secDeclarePageParams,gridsWithRowsToRefresh:gridsWithRowsToRefresh}}};pega.lang.augmentObject(pega.ui.Doc.prototype,legacyConditionEngine);
if(!pega.control){pega.c=pega.namespace("pega.control")}var pega;(function(A){var B;(function(D){var C;(function(I){var H=function(L,K){if(K&&K[1]&&K[1][0]&&K[1][0]==="thisSection"){var J=L.target;if(!J){return }while((J.id!=="RULE_KEY")||(J.getAttribute("node_type")!=="MAIN_RULE")){J=J.parentNode;if(!J){return }}if(J&&K[1]&&K[1][6]&&K[1][6]){K[1][6].RefreshSectionNode=J}}};var E=function(L,J){if(J&&J[1]&&(J[1][1]==="REFRESHLIST"||J[1][1]==="REFRESHROWS")){if(typeof Grids!=="undefined"){var K=Grids.getActiveGrid(L);if(K){J[1][0]["cachedGridObj"]=K}}}};var G=function(L,J){if(J&&J[1]&&J[1][2]&&(J[1][2][0]==="REFRESHLIST")){if(typeof Grids!=="undefined"){var K=Grids.getActiveGrid(L);if(K){J[1][0]["cachedGridObj"]=K}}}};var F={refresh:H,doGridAction:E,doListAction:G};I.preprocess=function(L,K){var J=K[0];if(F[J]){F[J].apply(window,[L,K])}}})(C=D.eventPreProcessor||(D.eventPreProcessor={}))})(B=A.c||(A.c={}))})(pega||(pega={}));var pega;(function(A){var B;(function(D){var C;(function(E){E.EVENT_CLICK=function(F){if(F==="click"){return true}return false};E.EVENT_FOCUS=function(F){if(F==="focus"||F==="focusin"){return true}return false};E.EVENT_CHANGE=function(F){if(F==="change"){return true}return false};E.EVENT_RIGHT_CLICK=function(F){if(F==="contextmenu"){return true}return false};E.EVENT_DOUBLE_CLICK=function(F){if(F==="dblclick"){return true}return false}})(C=D.eventCONSTANTS||(D.eventCONSTANTS={}))})(B=A.c||(A.c={}))})(pega||(pega={}));var pega;(function(A){var B;(function(D){var C;(function(G){var F=function(J){var I=J.getAttribute("data-change");return !!I&&(I!=="[]")&&I.length>0};var E=function(K,J){var I=K.getAttribute(J);return I&&I.toString().indexOf("handleClientEvent(")!=-1};var H=function(I){return E(I,"onchange")||E(I,"onchange_custom")||E(I,"onblur")||E(I,"onclick")||F(I)};G.processEvent=function(L){var K=L.target;if(K==null||!K.getAttribute){return }var I=K.getAttribute("name");if(L&&A.c.eventCONSTANTS.EVENT_CLICK(L.type)&&A.u.EventUtils.isElementDisabled(K,L)){return }if(I==null||I.lastIndexOf("$p")==-1){return }if(H(K)||L.type!=="change"){return }var J=A.ctx;A.ctxmgr.setContext(A.ctxmgr.getContextByTarget(K));A.c.UIElement.Actions.fireACOnElem(L);A.ctxmgr.setContext(J)}})(C=D.ClientConditionExecutor||(D.ClientConditionExecutor={}))})(B=A.c||(A.c={}))})(pega||(pega={}));var pega;(function(A){var B;(function(D){var C;(function(H){var G=function(K,N){var L=K.length;for(var J=0;J<L;J++){var I=K[J];if(typeof (I)!="string"){continue}if(I.charAt(0)!=":"){continue}if(I.charAt(1)==":"){K[J]=K[J].slice(1);continue}var M=I.slice(1);if(M.length>1){if(M.toLowerCase()=="event"){K[J]=N}else{if(M.toLowerCase()=="this"){K[J]=N.target}else{if(M.toLowerCase()=="message"&&N.type==="message"){K[J]=N.detail}else{K[J]=A.c.eventParser.pegaStringToObject(M)}}}}}return K};var E=function(I){var K=document.createElement("div");K["innerText" in K?"innerText":"textContent"]=I;var J=K.innerHTML;if(navigator.userAgent.lastIndexOf("Firefox/")>0){if(J.indexOf("\n")!=-1){J=J.replace(/\n/g,"<br>")}}return J};var F=function(Q,P,O,N,I,L,J,M){if(!Q){return Q}var K=function(){var U=(arguments[1]==="^");var Y=arguments[2];if(Y.indexOf("$")>0){var b=Y.split("$");Y=b[0];if(b.length>1){var T=b[1]}}if(Y.indexOf(".")==0){Y=P+Y}var S="";if(A.u.d.ServerProxy&&A.u.d.ServerProxy.isDestinationLocal()&&M&&(Y.indexOf("D_")==0||Y.indexOf("Declare_")==0)){var a=A.u.d.getBaseRef(M);if(a){var V=a.substring(0,a.indexOf("."));var c=Y.substring(0,Y.indexOf("."));if(V&&c&&V.indexOf(c)!=-1){Y=Y.replace(c,V)}}}var R=A.u.property.toHandle(Y);var X=A.u.d.getCorrectPropertyElemFromDOM(R,A.ui.ChangeTrackerMap.getTracker());A.ui.template.DataBinder.bindData(X);if(X&&X.length>0&&X[0].id!="CV"){S=A.u.d.getGroupElementValue(X);if(L&&X[0].getAttribute("data-ctl")&&typeof (X[0].getAttribute("data-ctl"))==="string"&&A.c.eventParser.parseJSON(X[0].getAttribute("data-ctl"))[0]=="DatePicker"){S=null}if(S!=null){if(U){S=E(S)}if(N){if(I&&S.replace){S=S.replace(/&/g,"~!")}else{S=encodeURIComponent(S).replace(/'|&/g,window.escape)}}else{if(J&&typeof S==="string"){S=S.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')}}return S}}var W;if(A.mobile&&A.mobile.isPegaMobileClient&&typeof pmcRuntimeFeatures!=="undefined"&&pmcRuntimeFeatures.pxUsesMultiWebView==="true"){W=A.mobile.support.getPortalWindow()}if(A.u.d.ServerProxy.isDestinationLocal()&&W&&W.pega.ctx.isMDC){try{var d=A.ui.ClientCache.find(Y);if(d){S=d.getValue()}else{S=null}}catch(Z){console.info("Couldn't get value for handle "+Y+" from the ClientCache.");S=null}}else{S=A.ui.ChangeTrackerMap.getTracker().getPropertyValue(Y)}if(S==null){S=""}if(J&&typeof S==="string"){S=S.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')}if(U){S=E(S)}if(N){if(I){S=S.replace(/&/g,"~!")}else{S=encodeURIComponent(S).replace(/'/g,window.escape)}}return S};Q=Q.replace(/(#|\^)~([^#~\^]+)~(#|\^)/gi,K);return Q};H.correctActionArgs=function(I,S,U,R,N,Z,Y){if(I&&I.length>0){var P=I[I.length-1];if(typeof P==="object"&&P.nodeType==="repeatObject"){S=P.rowRef}}try{Y=Y?Y:null}catch(X){Y=null}for(var K=0;K<I.length;K++){if(typeof (I[K])==="string"){I[K]=F(I[K],S,U,R,N,null,Y,Z)}else{if(typeof (I[K])!="undefined"&&I[K]!=null){if(typeof (I[K].length)!="undefined"&&I[K].length>0){A.c.eventParser.correctActionArgs(I[K],S,U,R,N,Z,Y)}else{if(typeof (I[K].$ev)=="undefined"&&!I[K].nodeType){try{if(I[K]&&typeof I[K]=="object"&&I[K].name=="safeURL"){for(var a in I[K].hashtable){var T=I[K].get(a);if(T.indexOf("#~")>=0){I[K].put(a,F(T,S,U,R,N,null,true,Z))}}}else{var V=JSON.stringify(I[K]);var Q=F(V,S,U,R,N,null,true,Z);try{I[K]=A.c.eventParser.parseJSON(Q)}catch(X){if(Q.indexOf("\\")>-1&&(!(Q.indexOf('{\\"')>-1))||Q.indexOf('{\\\\"')>-1){var J=(O=["",""],O.raw=["",""],String.raw(O,Q));J=J.replace(/\\/ig,"\\\\");J=J.replace(/\\\\\"/ig,'\\"');I[K]=A.c.eventParser.parseJSON(J)}}finally{if(Q.indexOf("\\")>-1&&(!(Q.indexOf('{\\"')>-1))||Q.indexOf('{\\\\"')>-1){var J=(M=["",""],M.raw=["",""],String.raw(M,Q));J=J.replace(/\\/ig,"\\\\");J=J.replace(/\\\\\"/ig,'\\"');I[K]=A.c.eventParser.parseJSON(J)}else{if(Q.indexOf("\n")!==-1){var J=(L=["",""],L.raw=["",""],String.raw(L,Q));J=J.replace(/\n/g,"\\n");I[K]=A.c.eventParser.parseJSON(J)}}}}}catch(W){}}}}}}var O,M,L};H.hasTokens=function(I){return(/(#|\^)~([-a-z.0-9_()$]+)~(#|\^)/gi).test(I)};H.replaceTokensWrapper=function(L,K,J,M,I){return F(L,K,J,M,false,I,null,null)};H.parseJSON=function(J){if(!J){return null}if(J&&typeof (J)==="string"){J=J.replace(/,,/g,",null,")}var I=JSON.parse(J);return I};H.parseExecutables=function(M,L){var K;try{K=this.parseJSON(L)}catch(M){}var J=K==null?0:K.length;for(var I=0;I<J;I++){if(K[I]){if(K[I].length<2||!K[I][0]){K.splice(I,1);J--;I--}else{K[I][1]=G(K[I][1],M)}}}return K};H.pegaStringToObject=function(M){if(!M){return null}var L=M.split(".");var J=L.length;var K=window;for(var I=0;I<J;I++){if(!K){return null}K=K[L[I]]}return K}})(C=D.eventParser||(D.eventParser={}))})(B=A.c||(A.c={}))})(pega||(pega={}));var pega;(function(A){var B;(function(D){var C;(function(H){var S=null;var Y=A.u.d;var O=false;var N=[];var b=[];var W=[];var d=[];var a=[];var Z={};var K=null;var P=null;var c=null;var V=null;H.addToPendingEventValues=function(i){var h=i.target;var f=(h&&h.name)?h.name:null;var g=h?A.u.d.getDOMElementValue(h):null;if(f!=null&&g!=null&&(!H.isQueueEmpty()||!H.isPendingQueueEmpty())){if(!A.c.actionSequencer.isControlTemplatized(i)){if(h.type=="checkbox"||h.type=="radio"){g=h.checked}if(h.type=="radio"){f=f+"|"+h.id}}Z[f]=g}};H.emptyPendingEventValues=function(){Z={}};var X=function(n,u,t,f,s){if(A.webanalytics){A.webanalytics.actionTrace(n,t)}var q,i,j=null,m,k;if(t[2]&&t[2].length>1&&!A.c.conditionEngine.validateCondition({op:t[2][0],conditions:t[2].slice(1),target:n.target})){return }var p=A.ui.HarnessContextMap.getCurrentHarnessContext();if(n.harnessContext){A.ctxmgr.setContext(n.harnessContext)}try{if(t[1]&&t[1].length>0){var g=false;if(A&&A.ctx&&A.ctx.bEncryptURLs&&t[0]=="openUrlInWindow"&&t[1].length>5&&typeof t[1][0]=="string"&&t[1][5]=="false"){g=true;t[1][0]=SafeURL_createFromURL(t[1][0])}A.c.eventParser.correctActionArgs(t[1],s,null,/^(runActivity|createNewWork|refresh|runDataTransform)$/.test(t[0]),null,n.target,/^(runScript)$/.test(t[0]));if(g){t[1][0]=t[1][0].toURL()}}}catch(o){}q=t[0];var r=f;if(u){if("runDataTransform"==q||"runActivity"==q){if(n&&n.type=="mouseover"){if(s){r=s}}t[1].splice(t[1].length,0,r)}i=u.Actions[q];var h=null;if(A.ui.JitJLoader){h=A.ui.actionsToUIComponents[q]}if(i||h){var l={createNewWork:7,openAssignment:6,getNextWorkItem:3,openWorkByHandle:6,openWorkItem:4,openLandingPage:2};if(A.ui.hasAjaxContainer&&!A.ctx.isMDC&&l[t[0]]){J(n,t,l[t[0]])}if(!h){if(typeof A.desktop.preExecuteAction==="function"){A.desktop.preExecuteAction(t,n)}i.apply(j,t[1],n)}else{A.c.actionSequencer.pause();A.ui.JitJLoader.loadComponent("Action",h,null,"runtime",function(v,x,e,w){A.c.actionSequencer.resume();if(v!=null){console.error(v)}else{i=u.Actions[q];i.apply(j,t[1],n)}})}}}if(n.harnessContext&&A.ctxmgr){A.ctxmgr.resetContext(p)}};var J=function(i,g,f){try{if(i.target&&i.target.closest){var h=i.target.closest("div[data-mdc-id]").getAttribute("data-mdc-id");if(!g[1][f].target){g[1][f].target=h}}}catch(i){}};var E=function(f){if(K){var e=f.target;if(K.target===e){for(var g in K){if(g!="target"){if(K[g]!==f[g]){return false}}}return true}}return false};H.getActionInQueue=function(g){try{var f=Q("execute");for(var h=0;h<f.length;h++){if(f[h].action[0]==g){return f[h].action[1][0]}}return""}catch(j){return""}};H.setTopPriorityEvent=function(e){K=e};H.fireTopPriorityEvent=function(f,e){if(f){this.setTopPriorityEvent({target:f,type:e,harnessContext:A.ctx});if(e==="change"){A.c.ec.fireEventHandler(f,e,null)}else{A.u.EventUtils.fireEvent(f,e,null)}this.setTopPriorityEvent(null)}};H.setTopPriorityAction=function(e,f){if(P&&c){setTimeout(function(){A.c.actionSequencer.setTopPriorityAction(e,f)},100)}else{P=e;c=f;V=A.ctx}};var Q=function(e){var f=N;if(e==="message"){f=W}else{if(Y.bModalDialogOpen||b.length>0){if(e==="execute"&&b.length<=0&&W.length>0){f=W}else{f=b}}else{if(e==="execute"&&f.length<=0&&W.length>0){f=W}}}return f};var M=function(){return Y.bModalDialogOpen?a:d};H.isQueueEmpty=function(){if(!Y.isAjaxInProgress()){if(Y.bModalDialogOpen&&b.length==0){return true}else{if(N.length==0){return true}}}return false};H.isPendingQueueEmpty=function(){var e=Y.bModalDialogOpen?a:d;return(e.length==0)?true:false};H.getEventsQueueLength=function(){if(!Y.isAjaxInProgress()){if(Y.bModalDialogOpen){return b.length}else{return N.length}}return 0};H.clearQueue=function(){if(Y.bModalDialogOpen){b=[]}else{N=[]}A.u.d.gBusyInd&&A.u.d.gBusyInd.hide()};H.getValueFromPendingEventValues=function(e){var f=null;if(Z.hasOwnProperty(e)){f=Z[e]}return f};H.removePendingActionValue=function(e){if(e){var f=A.ui.TemplateEngine.getCurrentContext().getEntryHandle(e);delete Z[f]}};H.getPendingQueueLength=function(){var e=Y.bModalDialogOpen?a:d;return e.length};H.processPendingEvents=function(){var p=M();var o=null;if(p.length>0){var n=p.shift();if(n){var e=n.targetEntryHandle;if(n.evt&&n.evt.harnessContext){A.ctxmgr.setContext(n.evt.harnessContext)}if(e!=null){var m=A.ctx.dom.getElementsByName(e);if(m){m=m[0]}if(n.evt.target&&!A.util.Dom.isAncestor(document.body,n.evt.target)){n.evt.target=m}if(!m||A.u.EventUtils.isElementDisabled(m,n.evt)){if(p.length>0){H.processPendingEvents()}return }}if(!A.c.actionSequencer.isControlTemplatized(n.evt)){var l=n.evt.target;if(l&&l.type){var g=l.name;var h=l.type=="radio"?g+"|"+l.id:g;if(h){var k=A.c.actionSequencer.getValueFromPendingEventValues(h);if(k!=null&&R(l)){var f=A.ctx.dom.getElementsByName(g);if(f.length>0){if(l.type=="checkbox"&&f.length==2){if(f[0].type=="hidden"){f[1].checked=k}else{f[0].checked=k}}else{if(l.type=="radio"){for(var j=0;j<f.length;j++){if(f[j].id==l.id){f[j].checked=k;break}}}else{f[0].value=k}}}}}}else{if(l&&!l.name&&!l.id&&!document.body.contains(l)){if(p.length>0){H.processPendingEvents()}return }}}if(n.evt&&n.evt.target&&n.evt.target.dataset&&n.evt.target.dataset.customChange&&n.evt.$ev==="change"){o="data-custom-change"}A.c.ControlBehaviorExecutor.processBehavior(n.evt,o)}}};var U=function(g,f){if(g.type==="change"){f.push(["fireACOnElem",[A.u.EventUtils.cloneEvent(g,true)]])}else{f.push(["evaluateClientConditions",[]])}f.push(["publishEndOfQueue",[A.u.EventUtils.cloneEvent(g,true)]])};var T=function(m,h,p,q){var l=0;var n=Q((p?p.type:undefined));if(!E(p)&&n.length>0){var o=(A.c.eventCONSTANTS.EVENT_DOUBLE_CLICK(p.type))?true:((p.type==="keyup")?false:undefined);for(var j=0;j<n.length;j++){if(o&&!A.c.eventCONSTANTS.EVENT_CLICK(n[j].e.type)){break}else{if(o===false&&n[j].e.type!=="keyup"){break}}l+=1}}U(p,m);var f=A.u.EventUtils.getContextPagesFromGrid(p);var e=A.u.d.getBaseRef(null,p,null);var g=m.length;for(var j=g-1;j>=0;j--){var k={action:m[j],modal:h,e:p,cd:q,cP:f.cP?f.cP:e,rP:f.rP?f.rP:e};n.splice(l,0,k)}};var G=function(){if(!O){if(P){var e=A.ctx;A.ctxmgr.setContext(V);P.call(c.refObj,c);P=null;c=null;V=null;A.ctxmgr.resetContext(e)}else{F()}}};var F=function(){var h=Q("execute");if(h.length==0){A.ui.statetracking.setActionBusy("publishEndOfQueue");return }var f=h.shift();if(h.length==0){f.e.harnessContext=null}try{A.ui.statetracking.setActionBusy(f.action[0],f.e.timeStamp);X(f.e,f.cd,f.action,f.cP,f.rP)}catch(g){setTimeout(function(){throw g},0)}h=Q("execute");if(h.length>0&&!O){G()}else{if(H.getPendingQueueLength()>0&&!O){H.processPendingEvents()}}if(h.length==0&&H.getPendingQueueLength()==0){if(A.ctx.SubmitInProgress!==true){A.u.d&&A.u.d.gBusyInd&&A.u.d.gBusyInd.hide()}}};H.isControlTemplatized=function(h){var g=false;var i=0;var f=h.target;while(f!=null&&i<=3){if(f.getAttribute("data-ctl")=="non-auto"){return false}if(f.getAttribute("data-template")!=null){if(!$(f).hasClass("content-item")){g=true}break}i++;f=f.parentElement}return g};var R=function(e){return["INPUT","TEXTAREA","SELECT"].indexOf(e.nodeName)>-1?true:false};var I=function(k){var j=Q((k?k.type:undefined)),g=A.c.eventCONSTANTS,i=k.type,h,f;if(j.length==0||i==="message"||E(k)){return true}return false};var L=function(e){var f=e.nodeName.toLowerCase();if(e.nodeType==1&&(f=="textarea"||(f=="input"&&/^(?:text|email|number|search|tel|url|password|radio|checkbox)$/i.test(e.type)))){return true}return false};H.schedule=function(m,q,l){if(I(m)||(m.status&&m.status=="pending")){T(l,Y.bModalDialogOpen,m,q);if(!O){G()}return true}else{var n=m.target;var k=Q(m?m.type:undefined);var r=M();var j=r.length>0?r:k;if(j.length>0){var g=j[j.length-1];var o=r.length>0?g.evt:g.e;var i=o.type;var p=o.target;if(m.type=="click"&&n==p&&m.type==i&&!L(p)){return false}}if(n.type&&n.type=="radio"){var h=n.getAttribute("onclick");var f=n.getAttribute("data-change");if(!(h&&f&&h.indexOf("Grids.getActiveGrid(event).setOtherRadioToFalse")!=-1&&f.indexOf("refresh")!=-1)){r.push({evt:m,id:(n&&n.id?n.id:null),value:(n?A.u.d.getDOMElementValue(n):null)})}}else{r.push({evt:m,targetEntryHandle:(n&&n.name?n.name:null),value:(n?A.u.d.getDOMElementValue(n):null)})}if(r.length!=0){r[r.length-1].evt.status="pending";H.addToPendingEventValues(m)}}return false};H.pause=function(e){O=true;if(e&&N.length>0){A.u.ce.publish(A.u.ce.EQ_PAUSED_FOR_MODAL,N[0].e)}};H.resume=function(){O=false;setTimeout(G,0)}})(C=D.actionSequencer||(D.actionSequencer={}))})(B=A.c||(A.c={}))})(pega||(pega={}));var pega;(function(A){var B;(function(D){var C;(function(F){var J;var M={};M.click="data-click";M.dblclick="data-dblclick";M.focusin="data-focus";M.focus="data-focus";M.focusout="data-blur";M.blur="data-blur";M.keypress="data-keypress";M.keyup="data-keyup";M.mouseover="data-hover";M.keydown="data-keydown";M.mousedown="data-msdwn";M.paste="data-paste";M.cut="data-cut";M.change="data-change";M.contextmenu="data-rightclick";M.playing="data-playing";M.pause="data-pause";M.ended="data-ended";var L=function(Q,V,S,T){var P=A.c.eventParser.parseExecutables(Q,S);if(!P){return }var N,U,R,O;for(O=0,N=P.length;O<N;O++){if(P[O]){A.c.eventPreProcessor.preprocess(Q,P[O]);if(Q.type.indexOf("key")===0){U=P[O];R=U[U.length-1];if(!A.c.conditionEngine.validateKeyCode(R,Q.keyCode,Q)){P.splice(O,1);N--;O--}}}}if(P.length==0){return }for(O=0,N=P.length;O<N;O++){if(T||P[O][0]&&P[O][0]=="doListAction"){P[O][1].push(T)}}if(A.ctx.RDL.masterDetailsParams&&A.ctx.RDL.masterDetailsParams.isShowDetailsOpen){P.push(["runScript",["pega.ui.rdlMasterDetails.dismissRDLMasterDetail(event, '"+S+"')"]])}P.push(["runScript",["pega.u.EventUtils.clear()"]]);Q.harnessContext=A.ctxmgr.getContextByTarget(Q.target);A.c.actionSequencer.schedule(Q,V,P)};function E(O){if(O.length==0){return A.c.UIElement}var N=A.c[O];if(typeof N=="object"&&typeof N.type=="string"){return N}return A.c.UIElement}function H(N){return M[N.type]}function K(T,S,O,R){var U=null;var Q="data-ctl";if(A.u.EventUtils.isControl(Q,T)){U=A.lang.trim(T.getAttribute(Q));if(U.indexOf("[")==0){var P=A.c.eventParser.parseJSON(U);U=P[0]?P[0]:U}}else{if(R==true){return false}}if(U!=null){var N=E(U);if(typeof N[O]=="function"){N[O].call(N,S);if(S.cancelBehavior==true){return false}}}}function G(S,O,T,V,W){if(A.ui&&A.ui.DataRepeaterUtils){var U=A.ui.DataRepeaterUtils;var R=U.getLayoutInfo(S,W);var Q=null}if(R){var P=R.domNode;if(R.type==U.TEMPLATE_GRID){if(R.rowNode){V=P.getAttribute(W);I(P,S,O,V,false,R)}}else{if(R.type==U.SIMPLE_LAYOUT||R.type==U.SECTION_INCLUDE){if(T.getAttribute("data-formatting")=="yes"&&P.getAttribute("data-change")){T.setAttribute("data-value",T.value);T.setAttribute("data-changed","true")}V=P.getAttribute(W);if(V&&O!="message"){I(P,S,O,V,null,null)}}else{if(R.type==U.NONTEMPLATE_GRID){if(typeof (Grids)!="undefined"){Q=Grids.getElementsGrid(P)}}}}}var N=A.u.EventUtils.processGridBehaviors(S,O,T,V,W,Q);if(N.execute){I.apply(this,N.args)}}function I(Q,R,N,U,O,V){var P,S=false;if(A.c.eventCONSTANTS.EVENT_RIGHT_CLICK(N)&&U){R.preventDefault()}S=K(Q,R,N,O);if(S!=true&&typeof U=="string"){P=A.c.UIElement;if(N.indexOf("key")===0){if(A.c.conditionEngine.validateKeyCode("any",R.keyCode,R)){A.u.EventUtils.executeFunctionWithDelay(L,[R,P,U,V],this,250)}else{L(R,P,U,V)}}else{var T=A.u.EventUtils.correctEventForMenu(Q,R);L(T,P,U,V)}}else{if(!U&&!A.c.actionSequencer.isPendingQueueEmpty()&&R.status&&R.status=="pending"){A.c.actionSequencer.processPendingEvents()}else{if(R.type!="focus"){if(R.type=="change"&&R.isTrusted){A.c.actionSequencer.addToPendingEventValues(R)}}}}}F.getBackupEvent=function(){return J};F.clearBackupEvent=function(){J=undefined};F.processHoverEvent=function(O){var P=O.target;if(P.nodeName===undefined){return }var N=A.ui.HarnessContextMgr.getContextByTarget(P);if(N&&A.ctx!=N){A.ui.HarnessContextMgr.setContext(N)}A.c.cbe.processBehavior(O,"data-hover")};F.processBehavior=function(X,Z){var U=X;U.cancelBehavior=false;if(!X.$cloned){U=A.u.EventUtils.cloneEvent(X)}if(A.c.actionSequencer.isQueueEmpty()&&A.c.actionSequencer.isPendingQueueEmpty()){A.c.actionSequencer.emptyPendingEventValues()}if(!A.u.d.isHarnessInitialized()&&U&&U.type!="focus"&&U.type!="blur"){J={e:U,ed:Z};return }var V=U.target;if(V.nodeName===undefined){return }if(U.type=="change"){var P=V.getAttribute("data-change-lazy");if(V.type=="hidden"&&V.id&&document.getElementById(V.id).getAttribute("data-ctl")&&document.getElementById(V.id).getAttribute("data-ctl").indexOf("AutoCompleteAG")!=-1){var R=document.getElementById(V.id);P=R.getAttribute("data-change-lazy")}if(P&&P=="true"){return }}if(navigator.userAgent.lastIndexOf("Chrome/")<0){if(U.type=="keyup"){if(V.fromComposition){V.fromComposition=false;U.preventDefault();return false}}}if(!Z){Z=H(U)}if(A.c.eventCONSTANTS.EVENT_FOCUS(U.type)||(A.util.Event.isSafari&&A.c.eventCONSTANTS.EVENT_CLICK(U.type)&&(V.type==="radio"||V.type==="checkbox"||(V&&typeof (V.type)==="undefined"&&(V.parentNode&&(V.parentNode.className=="signature-clear-action"||V.parentNode.className=="signature-actions")))))){if(V.id!="pega_ui_load"){A.u.d.focusElement=V;A.u.d.gFocusElement=V;if(A.c.eventCONSTANTS.EVENT_FOCUS(U.type)){A.u.d.gFocusTimeStamp=performance.now()}}}var Y=V.getAttribute(Z);if((typeof Y=="string")&&(Y.charAt(0)==".")){var Q=Y.length;var T=Y.length;for(;Q;Q--){if(V==null){var S=A.ctx.dom.getElementById(X.target.id);var O=S.parentNode;while(T>0){V=O;O=O.parentNode;T--}break}else{V=V.parentNode}}}if(U.type=="mousedown"){var a=performance.now();if(A.u.d.gFocusTimeStamp){var W=a-A.u.d.gFocusTimeStamp;if(W>900){A.u.d.gFocusElement=V}}else{A.u.d.gFocusElement=V}}if(A.u.EventUtils.isElementDisabled(V,U)){return }var N=U.type;N=(N=="focusin")?"focus":N;N=(N=="focusout")?"blur":N;Y=V.getAttribute(Z);if(N=="keyup"&&U.keyCode==13&&Y==null&&V.getAttribute("data-click")&&((V.nodeName.toLowerCase()=="img"&&V.parentNode.nodeName.toLowerCase()=="i")||(V.nodeName.toLowerCase()=="i"&&V.parentNode.nodeName.toLowerCase()=="span"))){V.click();return }if((N=="focus"||A.c.eventCONSTANTS.EVENT_CLICK(N))&&A.ctx.Grid){A.u.EventUtils.queueFocusGridEvent(N,V)}if((navigator.userAgent.lastIndexOf("Chrome/")>0)&&(V.nodeName.toLowerCase()==="select")&&(N==="click")){return }if(!(V.getAttribute("bsimplelayout")&&(N=="click"||N=="keydown"||N=="focus"))){I(V,U,N,Y,true,null)}if(!U.skipOtherBehavior){G(U,N,V,Y,Z)}}})(C=D.ControlBehaviorExecutor||(D.ControlBehaviorExecutor={}))})(B=A.c||(A.c={}))})(pega||(pega={}));var pega;(function(A){var B;(function(D){var C;(function(G){var F;var I=function(N){if(window.validation_validateFromUIEvent){window.validation_validateFromUIEvent(N,N.target)}};var K=function(O){var N=O.target;if(N&&A&&A.ui&&A.ui.DCUtil&&A.ui.DCUtil.setContextThread){A.ui.DCUtil.setContextThread(N,O.type)}};var M=function(N){K(N);I(N);A.c.ClientConditionExecutor.processEvent(N);A.c.ControlBehaviorExecutor.processBehavior(N,null)};var L=function(N){if(N.isTrusted==false&&N.bubbles!==true){setTimeout(function(){A.c.ClientConditionExecutor.processEvent(N)},0)}};var J={};var H={click:"clickHandler",focus:"focusHandler",blur:"blurHandler",change:"changeHandler"};function E(P){var O=A.u.EventUtils.cloneEvent(P);M(O);for(var N in J){if(J.hasOwnProperty(N)&&typeof J[N]=="function"){J[N](O)}}}G.ON_BEFORE_EVENT_PROCESSING="onBeforeEventProcessing";G.handler=function(N){if(!A.u.EventUtils.isElementDisabled(N.target,N)){A.ui&&A.ui.EventsEmitter&&A.ui.EventsEmitter.publishSync(G.ON_BEFORE_EVENT_PROCESSING,N);E(N)}};G.rightClickHandler=function(O){var N=O.target;if((N.nodeName.toUpperCase()=="INPUT"||N.nodeName.toUpperCase()=="TEXTAREA")){if(!(N.getAttribute("data-rightclick")&&N.getAttribute("data-rightclick").length>0)){return }}A.c.eventController.handler(O)};G.clickHandler=function(P){if(A.desktop.infinity&&P.target.tagName==="A"&&P.target.href!==""&&P.target.href!=="#"&&(P.metaKey||P.ctrlKey)){window.open(P.target.href);P.preventDefault();return }if(P.button===2){return }var O=P.target;if(/^a$/gi.test(O.nodeName)&&O.getAttribute("disabled")==="disabled"){P.preventDefault();return }if(/^label$/gi.test(O.nodeName)){if(O.control||(O.htmlFor&&document.getElementById(O.htmlFor))){return }}if(navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&(O.tagName&&O.tagName=="SPAN")&&(O.hasAttribute&&(O.hasAttribute("data-ctl")&&O.getAttribute&&O.getAttribute("data-ctl")=="Checkbox")&&O.hasAttribute("data-click"))){A.util.Event.preventDefault(P);return }if(/^button$/gi.test(O.nodeName)&&((O.hasAttribute&&O.hasAttribute("data-ctl"))||typeof O.getAttribute("data-ctl")==="string")){P.preventDefault()}if((P&&A.c.eventCONSTANTS.EVENT_CLICK(P.type)&&O.tagName==="A"&&(O.hasAttribute&&O.hasAttribute("href")&&/^javascript:[\s]*void[\(][a-z0-9\'\"]*[\)](|;)$/i.test(window.trim(O.getAttribute("href")))))){P.preventDefault()}if(A.webanalytics){var N=A.c.eventController.eventListString(P);A.webanalytics.clickTrace(P,N)}A.c.eventController.handler(P)};G.eventListString=function(T){var O=null;var S=T.target;var N=S.getAttribute("data-click");var U="";var R=true;if((N!==null)&&(N!=="")){try{while(N===".."||N==="."){S=S.parentNode;N=S.getAttribute("data-click")}O=A.c.eventParser.parseJSON(N);for(topLevel in O){var Q=O[topLevel];for(actionLevel in Q){if(R){R=false}else{U+=", "}U+=Q[actionLevel]}}}catch(P){}}return(U)};G.focusHandler=function(O){var N=O.target;if(N.tagName&&N.tagName.match(/^(input)$/gi)){A.c.formatter.setSubmitValue(N);N.setAttribute("data-changed","false")}if(N.tagName&&N.tagName.match(/^(input|select|textarea)$/gi)&&!(N.type&&N.type.match(/^(checkbox|radio)$/gi))){clearTimeout(F);N.removeEventListener("change",L);N.addEventListener("change",L)}if(navigator.userAgent.lastIndexOf("Chrome/")<0&&N.tagName.toLowerCase()=="input"){N.addEventListener("compositionend",A.c.eventController.compositionEndHandler)}A.c.eventController.handler(O)};G.blurHandler=function(O){var N=O.target;if(navigator.userAgent.lastIndexOf("Chrome/")<0&&N.tagName.toLowerCase()=="input"){$(N).off("compositionend",A.c.eventController.compositionEndHandler)}if(N.tagName&&N.tagName.match(/^(input)$/gi)&&N.getAttribute("data-formatting")){if(N.type=="hidden"&&N.getAttribute("data-ctl")&&A.c.eventParser.parseJSON(N.getAttribute("data-ctl"))[0]=="DatePicker"){A.c.formatter.getReadOnlyFormatting(O,"true")}else{A.c.formatter.getReadOnlyFormatting(O,"")}N.setAttribute("data-changed","false")}if(N.tagName&&N.tagName.match(/^(input|select|textarea)$/gi)&&!(N.type&&N.type.match(/^(checkbox|radio)$/gi))){F=setTimeout(function(){N.removeEventListener("change",L)},50)}A.c.eventController.handler(O)};G.changeHandler=function(O){var N=O.target;if(N.getAttribute("data-formatting")=="yes"&&N.getAttribute("data-change")){if(!(N.getAttribute("data-custom-timezone")&&N.getAttribute("data-value")&&N.type=="hidden")){N.setAttribute("data-value",N.value)}N.setAttribute("data-changed","true")}A.c.eventController.handler(O)};G.keyDownHandler=function(P){var O=P.target;var N=O.getAttribute("type");if(P.keyCode==13&&O.tagName&&O.tagName.match(/^(input)$/gi)&&(!O.getAttribute("type")||("button"!==O.getAttribute("type").toLowerCase()&&"file"!==O.getAttribute("type").toLowerCase()))){P.preventDefault()}A.c.eventController.handler(P)};G.inputHandler=function(P){if(A.u.d.isMobile()||(A.cl&&A.cl.isTouchAble())){var O=P.target;var N=O.getAttribute("type");if(P.keyCode==13&&O.tagName&&O.tagName.match(/^(input)$/gi)&&(!O.getAttribute("type")||("button"!==O.getAttribute("type").toLowerCase()&&"file"!==O.getAttribute("type").toLowerCase()))){P.preventDefault()}A.c.eventController.handler(P)}};G.fireEventHandler=function(Q,O,P){if(O==="message"){if(document.body.contains(Q)){A.c.ControlBehaviorExecutor.processBehavior({type:"message",target:Q,detail:P},"data-message");return true}else{return false}}var N=H[O]||"handler";Q.addEventListener(O,A.control.eventController[N]);A.u.EventUtils.fireEvent(Q,O,null);Q.removeEventListener(O,A.control.eventController[N])};G.compositionEndHandler=function(O){var N=O.target;N.fromComposition=true;O.preventDefault();return false};G.registerEventNotification=function(N,O){if(!J[N]){J[N]=O}};G.unregisterEventNotification=function(N){delete J[N]};G.setLazyOnchange=function(Q,P,R){if(Q){var O=Q.getAttribute("data-change-lazy");if(O){Q.setAttribute("data-change-lazy",P);if(O!="false"&&P=="false"&&R){var N=Q.getAttribute("data-old-value");if(typeof N!="undefined"&&N!=null){if(N==Q.value){return }}A.control.actionSequencer.fireTopPriorityEvent(Q,"change");if(typeof N!="undefined"&&N!=null){Q.removeAttribute("data-old-value")}}}}}})(C=D.eventController||(D.eventController={}))})(B=A.c||(A.c={}))})(pega||(pega={}));var pega;(function(A){var B;(function(E){var D=A.c.eventController;var C=A.c.ControlBehaviorExecutor;E.ec=D;E.cbe=C})(B=A.c||(A.c={}))})(pega||(pega={}));(function(){var D=document,E,B=pega.c.eventController,A=B.handler,C=pega.util.Event;$(window).on("load",function(){E=document.body;E.addEventListener("focus",B.focusHandler,true);E.addEventListener("blur",B.blurHandler,true);E.addEventListener("change",B.changeHandler);E.addEventListener("paste",A);E.addEventListener("cut",A);E.addEventListener("playing",A,true);E.addEventListener("pause",A,true);E.addEventListener("ended",A,true)});D.addEventListener("keypress",A);D.addEventListener("keyup",A);D.addEventListener("keydown",B.keyDownHandler);D.addEventListener("mousedown",A);D.addEventListener("click",B.clickHandler);D.addEventListener("dblclick",B.handler);D.addEventListener("contextmenu",B.rightClickHandler);D.addEventListener("input",B.inputHandler)}());
if(!pega.control){pega.c=pega.namespace("pega.control")}var pega;(function(A){var B;(function(D){var C;(function(E){E.isActive=function(G){var F=G.trgt;if(F&&F.tagName&&F.tagName.toLowerCase()==="label"){F=F.control;if(!F&&G.trgt.getAttribute){F=$("#"+G.trgt.getAttribute("for")).get(0)}}if(F===undefined||!F){F=G.trgt}return(document.activeElement===F)};E.isInActive=function(F){return !this.isActive(F)};E.isEmpty=function(F){if(F.trgt&&F.trgt.tagName=="P"){return(F.trgt.innerHTML=="")}return(!F.trgt.value||A.lang.trim(F.trgt.value)=="")};E.isPopulated=function(F){return !this.isEmpty(F)};E.isReadOnly=function(F){var G=F.trgt;if(typeof G.readOnly!="undefined"){return G.readOnly}return null};E.isReadWrite=function(F){var G=A.c.validator.isReadOnly(F);if(typeof G=="boolean"){return !G}return null};E.isRequired=function(G){var H=G.trgt;var F=H.getAttribute("validationType");return((typeof F=="string")&&(F.indexOf("required")!=-1))};E.isOptional=function(F){return !A.c.validator.isRequired(F)};E.propertyRefCondition=function(I){if(!I.param||!I.param.length||!I.param[0]||!I.param[1]){return false}var K=I.param[0];var L=false;var H="";var J;var G;if(I.trgt&&I.trgt.tagName&&I.trgt.tagName.toLowerCase()=="p"){L=true;H=I.trgt.innerText}J=A.ctx.dom.getElementsByName(K);if(!J.length&&!L){return(I.param[3]=="true")}if(J[0].type==="hidden"&&J[1]&&J[1].type==="checkbox"){J=J[1]}else{J=J[0]}var F=I.param[2];if(F&&F.indexOf("h:")==0&&F.length>2){F=F.substring(2);G=A.ctx.dom.getElementsByName(F);if(!G.length){return(I.param[3]=="true")}if(G[0].type==="hidden"&&G[1]&&G[1].type==="checkbox"){F=A.u.d.getDOMElementValue(G[1])}else{F=A.u.d.getDOMElementValue(G[0])}}var M="";if(L){M=H}else{M=A.u.d.getDOMElementValue(J)}if(I.param[1]==A.c.conditionEngine.opGTR||I.param[1]==A.c.conditionEngine.opLSS||I.param[1]==A.c.conditionEngine.opGTREQ||I.param[1]==A.c.conditionEngine.opLSSEQ){if(!isNaN(M)&&!isNaN(F)){M=parseFloat(M);F=parseFloat(F)}}switch(I.param[1]){case A.c.conditionEngine.opEQ:if(typeof M==="boolean"){M=M.toString()}return(M==F);case A.c.conditionEngine.opNotEQ:if(typeof M==="boolean"){M=M.toString()}return(M!=F);case A.c.conditionEngine.opGTR:return(M>F);case A.c.conditionEngine.opLSS:return(M<F);case A.c.conditionEngine.opIS:return A.c.conditionEngine.validateCondition({op:"",conditions:[[F]],target:J});case A.c.conditionEngine.opGTREQ:return(M>=F);case A.c.conditionEngine.opLSSEQ:return(M<=F);default:return true}}})(C=D.validator||(D.validator={}))})(B=A.c||(A.c={}))})(pega||(pega={}));var pega;(function(A){var B;(function(D){var C;(function(F){var I={Act:A.c.validator.isActive,Emp:A.c.validator.isEmpty,IAct:A.c.validator.isInActive,Pop:A.c.validator.isPopulated,ReadOnly:A.c.validator.isReadOnly,Editable:A.c.validator.isReadWrite,Req:A.c.validator.isRequired,NReq:A.c.validator.isOptional,OP:A.c.validator.propertyRefCondition,AP:A.c.validator.propertyRefCondition};var E={enter:13,up:38,down:40,left:37,right:39,esc:27,tab:9};F.opAND="&",F.opOR="|",F.opEQ="=",F.opNotEQ="!=",F.opGTR=">",F.opLSS="<",F.opIS="is",F.opGTREQ=">=",F.opLSSEQ="<=";function G(O){var M=false,N,K,J;if(!O||!(O.conditions.length>0)){return true}K=O.op;J=O.conditions.length;for(var L=0;L<J;L++){N=I[O.conditions[L][0]];if(N){M=N.apply(A.c.validator,[{trgt:O.target,param:O.conditions[L][1]}])}else{M=true}if(K===A.c.conditionEngine.opAND&&!M){return false}else{if(K===A.c.conditionEngine.opOR&&M){return true}}}if(K==A.c.conditionEngine.opAND){return true}else{if(K==A.c.conditionEngine.opOR){return false}else{return M}}}F.validateCondition=G;function H(J,L,K){if(J!=="any"&&E[J||"enter"]!==L){return false}else{if((navigator.userAgent.toLowerCase().indexOf("ipad")!==-1||navigator.userAgent.toLowerCase().indexOf("iphone")!==-1)&&J==="any"&&K&&L===0){return true}else{if(J==="any"&&((K&&(K.ctrlKey&&!(/^(86|88|8|46|90)$/.test(L))))||(L<=45&&!(/^(8|16)$/.test(L))))){return false}}}return true}F.validateKeyCode=H})(C=D.conditionEngine||(D.conditionEngine={}))})(B=A.c||(A.c={}))})(pega||(pega={}));
var pega;(function(B){var A;(function(C){var D;(function(I){var G={eventTimer:null};var F=null;function E(M,J,L){if(!M){return M}var O;var N=function(){var U,T,S,Q,R;Q=arguments[0].split("$");U=Q[1]||"";U=U.substring(0,U.length-1);T=B.u.property.toHandle(J+"."+U);S=document.getElementsByName(T);if(S&&S[0]){return B.control.PlaceHolder.getValue(S[0]).replace(/\"/g,'\\"')}var P=B.u.d.getPropertyValueFromCT(J+"."+U);if(P){return P}return U},K=function(){return J+"."};return M.replace(/~!./g,K)}function H(J,L){var K=Grids.getElementsGrid(L);if(K&&((K.isLastEventFromRow||(B.c.eventCONSTANTS.EVENT_CLICK(J)&&K.isLastEventFromFlowAction(L)))||(K=Grids.getElementsGrid(K.gridDiv.parentNode)))){if(B.ctx.Grid.focusedGrid&&K!=B.ctx.Grid.focusedGrid){B.ctx.Grid.focusedGrid.focusGrid(false)}K.focusGrid(true);B.ctx.Grid.focusedGrid=K}else{if(B.ctx.Grid&&B.ctx.Grid.focusedGrid&&!(K&&L.id=="gridBody_left")){B.ctx.Grid.focusedGrid.focusGrid(false);B.ctx.Grid.focusedGrid=null}if(L&&L.nodeName=="BODY"){setTimeout(function(){document.body.className=document.body.className},50)}}}I.isControl=function(K,J){if(J.hasAttribute){return J.hasAttribute(K)}return((typeof J.getAttribute(K))=="string")};I.clear=function(){F=null};I.cloneEvent=function(L,M){var K,J;M=(M==null||M==undefined||M==false)?false:true;if(L.$cloned&&!M){return L}J={$cloned:true,$ev:L};for(K in L){J[K]=L[K]}J.preventDefault=function(){var O=this.$ev;if(O&&typeof O.preventDefault==="function"){try{O.preventDefault()}catch(N){}}};J.stopPropagation=function(){var O=this.$ev;if(O&&typeof O.stopPropagation==="function"){try{O.stopPropagation()}catch(N){}}};return J};I.correctEventForMenu=function(N,M){var J=M;if(!N.closest("[node_name]")&&$(N).hasClass("menu-item-anchor")&&B.c.eventCONSTANTS.EVENT_CLICK(M.type)){var L=$(N).parent();if(L.length>0){try{if(B.control.menu&&B.control.menu.showMenuTarget&&$(N).parents("body > div > ul.menu").get(0)&&B.control.menu.showMenuTarget.getAttribute("data-menuid")==$(N).parents("body > div > ul.menu").get(0).getAttribute("id")){N=B.control.menu.showMenuTarget}else{N=B.control.menu.getMenuBarNode(L.parent())[0]}J=B.u.EventUtils.cloneEvent(M.$ev);J.target=N}catch(K){}}}return J};I.executeFunctionWithDelay=function(M,K,L,J){if(G.eventTimer){clearTimeout(G.eventTimer);G.eventTimer=setTimeout(function(){M.apply(L,K);G.eventTimer=null},J)}else{M.apply(L,K);G.eventTimer=setTimeout(function(){G.eventTimer=null},J)}};I.queueFocusGridEvent=function(J,K){if(B.util.Event.isIE||B.util.Event.isSafari){clearTimeout(B.ctx.Grid.focusTimeoutId);if(B.c.eventCONSTANTS.EVENT_CLICK(J)){H(J,K)}else{B.ctx.Grid.focusTimeoutId=setTimeout(function(){H(J,K)},100)}}else{H(J,K)}};I.processGridBehaviors=function(R,J,S,X,Y,K){var M={execute:false,args:null};if(J=="keyup"||B.c.eventCONSTANTS.EVENT_CLICK(J)||B.c.eventCONSTANTS.EVENT_DOUBLE_CLICK(J)||B.c.eventCONSTANTS.EVENT_RIGHT_CLICK(J)){if(J=="keyup"){var P=R.keyCode}if((J=="keyup"&&(P==38||P==40))||!B.control.isActionableElement(S)||$(S).hasClass("hiddenExpColl")||B.c.eventCONSTANTS.EVENT_RIGHT_CLICK(J)){var L=false;if(S.tagName&&S.tagName.toUpperCase()!="TD"&&(S.tagName.toUpperCase()!="UL")){L=!(I.isControl("data-ctl",S)&&S.getAttribute("data-ctl")!="non-auto")}if(J!="keyup"||(J=="keyup"&&!L&&!B.control.hasKeyUpActions(S,P)&&!B.control.hasImplicitKeyBehaviorsForAuto(S,P))||(J=="keyup"&&L&&B.control.isNonAutoControlAllowed(S,P))){if(typeof (Grids)!="undefined"){if(B.c.eventCONSTANTS.EVENT_DOUBLE_CLICK(J)&&!K&&F){K=F;R.cachedGridObj=F;F=null}else{F=K}if(K){var U=K.getRightRow();var W=K.gridDiv;if(U&&W&&K.isLastEventFromRow){X=E(W.getAttribute(Y),K.getEntryHandle(),U.getAttribute("data-gargs"));if(X){var O=B.c.eventParser.parseJSON(X);if(O.length>1){var Q=O.length;for(var N=0;N<Q-1;N++){if((O[N][1][1]&&(O[N][1][1]=="EDITITEM"||O[N][1][1]=="REFRESHROWS"||O[N][1][1]=="FLOWACTION"||O[N][1][1]=="REFRESHLIST"))||(O[N][0]&&O[N][0]=="refresh"&&O[N][1][0]&&O[N][1][0]=="thisSection")){R.cachedGridObj=K;R.cachedGridRowId=U.getAttribute("id");var T=(K.rightBodyTbl&&K.rightBodyTbl.contains(S))?K.rightBodyTbl:K.leftBodyUL;var V=K.findCell(null,T,S);R.cachedGridCellIndex=(V&&V.cellIndex)?V.cellIndex:-1;break}}}}M.execute=true;M.args=[W,R,J,X,null,null]}}}}}}else{if(J=="keydown"){var P=R.keyCode;if(typeof (Grids)!="undefined"&&(P==38||P==40)){var K=Grids.getActiveGrid(R);if(K&&K.pageMode==="Progressive Load"){var W=K.gridDiv;if(B.c.hasKeyUpActions(W,P,true)&&S.tagName.toUpperCase()!="SELECT"&&S.tagName.toUpperCase()!="TEXTAREA"){R.preventDefault()}}}}}return M};I.fireEvent=function(L,K,J){B.util.Event.fireEvent(L,K,J)};I.getContextPagesFromGrid=function(N){var J,S="",Q,M,O,K,T;if(typeof (Grids)!="undefined"){J=Grids.getActiveGrid(N);if(J!=null){if(!J.isLastEventFromRow){S=J.gridReferencePage}else{var T;if((J.bTree||J.bTreegrid)&&J.leftBodyDiv&&J.leftBodyDiv.contains(N.target)){T=jQuery(N.target).closest("li.gridRow").get(0)}else{T=jQuery(N.target).closest("tr.cellCont").get(0)}if(T){var L=T.hpref?T.hpref:T.id;S=B.u.property.toReference(L)}}}else{J=N.cachedGridObj}if(J){M=-1;O=N.target;K;if(J.leftBodyUL&&J.leftBodyUL.contains(O)){K=J.leftBodyUL}else{if(J.rightBodyTbl&&J.rightBodyTbl.contains(O)){K=J.rightBodyTbl}}if(K){var R=J.findCell(N,K);if(R){M=J.getRowIndex(R);M=J.getActiveRowIndexFromRowIndex(M)}if(M!=-1){Q=J.getEntryHandle(M)}}if(Q==undefined){Q=J.getEntryHandle()}if(Q){var P=T||J.getRightRow();if(M!=-1&&(!P)){P=J.getRightRow(M)}if(!J.bPageGroup&&P&&B.c.AutoCompleteAG&&B.c.AutoCompleteAG.isElementInsideAutoComPO(N)){Q=Q.replace(/\([0-9]\)$/,"("+P.getAttribute("PL_INDEX")+")")}}}}return{cP:S,rP:Q}};I.isElementDisabled=function(K,M){if(K.getAttribute&&(K.getAttribute("data-ctl")=="RadioGroup"||K.getAttribute("data-ctl")=="Checkbox")){var J=M.target;if(J&&(J.type=="radio"||J.type=="checkbox")){if(J.disabled){return true}}else{if(J&&J.tagName&&J.tagName.toLowerCase()=="label"){J=J.control;if(J&&J.disabled){return true}}else{var L=$(K).find("input");if(L&&L.length>0){return($(K).find("input")[0]).disabled}}}}if(typeof K.disabled==="boolean"){return K.disabled}return typeof K.attributes.disabled!=="undefined"}})(D=C.EventUtils||(C.EventUtils={}))})(A=B.u||(B.u={}))})(pega||(pega={}));
if(!pega.control){pega.c=pega.namespace("pega.control")}var pega;(function(A){var B;(function(D){var C;(function(E){E.getReadOnlyFormatting=function(W,O){var X=W.target;var G=X.name;if(O=="true"){if(X.parentNode.hasAttribute("data-template")&&A.ui.Formatter&&A.ui.Formatter.formatDateTime){var K=X.nextElementSibling;var R=A.ui.controlMetadataMapper.getTemplatePage(X.getAttribute("name")).pyCell.pyModes[1];var J=A.ui.controlMetadataMapper.getTemplatePage(X.getAttribute("name")).pyCell.pyModes[0];var U=R.pyFormatType;if(J.pyDateTime=="time"){U="time"}var P={};if(R.pyDateTimeFormat=="DateTime-Frame"||R.pyDateTimeFormat=="DateTime-Frame-Short"){P.fromNow=true;P.secNoCutoff=R.pyDateTimeSecondCutoff;P.propType=R.pyPropertyType;P.type=R.pyFormatType;P.formatType=R.pyDateTimeFormat;if(R.pyDateTimeFormat=="DateTime-Frame-Short"){P.pyDontShowPastFuture=R.pyDontShowPastFuture}}else{if(R.pyDateFormat=="DateTime-Frame"||R.pyDateFormat=="DateTime-Frame-Short"){P.fromNow=true;P.secNoCutoff=R.pyDateTimeSecondCutoff;P.propType=R.pyPropertyType;P.type=R.pyFormatType;P.formatType=R.pyDateFormat;if(R.pyDateFormat=="DateTime-Frame-Short"){P.pyDontShowPastFuture=R.pyDontShowPastFuture}}}var T="innerText" in K?"innerText":"textContent";if(U=="datetime"){var I=X.getAttribute("data-custom-timezone")||A.u.d.TimeZone;var L=X.value;var M=X.getAttribute("data-value");var N=L;if(X.type=="hidden"){if(X.getAttribute("data-custom-timezone")){N=A.u.d.CalendarUtil.convertDateTimeBtwnTimezones(L,A.u.d.TimeZone||A.u.d.serverTimeZone,I)}}if(P&&P.fromNow){N=A.u.d.CalendarUtil.convertDateTimeBtwnTimezones(N,I,moment.tz.guess(true))}K[T]=(N)?A.ui.Formatter.formatDateTime(N,R.pyCustDateTime,P,R.pyDateTimeHourFormat,"","1",null,I):""}else{if(U=="date"){K[T]=(X.value)?A.ui.Formatter.formatDateTime(X.value,R.pyCustDateTime,P,"","","0"):""}else{if(U=="time"){K[T]=(X.value)?A.ui.Formatter.formatDateTime(X.value,R.pyCustDateTime,P,R.pyDateTimeHourFormat,"","2"):""}}}}else{if(X.getAttribute("data-format-method")){A.c.postValue.initiatePost(W,"controlEventReadOnly")}}}else{if(X&&X.getAttribute("data-formatting")==="yes"){var F=X.getAttribute("data-value");var H=X.getAttribute("data-changed")=="true";var S=X.hasOwnProperty("prevValue")&&X.prevValue!==X.value;var Q=F!=null&&typeof (F)!="undefined"&&F!=X.value;if(H||S||Q){X.setAttribute("data-value",X.value);if(X.hasAttribute("data-template")||X.parentNode.hasAttribute("data-template")){if(X.getAttribute("data-ctl")=='["DatePicker"]'&&A.ui.Formatter&&A.ui.Formatter.formatDateTime){if(G&&window.getErrorDB&&window.getErrorDB().isHavingError(G)){return }X.setAttribute("data-value",X.value);var R=A.ui.controlMetadataMapper.getTemplatePage(X.getAttribute("name")).pyCell.pyModes[1];var J=A.ui.controlMetadataMapper.getTemplatePage(X.getAttribute("name")).pyCell.pyModes[0];var U=R.pyFormatType;if(J.pyDateTime=="time"){U="time"}var P={};if(R.pyDateTimeFormat=="DateTime-Frame"||R.pyDateTimeFormat=="DateTime-Frame-Short"){P.fromNow=true;P.secNoCutoff=R.pyDateTimeSecondCutoff;P.propType=R.pyPropertyType;P.type=R.pyFormatType;P.formatType=R.pyDateTimeFormat;if(R.pyDateTimeFormat=="DateTime-Frame-Short"){P.pyDontShowPastFuture=R.pyDontShowPastFuture}}else{if(R.pyDateFormat=="DateTime-Frame"||R.pyDateFormat=="DateTime-Frame-Short"){P.fromNow=true;P.secNoCutoff=R.pyDateTimeSecondCutoff;P.propType=R.pyPropertyType;P.type=R.pyFormatType;P.formatType=R.pyDateFormat;if(R.pyDateFormat=="DateTime-Frame-Short"){P.pyDontShowPastFuture=R.pyDontShowPastFuture}}}if(X.getAttribute("data-editinput")&&X.getAttribute("data-editinput")!=""){A.c.postValue.initiatePost(W,"controlEventReadOnly")}else{if(U=="datetime"){var I=X.getAttribute("data-custom-timezone")||A.u.d.TimeZone;var L=X.value;var M=X.getAttribute("data-value");var N=L;if(X.type=="hidden"){if(X.getAttribute("data-custom-timezone")){N=A.u.d.CalendarUtil.convertDateTimeBtwnTimezones(L,A.u.d.TimeZone||A.u.d.serverTimeZone,I)}}if(P&&P.fromNow){N=A.u.d.CalendarUtil.convertDateTimeBtwnTimezones(N,I,moment.tz.guess(true))}X.value=(N)?A.ui.Formatter.formatDateTime(N,R.pyCustDateTime,P,R.pyDateTimeHourFormat,"","1",null,I):""}else{if(U=="date"){X.value=(X.value)?A.ui.Formatter.formatDateTime(X.value,R.pyCustDateTime,P,"","","0"):""}else{if(U=="time"){X.value=(X.value)?A.ui.Formatter.formatDateTime(X.value,R.pyCustDateTime,P,R.pyDateTimeHourFormat,"","2"):""}}}}X.setAttribute("data-formatting","done")}else{if(X.getAttribute("data-ctl")=='["TextInput"]'&&A.ui.Formatter&&A.ui.Formatter.formatNumber){try{if(!(A&&A.u&&A.u.d&&A.u.d.ServerProxy&&A.u.d.ServerProxy.isDestinationLocal())&&X.getAttribute("validationtype")){A.c.postValue.initiatePost(W,"controlEventReadOnly")}else{if(G&&window.getErrorDB&&window.getErrorDB().isHavingError(G)){return }var R=A.ui.controlMetadataMapper.getTemplatePage(X.getAttribute("name")).pyCell.pyModes[1];X.setAttribute("data-value",X.value);X.value=A.ui.Formatter.formatNumber(X.value,R,true);X.setAttribute("data-formatting","done")}}catch(W){}}}}else{if(X.getAttribute("data-format-method")){A.c.postValue.initiatePost(W,"controlEventReadOnly")}}}else{if(X.value!=""){try{var V=document.getElementById(X.name+"Error");if(!V||(V&&V.style.display=="none")){X.value=X.getAttribute("data-display-value");X.removeAttribute("data-display-value");X.setAttribute("data-formatting","done")}}catch(W){}}else{X.setAttribute("data-formatting","done")}}}}};E.setSubmitValue=function(G){if(G.getAttribute("data-formatting")==="done"){G.setAttribute("data-formatting","yes");var F=G.getAttribute("data-value");if(F!=null&&typeof (F)!="undefined"&&F!=""){G.setAttribute("data-display-value",G.value);G.value=F}if(G.getAttribute("data-auto-formatting")&&G.getAttribute("data-auto-formatting")=="true"){G.value=A.u.d.formatNumberWithSeparators(F)}}}})(C=D.formatter||(D.formatter={}))})(B=A.c||(A.c={}))})(pega||(pega={}));
pega.control||(pega.c=pega.namespace("pega.control"));var pega;
(function(f){(function(p){(function(p){var q,a,w,r,C=function(a){var b=a.argument,c,d=b.name+"Error",e,g=!1,l;if((c=a.responseText)&&"string"===typeof c&&-1!==c.indexOf("\x3chtml\x3e")||-1!==c.indexOf("\x3chtml lang\x3d")||-1!==c.indexOf("\x3c!DOCTYPE html\x3e"))"text"===b.type&&b.getAttribute("data-auto-formatting")&&"true"==b.getAttribute("data-auto-formatting")&&(b.setAttribute("data-value",b.value),b.setAttribute("data-formatting","done"),b.removeAttribute("data-display-value"));else{c=document.createElement("div");
c.innerHTML=a.responseText;if((e=c.getElementsByTagName("DIV"))&&1<=e.length)for(l=0;l<e.length;l+=1)e[l].id===d&&(g=!0),e[l].id&&"string"===typeof e[l].id&&-1!==e[l].id.indexOf("AJAXCT")&&c.removeChild(e[l]);if(g)z(a);else{a=c.textContent||c.innerText;a=a.replace(/(\t)|(\n)|(^\s+)|(\s+$)/gm,"");if("hidden"===b.type&&b.getAttribute("data-ctl")&&"DatePicker"===JSON.parse(b.getAttribute("data-ctl"))[0])b=b.nextSibling,f.control.PlaceHolder.removeClass(b),b.innerHTML=a;else{b.setAttribute("data-value",
b.value);b.value=a;b.setAttribute("data-formatting","done");b.removeAttribute("data-display-value");try{f.cl&&f.cl.isTouchAble()||!f.u.d.focusElement||document.activeElement===f.u.d.focusElement||f.u.d.focusDomElement(f.u.d.focusElement)}catch(h){}}if(d=document.getElementById(d))d.style.display="none"}}},z=function(d){var b=d.responseText;if(a.value===w){d=document.createElement("div");d.innerHTML=b;var b=a.parentNode,c;"checkbox"==a.type?c="[data-ctl\x3d'Checkbox']":"radio"==a.type?c="[data-ctl\x3d'RadioGroup']":
"textarea"==a.type&&(c=".TextAreaContainer");if("checkbox"==a.type||"radio"==a.type||"textarea"==a.type)c=$(a).closest(c),0<c.length&&(b="textarea"==a.type||"radio"==a.type?c[0]:c[0].parentNode);c=a.name;var k="[id\x3d'"+c+"Error']",e=null;b&&(e=b.querySelector(k));null==e&&"radio"==a.type&&(b=b.parentNode,e=b.querySelector(k));e&&(e.remove(),"function"==typeof findLabelFor&&findLabelFor&&(b=findLabelFor(a))&&f.u.d.removeClass(b,"labelError"),a.hasAttribute("aria-invalid")&&a.setAttribute("aria-invalid",
"false"));if(k=d.querySelector(k))k.remove(),"function"==typeof findLabelFor&&findLabelFor&&(b=findLabelFor(a))&&f.u.d.addClass(b,"labelError"),a.hasAttribute("aria-invalid")&&a.setAttribute("aria-invalid","true");if(!k){"true"!==a.getAttribute("readOnly")&&(b=f.u.d.isContainerDirty(a.parentNode))&&!f.u.d.bModalDialogOpen&&(f.ctx.gSectionReloaded=b);b=a.type;c="checkbox"==b?"[name\x3d'"+c+"'][type\x3d'"+b+"']":"radio"==b?"[id\x3d'"+a.id.replace(/\'/g,"\\'")+"']":"[name\x3d'"+c+"']";c=(d=d.querySelector(c))?
d.value:a.value;if("radio"===b&&(k=a,(e=$(k).closest("div[data-ctl\x3d'RadioGroup']"))&&0<e.length&&e[0]))for(var e=f.util.Dom.getElementsByAttribute("type","radio","INPUT",e[0]),g=0;g<e.length;g++){var l=e[g];k.name===l.name&&(l.defaultChecked=!1)}if("checkbox"==b||"radio"==b)a.defaultChecked=a.checked;else if("text"==b||"textarea"==b)a.defaultValue=c;if("select"==a.tagName.toLowerCase())for(b=a.options,k=0;k<b.length;k++)b[k].value===c?b[k].setAttribute("selected","selected"):b[k].removeAttribute("selected");
var h;if(a.hasAttribute("data-ctl"))try{h=JSON.parse(a.getAttribute("data-ctl"))}catch(m){}h&&Array.isArray(h)&&(-1!=h.indexOf("TextInput")&&!a.hasAttribute("data-formatting")||-1!=h.indexOf("TextArea"))&&(a.value=c);a.setAttribute("value",c);a.removeAttribute("data-old-value");a.dataset.ctl&&-1!=a.dataset.ctl.indexOf("DatePicker")||!a.hasAttribute("data-formatting")||!d.hasAttribute("data-formatting")||a.setAttribute("data-formatting",d.getAttribute("data-formatting"))}if("clientEvent"===q&&(d=document.getElementsByName(a.name))){h=
0;for(b=d.length;h<b;){if(r.src&&"radio"===r.src.type){if(d[h].id===r.src.id)break}else if(d[h].getAttribute("PN"))break;h+=1}h<b&&(b=null,d[h]&&d[h].name&&(b=f.u.property.toReference(d[h].name)),f.u.d.evaluateClientConditions("ELEM",b,void 0,void 0,d[h]))}}},x=function(){},D=function(a,b,c){var d="",e,g;a&&"undefined"!==typeof Grids&&(g=Grids.getActiveGrid(a));e=f.u.d.getSectionDiv(b);if(g&&g.gridcontDiv&&g.gridcontDiv.contains(b)&&e&&e.contains(g.gridcontDiv)){if(c=a.target,e=g.rightBodyTbl.contains(c)?
g.rightBodyTbl:g.leftBodyUL,(c=g.findCell(null,e,c))&&"TH"!==c.tagName&&!c.classList.contains("headerCell")&&window.doGridAction(a,"SETFOCUS"),(e=g.getActiveRowIndex())||(e=""),!(""===e||g.rightBodyTbl&&g.rightBodyTbl.rows&&e>g.rightBodyTbl.rows.length-1)){a=null;if(g.bCategorizedGrid){if(!c||c.parentNode.id)a=g.getRightRow()}else"TH"!==c.tagName&&(a=g.getRightRow());a&&(d=a.hpref||a.id,d={contextPage:f.u.property.toReference(d),pegaRLIndex:e})}}else null==g&&f.u.d.getRepeatObject(b,!0)&&(a=f.u.d.getRepeatRow(b,
!0),d=e.contains(a)&&a.hPref?f.u.property.toReference(a.hPref):f.u.property.toReference(c.substring(0,c.lastIndexOf("$"))));return d};p.initiatePost=function(d,b,c){var k,e,g,l,h,m=!1,p=z,A;q=b;r=void 0;c="undefined"===typeof c?!0:c;"clientEvent"===q?(a=d.src,e=d.ev,r=d):(a=d.target,e=d);b=f.ctxmgr.getCurrentHarnessContext();f.ctxmgr.setContext(f.ctxmgr.getContextByTarget(d.target));if("undefined"!=typeof a&&null!=a&&!a.parentNode&&a.name){var t=f.ctx.dom.getElementsByName(a.name);t&&1<=t.length&&
(a=t[0])}var t=a.classList.contains("multiselect-list")?!0:!1,B=!1,u;a.hasAttribute("data-datetype")&&(u="[data-daterange*\x3d'"+JSON.parse(a.parentNode.dataset.daterange).id+"'] \x3e [data-datetype\x3d'end']",u=$(a).closest(".content-item")[0].parentNode.querySelector(u),B=!0);if("label"===a.tagName.toLowerCase()){if(a=a.control,!a)return}else"textarea"===a.tagName.toLowerCase()&&-1<a.id.indexOf("PEGACKEDITOR")?($.each(f.u.d.harnessElements,function(b,c){if(c.element&&c.element.txtAreaId===a.id)return A=
b,!1}),(g=f.u.d.harnessElements[A].element)&&g.preSubmitFunction(g,!0)):"span"===a.tagName.toLowerCase()&&a.childNodes&&a.childNodes[1]&&"checkbox"===a.childNodes[1].type?a=a.childNodes[1]:"button"==a.tagName.toLowerCase()&&(g=$(a).find("div.pzbtn-mid"),g.length&&(a=g));g=a.name;if(!(!g&&!t||"function"==typeof window.getErrorDB&&window.getErrorDB().isHavingError(g))){w=a.value;if("non-auto"==a.getAttribute("data-ctl")||t)c=!1;(l=a)&&l.name&&(k=f.ctx.dom.getElementsByName(l.name)[0])&&(l=k,"text"==
k.type||"textarea"==k.type)&&(a=k);for(;"RULE_KEY"!==l.id||"MAIN_RULE"!==l.getAttribute("node_type");)if(l=l.parentNode,null===l){m=!0;break}if("clientEvent"===q)r.initializeVariables(),k=r.srcValue;else{k=f.u.d.getDOMElementValue(a);var n=a.getAttribute("data-custom-timezone");n&&"hidden"!==a.type&&(k=f.u.d.CalendarUtil.convertDateTimeBtwnTimezones(a.getAttribute("data-value"),n,f.u.d.TimeZone))}if("undefined"===typeof k||null===k)m=!0;if(!m){m=D(e,a,g);n=null;try{"object"===typeof m?(n=m.pegaRLIndex,
h=m.contextPage):h=m}catch(E){}m=window.SafeURL_createFromURL(f.u.d.url);e=new SafeURL;var v=l.getAttribute("data-postvalue-url");if(!v){var y=l.getAttribute("node_name");(y=l.querySelector("div[node_name\x3d'"+y+"'] \x3e div[data-postvalue-url]"))&&(v=y.getAttribute("data-postvalue-url"))}v?(m.put(v,""),f.u.d.ct_postedProp=g):(m.put("pyActivity","ReloadCell"),m.put("StreamName",l.getAttribute("node_name")));m.put("pyPropertyTarget",g);m.put("updateDOM",c);m.put("BaseReference",f.u.d.getBaseRef(l));
m.put("ContextPage",h);m.put("pzKeepPageMessages","true");null!=n&&m.put("pega_RLindex",n);"clientEvent"!==q&&d&&(h=d.target||d.srcElement,n="",h&&"INPUT"==h.tagName.toUpperCase()?n=h.getAttribute("id"):h&&"LABEL"==h.tagName.toUpperCase()&&(n=h.getAttribute("for")),n&&-1!=n.indexOf("_rdi_")&&(h=n.split("_rdi_")[1])&&m.put("RepeatDynamicIndex",h));"controlEventReadOnly"===q&&(m.put("getReadonlyFormat","true"),d.target.getAttribute("data-auto-formatting")&&"true"==d.target.getAttribute("data-auto-formatting")&&
m.put("doAutoFormatting","true"),f.u.d.focusElement=d.relatedTarget?d.relatedTarget:document.body,p=C);a.hasAttribute("data-template")&&m.put("UITemplatingStatus","Y");window.bClientValidation&&m.put("PVClientVal",!0);t?(e=f.u.d.getQueryString(l),f.control.MultiSelect.removeHandlesAndMakeTokenDirty(!0,l)):B?(e.put(g,k),e.put(u.name,u.value)):e.put(g,k);"hidden"===a.type&&("controlEventReadOnly"===q&&a.getAttribute("data-ctl")&&"DatePicker"===JSON.parse(a.getAttribute("data-ctl"))[0]||(p=x));a.value===
w&&c||(p=x);d={success:p,failure:x,argument:a};f.u.d.asyncRequest("POST",m,d,e)}b&&f.ctxmgr.setContext(b)}}})(p.postValue||(p.postValue={}))})(f.c||(f.c={}))})(pega||(pega={}));