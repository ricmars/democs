(function(N){var la=N.desktop,Db=la.support,r=null,n=N.util.Dom,K=N.u,w=N.u.d,L=N.util.Event,Ta="tabGroupId",Y="PWGadget",B="*",x=document.getElementById("pzWAStrings"),Ua=x?x.getAttribute("data-s9"):"Assignment",ma=x?x.getAttribute("data-s10"):"Work Item",jb=x?x.getAttribute("data-s11"):"New",Zb=x?x.getAttribute("data-s15"):"Next",Y="PegaGadget",kb=x?x.getAttribute("data-s12"):"Opening...",Va=!1,Wa=0,wa=0,Xa=0,xa=0,ya=0,C=0,za=0,lb=function(a){a&&(this.activeClientTab=a)},$b=function(){return this.activeClientTab},
y=function(){return n.getElementsByAttribute.apply(n,arguments)},ca=function(a){try{if(0<=navigator.userAgent.indexOf("Chrome/")){var d=a.newValue||this.getActiveHost(),e=this.getHostContentElement(d);if(e){var f=e.getElementsByTagName("iframe");if(f&&f[0]){var l=f[0],m=l.contentDocument,n=m&&m.getElementById("DesignModePreview");if(!n||n&&0>=m.getElementById("DesignModePreview").offsetHeight)l.style.height=l.offsetHeight-1+"px",setTimeout(function(){l.style.height=""},1)}}}}catch(V){}},Ia=function(){return n.getElementsById.apply(n,
arguments)},na=function(a,d){na.superclass.constructor.call(this,a,d);this.initAttributes(d)},x=pega.widget.Module,da=function(a){da.superclass.constructor.call(this,a);this.initAttributes(a)},D=function(){},Ya=function(a){this.ViewType=a},Za=function(a){this.ViewType=a;this.hostIndex=0};Ya.prototype=new D;pega.extend(na,pega.util.Element,{initAttributes:function(a){void 0!=a.element&&this.setAttributeConfig("element",{value:a.element});this.setAttributeConfig("modules",{value:[],readOnly:!0});this.setAttributeConfig("lastActiveIndex",
{value:a.lastActiveIndex,method:function(d){a.lastActiveIndex=d}});this.setAttributeConfig("activeIndex",{value:a.activeIndex,method:function(a){this.set("activeModule",this.getModule(a))}});this.setAttributeConfig("activeModule",{value:a.activeModule,method:function(a){var d=this.get("activeModule");a&&!a.get("active")&&(a.set("active",!0),a.configVisible(null,[!0]));d&&d!==a&&(d.set("active",!1),d.configVisible(null,[!1]));d&&a!==d||a&&a.set("contentVisible",!0)}})},getModule:function(a){return this.get("modules")[a]},
getIndex:function(a){for(var d=null,e=this.get("modules"),f=0,l=e.length;f<l;++f)if(a==e[f]){d=f;break}return d},addModule:function(a,d){var e=this.get("modules"),f=this.get("element"),l=a.get("element");a.get("contentEl");this.get("activeIndex");l.getAttribute("elementName")&&(a.elementName=l.getAttribute("elementName"));l.getAttribute("tabGroupName")&&(a.tabGroupName=l.getAttribute("tabGroupName"));if(!e)return this._queue[this._queue.length]=["addModule",arguments],!1;this.getModule(d-1);d=void 0===
d?e.length:d;e.splice(d,0,a);f.appendChild(l);a.get("active")?this.set("activeModule",a,!0):a.set("contentVisible",!1,!0);this.addListener.call(this,"click",this.DOMEventHandler)},removeModule:function(a){var d=this.get("modules");a=this.getIndex(a);d.splice(a,1)},DOMEventHandler:function(a){var d=Event.getTarget(a),e=this.GroupDiv,f=this.get("modules"),l;if(Dom.isAncestor(e,d)){for(var m=0,n=f.length;m<n;m++)if(e=f[m].get("element"),d==e||Dom.isAncestor(e,d)){l=f[m];break}l&&l.fireEvent(a.type,a)}},
deselectModule:function(a){this.getModule(a)===this.get("activeModule")&&this.set("activeModule",null)},selectModule:function(a){this.set("activeModule",this.getModule(a))}});pega.extend(da,x,{initAttributes:function(a){this.attr={};this._functionList={};"string"==typeof a&&(a=document.getElementById(a));this.set("element",a);a=new pega.util.Element(this.header);var d=new pega.util.Element(this.body);this.set("head",a);this.set("body",d)},on:function(a,d){this._functionList[a]=d},set:function(a,d){this.attr[a]=
d;"active"==a?this._functionList.activeChange&&this._functionList.activeChange.call(this,{},this):"activeChange"==a&&this._functionList.activeChange&&this._functionList.activeChange.call(this,{},this)},get:function(a){return this.attr[a]}});Za.prototype=new D;pega.lang.augmentObject(Za.prototype,{init:function(){this.startTrackingMRU();var a=y(Ta,B,"div",this.WADiv),d=w.tabViewMap;if(!d||0>=a.length)return null;this.parseDynamicContainerDefinitionTabs(d);this.tabGroupDiv=a[0];a=this.tabGroupDiv.id;
this.tabPosition=this.tabGroupDiv.getAttribute("data-pos");this.stretchedTabs=n.hasClass(this.tabGroupDiv,"stretchedTabs");this.tabView=d[a];if(!this.tabView)return null;var d=this.getHostsArray(),a=this.getHostsArrayLength(),e,f,l;this.hostIndex=a+1;for(e=0;e<a;e++){f=d[e];var m=this.getHostLabel(f);""!=m&&(f.key=m);this.setHostLabel(f,m);m&&this.setHostTitle(f,m);m=this.getHostContentElement(f);pega.util.Event.addListener(m,"keyup",pega.u.d.tabContentAccessibilityHandler,f);n.hasClass(document.body,
"with-fixed-header")&&(l=this.getHostContentElement(f))&&(f=y("harnessNm",B,"div",l))&&((f=f[0])||n.addClass(l,"static-dc-tab"))}this.tabHeaderTemplate=this._getHeaderTemplate();this.tabContentTemplate=this._getContentTemplate()},startTrackingMRU:function(){this.mruCacheObj=pega.ui.mru},parseDynamicContainerDefinitionTabs:function(a){var d,e,f,l,m,n;for(d in a)for(d=a[d],e=d.get("tabs"),f=e.length,l=0;l<f;l++)if(m=e[l],n=m.get("element"),"true"==n.getAttribute("data-dcdt")){e=d.get("activeTab");e==
m&&d.set("activeIndex",0);d.removeTab(m,!0);break}},setWADivReference:function(a){this.WADiv=a},getGroupDiv:function(){return this.tabGroupDiv},getView:function(){return this.tabView},getHeaderHeight:function(){var a,d=0,e=this.tabGroupDiv;for(a=e.parentNode.parentNode.firstChild;a;)1==a.nodeType&&a!=e.parentNode&&(d+=a.offsetHeight,this._hasWASiblings=!0),a=a.nextSibling;return d},hasWASiblings:function(){return this.hasWASiblings},attachHostHandlers:function(a){var d=this.tabView;if(!a)d.on("activeTabChange",
this.resizeHostContent,null,this);if(!1!==pega.u.d.SET_WINDOW_TITLE)d.on("activeTabChange",pega.u.d.updateWindowTitle,null,this);d.on("activeTabChange",ca,null,this);d.on("activeTabChange",this.updateItemMRUCache,null,this)},augmentMenuXMLObj:function(){var a=this.objMenuXML.documentElement.selectSingleNode("//Menu"),d,e,f;this.objMenuXML.createElementNS?(d=this.objMenuXML.createElementNS("","Separator"),e=this.objMenuXML.createElementNS("","Item")):(d=this.objMenuXML.createNode(1,"Separator",""),
e=this.objMenuXML.createNode(1,"Item",""));a.appendChild(d);e.setAttribute("Value","CloseAll");if(d=document.getElementById("pzWAStrings"))f=(f=d.getAttribute("data-s6"))||"Close All";e.setAttribute("Caption",f);e.setAttribute("Tooltip",f);e.setAttribute("onClick","pega.desktop.closeAllDocuments(event);");a.appendChild(e)},switchCloseButton:function(a){var d=a.prevValue,e=this.getHostElement(d),e=y("data-stc",B,"span",e);a=a.newValue;var f=this.getHostElement(a),f=y("data-stc",B,"span",f);d!=a&&(f&&
0<f.length&&(f=f[0],f.style.visibility="visible",f.style.display="inline-block"),e&&0<e.length&&(e=e[0],e.style.visibility="hidden"))},attachStretchBehavior:function(){for(var a=this.getHostsArray(),d=this.getHostsArrayLength(),e=this.tabGroupDiv,f=0;f<d;f++){var l=this.getHostContentElement(a[f]);n.addClass(l,"stretch-if-required")}(a=n.getChildrenBy(e,function(a){return n.hasClass(a,"scrlCntr")})[0])&&n.addClass(a,"reset-stretch-header");(e=n.getChildrenBy(e,function(a){return n.hasClass(a,"yui-content")})[0])&&
n.addClass(e,"reset-stretch-height")},attachCloseBehavior:function(){},attachCloseAllBehavior:function(){this.tabView.onBeforeShowMenu&&this.tabView.onBeforeShowMenu.subscribe(this.augmentMenuXMLObj)},recreateHost:function(){},closeHost:function(){},replaceTab:function(){},getNextHostIndex:function(){return this.hostIndex++},handleMaxHosts:function(a){alert(a);return-1},removeHost:function(a,d){d=this.tabView;this.mruCacheObj.deleteItem(this.getHostElement(a).id);d.removeTab(a,!0);L.purgeElement(this.getHostContentElement(a),
!0);L.purgeElement(this.getHostElement(a),!0)},addHost:function(a,d,e,f,l,m,n,r,w,x,N,C,ma){a||(a="");x=this.tabView;a=this._createTabHeaderElement(r,a,e,f,l,m,n,C,ma);f=this._createTabContentElement(r);r=new K.Tab({labelEl:a,contentEl:f});"undefined"==typeof d&&(d=this.getHostsArrayLength());pega.util.Event.addListener(f,"keyup",function(a){if(9==a.keyCode&&0==a.shiftKey){a=L.getTarget(a).getElementsByTagName("iframe")[0];if("function"===typeof pega.u.d.tabEventOnDocContent)return pega.u.d.tabEventOnDocContent(a);
pega.u.d.focusInsideIframe&&a.contentWindow.pega?a.contentWindow.pega.u.d.focusFirstElement():(a=a.contentDocument.body,a.tabIndex=0,a.focus())}});pega.util.Event.addListener(a,"keydown",pega.u.d.tabAccessibilityHandler);pega.util.Event.addListener(a,"keyup",pega.u.d.tabAccessibilityHandler);x.addTab(r,d);x=this.getHostElement(r);(d=y("data-stc",B,"span",x))&&0<d.length&&(e?(d=d[0],d.Tab=r,L.on(d,"click",w,r)):d[0].parentNode.removeChild(d[0]));(e=y("data-stl",B,"span",x))&&0<e.length&&(e=e[0],e.style.display=
"inline-block");r.skipNextActivationSync=!0;return r},resizeHostContent:function(a){if(!pega.util.Dom.hasClass(document.body,"with-fixed-header")&&w.portal){var d=a.newValue||this.getActiveHost(),e=this.getHostContentElement(d);a=e.getElementsByTagName("iframe");var e=e.style,f=0,l=0,m=this.getHostElement(d),d=m.parentNode;n.inDocument(m)&&("Left"==this.tabPosition||"Right"==this.tabPosition?f=d.offsetWidth:(m=d.style.overflow,l=d.scrollHeight,d.style.overflow=m),e.overflow="auto",parseInt(e.width)!=
ya-f-za&&(e.width=ya-f-za+"px"),parseInt(e.height)!=C-l&&(e.height=C-l+"px","Bottom"!=this.tabPosition||L.isIE||(this.tabGroupDiv.style.height=C-l+"px")),a&&a[0]&&(a=a[0],a=a.style,"visible"!=a.visibility&&(a.visibility="visible")))}},updateItemMRUCache:function(a){var d=a.prevValue;a=a.newValue;var e=d.get("element").id,f=a.get("element").id;d!=a&&(n.inDocument(d.get("element"))&&this.mruCacheObj.addItem(e,d),this.mruCacheObj.addItem(f,a))},reinstateTabTitle:function(a){a=a.newValue;var d=this.getHostTitle(a)||
"";this.setHostTitle(a,d)},_getHeaderTemplate:function(){var a=Ia("HeaderTemplateList",this.tabGroupDiv.Id);return a[a.length-1].firstChild.nodeValue},_getContentTemplate:function(){var a=Ia("BodyTemplate",this.tabGroupDiv.Id),a=a[a.length-1].cloneNode("true");a.id="";return a},_createTabHeaderElement:function(a,d,e,f,l,m,r,w,x){f=this.getNextHostIndex();e=this.tabHeaderTemplate;!0===w&&(e='\x3cli role \x3d "tab" aria-selected\x3d"false" aria-label\x3d"{LBL}" tabindex\x3d"-1" section_index\x3d"{IND}" id\x3d"Tab{IND}" sel_prefix\x3d"tab-li-t-ns" class\x3d"tab-li tab-li-t tab-li-t-ns " \x3e\x3cspan tabindex\x3d"-1" role\x3d"presentation" id\x3d"TABANCHOR"\x3e\x3cspan id\x3d"TABSPAN" class\x3d"textOut tab-span tab-span-t tab-span-t-ns"\x3e\x3cspan class\x3d"textMiddle"\x3e{LBL}\x3c/span\x3e\x3c/span\x3e\x3c/span\x3e\x3c/li\x3e');
m&&""!=m&&(e=e.replace(/{IND}\"/g,'{IND}" elementName \x3d"'+m+'"'));r&&""!=r&&(e=e.replace(/{IND}\"/g,'{IND}" tabGroupName \x3d"'+r+'"'));e=e.replace(/{IND}/g,f);e=e.replace(/{LBL}/g,d);d=document.createElement("div");d.innerHTML=e;pega.u.d.customTabHeaderCache&&pega.u.d.customTabHeaderCache[x]&&(d.querySelector("span[data-stl]").innerHTML=pega.u.d.customTabHeaderCache[x]);a&&y("data-stc",B,"span",d);return n.getFirstChild(d)},_createTabContentElement:function(){return this.tabContentTemplate.cloneNode(!0)},
focusHost:function(a){var d=this.tabView.getTab(this.tabView.get("activeIndex"));d&&d.skipNextActivationSync&&delete d.skipNextActivationSync;this.tabView.set("activeTab",a)},getElement:function(){return this.tabView.get("element")},getHostToFocus:function(a){for(var d=this.mruCacheObj.getItem();d&&!n.inDocument(this.getHostElement(d.data));)this.mruCacheObj.deleteItem(d.id),d=this.mruCacheObj.getItem(d);a=d?d.data:this.getHost(a);this.tabView&&this.tabView.hideTabsMenu();return a},getHostIndex:function(a){return this.tabView.getTabIndex(a)},
getHost:function(a){return this.tabView.getTab(a)},getActiveHost:function(){return this.tabView.get("activeTab")},getHostContentElement:function(a){return a.get("contentEl")},getHostElement:function(a){return a.get("element")},getHostsArray:function(){return this.tabView.get("tabs")},getHostsArrayLength:function(){var a=this.getHostsArray().length;this._extraTabPresent()&&a--;return a},_extraTabPresent:function(){return"Top"!=this.tabPosition||this.stretchedTabs?!1:!0},setHostLabel:function(a,d){a.label=
d;a=this.getHostElement(a);var e=y("data-stl",B,"span",a),f=!1;a.setAttribute("aria-label",d);16<d.length&&(d=d.substring(0,13)+"...",f=!0);0<e.length&&(e=e[0],e.style.cursor="pointer",n.setInnerText(e,d),f&&w.fixTabsWidth(a),n.hasClass(document.body,"with-fixed-header")&&this.tabGroupDiv&&n.hasClass(this.tabGroupDiv,"rotatedTabs")&&w.fixRotate(this.tabView._tabParent,this.tabPosition.toUpperCase(),n.hasClass(this.tabGroupDiv,"stretchedTabs")))},getHostLabel:function(a){var d=a.label,e;d||(d="",e=
this.getHostElement(a),e=y("data-stl",B,"span",e),0<e.length&&(d=n.getInnerText(e[0])),a.label=d);return d},setHostIcon:function(a,d,e){var f=this.getHostElement(a),l=y("data-wi",B,"img",f);if(0<l.length){l=l[0];if(".svg"===d.slice(-4)){var m=new XMLHttpRequest;m.open("get",d,!0);m.onreadystatechange=function(){if(4===m.readyState){var a=m.responseXML.documentElement,a=document.importNode(a,!0);a.style.display="inline";a.style.verticalAlign="middle";a.style.marginRight="3px";l.parentNode.appendChild(a);
l.parentNode.removeChild(l)}};m.send()}else l.src=d,e&&(l.title=l.alt=e),e=l.style,e.display="inline",e.marginRight="3px",e.verticalAlign="middle";a.iconPath=d}},getHostIcon:function(a){a=this.getHostElement(a);a=y("data-wi",B,"img",a);var d=null;0<a.length&&(d=a[0].src);return d},setHostTitle:function(a,d){d=d||"";a.set("title",d);a.ToolTip=d},getHostTitle:function(a){return a.ToolTip},AddDefferredHost:function(){},LoadDefferredHost:function(){},GetNextHostIndex:function(){},ResizeHostContent:function(){},
fixTabsOnBackgroundClick:function(){"Tabbed"==this.ViewType&&n.hasClass(this.tabGroupDiv,"rotatedTabs")&&w.fixRotate(this.tabView._tabParent,this.tabPosition.toUpperCase(),n.hasClass(this.tabGroupDiv,"stretchedTabs"))}});pega.lang.augmentObject(Ya.prototype,{init:function(){this.startTrackingMRU();var a=y("id","moduleGroupDiv","div",this.WADiv);if(0>=a.length)return null;this.moduleGroupDiv=a[0];this.moduleView=new na(this.moduleGroupDiv,{});this.moduleView.on("activeModuleChange",this.onActivate,
this.moduleView,this);this.moduleView.on("activeModuleChange",ca,this.moduleView,this);if(!1!==pega.u.d.SET_WINDOW_TITLE)this.moduleView.on("activeModuleChange",pega.u.d.updateWindowTitle,this.moduleView,this);if(!this.moduleView)return null;a=new da("staticModule");this.moduleView.addModule(a);this.moduleView.set("activeIndex",0);this.hostIndex=this.getHostsArrayLength()+1},startTrackingMRU:function(){this.mruCacheObj=pega.ui.mru},onActivate:function(a,d){this.updateItemMRUCache(a);if(a.prevValue==
a.newValue)if(a.newValue&&a.newValue.activationSyncRequired)delete a.newValue.activationSyncRequired;else if(a.newValue&&a.newValue.skipNextActivationSync){delete a.newValue.skipNextActivationSync;return}var e="false",f=null;if(pega.web&&pega.web.api&&a.prevValue){var l=pega.web.api.doAction(a.prevValue.GadgetName,"getUIDoc");l&&(e=l.isFormDirty(!1));f={prevContentID:a.prevValue.elementName,prevRecordkey:a.prevValue.key,prevFormDirty:e}}var m=d.getIndex(a.prevValue),e=null;d.set("lastActiveIndex",
m);if(a.newValue&&a.newValue.skipNextActivationSync)delete a.newValue.skipNextActivationSync;else if(a.newValue.tabGroupName||a.newValue.docGroupName||a.newValue.elementName||a.newValue.removedTabName||a.newValue.removedTabsTabGroup)null==m&&((e=a.newValue.removedDocumentIndex)||(e=d.get("modules")?d.get("modules").length+1:null),e={dynamicContainerID:a.prevValue.tabGroupName,tabIndex:e},e.dynamicContainerID||(e.dynamicContainerID=a.prevValue.docGroupName)),a.newValue&&(m="false",pega.web&&pega.web.api&&
a.prevValue&&(l=pega.web.api.doAction(a.newValue.GadgetName,"getUIDoc"))&&a.newValue.key==l.documentKey&&(m="true"),d={dynamicContainerID:a.newValue.tabGroupName,tabIndex:d.getIndex(a.newValue)+1,label:a.newValue.label,key:a.newValue.key,iconPath:a.newValue.iconPath,isDocumentKey:m},!d.dynamicContainerID&&a.newValue.docGroupName&&(d.dynamicContainerID=a.newValue.docGroupName),a.newValue.actionDef&&"undefined"!=a.newValue.actionDef&&a.newValue.actionDef.className&&"undefined"!=a.newValue.actionDef.className&&
(d.className=a.newValue.actionDef.className),l=l||pega.u.d,l.sendReqToUpdateElementModal(d,"ACTIVE",e,f,a))},setWADivReference:function(a){this.WADiv=a},getGroupDiv:function(){return this.moduleGroupDiv},getHeaderHeight:function(){return 0},hasWASiblings:function(){return this._hasWASiblings},getView:function(){return this.moduleView},getLastActiveIndex:function(){return this.moduleView.get("lastActiveIndex")},attachHostHandlers:function(a){},attachStretchBehavior:function(){for(var a=this.getHostsArray(),
d=this.getHostsArrayLength(),e=this.tabGroupDiv,f=0;f<d;f++){var l=this.getHostContentElement(a[f]);n.addClass(l,"stretch-if-required")}(a=n.getChildrenBy(e,function(a){return n.hasClass(a,"scrlCntr")})[0])&&n.addClass(a,"reset-stretch-header");(e=n.getChildrenBy(e,function(a){return n.hasClass(a,"yui-content")})[0])&&n.addClass(e,"reset-stretch-height")},attachCloseBehavior:function(){},attachCloseAllBehavior:function(){},getNextHostIndex:function(){return this.hostIndex++},handleMaxHosts:function(a){var d=
this.getNextCandidateIndex();-1==d&&alert(a);return d},getNextCandidateIndex:function(){var a=pega.ui.ChangeTrackerMap.getTracker().getPropertyValue("Declare_pyDisplay.pyDisplay("+pega.u.d.portalName+").pyCandidateIndices"),d,e,f,l,m=-1;try{d=JSON.parse(a)}catch(yc){return m}e=d.length;for(a=0;a<e;a++)if(l=parseInt(d[a],10)-1,f=this.getHost(l),f=f.GadgetName,(f=r.doAction(f,"getUIDoc"))&&!f.isFormDirty(!1)){m=l;break}else if(!f){m=l;break}return m},removeHost:function(a,d){this.mruCacheObj.deleteItem(a.get("element").id);
this.moduleView.removeModule(a,!0);a.cfg&&a.destroy()},addHost:function(a,d,e,f,l,m,r,w,B,y,x){"undefined"==typeof d&&(d=this.getHostsArrayLength());a=document.createElement("div");a.id="module"+d;a.style.display="none";a.elementName=m;a.tabGroupName=r;n.hasClass(document.body,"with-fixed-header")&&n.addClass(a,"iframe-wrapper");a.innerHTML='\x3cdiv class\x3d"hd"\x3e\x3c/div\x3e\x3cdiv class\x3d"bd dynamicContainer"\x3e\x3c/div\x3e\x3cdiv style\x3d"display:none;" class\x3d"ft"\x3e\x3c/div\x3e';m=
new da(a);this.moduleView.addModule(m,d);m.skipNextActivationSync=!0;return m},resizeHostContent:function(a){if(this.ViewType&&"NoHeader"==this.ViewType&&!pega.u.d._isJSResizeEnabled()&&!n.hasClass(document.body,"with-fixed-header")&&(a=this.getActiveHost(),a=this.getHostContentElement(a)))for(;a&&"PEGA_LU_C"!=a.id;){if("100%"!=a.style.height)a.style.height="100%";else break;a=a.parentElement}},updateItemMRUCache:function(a){var d=a.prevValue;a=a.newValue;var e=d?d.get("element").id:-1,f=a?a.get("element").id:
-1;d!=a&&-1!=e&&(n.inDocument(d.get("element"))&&this.mruCacheObj.addItem(e,d),-1!=f&&this.mruCacheObj.addItem(f,a))},_getHeaderTemplate:function(){},_getContentTemplate:function(){},_createTabHeaderElement:function(a,d,e,f,l,m,n){},_createTabContentElement:function(){},focusHost:function(a){this.moduleView.set("activeModule",a);this.resizeHostContent({})},getElement:function(){return this.moduleView.get("element")},getHostToFocus:function(a){for(var d=this.mruCacheObj.getItem();d&&!n.inDocument(this.getHostElement(d.data));)this.mruCacheObj.deleteItem(d.id),
d=this.mruCacheObj.getItem(d);return d?d.data:this.getHost(a)},getHostIndex:function(a){return this.moduleView.getIndex(a)},getHost:function(a){return this.moduleView.getModule(a)},getActiveHost:function(){return this.moduleView.get("activeModule")},getHostContentElement:function(a){return a.get("body").get("element")},getHostElement:function(a){return a.get("head").get("element")},getHostsArray:function(){return this.moduleView.get("modules")},getHostsArrayLength:function(){return this.getHostsArray().length},
setHostLabel:function(a,d){a.get("head").Label=d;a=this.getHostElement(a);a=y("data-stl",B,"span",a);16<d.length&&(d=d.substring(0,13)+"...");0<a.length&&(a=a[0],a.style.cursor="pointer",n.setInnerText(a,d))},getHostLabel:function(a){var d=a.get("head"),e=d.Label;e||(e="",a=this.getHostElement(a),a=y("data-stl",B,"span",a),0<a.length&&(e=n.getInnerText(a[0])),d.Label=e);return e},setHostIcon:function(a,d,e){a.get("head");a=this.getHostElement(a);var f=y("data-wi",B,"img",a),l;if(0<f.length){f=f[0];
if(".svg"===d.slice(-4)){var m=new XMLHttpRequest;m.open("get",d,!0);m.onreadystatechange=function(){if(4===m.readyState){var a=m.responseXML.documentElement,a=document.importNode(a,!0);a.style.display="inline";a.style.verticalAlign="middle";f.parentNode.appendChild(a);f.parentNode.removeChild(f)}};m.send()}else f.src=d,e&&(f.title=f.alt=e),l=f.style,l.display="inline",l.verticalAlign="middle";l.iconPath=d}},getHostIcon:function(a){a.get("head");a=this.getHostElement(a);a=y("data-wi",B,"img",a);var d=
null;0<a.length&&(d=a[0].src);return d},setHostTitle:function(a,d){d=d||"";a.get("head").set("title",d);a.get("head").ToolTip=d},getHostTitle:function(a){return a.get("head").ToolTip}});D.prototype.getActiveIndex=function(){return this.getView().get("activeIndex")};D.prototype.getHostContentElement=function(a){return a.get("contentEl")};D.prototype.getHostElement=function(a){return a.get("element")};K.WorkAreaGadget=new function(){this.setSkipDocumentReload=function(){Va=0<arguments.length?"true"==
arguments[0]?!0:!1:!0};var a=null,d=null,e=8,f=[],l=[],m={show:function(){},hide:function(){}},x=null,V=null,D="top",da=0,na=!1,ca="Work Object Already Open",Ja=pega.u.d.multiDocConflictDialogTemplate||"{0}:{1}\n\n{2}{3} {4}\n\n{5}",Aa="{0}\n\n{1}",xb="{0}\n\n{1}",Eb="",z=!0,t=null,$a="OpenPortal",W=null,Ka=null,sa=null,Fb=null,Ba=null,Ca=null,La=!1,ea=!1,Gb={},Hb={},Ib=function(){if(null!=d)return!0;var b=a.getAttribute("data-mode");"Tabbed"==b?d=new Za("Tabbed"):"NoHeader"==b&&(d=new Ya("NoHeader"),
Ta="id",B="moduleGroupDiv",yb());d.setWADivReference(a);d.init();V=y(Ta,B,"div",a);B="*";null!=V&&(V=V[0]);D=V.getAttribute("data-pos");ac();return null!=d},ac=function(){var b,a,c;a=(a=document.getElementById("WAMaxtabs"))?a.getAttribute("value"):e;e=parseInt(a,10);maxDocsWarning=document.getElementById("WAMaxtabs").getAttribute("data-ml");if(b=document.getElementById("pzWAStrings"))ca=b.getAttribute("data-s2"),a=b.getAttribute("data-s3"),c=b.getAttribute("data-s4"),b=b.getAttribute("data-s5"),Ja=
Ja.replace("{0}",a).replace("{4}",c).replace("{5}",b),Aa=Aa.replace("{0}",ca).replace("{1}",b);ea?d.attachStretchBehavior():w.portal&&(a=w.portal.layoutObj.getUnitByPosition("center").body,c=Jb(a),Wa=c.paddingLeft+c.paddingRight,wa=c.paddingTop+c.paddingBottom,Xa=c.borderLeft+c.borderRight,xa=c.borderTop+c.borderBottom,c=Jb(d.getGroupDiv()),Wa+=c.paddingLeft+c.paddingRight,wa+=c.paddingTop+c.paddingBottom,Xa+=c.borderLeft+c.borderRight,xa+=c.borderTop+c.borderBottom,da=d.getHeaderHeight(),na=d.hasWASiblings(),
za=w.portal.layoutObj.getSizes().center.w-a.offsetWidth,w.registerResize(Ma),z&&!na&&L.addListener(a,"scroll",bc,a,this),w.portal.layoutObj.on("resize",Ma,this,!0));d.attachHostHandlers(ea);d.attachCloseBehavior();d.attachCloseAllBehavior()},cc=function(){for(var b=a.parentNode;b&&!n.hasClass(b,"stretch-if-required")&&!n.hasClass(b,"stretch-panel-content");)n.addClass(b,"stretch-if-required"),b=b.parentNode},bc=function(b,h){a&&0==a.offsetHeight||(h.scrollTop=0)},dc=function(){if(!n.inDocument(a))return!0;
if(z){if(!n.isAncestor(a,d.getElement()))return!0}else if(!n.isAncestor(a,t))return!0;return!1},ab=function(){if(N.web&&N.web.api){!1===pega.u.d.SET_WINDOW_TITLE||pega.u.d.portalDefaultTitle||(pega.u.d.portalDefaultTitle=document.title);La||(La=!0,w.attachOnload(function(){ab.call(ta)},!0));r=N.web.api;var b=Db.getDesktopApplication(),b=b?b.gadgetPool:null,h;Ca=w.fieldValuesList;if(b&&(h=b.findAvailableGadget())){if(this!=h){ec(w.tabViewMap);return}if(dc())t=d=null;else{this.onBrowserRefresh||Da();
return}}if(Kb()){if(z="0"!=a.getAttribute("data-multiview")){if(!Ib())return;fc();if(b=document.getElementById("customTabHeaderInfo"))pega.u.d.customTabHeaderCache={},pega.u.d.customTabHeaderCache=JSON.parse(b.textContent),b.parentNode.removeChild(b);var b=document.getElementById("docsRecreateInfo"),c={};pega.ui.busyIndicator&&null==m&&(m=new pega.ui.busyIndicator("",!0,null));b&&(c=JSON.parse(b.textContent));var k=0,q=!1;8<pega.util.Event.isIE&&(q="BackCompat"===document.compatMode);if(8>=pega.util.Event.isIE||
q)for(var g in c)c.hasOwnProperty(g)&&k++;else k=Object.keys(c).length;1>k?Da():b&&(gc(c),b.parentNode.removeChild(b))}else Eb=Ca.get("Continue_work_Warning")+"\n\n"+Ca.get("Wish_to_Continue"),yb(),null!=t&&"rule-html-harness"==sa&&Lb();this!=h&&(la.registerDocumentGadget(this),la.registerEventListener("DesktopAction",hc),this.gadgetAvailable=!0,this.onGadgetDomReady=Mb,this.onGadgetDomLoad=ic,this.onGadgetClose=jc,ea||(this.onGadgetResize=Nb),K.WorkAreaGadget=this);ea?cc():Ma()}}},gc=function(b){var a=
pega.ui.HarnessContextMgr,c=b.length,k,q=0,g,u,v,e=[],A=[],f=[];if(0==d.getHostsArrayLength()){v=!1;for(g=0;g<c;g++)if(k=b[g],"false"==k.pyIsStatic){v=!0;break}if(!v)return}v=!1;for(g=0;g<c;g++)if(k=b[g],"true"==k.pyIsActive){v=!0;break}!v&&b&&0<b.length&&(b[q].pyIsActive="true");for(g=0;g<c;g++){k=b[g];"string"==typeof k.pyThreadId&&(u=k.pyThreadId,v=u.indexOf("TABTHREAD"),a.set("portalID",u.substring(0,v)),-1!=v&&(v+=9),k.pyThreadId=parseInt(u.substring(v)));window.gIsCustomTabHeaderEnabled&&"true"==
k.pyIsAssociateReqThread&&"true"!=k.pyRecordKeyExist&&(pega.u.d.customTabHeaderCache||(pega.u.d.customTabHeaderCache={}),u=pega.u.d.getThreadName(),u=pega.ctx.pxReqURI.replace(u,k.pyThreadName),u=SafeURL_createFromURL(u),u.put("pyActivity","ReloadSection"),u.put("StreamName","pyCustomDCTabSection"),u.put("StreamClass","Rule-HTML-Section"),u.put("pzPrimaryPageName",k.pzPrimaryHarnessPageName),u.put("AJAXTrackID",pega.ui.ChangeTrackerMap.getTracker().id),pega.u.d.customTabHeaderCache[k.pyThreadName]=
httpRequestAsynch(u.toURL(),""));"true"==k.pyIsActive&&(q=k.pyIndex-1);"false"==k.pyIsStatic?(pega.ui.WorkAreaGadget.onBrowserRefresh=!0,k.isDefferedHost=!0,Ea(k,k.pyIndex-1)):"Harness"==k.pyType&&("true"==k.pyIsActive?"NoHeader"!=d.ViewType?(k.isDefferedHost=!0,Ea(k,k.pyIndex-1)):Da():f.push(g));u=parseFloat(k.pyLastActiveTimeinMS);if(isNaN(u)||""==u)u=0;e.push(u);A.push(u)}e.sort();q>d.getHostsArrayLength()-1&&(q=0);a=d.getHost(q);F(a);for(var p in f)k=b[f[p]],k.isDefferedHost=!0,Ea(k,k.pyIndex-
1);for(u in e)0!=u&&(g=$.inArray(e[u],A),-1<g&&(b=d.getHost(g),f=b.get("element").id,d.mruCacheObj.addItem(f,b)))},Ea=function(b,a){var c=b.pyLabel,h=b.pyIconPath,q=b.pyElementName,g=b.pyTabGroupName,u=b.pyThreadName,v=!1;"false"!=b.pyIsStatic||"Harness"!=b.pyType&&!b.pyParameters.harnessName?(v=!0,a=d.getHost(a)):(a=Ob(c,a,!0,null,null,q,g,!0,null,u),a.key="true"!=b.generatedKey&&"true"!=b.replaceCurrent?b.pyKey:b.pyLabel);b&&"true"==b.pyRecordKeyExist&&"true"==b.pyIsAssociateReqThread&&(a.shouldCreateAssociateRequestor=
!0);pega.u.d.customTabHeaderCache&&pega.u.d.customTabHeaderCache[u]||!c||v||Z(a,c);pega.u.d.customTabHeaderCache&&pega.u.d.customTabHeaderCache[u]||!h||""==w.trim(h)||Q(a,h);a.pyStreamName=b.pyStreamName;a.ThreadId=b.pyThreadId;a.ThreadName=b.pyThreadName;a.docObj=b;threadID=b.pyThreadId;Pb(threadID);a.on("activeChange",kc,a)},Pb=function(b){if(void 0!=b){for(var a=f.length,c=0;c<a;c++)if(f[c]==b){f.splice(c,1);break}l[b]=b}},kc=function(b,a){if(1!=a.pyLoaded){b=a.docObj;var c=b.pyAction,h=b.pyStreamName,
d=b.pzPrimaryHarnessPageName,g=b.pzPrimaryHarnessPageClass,u=b.pyThreadId,v=b.pyElementName,e=b.pyTabGroupName,A=b.pyParameters;A&&(delete A.pyActivity,delete A.streamKeys,delete A.streamKeys2,delete A.prevContentID,delete A.prevRecordkey,delete A.contentID,delete A.dynamicContainerID,delete A.action,delete A.AJAXTrackID,delete A.PRXML,delete A.pzTransactionId,delete A.pxCurrentTrackerValues,delete A.currentFunctionsMap,delete A.pyListViewOutput,delete A.pyListViewIsEmbedded);for(var f in A){var p=
A[f];null!=p&&void 0!=p&&-1==f.indexOf("selUniqMap")&&-1==f.indexOf("EXPANDEDSubSection")||delete A[f]}if(b&&a.removedDocumentIndex){var l,m;l=a.docObj;f=l.pyIndex;p=a.removedDocumentIndex;p<f&&--f;l={dynamicContainerID:l.pyTabGroupName,tabIndex:f,label:l.pyLabel,key:l.pyKey,iconPath:l.pyIconPath,className:l.pyClassName,isDocumentKey:!1};removedTab={tabIndex:p,fromClosingDocumentAfterF5:!0};m={prevContentID:a.removedDocumentName,prevRecordkey:a.removedDocumentKey,prevFormDirty:!1};p!=f||a.skipNextActivationSync||
(a.skipNextActivationSync=!0);w.sendReqToUpdateElementModal(l,"CLOSE",removedTab,m);delete a.removedDocumentIndex;delete a.removedDocumentName;delete a.removedDocumentKey}if("true"==b.pyIsStatic&&"Harness"==b.pyType)pega.ui.WorkAreaGadget.onBrowserRefresh=!1,!a.key&&a.label&&(a.key=a.label),Da();else if(a.pyLoaded=!0,"display"==c||"Display"==c){p=b.pyActionAPI;a=b.pyLabel;c=p.pyReadOnly;l=p.pyKey;m=p.pyActivity;var n=p.preActivityParams,h=p.model,g=p.pyCoverClass,A=p.pyHarnessName,t=b.openlanding;
f={};h&&(p.pyDataTransformDynamicParams&&(f.pyDataTransformDynamicParams=encodeURIComponent(p.pyDataTransformDynamicParams)),h=encodeURIComponent(h));n&&(p.preActivityDynamicParams&&(f.preActivityDynamicParams=encodeURIComponent(p.preActivityDynamicParams)),n=encodeURIComponent(n));f.replaceCurrent=!1;f.isWAStaticHarness=!1;if("true"==b.pyIsStatic&&"Harness"==b.pyType)pega.ui.WorkAreaGadget.onBrowserRefresh=!1;else if(f.skipConflictCheck=!0,f.ThreadId=u,f.fromLoadDeferDoc=!0,""==t||null==t)f.isSHActionReplaceCurrent=
"true"==b.replaceCurrent?"true"!=b.pyRecordKeyExist?!0:!1:!1,c="0"==c||"false"==c?"false":"true",bb(A,g,d,c,h,f,"",a,m,n,l,c,v,e);else{u=p.levelA||"";l=p.levelB||"";m=p.levelC||"";p=p.paramKeys;n={};if("undefined"!=typeof p&&p)for(var p=p.replace(/&amp;/g,"\x26"),t=p.split("\x26"),r=0;r<t.length;r++)n[t[r]]=b.pyActionAPI[t[r]];Sb(A,g,d,c,h,"Display",u,l,m,f,"",a,v,e,n,p)}}else"true"==b.pyRecordKeyExist?Tb(b.pyRecordKey,A,null,v,e,a):mc(h,d,g,u,A,v,e,a)}},Kb=function(){if(!a||!n.inDocument(a.parentNode)){a=
Ia("workarea");if(!a||0>=a.length)if(a=y("node_name","pxWorkArea","div"),0>=a.length)return null;a=a[0];ea=n.hasClass(a,"stretch-if-required");a.setAttribute("data-nsr",ea);if(n.hasClass(a,"with-fixed-header")){n.addClass(document.body,"with-fixed-header");var b=a.getAttribute("data-mode");"NoHeader"==b||"SingleView"==b?$(".screen-layout-region-main-middle").addClass("dc-screen-layout-region-main-middle-notab"):n.hasClass(a,"dc-wrapper-left")||n.hasClass(a,"dc-wrapper-right")?$(".screen-layout-region-main-middle").addClass("dc-screen-layout-region-main-middle-with-left-right-tabs"):
(b=a.getAttribute("data-tabformat"),$(".screen-layout-region-main-middle").addClass("dc-screen-layout-region-main-middle-tab"),b&&(b=b.toLowerCase(),$(".screen-layout-region-main-middle").addClass("dc-"+b+"-tabs")))}}return a},yb=function(){t&&r.removeGadget(t.getAttribute(Y));t=$(a).children().first()[0];null==t&&(t=document.createElement("div"),a.appendChild(t));var b=a.getAttribute("data-threadname");null!=b&&""!=b?$a=b:(b=pega.ctx.portalID,$a=null!=b&&""!=b?b+"TABTHREAD0":"TABTHREAD0");W=a.getAttribute("data-documentname");
Ka=a.getAttribute("data-documentclass");sa=a.getAttribute("data-documenttype").toLowerCase();Fb=a.getAttribute("data-documentusingpage");Ba=a.getAttribute("data-documentmodel");t.setAttribute(Y,"PR_"+W);t.setAttribute("PegaResize","fill");t.setAttribute("PegaE_onLoad","pega.ui.WorkAreaGadget.onGadgetDomLoad");t.setAttribute("PegaE_onClose","pega.ui.WorkAreaGadget.onGadgetClose");t.setAttribute("id","PR_"+W);t.setAttribute("PegaThread",$a);"rule-html-harness"==sa&&(t.setAttribute("PegaA_harnessName",
W),t.setAttribute("PegaA_className",Ka));ea||t.setAttribute("PegaE_onResize","pega.ui.WorkAreaGadget.onGadgetResize");r.addGadget(t,window);b=a.getAttribute("data-mode");K.busyIndicator&&"NoHeader"!=b&&(b=t,m=new K.busyIndicator("",!0,b));return t},M=function(){for(var b=n.getChildren(t),a=b.length,c=null,d=null,q=0,g;q<a;q++)g=b[q],"RULE_KEY"==g.id&&g.getAttribute("node_name")==W?c=g:"iframe"==g.tagName.toLowerCase()&&(d=g);c&&(c.style.display="none");d&&(d.style.display="block");I(!0);r.doAction.apply(r,
arguments)},ec=function(b){var a,c,d,q,g,u;for(a in b)for(a=b[a],c=a.get("tabs"),d=c.length,q=0;q<d;q++)if(g=c[q],u=g.get("element"),"true"==u.getAttribute("data-dcdt")){c=a.get("activeTab");c==g&&a.set("activeIndex",0);a.removeTab(g,!0);break}},Da=function(){var b,a=0,c,k,q,g,u={},v,e;try{if(b=d.getHostsArray())for(a=0;a<b.length;a++)if(1==b[a].focusRequired&&(v=b[a]),e=d.getHostContentElement(b[a])){var f=y("harnessNm",B,"div",e);if(f&&(f=f[0])&&"HarnessTab"==f.id&&!f.HarnessLoaded){c=f.getAttribute("harnessNm");
k=f.getAttribute("harnessCls");g=f.getAttribute("dataTransfm");q=d.getHostLabel(b[a]);u.skipConflictCheck=!0;u.isWAStaticHarness=!0;u.ThreadId=b[a].ThreadId;f.HarnessLoaded=!0;if(!v)for(var l=a+1;l<b.length;l++)1==b[l].focusRequired&&(v=b[l]);v?(delete v.focusRequired,v&&F(v)):(bb(c,k,null,"",g,u,{},q,"","","","",b[a].elementName,b[a].tabGroupName),d.getHostIndex(b[a]))}}}catch(p){}},hc=function(b){if(!Kb()||z&&!Ib()||!(z||t&&n.inDocument(t)||yb()))return!1;var a={},c={},k=b.get("api"),q,g,u,v,e,
f,l,p,m,Qb,Rb,Ab,x,mb,nb,Bb,Cb,L,N,C,D,K,W,X,da,ea,V,H,G,na,Q,ba;a.systemID=b.get("systemID");a.appName=b.get("appName");a.thread=b.get("thread");c.label=b.get("label");c.skipConflictCheck=b.get("SkipConflictCheck");c.isWAStaticHarness=b.get("WAStaticHarness");c.reload=b.get("reload");k=b.get("api")||"";b.get("tenantData")&&(a.tenantData=b.get("tenantData"));b.get("paramsObj")&&(a.paramsObj=b.get("paramsObj"));switch(k){case "openRuleByKeys":H=b.get("contentID");G=R(b);nc(b,a,g,H,G);break;case "openRuleByClassAndName":H=
b.get("contentID");G=R(b);oc(b,a,g,H,G);break;case "openRuleSpecific":H=b.get("contentID");G=R(b);pc(b,a,g,H,G);break;case "openAssignment":q=b.get("param");g=b.get("paramObject");H=b.get("contentID");G=R(b);qc(q,c,a,g,H,G);break;case "openWorkByHandle":q=b.get("param");H=b.get("contentID");G=R(b);Tb(q,c,a,H,G);break;case "openWorkByURL":G=R(b);b.put("dynamicContainerID",G);z?(b.get("contentID")||b.put("contentID",ob()),E(ma,{close:"yes"},{action:"openWorkByURL",url:b,configObj:a})):S(t.id)&&M(t.id,
"openWorkByURL",b.toURL(),c,a);break;case "createNewWork":L=b.get("FlowType");N=b.get("param");var fa={},ga=b.keys(),ha;for(ha in ga)"className"!=ga[ha]&&"HarnessVersion"!=ga[ha]&&"flowType"!=ga[ha]&&"api"!=ga[ha]&&"param"!=ga[ha]&&"version"!=ga[ha]&&"FlowType"!=ga[ha]&&(fa[ga[ha]]=b.get(ga[ha]));fa.dynamicContainerID&&""!=fa.dynamicContainerID||(fa.dynamicContainerID=R(b));rc(N,L,c,a,fa);break;case "display":case "showHarness":na=b.get("name");u=b.get("ClassName")||b.get("className");Q=b.get("HarnessName")||
b.get("harnessName");x=b.get("page");mb=b.get("model");v=b.get("readOnly");e=b.get("preActivityName");f=b.get("preActivityParams");l=b.get("key");v=b.get("readOnly");H=b.get("contentID");G=R(b);c.preActivityDynamicParams=b.get("preActivityDynamicParams");c.pyDataTransformDynamicParams=b.get("pyDataTransformDynamicParams");c.replaceCurrent=b.get("replaceCurrent");c.bSubmit=b.get("bSubmit");c.skipReload=b.get("pySkipReload");bb(Q,u,x,v,mb,c,a,na,e,f,l,v,H,G);break;case "openLanding":u=b.get("className");
Q=b.get("harnessName");p=b.get("Action");m=b.get("levelA");Qb=b.get("levelB");Rb=b.get("levelC");fa=b.get("customParam");Ab=b.get("landingPageTitle");x=b.get("page");mb=b.get("model");v=b.get("readOnly");H=b.get("contentID");G=R(b);ba=b.get("paramKeys");b.get("flowName")&&("undefined"==typeof fa&&(fa={}),fa.flowName=b.get("flowName"));Sb(Q,u,x,v,mb,p,m,Qb,Rb,c,a,Ab,H,G,fa,ba);break;case "reportDefinition":W=b.get("ReportClass");X=b.get("ReportName");da=b.get("ShortcutHandle");H=b.get("contentID");
ea=b.get("pyReportDisplay");V=b.get("ReportAction");c.replaceCurrent=b.get("replaceCurrent");ba=b.get("ParamKeys");x=b.get("page");G=R(b);var Fa=da,la=ba,Y=c.replaceCurrent,ya=H,za=G;ia();b.put("Format","harness");var Oa="",ja,ca={};if("undefined"!=typeof la&&null!=la){var sa=la.split("\x26"),ta;for(ta in sa){var Da=sa[ta].split("\x3d");ca[Da[0]]=Da[1]}}if("new"==V){if("undefined"==typeof Fa||""==Fa)Fa="*"+d.getNextHostIndex()}else if("undefined"==typeof Fa||""==V||"open"==V)Fa=W+"!"+X;Oa="RunReport-"+
Fa;if(null==Y||"undefined"==typeof Y||""==Y)Y="false";var O={action:"reportDefinition",key:b,configObj:a,reportClass:W,reportName:X,reportTitle:"Report",reportParams:ca,reportDisplayMode:ea,shortcutHandle:Fa,reportAction:V,contentID:ya,dynamicContainerID:za};z?"true"==Y?(ja=ka(),T(ja,"Report",{close:"yes",key:Oa,doNotSetTitle:!0},O)):(ja=P(Oa,a.systemID))?ja.actionDef&&ja.actionDef.reportParams&&ca&&JSON.stringify(ja.actionDef.reportParams)!==JSON.stringify(ca)?(F(ja),T(ja,"Report",{close:"yes",key:Oa,
doNotSetTitle:!0},O)):(F(ja),I(!1)):ja=E("Report",{close:"yes",key:Oa,doNotSetTitle:!0},O):S(t.id)&&M(t.id,"reportDefinition",{close:"yes",key:Oa},O.configObj,O.reportClass,O.reportName,O.reportDisplayMode,O.reportTitle,O.shortcutHandle,O.reportAction,O.reportParams,O.contentID,O.dynamicContainerID,O.hostName);break;case "openWizard":nb=b.get("name");Bb=b.get("queryString");Cb=b.get("wizardLabel");H=b.get("contentId");G=R(b);Cb?Ub(nb,Bb,Cb,c,H,G):Ub(nb,Bb,void 0,c,H,G);break;case "openWorkItem":H=
b.get("contentID");G=R(b);C=b.get("param");D=b.get("workpool")?b.get("workpool"):Db.getCurrentWorkPool();var qa=H,ra=G,Ga=void 0;ia();if(z){var cb,va;cb=(D+" "+C).toUpperCase();Ga?T(Ga,ma,{close:"yes",key:cb},{action:"openWorkItem",workID:C,workPool:D,configObj:a,contentID:qa,dynamicContainerID:ra}):(Ga=P(cb,a.systemID))?(F(Ga),Ga.docObj||("true"==c.reload?va="yes":"true"!=c.skipConflictCheck&&(va=db(Ga)),"yes"==va?T(Ga,ma,{close:"yes",key:cb},{action:"openWorkItem",workID:C,workPool:D,configObj:a,
contentID:qa,dynamicContainerID:ra}):I(!1))):E(ma,{close:"yes",key:cb},{action:"openWorkItem",workID:C,workPool:D,configObj:a,contentID:qa,dynamicContainerID:ra})}else S(t.id)&&(D&&(c.workPool=D),M(t.id,"openWorkItem",C,c,a,qa,ra));break;case "getNextWork":H=b.get("contentID");G=R(b);sc(c,a,H,G);break;case "showUserWorkList":u="@baseclass";Q="ShowUserWorklist";c.UserID=b.get("param");bb(Q,u,null,null,null,c,a);break;case "refresh":if(z){var Ta=ka(),Wa=U(Ta);r.doAction(Wa,"reload");I(!1)}else M(t.id,
"reload");break;case "ClearIndicators":I(!1);break;case "WorkLoaded":I(!1);break;case "setDocumentLabel":var wa=c.label;if(z){var wa=wa||"",Xa=ka();Z(Xa,wa)}break;case "setDocumentKey":var pb=b.get("key");if(z){var pb=pb||"",xa=ka();xa.attribs&&(xa.attribs.key=pb,xa.key=pb)}break;case "submitDocumentContent":var Ia=b.get("callbackFn");if(z){var Ya=ka(),Za=d.getHostContentElement(Ya);w.postData(Za,Ia)}else w.postData(tc(),Ia);break;case "CloseAllDocuments":var Ja=b.get("event");if(z&&d.tabView){var Aa=
pega.util.Event.getTarget(Ja),$a=Aa.id,Pa,qb,Ka,rb,sb,eb,ua,Qa,Ba,Ca,La,Ma;Aa.id="close";Pa=d.getHostsArray();qb=d.getHostsArrayLength();gCloseAllTabsInProgress=!0;for(ua=0;ua<qb;ua++)for(Ka=d.getHostsArrayLength(),Qa=0;Qa<Ka;Qa++)if(rb=d.getHostElement(Pa[Qa]),(sb=y("data-stc",B,"span",rb))&&0<sb.length&&(eb=r.doAction(U(Pa[Qa]),"getUIDoc"),!eb||!eb.isFormDirty(!1))){oa(Ja,Pa[Qa],!0);break}gCloseAllTabsInProgress=!1;Aa.id=$a;Ba=!1;qb=d.getHostsArrayLength();for(ua=0;ua<qb;ua++)if(rb=d.getHostElement(Pa[ua]),
(sb=y("data-stc",B,"span",rb))&&0<sb.length&&(eb=r.doAction(U(Pa[ua]),"getUIDoc"))&&eb.isFormDirty(!1)){Ba=!0;break}if(Ba){if(Ca=document.getElementById("pzWAStrings"))La=Ca.getAttribute("data-s7"),Ma=Ca.getAttribute("data-s8"),xb=xb.replace("{0}",La).replace("{1}",Ma);alert(xb)}}break;case "activate":K=b.get("index");K=parseInt(K);isNaN(K)&&(K=0);var ab=d.getHost(K);F(ab);break;case "UpdateRecentList":var fb,gb,pa,Ea,tb,ub;fb=b.get("recentAction");if("ClearRecentItem"==fb){var J,Ra,vb,wb,Sa;J=b.get("searchKey");
Ra=b.get("recentItemRemoved");gb=b.get("ignoreDirty");pa=vb=b.get("dirtyState");Sa=b.get("isFirstRecentItem");ub=b.get("originalRecentKey");if("true"!=vb||"true"==gb)J=J.split("\x3d"),1<=J.length&&(wb=J[1],J=J[0],pa=Vb(b,J,wb,{ignoreDirty:gb,isRecentItemRemoved:Ra,isFirstRecentItem:Sa,recentKey:ub}))}else if("ClearAllRecentItems"==fb){var aa=b.get("recordKeys");gb=b.get("ignoreDirty");pa=b.get("hasDirtyRecentItem");pa="true"==pa?!0:!1;if(2<aa.length){var ib=/]$/;if(/^\[/.test(aa)&&ib.test(aa)&&(aa=
aa.substring(1,aa.length-1),aa=aa.split("\x26"),0<aa.length))for(var Ha=0;Ha<aa.length;Ha++){var Ua=aa[Ha];if(0<Ua.length){var hb=Ua.split(";");if(0<hb.length){J=hb[0];var jb=hb[1],kb=hb[3];ub=hb[4];J=J.split("\x3d");2<=J.length&&(wb=J[1],J=J[0],pa=(vb=Vb(b,J,wb,{ignoreDirty:gb,isRecentItemRemoved:jb,isFirstRecentItem:kb,recentKey:ub}))?vb:pa)}}}}var Va=b.get("docsMetaData");Va&&uc(Va);var lb=$b();F(lb)}if("true"==pa||pa){if(Ea=document.getElementById("pzWAStrings"))"ClearRecentItem"==fb&&(tb=Ea.getAttribute("data-s13")),
"ClearAllRecentItems"==fb&&(tb=Ea.getAttribute("data-s14"));tb&&alert(tb)}break;default:alert('The api request - "'+k+'" is not handled.'),I(!1)}},R=function(b){var a;if(!z)return null;a&&""!=a||(a=d.getElement().getAttribute("docGroupName"))&&""!=a||(a=d.getElement().getAttribute("tabGroupName"));return a},tc=function(){if("rule-html-harness"==sa)return t;for(var b=n.getChildren(t),a=b.length,c=null,d=null,e=0,g;e<a;e++)g=b[e],"RULE_KEY"==g.id&&g.getAttribute("node_name")==W?c=g:"iframe"==g.tagName.toLowerCase()&&
(d=g);return d&&"none"!=d.style.display?d:c&&"none"!=c.style.display?c:null},mc=function(b,a,c,d,e,g,u,v){if(z){var h=v.docObj,k=h.pyLabel,q=h.pyKey,f=new SafeURL;e&&void 0!==e.ReadOnly&&f.put("ReadOnly",e.ReadOnly);T(v,k,{close:"yes",key:q},{action:"displayOnPage",page:a,harnessName:b,parameters:f,contentID:g,dynamicContainerID:u,threadID:d,className:c},function(b,a){a&&""!=w.trim(a)&&!gIsCustomTabHeaderEnabled&&Q(b,a)},[h.pyIconPath])}else S(t.id)&&M(t.id,"display",b,harnessClass,a,readonly,model,
params,configObj,preActivity,preActivityParams,g,u)},X=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},ob=function(){return X()+X()+"-"+X()+"-"+X()+"-"+X()+"-"+X()+X()+X()},bb=function(b,a,c,k,e,g,u,v,f,A,l,p,m,n){c||(c="");k||(k="");e||(e="");m||(m=ob());if(z)if(g.replaceCurrent)q=ka(),v&&(h=v),T(q,v,{close:"yes",key:h},{action:"display",page:c,readOnly:k,model:e,harnessName:b,className:a,configObj:u,preActivity:f,preActivityParams:A,key:l,readOnly:p,hostName:v,contentID:m,
dynamicContainerID:n,replaceCurrent:!0,paramObject:{pyDataTransformDynamicParams:g.pyDataTransformDynamicParams,preActivityDynamicParams:g.preActivityDynamicParams}},function(b,a){b&&a&&Z(b,a)},[g.label]);else{ia();var h=a+"|"+b+"|"+u.systemID,q,Na,r,zb="",w="yes";v&&(h=v);if(q=P(h,u.systemID,g.isWAStaticHarness)){w=q.attribs&&q.attribs.close?q.attribs.close:w;if(g.isWAStaticHarness)g.skipConflictCheck=g.isWAStaticHarness,w="no",q.getElementsByTagName&&(r=(Na=q.getElementsByTagName("img")[0])?Na.src:
null),q.svgPath&&""!=q.svgPath&&(r=q.svgPath),zb=Na?Na.title:"",d.getHostIndex(q);else if(1!=g.fromLoadDeferDoc){if("true"==g.skipReload||q.docObj){F(q);return}}else 1!=g.fromLoadDeferDoc||g.isSHActionReplaceCurrent||(g.replaceCurrent="true");Na=db(q,v,g.skipConflictCheck);"yes"==Na?T(q,v,{close:w,key:h},{action:"display",page:c,readOnly:k,model:e,replaceCurrent:g.replaceCurrent,harnessName:b,className:a,configObj:u,preActivity:f,preActivityParams:A,key:l,readOnly:p,hostName:v,contentID:m,dynamicContainerID:n,
isWAStaticHarness:g.isWAStaticHarness,paramObject:{pyDataTransformDynamicParams:g.pyDataTransformDynamicParams,preActivityDynamicParams:g.preActivityDynamicParams},threadID:g.ThreadId||q.ThreadId},function(b,a,c,d){d&&a&&Q(b,a,c)},[r,zb,g.isWAStaticHarness]):(F(q),I(!1))}else v||(v=jb),(q=E(v,{close:"yes",key:h},{action:"display",page:c,readOnly:k,model:e,harnessName:b,className:a,configObj:u,preActivity:f,preActivityParams:A,key:l,readOnly:p,hostName:v,contentID:m,dynamicContainerID:n,isWAStaticHarness:g.isWAStaticHarness,
threadID:g.ThreadId,paramObject:{pyDataTransformDynamicParams:g.pyDataTransformDynamicParams,preActivityDynamicParams:g.preActivityDynamicParams}},-1,function(b,a,c,d){d&&a&&Q(b,a,c)},[r,zb,g.isWAStaticHarness]))&&g.label&&Z(q,g.label)}else S(t.id)&&M(t.id,"display",b,a,c,k,e,g,u,f,A,l,p,v,void 0,void 0,void 0,void 0,m,n)},nc=function(b,a,c,d,e){ia();c=!0;if(b.hashtable){var h="",k;for(k in b.hashtable)if("py"==k.substring(0,2)||"pxObjClass"==k||"Purpose"==k)"pyPropertyName"==k&&"."==b.hashtable[k].substr(0,
1)&&b.put(k,b.hashtable[k].substr(1)),h+="\x26"+k+"\x3d"+b.hashtable[k];Gb[h]?c=!1:Gb[h]=!0}if(c&&z)b.hashtable&&(b.hashtable.ObjClass=b.hashtable.pxObjClass),b.put("Format","harness"),E("Rule",{close:"yes",hash:b.hashtable,format:"harness"},{action:"openRuleByKeys",key:b,configObj:a,contentID:d,dynamicContainerID:e});else{k=new SafeURL("@baseclass.pzGetRuleInfo",getReqURI());c=pega.util.Event.isIE?JSON.parse(JSON.stringify(b.hashtable)):b.hashtable;c=JSON.stringify(c,function(b,a){if("api"!=b)return a});
k.put("JSONKeys",c);if(""==k.toQueryString())return!1;k=k.toURL();c={success:function(b){var a=b.argument.params,c=b.argument.configObj;b=JSON.parse(b.responseText);if("ERROR"!=b.output){if(a.hashtable)for(var h in a.hashtable)"py"!=h.substring(0,2)&&"ObjClass"!=h&&"Purpose"!=h&&delete a.hashtable[h];a.put("Format","harness");h=b.output;b={action:"openRuleByKeys",key:a,configObj:c,contentID:d,dynamicContainerID:e};z?(c=P(h,c.systemID))?(F(c),I(!1)):"ERROR"==h.substring(0,5)?E("Rule",{close:"yes",
hash:a.hashtable,format:"harness"},b):E("Rule",{close:"yes",key:h,format:"harness"},b):S(t.id)&&M(t.id,"openRuleByKeys",{close:"yes",key:h,format:"Harness"},a,c,d,e)}},failure:function(b){}};c.argument={params:b,configObj:a};pega.util.Connect.asyncRequest("GET",k,c)}},pc=function(b,a,c,d,e){ia();var h=new SafeURL("@baseclass.pzGetRuleInfo",getReqURI());c=b.get("Handle");var k;h.put("InsHandle",c);k=b.get("OpenSpecificVersion");void 0==k&&(k="false");h.put("OpenSpecificVersion",k);if(""==h.toQueryString())return!1;
h=h.toURL();"false"!=k?(k={action:"openRuleSpecific",key:b,configObj:a,contentID:d,dynamicContainerID:e},h=b.get("pyPurpose")?b.get("pyPurpose"):kb,z?(b=P(c,a.systemID,"undefined",d))?(F(b),I(!1)):b=E(h,{close:"yes",key:c,format:"harness"},k):S(t.id)&&M(t.id,"openRuleSpecific",{close:"yes",key:c,format:"Harness"},b,a,d,e)):(c={success:function(b){var a=b.argument.params,c=b.argument.configObj;b=JSON.parse(b.responseText);if("ERROR"!=b.output){b=b.output;a.get("Handle");var h={action:"openRuleSpecific",
key:a,configObj:c,contentID:d,dynamicContainerID:e},g=a.get("pyPurpose")?a.get("pyPurpose"):kb;z?(a=P(b,c.systemID,"undefined",d))?(F(a),I(!1)):E(g,{close:"yes",key:b,format:"harness"},h):S(t.id)&&M(t.id,"openRuleSpecific",{close:"yes",key:b,format:"Harness"},a,c,d,e)}},failure:function(b){}},c.argument={params:b,configObj:a},pega.util.Connect.asyncRequest("GET",h,c))},oc=function(b,a,c,d,e){ia();c="";var h=!0;if(b){c=b.get("insName").replace("\x26amp;",encodeURIComponent("\x26"));var k="\x26InsName\x3d"+
c+"\x26ClassName\x3d"+b.get("objClass");Hb[k]?h=!1:Hb[k]=!0}if(h&&z)a={action:"openRuleByClassAndName",key:b,configObj:a,contentID:d,dynamicContainerID:e},h=-1<c.indexOf("!")?c.split("!")[1]:c,E(h,{close:"yes",insName:c,objClass:b.get("objClass"),format:"Harness"},a);else{h=new SafeURL("@baseclass.pzGetRuleInfo",getReqURI());h.put("InsName",c);h.put("ClassName",b.get("objClass"));if(""==h.toQueryString())return!1;c=h.toURL();h={success:function(b){var a=b.argument.params,c=b.argument.configObj,h=
JSON.parse(b.responseText);if("ERROR"!=h.output){b=a.get("insName").replace("\x26amp;","\x26");var k=h.output,h={action:"openRuleByClassAndName",key:a,configObj:c,contentID:d,dynamicContainerID:e},g;g=-1<b.indexOf("!")?b.split("!")[1]:b;z?(c=P(k,c.systemID))?(F(c),I(!1)):E(g,{close:"yes",insName:b,objClass:a.get("objClass"),format:"Harness"},h):S(t.id)&&M(t.id,"openRuleByClassAndName",{close:"yes",insName:b,objClass:a.get("objClass"),format:"Harness"},a,c,d,e)}},failure:function(b){}};h.argument=
{params:b,configObj:a};pega.util.Connect.asyncRequest("GET",c,h)}},qc=function(b,a,c,d,e,g){ia();if(z){var h=b.indexOf(" "),k=b.indexOf("!"),h=b.substring(h+1,k);b={action:"openAssignment",key:b,configObj:c,contentID:e,dynamicContainerID:g};d&&"object"==typeof d&&(b.paramObject=d);(c=P(h,c.systemID))?(F(c),c.docObj||("true"==a.reload&&(a.skipConflictCheck="true"),a=db(c,null,"true"==a.skipConflictCheck),"yes"==a?T(c,Ua,{close:"yes",key:h},b,function(b){F(b)}):I(!1))):c=E(Ua,{close:"yes",key:h},b)}else S(t.id)&&
M(t.id,"openAssignment",b,a,c,e,g)},Tb=function(b,a,c,d,e,g){ia();if(z)if(g)T(g,g.label?g.label:ma,{close:"yes",key:b},{action:"openWorkByHandle",key:b,configObj:c,contentID:d,dynamicContainerID:e,threadID:g.ThreadId,ignoreDirty:a.reload},function(b){var a=b&&b.docObj?b.docObj.pyIconPath:null;a&&""!=w.trim(a)&&Q(b,a)});else{g=P(b,c.systemID);var h;if(g){if(F(g),!g.docObj){var k;"true"==a.reload?h="yes":"true"!=a.skipConflictCheck&&(h=db(g),k="true");"yes"==h?T(g,g.label?g.label:ma,{close:"yes",key:b},
{action:"openWorkByHandle",key:b,configObj:c,contentID:d,dynamicContainerID:e,ignoreDirty:k}):I(!1)}}else E(ma,{close:"yes",key:b},{action:"openWorkByHandle",key:b,configObj:c,contentID:d,dynamicContainerID:e})}else S(t.id)&&M(t.id,"openWorkByHandle",b,a,c,d,e)},rc=function(b,a,c,k,e){var h,u,f=e.contentID;ia();if(z){if(c.skipConflictCheck){h=d.getHostsArray();for(var q=0;q<h.length;q++)if(u=h[q],u.elementName==f){F(u);return}}u=E(jb,{close:"yes"},{action:"createNewWork",className:b,flow:a,configObj:k,
customParam:e},-1,function(b,a){b&&a&&Z(b,a)},[c.label])}else S(t.id)&&M(t.id,"createNewWork",b,a,c,k,e)},Sb=function(b,a,c,d,e,g,u,f,l,m,n,p,r,w,x,B){c||(c="");d||(d="");e||(e="");p||(p="Open Landing");if(z){var h=p,k;(k=P(h,n.systemID))?(m=k.actionDef)&&m.levelA==u&&m.levelB==f&&m.levelC==l?F(k):T(k,p,{close:"yes",key:h},{action:"openLanding",page:c,readOnly:d,model:e,harnessName:b,className:a,landingAction:g,levelA:u,levelB:f,levelC:l,configObj:n,hostName:p,contentID:r,dynamicContainerID:w,customParam:x,
paramKeys:B}):k=E(p,{close:"yes",key:h},{action:"openLanding",page:c,readOnly:d,model:e,harnessName:b,className:a,landingAction:g,levelA:u,levelB:f,levelC:l,configObj:n,hostName:p,contentID:r,dynamicContainerID:w,customParam:x,paramKeys:B},-1,function(b,a,c){b&&a&&Z(b,a);b&&c&&Ra(b,c)},[m.label,p])}else S(t.id)&&(delete m.label,M(t.id,"openlanding",b,a,c,d,e,g,u,f,l,m,n,p,r,w))},Ub=function(b,a,c,d,e,g){if(z){var h={};h.className=b;h.sQuery=a;c||(c="Open Wizard");b=c;(a=P(b,void 0))?(F(a),"true"!=
d.skipConflictCheck&&(d=db(a,b),"yes"==d?(e=a.elementName,T(a,c,{close:"yes",key:b},{action:"openWizard",key:h,docClass:b,dynamicContainerID:g,wizardLabel:c,contentID:e})):I(!1))):E(c,{close:"yes",key:b},{action:"openWizard",key:h,docClass:b,dynamicContainerID:g,wizardLabel:c,contentID:e})}},sc=function(b,a,c,d){ia();z?E(Zb,{close:"yes"},{action:"getNextWorkItem",configObj:a,contentID:c,dynamicContainerID:d},-1,function(b,a){b&&a&&Z(b,a)},[b.label]):M(t.id,"getNextWorkItem",b,a,c,d)},E=function(b,
a,c,k,f,g){var h;if(!d.tabView&&d.getHostsArrayLength()>=e)if(h=d.handleMaxHosts(maxDocsWarning),-1!=h){if(h=d.getHost(h))return c&&c.customParam&&c.customParam.saveAsThreadName==h.ThreadName&&(c.saveAsOnCurrentThread=!0),T(h,b,a,c,f,g),h}else return null;h=-1!=k?qa(b,a,c,k):qa(b,a,c);"function"==typeof f&&("[object Array]"===Object.prototype.toString.call(g)?g.unshift(h):g=[h],f.apply(this,g));return h},qa=function(b,a,c,k,f,g){var h=d.getHost(k),v=!1;h&&h.docObj&&(h=h.docObj)&&h.isDefferedHost&&
(v=!0,h.isDefferedHost=!1);if(!c.isWAStaticHarness&&!v&&d.getHostsArrayLength()>=e&&(I(!1),k=d.handleMaxHosts(maxDocsWarning),-1==k)){try{"Tabbed"==d.ViewType&&d.tabView.get("activeTab").get("element").focus()}catch(lc){}return null}c.contentID||(c.contentID=ob());v=c.contentID;h=c.dynamicContainerID;"createNewWork"==c.action&&(c.customParam.contentID?v=c.customParam.contentID:c.customParam.contentID=v,h=c.customParam.dynamicContainerID);var q=Ob(c.hostName,k,"no"!=a.close,null,null,v,h,null,f,g);
f=c.action;if(!q)return null;g=!0;a&&(q.key=a.key,q.attribs=a,g=!a.doNotSetTitle);b&&g&&(g=document.createElement("div"),k=b,g.innerHTML=b,b=g.innerText||g.textContent,a.insName===k&&(a.insName=b),Z(q,b));q.actionDef=c;void 0!=c.threadID&&(q.ThreadId=c.threadID);vc(q);"NoHeader"==d.ViewType&&0<=q.ThreadId&&"module"+q.ThreadId!==q.id&&(q.element.id="module"+q.ThreadId,q.id="module"+q.ThreadId);c.paramObject||(c.paramObject={});c.workPool&&(c.paramObject.workPool=c.workPool);c.shouldCreateAssociateRequestor&&
(c.paramObject.shouldCreateAssociateRequestor="true");parseInt(N.d.productionLevel);g=d.getHostContentElement(q);I(!0,g);g=U(q);var l;k=d.getHostIndex(q)+1;try{if("NoHeader"==d.ViewType?l=d.moduleView.get("activeModule"):"Tabbed"==d.ViewType&&(l=d.tabView.get("activeTab")),l&&void 0!=l.GadgetName){var m=pega.web.api.doAction(l.GadgetName,"getUIDoc");if(m){var p=m.isFormDirty(!1);c.paramObject&&(c.paramObject.prevContentID=l.elementName,c.paramObject.prevRecordkey=l.key,c.paramObject.prevFormDirty=
p)}}}catch(lc){}switch(f){case "openRuleByKeys":r.doAction(g,"openRuleByKeys",a,c.paramObject,c.configObj,c.contentID,c.dynamicContainerID,k);break;case "openRuleByClassAndName":r.doAction(g,"openRuleByClassAndName",a,c.paramObject,c.configObj,c.contentID,c.dynamicContainerID,k);break;case "openRuleSpecific":r.doAction(g,"openRuleSpecific",a,c.paramObject,c.configObj,c.contentID,c.dynamicContainerID,k);break;case "openAssignment":r.doAction(g,"openAssignment",c.key,c.paramObject,c.configObj,c.contentID,
c.dynamicContainerID,k);break;case "openWorkByHandle":r.doAction(g,"openWorkByHandle",c.key,c.paramObject,c.configObj,c.contentID,c.dynamicContainerID,k);break;case "openWorkByURL":r.doAction(g,"openWorkByURL",c.url.toQueryString(!0,!1),c.paramObject,c.configObj,k);break;case "createNewWork":c.customParam.tabIndex=k;r.doAction(g,"createNewWork",c.className,c.flow,c.paramObject,c.configObj,c.customParam);break;case "display":case "showHarness":c.pyDataTransformDynamicParams&&(c.paramObject.pyDataTransformDynamicParams=
c.pyDataTransformDynamicParams);c.preActivityDynamicParams&&(c.paramObject.preActivityDynamicParams=c.preActivityDynamicParams);c.pyActivity?r.doAction(g,"display",c.harnessName,c.className,c.page,c.readOnly,c.model,c.paramObject,c.configObj,c.preActivity,c.preActivityParams,c.key,c.readOnly,c.hostName,c.contentID,c.dynamicContainerID,k,c.replaceCurrent):r.doAction(g,"display",c.harnessName,c.className,c.page,c.readOnly,c.model,c.paramObject,c.configObj,c.preActivity,c.preActivityParams,c.key,c.readOnly,
c.hostName,c.pyActivity,c.pyPreActivity,c.page,c.pzPrimaryPageName,c.contentID,c.dynamicContainerID,k,c.replaceCurrent);break;case "displayOnPage":r.doAction(g,"displayOnPage",c.harnessName,c.page,c.parameters,c.contentID,c.dynamicContainerID,k,c.className,b,a.key,c.paramObject);break;case "openLanding":r.doAction(g,"openlanding",c.harnessName,c.className,c.page,c.readOnly,c.model,c.landingAction,c.levelA,c.levelB,c.levelC,c.paramObject,c.configObj,c.hostName,c.contentID,c.dynamicContainerID,{tabIndex:k},
c.customParam,c.paramKeys);break;case "openWizard":r.doAction(g,"openWizard",c.key,c.paramObject,c.configObj,k,c.contentID,c.dynamicContainerID,c.wizardLabel);break;case "openWorkItem":r.doAction(g,"openWorkItem",c.workID,c.paramObject,c.configObj,c.contentID,c.dynamicContainerID,k);break;case "getNextWorkItem":r.doAction(g,"getNextWorkItem",c.paramObject,c.configObj,c.contentID,c.dynamicContainerID,k);break;case "reportDefinition":r.doAction(g,"reportDefinition",c.paramObject,c.configObj,c.reportClass,
c.reportName,c.reportDisplayMode,c.reportTitle,c.shortcutHandle,c.reportAction,c.reportParams,c.contentID,c.dynamicContainerID,c.hostName,k)}setTimeout(function(){var a,b;a=d.getHostsArray();b=d.getHostsArrayLength();for(var c=0;c<b;c++)a[c]===q&&F(q)},0);return q},T=function(a,h,c,k,e,g){var b=U(a);if(k)if(a&&a.shouldCreateAssociateRequestor&&(k.shouldCreateAssociateRequestor=!0),(b=r.doAction(b,"getUIDoc"))&&"display"!=a.actionDef.action.toLowerCase()){var f=!1;1==k.shouldCreateAssociateRequestor&&
"Perform"!=a.pyStreamName&&(f=!0);b.doClose(null,!0,{success:Sa,argument:{threadID:a.ThreadId,callback:function(a,b,c,d,h,k,g){c=c.getHostIndex(d);ra(d);h=qa(h,k,g,c);d&&d.shouldCreateAssociateRequestor&&(h.shouldCreateAssociateRequestor=!0);"function"==typeof a&&("[object Array]"===Object.prototype.toString.call(b)?b.unshift(h):b=[h],a.apply(this,b))},callbackArgs:[e,g,d,a,h,c,k]},action:k.action,saveAsOnCurrentThread:k.saveAsOnCurrentThread,skipDCCleanUp:f,clearThreadState:"true"},k.ignoreDirty,
!0)}else b=d.getHostIndex(a),f=!1,k.isWAStaticHarness&&0===d.getHostElement(a).getElementsByTagName("table").length&&(f=!0),ra(a),k.threadID=k.threadID||a.ThreadId,c=qa(h,c,k,b,f,a.ThreadName),c.docObj=a.docObj,a&&a.shouldCreateAssociateRequestor&&(c.shouldCreateAssociateRequestor=!0),(a=a.get("element"))&&null==a.getAttribute("iconCloseSmall")&&""==h&&(c.get("element").setAttribute("aria-label",a.getAttribute("aria-label")),c.get("element").setAttribute("title",a.getAttribute("title"))),"function"==
typeof e&&("[object Array]"===Object.prototype.toString.call(g)?g.unshift(c):g=[c],e.apply(this,g))},ra=function(a,h){"number"==typeof a.ThreadId&&(Wb(a),h&&a.ThreadName&&ib(a.ThreadName,a));d.removeHost(a,!0)},ib=function(a,h){var b=pega.u.d.getThreadName(),b=pega.ctx.pxReqURI.replace(b,a);try{if(window.gIsMultiTenantPortal&&h){var k=d.getHostContentElement(h),e;k&&k.getElementsByTagName("iframe")&&0<k.getElementsByTagName("iframe").length&&(e=k.getElementsByTagName("iframe")[0]);e&&e.contentWindow&&
e.contentWindow.SafeURL&&(b=e.contentWindow.SafeURL.prototype.toAbsoluteURL(),a=b.substr(b.indexOf("/!")+2))}}catch(g){}h=SafeURL_createFromURL(b);h.put("pyActivity","removeThead");h.put("threadName",a);w.asyncRequest("GET",h)},Xb=function(a){if(a&&a.pyThreadName&&""!=a.pyThreadName&&a.pzPrimaryHarnessPageName&&""!=a.pzPrimaryHarnessPageName){var b=pega.web.config.gatewayURL,c=a.pyThreadName,b=pega&&pega.d&&""!=pega.d.csrfToken?b+("!@"+pega.d.csrfToken+"!"+c):b+("!"+c),b=SafeURL_createFromURL(b);
b.put("pyActivity","pzDoCloseWrapper");b.put("PrimaryPageName",a.pzPrimaryHarnessPageName);b.put("retainLock","false");w.asyncRequest("GET",b)}},Vb=function(a,h,c,k){var b,g,e,f,l,m,n;if(z){n=a.get("pooledDoClose");b=d.getHostsArray();l=d.getHostsArrayLength();m=!1;if(""==h||void 0==h)h="key";for(var p=0;p<l;p++)if(g=b[p],g[h]==c){var w=a.get("recentAction"),x;if(f=r.doAction(U(g),"getUIDoc"))m=f.isFormDirty(!1),x=f.getAjaxTrackerID();if("ClearAllRecentItems"==w&&"true"==n){b=a.get("ignoreDirty");
h=k.isRecentItemRemoved;c=g.primaryHarnessPageName;k=!m;"true"==b&&(m=!1,k=!0);k&&(!c&&g.docObj&&(c=g.docObj.pzPrimaryHarnessPageName),k={},k.threadName=g.ThreadName,k.isRecentItemRemoved=h,k.pzPrimaryPageName=c,k.AJAXTrackID=x+"",k.dynamicContainerID=g.tabGroupName||g.docGroupName,k.tabIndex=p+1+"",p=a.get("docsMetaData"),p||(p={docsToClose:[]},a.put("docsMetaData",p)),f&&(f.skipDeleteDoumentPg=!0),p.docsToClose.push(k),va(g.ThreadId),ra(g,!1));break}e=d.getHostElement(g);if((e=y("data-stc",B,"span",
e))&&0<e.length||"NoHeader"==d.ViewType&&"module0"!=g.id)if(g.recentAction=w,f){if(m=f.isFormDirty(!1),!m||k&&"true"==k.ignoreDirty){m=!1;f.isRecentItemRemoved=k?k.isRecentItemRemoved:"";f.elementName=g.elementName;f.key=k?k.recentKey?k.recentKey:g.key:g.key;oa({},g,!0,k);f.isRecentItemRemoved="";break}}else{"NoHeader"==d.ViewType?(va(g.ThreadId),g.docObj?Xb(g.docObj):ib(g.ThreadName,g),d.removeHost(g,!0),a=ka(),(f=d.getHostElement(g).parentNode)&&"module0"!=f.id&&f.parentNode&&f.parentNode.removeChild(f),
pega&&pega.u&&pega.u.d&&pega.u.d.sendReqToUpdateElementModal({dynamicContainerID:a.tabGroupName||a.docGroupName,tabIndex:d.getHostIndex(a)+1,label:a.label,key:a.key,iconPath:a.iconPath},"CLOSE",{dynamicContainerID:g.tabGroupName||g.docGroupName,tabIndex:p+1,key:g.key,isActiveHost:!1}),lb(d.getHostToFocus())):oa({},g,!0,k);break}}return m}k&&"true"==k.isFirstRecentItem&&(b="true"==k.ignoreDirty?!0:!1,(f=pega.web.api.doAction(t.id,"getUIDoc"))&&!f.isFormDirty(!1)&&("key"==h&&(f.key=c),"elementName"==
h&&(f.elementName=c),f.doClose(void 0,void 0,void 0,b)))},uc=function(a){if(a){var b=a.docsToClose;if(b&&0<b.length){var b={},c=function(){var a=this.getHostToFocus();a.activationSyncRequired=!0;F(a)};b.success=c;b.failure=c;b.scope=d;c=new SafeURL("pzRecentsPooledDoClose");c.put("docsMetaData",JSON.stringify(a));w.asyncRequest("POST",c,b,null)}}},Sa=function(a){var b=a.argument.threadID,c=a.argument.callback;a=a.argument.callbackArgs;"number"==typeof b&&va(b);"function"==typeof c&&c.apply(this,a)},
oa=function(a,h,c,k){a&&(L.stopPropagation(a),L.preventDefault(a));var b,g=ka(),e=h||g,f,l,m,n,p,t;c=c||!!a;var x=h!=g;if(e){pega.desktop.sendEvent("DCDocumentClose",{id:h.label,handle:h.key,GadgetName:h.GadgetName});l=f=d.getHostIndex(e);0<f&&f--;k&&(p=k.ignoreDirty,t=k.notFocusmruHost);pega.ui.statetracking.setBusy();I(!1);b=h==g;m=U(e);pega.ctxmgr.setDocumentContext(e);if(n=r.doAction(m,"getUIDoc")){if(x&&n.isFormDirty(!1))return F(h),a=oa(a,h,c,k),pega.ui.statetracking.setDone(),a;if(!n.doClose(a,
!0,{success:Sa,argument:{threadID:h.ThreadId}},p))return pega.ui.statetracking.setDone(),!1}else va(h.ThreadId),h.docObj?Xb(h.docObj):ib(h.ThreadName,h);"undefined"!==typeof documentOnBeforeClose&&documentOnBeforeClose(m,e);ra(e);h=d.getHostToFocus(f);lb(h);if(x){if(d&&d.fixTabsOnBackgroundClick&&d.fixTabsOnBackgroundClick(),w.sendReqToUpdateElementModal)try{l="false";if(pega.web&&pega.web.api&&a&&a.prevValue){var z=pega.web.api.doAction(g.GadgetName,"getUIDoc");z&&a.newValue.key==z.key&&(l="true")}w.sendReqToUpdateElementModal({dynamicContainerID:g.tabGroupName||
g.docGroupName,tabIndex:d.getHostIndex(g)+1,label:g.label,key:g.key,iconPath:g.iconPath,isDocumentKey:l},"CLOSE",{dynamicContainerID:e.tabGroupName||g.docGroupName,tabIndex:f+2,key:e.key,isActiveHost:b})}catch(Ab){}}else h&&(h.removedDocumentName=e.elementName,h.removedDocumentIndex=f+2,h.removedDocumentsDocumentGroup=e.docGroupName,h.removedDocumentKey=e.key,"hidden"!=h.get("element").style.VISIBILITY&&"hidden"!=h.get("element").style.visibility||void 0!=h.elementName||void 0!=h.tabGroupName||w.sendReqToUpdateElementModal({dynamicContainerID:e.docGroupName},
"CLOSE",{dynamicContainerID:e.docGroupName,tabIndex:l+1},{prevContentID:e.elementName,prevRecordkey:e.key,prevFormDirty:"false",key:e.key,isActiveHost:b}),t||F(h));pega.ui.statetracking.setDone()}},S=function(a){return(a=pega.web.api.doAction(a,"getUIDoc"))&&a.explorerFormIsDirty()?confirm(Eb):!0},ia=function(){if("true"==pega.u.d.pyIsWindowStealFocusInIEAllowed)try{window.focus()}catch(b){}},P=function(a,h,c,k){if("undefined"==typeof a)return null;for(var b=d.getHostsArray(),g=d.getHostsArrayLength(),
e=0,f=null,l=null,m=null,n,p,r;e<g;e++)if(n=b[e],!n.key&&c?(p=d.getHostContentElement(n),p=y("harnessNm",B,"div",p),p[0]&&(f=p[0].getAttribute("harnessCls")+"|"+p[0].getAttribute("harnessNm")+"|"+h)):(f=n.key,m=n.elementName,r=n.primaryHarnessPageName),f&&k)if(p=n.docObj,f==a&&k==m){l=n;break}else{if((p&&"pyNewResults"==p.pzPrimaryHarnessPageName||"pyNewResults"==r)&&k==m){l=n;break}}else if(f&&f==a){l=n;break}return l},db=function(a,d,c){if(c)return"yes";if(Va)return"no";d=U(a);var b=r.doAction(d,
"getUIDoc"),h;d="no";b?(c=b.getApplicationName(),h=a.Label,h||(h=a.label),h||(h=b.getClassLabel()),(a=b.getID())&&(a="("+a+")"),a=Ja.replace("{1}",c||"").replace("{2}",h||"").replace("{3}",a||"")):a=Aa;confirm(a)&&(d="yes");return d},Mb=function(){var a=new SafeURL;a.put("api","ClearIndicators");la.sendEvent("DesktopAction",a)},I=function(a,d){a?(void 0!=d&&m.setTargetElement&&m.setTargetElement(d),m.show(),null!=x&&clearTimeout(x),x=setTimeout(Mb,3E4)):(m.hide(),null!=x&&clearTimeout(x))},ka=function(){return d.getActiveHost()},
Ob=function(a,h,c,e,f,g,l,m,n,r){a||(a="");a=d.addHost(a,h,c,e,f,g,l,m,oa,Sa,Wb,n,r);if(!a)return null;g||(g=ob());g&&""!=g&&(a.elementName=g);l&&""!=l&&(a.docGroupName=l);a.pyStreamName=K.pyStreamName;return a},F=function(a){a&&d.focusHost(a);delete this.activeClientTab},Z=function(a,h){var b=Ha(a);b&&b.skipTabUpdate||(d.setHostLabel(a,decodeURIComponent(h)),d.setHostTitle(a,decodeURIComponent(h)))},Q=function(a,h,c){var b=Ha(a);b&&b.skipTabUpdate||d.setHostIcon(a,h,c)},Ra=function(a,h){var b=Ha(a);
b&&b.skipTabUpdate||d.setHostTitle(a,h)},va=function(a){f.unshift(a);delete l[a]},fc=function(){for(var a=0;a<e;a++)f.push(a)},vc=function(a){var b=pega.ui.HarnessContextMgr,c=d.getHostContentElement(a),e,m;e=b.get("portalID");var g;void 0!=a.ThreadId?(b=a.ThreadId,Pb(a.ThreadId)):(b=f.shift(),"undefined"==typeof b||-1==b.length?b=-1:l[b]=b);m="PegaWebGadget"+b;c.setAttribute("id",m);g=(null!=e&&""!=e?e+"TABTHREAD":"TABTHREAD")+b;c.setAttribute("PegaThread",g);e=Y+b;c.setAttribute(Y,e);c.setAttribute("PegaE_onDomReady",
"pega.ui.WorkAreaGadget.onGadgetDomReady");c.setAttribute("PegaE_onError","pega.ui.WorkAreaGadget.onGadgetDomReady");c.setAttribute("PegaE_onLoad","pega.ui.WorkAreaGadget.onGadgetDomLoad");c.setAttribute("PegaE_onClose","pega.ui.WorkAreaGadget.onGadgetClose");r.removeGadget(e);r.addGadget(c,window);a.ThreadId=b;a.ThreadName=g;a.GadgetName=e;a.GadgetId=m},Wb=function(a){var b=d.getHostContentElement(a),c=b.getElementsByTagName("iframe")[0];a=a.GadgetName;c&&c.contentWindow&&c.contentWindow.document&&
c.contentWindow.document.body&&(c.contentWindow.document.body.onresize=null);L.purgeElement(b,!0);r.doAction(a,"blank");r.removeGadget(a)},Yb=function(a){for(var b=d.getHostsArray(),c=0,e=b.length;c<e;c++){var f=b[c];if(f.GadgetName==a)return f}return null},U=function(a){return a.GadgetName||""},Ha=function(a){var b=null;(a=U(a))&&""!=a&&(b=r.doAction(a,"getUIDoc"));return b},wc=function(a,d){if(d){var b=r.doAction(U(d),"getUIDoc");a=a.getPropertyValue(b.primaryPageName+".pzDocumentKey");b=b.getSystemName();
if(a&&d.attribs.key!=a){if(b=P(a,b)){var h=r.doAction(U(b),"getUIDoc");h.retainLock=!0;h.gDirtyOverride=!1;oa(null,b,!0);F(d)}d.key=d.attribs.key=a}}},xc=function(a,d){if(d){var b=r.doAction(U(d),"getUIDoc");(a=a.getPropertyValue(b.primaryPageName+".pyDocumentTitle"))&&d.label!=a&&Z(d,a)}},ic=function(a){I(!1);if(z){var b=Yb(a),c=d.getHostTitle(b),e=r.doAction(a,"getUIDoc"),f,g,l,m,n=b.actionDef,t,w,p,x,B;w="";var y,D,C="",E="";if(e){b&&b.docObj&&delete b.docObj;l=e.getThreadName();C=b.ThreadName;
l!=C&&l.substring(l.length-1)==C.substring(C.length-1)&&(b.ThreadName=l);e.portalName=pega.u.d.portalName;"Tabbed"==d.ViewType&&e.registerTabContentAccessibilityHandler(b);"function"==typeof e.registerDCCTNotifyCallback&&(e.registerDCCTNotifyCallback(wc,ta,b,[e.primaryPageName+".pzDocumentKey"]),e.registerDCCTNotifyCallback(xc,ta,b,[e.primaryPageName+".pyDocumentTitle"]));E=e.getDocumentTitle();C=e.getDocumentTooltip();11!=L.isIE||"Left"!=d.tabPosition&&"Right"!=d.tabPosition||(l=$(".dc-main")[0],
l.style.zoom=""==l.style.zoom?1:"");D=e.getProperty("PRXML");w=e.getDocumentKey();e.contentID=b.elementName;f=pega.tools.Security.decodeCrossScriptingFilter(e.getID());E=pega.tools.Security.decodeCrossScriptingFilter(E);l=e.getLabel();(m=e.getWorkIcon())&&""!=e.trim(m)&&Q(b,m);m=n.action.toLowerCase();B=n.landingAction;if(""==f&&""==w){c=d.getHostTitle(b);if(null==c||""==c)c=d.getHostLabel(b);n&&("undefined"!==typeof D&&""!==D&&(l=ba(D,"pyRuleName"),c=ba(D,"pyLabel")),t=n.hostName,f=n.className,w=
n.harnessName,n.configObj&&(p=n.configObj.systemID),n=n.docClass,g="display"==m||"openlanding"==m?t?t:f+"|"+w+"|"+p:"openwizard"==m?n:"openrulebykeys"==m?b.attribs.key:"openrulebyclassandname"==m?b.attribs.key:"openrulespecific"==m?b.attribs.key:"displayonpage"==m?b.attribs.key:"reportdefinition"==m?b.attribs.key:d.getNextHostIndex()+"T");"string"==typeof E&&""!=E&&(l=E);"string"==typeof C&&""!=C&&(c=C);null!=l&&""!=l.trim()&&Z(b,l);null!=c&&""!=c&&Ra(b,c);("display"==m||"openlanding"==m&&"Display"==
B)&&e.documentTitle&&(g=e.documentTitle)}else{g=""!=f?""!=w?w:e.getHandle():w;g||(g=b.key);try{x=e.getSystemName(),t=e.getApplicationName()}catch(nb){}f?null!=l&&""!=l||"openwizard"==m||(l=f):"undefined"!==typeof D&&""!==D&&(l&&""!==l.trim()||(l=ba(D,"pyRuleName"),""==l&&(l=ba(D,"pyLabel"))),c||(c=ba(D,"pyLabel")));p=new SafeURL;p.put("api","WorkLoaded");g&&p.put("key",g);x&&p.put("systemID",x);t&&p.put("appName",t);""!=f&&p.put("workID",f);l&&p.put("label",l);p.put("action",m);p.put("GadgetName",
a);la.sendEvent("DesktopAction",p);c=e.getPyLabel();""!=f&&(c=f+":"+c);"string"==typeof E&&""!=E&&(l=E);"string"==typeof C&&""!=C&&(c=C);p=document.createElement("div");null!=l&&(p.innerHTML=l,l=p.innerText||p.textContent,Z(b,l));null!=c&&(p.innerHTML=c,c=p.innerText||p.textContent,Ra(b,c))}p=d.getHostLabel(b);!p&&b.actionDef&&"display"==b.actionDef.action&&(p=b.actionDef.harnessName);r.doAction(a,"setGadgetTitle",p);if(b.attribs.key!=g){if(y=P(g,x))y.actionDef&&y.actionDef.action&&"openlanding"==
y.actionDef.action.toLowerCase()||y.docObj&&"openlanding"==y.docObj.openlanding?window.setTimeout(function(){d.getHostIndex(b);F(y);oa(null,b,!0,{notFocusmruHost:!0});pega.web&&pega.web.api&&y.GadgetName&&(pega.web.api.doAction(y.GadgetName,"getUIDoc"),d.getHostIndex(y))},0):((a=U(y))&&""!=a&&(a=r.doAction(a,"getUIDoc"),a.retainLock=!0,a.gDirtyOverride=!1),window.setTimeout(function(){y.actionDef&&y.actionDef.action&&"getnextworkitem"==y.actionDef.action.toLowerCase()&&(y=P(g,x));d.getHostIndex(y);
oa(null,y,!0,{notFocusmruHost:!0});F(b);pega.web&&pega.web.api&&b.GadgetName&&pega.web.api.doAction(b.GadgetName,"getUIDoc");d.getHostIndex(b)},0));b.key=b.attribs.key=g}b.pyStreamName=e.pyStreamNameForGadget;b.primaryHarnessPageName=e.primaryPageName;d.getHostIndex(b);a=b.GadgetId||"";!1!==pega.u.d.SET_WINDOW_TITLE&&e.updateWindowTitle(b,!0);L.onContentReady(a,function(a){a=document.getElementById(a);var b;a&&(a=a.getElementsByTagName("iframe"))&&a[0]&&(a=a[0],b=a.style,pega.u.d.isAccessible&&c&&
a.setAttribute("title",c),pega.util.Dom.hasClass(document.body,"with-fixed-header")||(pega.u.d._isDC()&&pega.u.d._isJSResizeEnabled()||"100%"==a.height||(b.height=a.height="100%"),"visible"!=b.visibility&&(b.visibility="visible")))},a,!0)}}},ba=function(a,d,c){return(d=(new RegExp("\x3c"+d+"\x3e([^\x3c]*)\x3c/"+d+"\x3e")).test(a))||"undefined"!==typeof c?!0===d?RegExp.$1:"":ba(a,"pxInsName",!0)},jc=function(a){z?a&&(a=Yb(a))&&a.attribs&&"yes"==a.attribs.close&&oa(null,a):Lb()},Lb=function(){if("rule-html-harness"==
sa)bb(W,Ka,Fb,"",Ba);else{for(var a=n.getChildren(t),d=a.length,c=null,e=null,f=0,g;f<d;f++)g=a[f],"RULE_KEY"==g.id&&g.getAttribute("node_name")==W?c=g:"iframe"==g.tagName.toLowerCase()&&(e=g);e&&(e.style.display="none");c&&(c.style.display="block",w.reloadSectionEncoded(c,null,null,!1,!0,-1,!1,null,Ba,null))}I(!1)},Jb=function(a){var b,c,d,e,g,f,l;a=new N.util.Element(a);b=parseInt(a.getStyle("padding-left"));b=isNaN(b)?0:b;c=parseInt(a.getStyle("padding-right"));c=isNaN(c)?0:c;d=parseInt(a.getStyle("padding-top"));
d=isNaN(d)?0:d;e=parseInt(a.getStyle("padding-bottom"));e=isNaN(e)?0:e;g=parseInt(a.getStyle("border-left-width"));g=isNaN(g)?0:g;f=parseInt(a.getStyle("border-right-width"));f=isNaN(f)?0:f;l=parseInt(a.getStyle("border-top-width"));l=isNaN(l)?0:l;a=parseInt(a.getStyle("border-bottom-width"));a=isNaN(a)?0:a;return{paddingLeft:b,paddingRight:c,paddingTop:d,paddingBottom:e,borderLeft:g,borderRight:f,borderTop:l,borderBottom:a}},Ma=function(){if(!pega.util.Dom.hasClass(document.body,"with-fixed-header")&&
w.portal){var b=w.portal.layoutObj,d=b.getSizes(),c=d.center.h,d=d.center.w,b=b.getUnitByPosition("center").body;ya=d-Wa-Xa;C=c-da-wa-xa;z&&(Nb({}),a&&(b.style.overflow=0==a.offsetHeight||this._hasWASiblings?"auto":"hidden"),"NoHeader"==a.getAttribute("data-mode")&&(b.style.overflow="hidden"))}},Nb=function(b){if(!pega.util.Dom.hasClass(document.body,"with-fixed-header"))if("NoHeader"==a.getAttribute("data-mode")){if(b=ka(),b=d.getHostContentElement(b))b.style.height=C+"px",b.style.overflow="auto"}else if(w.portal){var e=
b.newValue||ka(),c=d.getHostContentElement(e);b=c.getElementsByTagName("iframe");var f=c.style,l=0,g=0,m=d.getHostElement(e),e=m.parentNode;if(n.inDocument(m)){"Left"==D||"Right"==D?l=e.offsetWidth:(m=e.style.overflow,g=e.scrollHeight,e.style.overflow=m);f.overflow="auto";parseInt(f.width)!=ya-l-za&&(f.width=ya-l-za+"px");if(parseInt(f.height)!=C-g){f.height=C-g+"px";for(c=c.parentNode;c&&c.id&&-1==c.id.indexOf("PEGA_TABBED");)c=c.parentNode;"Bottom"!=D||L.isIE||(c.style.height=C-g+"px")}b&&b[0]&&
(b=b[0],b=b.style,"visible"!=b.visibility&&(b.visibility="visible"))}}},ta=this;pega.u.d.gIsScriptsLoading?w.attachOnload(function(){La=!0;ab.call(ta)},!0):w.attachOnload(function(){ab.call(ta)},!1);this.getActiveDocumentType=function(){var a,d=pega.ui.ClientCache.find("Declare_pyDisplay.pyDCDisplayState.pyActiveDocumentType");d&&(a=d.getValue());return a}};K.DCUtil=new function(){this.getActiveDocumentType=K.WorkAreaGadget.getActiveDocumentType}})(pega);
pega.ui.mru=(function(){var F="next",D="prev",G=null,I=undefined;function B(M,L){M[F]=L;M[D]=G;L[F]=G;L[D]=M;this.head=M;this.tail=L}B.prototype.getHeadItem=function(){return this.head[F]==this.tail?G:this.head[F]};B.prototype.insertNode=function(N){var M=this.head,L=this.tail;if(N!=G){N[F]=M[F];N[D]=M;M[F]=N;N[F][D]=N}};B.prototype.removeNode=function(N){var M=this.head,L=this.tail;if(N!=G){N[D][F]=N[F];N[F][D]=N[D];N[D]=N[F]=G;return N}};B.prototype.createNode=function(M,L){return{id:M,data:L,next:G,prev:G}};var E=new B({},{}),A={};var J=function(N,M){if(N!=G&&M!=G){var L=G;if(A[N]){L=A[N];L.data=M;L=E.removeNode(L);E.insertNode(L)}else{L=E.createNode(N,M);A[N]=L;E.insertNode(L)}}};var K=function(){var L=E.getHeadItem();return L==G?null:{id:L.id,data:L.data}};var C=function(M){if(M!=G){var L=A[M];E.removeNode(L);L=G;A[M]=null}};var H={addItem:J,getItem:K,deleteItem:C};return H})();
