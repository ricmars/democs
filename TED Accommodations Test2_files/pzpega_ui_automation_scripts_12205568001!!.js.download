var pega=pega||{};pega.ui=pega.ui||{};pega.ui.automation=pega.ui.automation||{};pega.ui.automation.constants={COMPONENT_TYPE:"pyComponentType",DOM_SELECTOR:"pySelector",ASSERTIONS:"pyTestAssertions",COMPARATOR:"pyComparator",COMPARATOR_LIST:"pyComparatorList",NAVIGATORS:"pyTestNavigators",NAVIGATOR:"pyTestNavigator",NAVIGATOR_ACTION_NAME:"pyNavigatorActionName",NAVIGATOR_ACTION_VALUE:"pyNavigatorActionValue",ACTION_NAME:"pyNavigatorAction",IS_CUSTOM_STEP:"pyIsCustomStep",CUSTOM_TYPE:"pyCustomType",CASE_CLASS_NAME:"className",CASE_FLOW_NAME:"flowName",EVENTS:"events",SELECTOR:{NODE_NAME:"nodeName",PARENTS:"parents",INNERTEXT:"innerText",WHITELIST:["data-test-id","name","node_name","base_ref"],BLACKLIST:["nodeName","pxObjClass","parents","pyContainers"],CONTAINERS_BLACKLIST:["[data-mdc-id='microdc']"]},STEP_RESULT:{STATUS:"status",PASSED:"passed",FAILED:"failed",FAILURE_REASON:"failureReason",SELECTOR:"selector",ACTUAL_VALUE:"actualValue",FAILURE_CODE:"internalFailureCode",FAILURE_TYPE:"failureType",FAILURE_CODES:{MACTHER:"Matcher not found",STEP:"Invalid step object",CODE:"Error in code"},FAILURE_TYPES:{NAVIGATOR:"Navigator",ASSERTOR:"Assertor",DOM:"Dom element not found",INTERNAL:"internal"}},STEP_TYPE:{IMPLICIT:"implicit",EXPLICIT:"explicit",CHANGE:"change"},ASSERTION_CUSTOM_NAME_SEPARATOR:"|",ASSERTION_CUSTOM_PARENT_LEVEL:".",MATCHER_EQUAL:"equals",DATA_TEST_ID:"data-test-id",DATA_TEST_ID_KEY:"data_test_id",ATTRIBUTES:"pyAttributes",ACTIONS:"pyActions",IS_NAVIGATOR:"pyIsNavigator",IS_ASSERTOR:"pyIsAssertor",ATTRIBUTE_NAME:"pyAttributeName",ATTRIBUTE_VALUE:"pyAttributeValue",ATTRIBUTE_VALUE_LIST:"pyAttributeValueList",ATTRIBUTE_DESC:"pyAttributeDesc",EXPECTED_VALUE:"pyExpectedValue",OPTIONS_LENGTH:"optionlength",OPTION_CONTAINS:"optionshas",OPTIONS_DATA:"optiondata",COMPONENT_STEP_DATA:"componentData",COMPONENT_TARGET:"componentTarget",TEST_CASE_STEPS:"pyTestCaseSteps",TEST_STEP_NAME:"pyTestStepName",COMPONENT:{DEFAULT:"default",BUTTON:"pxButton",TEXT_INPUT:"pxTextInput",MENU_ITEM:"pxMenuItem",LABEL:"Label",MENUBAR:"menubar",DROPDOWN:"pxDropdown",TEXT_AREA:"pxTextArea",LINK:"pxLink",DISPLAY_TEXT:"pxDisplayText",CHECKBOX:"pxCheckbox",ICON:"pxIcon",AUTOCOMPLETE:"pxAutoComplete",RICH_TEXT_EDITOR:"pxRichTextEditor",},COMPONENT_DESC:{},HANDLER:{RECORDER:"recorder",STEP_BUILDER:"stepbuilderHandler",NAVIGATOR:"navigatorHandler",ASSERTOR:"assertorHandler",TRANSLATOR:"translatorHandler",INSPECTOR:"inspectorHandler"},IMPLICIT_ASSERTIONS:"implicitAssertions",IMPLICIT_NAVIGATIONS:"implicitNavigations",ATTRIBUTE:{NAME:"@name",LABEL:"<label>",ERROR:":error",TITLE:"@title",LIST:"List",DISABLE:"@disabled",REQUIRED:"@required",INNER_TEXT:":contains",CLASS:"@class",VALUE:"@value",PLACEHOLDER:"@placeholder",VALIDATION:"@validationtype",STYLE:"@style",SRC:"@src",SMART_TIP:"SmartTip"},ACTION_NAMES:{CHANGE:"change",CONTEXTMENU:"contextmenu"}};Object.freeze&&Object.freeze(pega.ui.automation.constants);pega.ui.automation.utils=(function(){var Z=pega.ui.automation.constants;function U(g){if(!g){return""}var j=pega.ui.automation.constants.COMPONENT_DESC[g];if(!j){j=g;var h=j.substring(0,2).toLowerCase();if(h==="px"||h==="py"||h==="pz"){j=j.slice(2)}}return j}function P(j,l){var h=M(j);var k=j[pega.ui.automation.constants.SELECTOR.INNERTEXT];var m=null;var g=T(j);m=$(g).find(h);var n=N(g,h);if(n&&n.length>0){m=$(m).not(n)}m=$(m).filter(function(){return j.nodeName?this.nodeName==j.nodeName:true});if(k){m=$(m).filter(function(){return K(this)==k})}g=null;return m}function a(g,k){var j=P(g,true);var l=j?j[0]:null;if(k&&l){var h=pega.ctxmgr.getContextByTarget(l);if(h&&h.pzHarnessID){pega.ctxmgr.setCurrentHarnessContext(h.pzHarnessID)}}j=null;return l}function B(g,j){var h=new Promise(function(m,l){var o=a(g,j);if(o){m(o)}else{var n=2;var k=setInterval(function(){n--;var p=a(g,j);if(p||n==0){clearInterval(k);m(p)}},1000)}});return h}function T(j){var g=document;if(j.pyContainers){var l=j.pyContainers;for(var k=l.length-1;k>=0;k--){var h=l[k];if(h.type=="iframe"){g=f(g)}else{if(h.type=="mdc"){g=g.querySelector(h.querySelector)}}}}return g}function f(k){var j=$(k).find("iframe:visible");var h=null;for(var g=0;g<j.length;g++){h=j[g].contentDocument;if(!h.defaultView.pega){continue}break}j=null;return h}function M(l){if(l&&l.pyPath){return l.pyPath}var h="";for(var q in l){var p=l[q];if(q==pega.ui.automation.constants.DATA_TEST_ID_KEY){q=pega.ui.automation.constants.DATA_TEST_ID}if(pega.ui.automation.constants.SELECTOR.BLACKLIST.indexOf(q)>-1){continue}if(q==pega.ui.automation.constants.SELECTOR.INNERTEXT){h=h+':contains("'+p+'")'}else{h=h+"["+q+'="'+p+'"]'}}var g=l[pega.ui.automation.constants.SELECTOR.PARENTS];if(g){for(var k=0;k<g.length;k++){var j=g[k];var n="";for(var o in j){var m=j[o];if(o==pega.ui.automation.constants.DATA_TEST_ID_KEY){o=pega.ui.automation.constants.DATA_TEST_ID}if(pega.ui.automation.constants.SELECTOR.BLACKLIST.indexOf(o)>-1){continue}n=n+"["+o+'="'+m+'"]'}h=n+" "+h}}return h}function c(g,h,m){var k=null;m=m||V().document;var n=$(m).find("iframe:visible");var l=null;for(var j=0;j<n.length;j++){k=n[j].contentDocument;if(!k||!k.defaultView.pega){continue}l=$(k).find(g+":visible");if(h!=null&&h!=undefined){l=$(l).filter(function(){return $(this).text()==h})}if(l&&l.length>0){break}else{l=c(g,h,k);if(l&&l.length>0){break}}}k=null;n=null;return l?l:[]}function V(g){g=g||window;if(g.pega&&g.pega.u&&g.pega.u.d&&g.pega.u.d.isPortal&&g.pega.u.d.isPortal()){return g}while(g.pega&&g.pega.u&&g.pega.u.d&&g.pega.u.d.isPortal&&!g.pega.u.d.isPortal()&&g!=top){if(g.parent.pega){g=g.parent}else{break}}return g}function H(){var k=Array.prototype.slice.call(arguments);var h=k.shift();var g=function(n,m){if(!n){return null}return n[m]};var l=h.split(".").reduce(g,window);if(k[3]){var j=k[3];k[3]=j.split(".").reduce(g,window)}setTimeout(function(){l.apply(this,k)},1)}function J(g,h){return(" "+g.className+" ").indexOf(" "+h+" ")>-1}function X(m,l,p){var n=p[pega.ui.automation.constants.ATTRIBUTE_NAME];var k=p[pega.ui.automation.constants.EXPECTED_VALUE];var q=p[pega.ui.automation.constants.EXPECTED_VALUE_LIST];var j=p[pega.ui.automation.constants.ATTRIBUTE_DESC];var h="";if(!n){if((k!=null&&k!=undefined)||(q)){configValue=pega.ui.automation.recorder.translator.getConfiguredValue(m,l,j);h=(configValue!=null&&configValue!=undefined&&configValue.trim)?configValue.trim():configValue}}else{var o=n.indexOf("@")==0||n==pega.ui.automation.constants.ATTRIBUTE.INNER_TEXT||n==pega.ui.automation.constants.ATTRIBUTE.LABEL||n==pega.ui.automation.constants.ATTRIBUTE.ERROR;if(o){h=E(l,n)}else{var g=n.split(pega.ui.automation.constants.ASSERTION_CUSTOM_NAME_SEPARATOR);if(g.length>1){h=R(l,n)}}}return h}function E(l,h){var k=h;if(h.indexOf("@")==0){k=null;var h=h.substring(1);if(h==="value"){k=domUtils.getDOMElementValue(l)}else{if(h==="disabled"){k=l.getAttribute(h)!=null}else{if(h==="required"){k=l.getAttribute("validationtype")&&l.getAttribute("validationtype").indexOf("required")>-1}else{k=l.getAttribute(h)}}}}else{if(h==pega.ui.automation.constants.ATTRIBUTE.INNER_TEXT){k=null;var h=h.substring(1);if(h==="contains"){k=l.innerText}}else{if(h==pega.ui.automation.constants.ATTRIBUTE.LABEL){k=null;var g=$(l).closest(".content-item")[0];if(g){if(J(g,"dataLabelForRead")||J(g,"dataLabelForWrite")){k=g.innerText}else{var m=g.querySelector(".dataLabelForRead, .dataLabelForWrite");if(m){var j=m.getElementsByTagName("span");if(j&&j[0]){k=j[0].innerText}else{k=m.innerText}}}}}else{if(h==pega.ui.automation.constants.ATTRIBUTE.ERROR){k=null;var g=$(l).closest(".content-item")[0];if(g){errorSpan=g.querySelector(".iconError");k=!!(errorSpan&&$(errorSpan).is(":visible"))}}}}}return(k!=null&&k!=undefined&&k.trim)?k.trim():k}function R(m,h){if(!h){return""}var k=m;var n=h.split(pega.ui.automation.constants.ASSERTION_CUSTOM_NAME_SEPARATOR);if(n.length>1){h=n[n.length-1];var l=n[n.length-2];if(n.length==3){var g=n[0].split(pega.ui.automation.constants.ASSERTION_CUSTOM_PARENT_LEVEL).length-1;for(var j=0;j<g;j++){k=k.parentElement}}if(l){k=k.querySelector(l)}}return k?E(k,h):null}function A(l,k){var g=Y(l);var h=W(l,k,g);g=null;if(!h){return null}var j=b(l);if(j&&j.length>0){h.pyContainers=j}return h}function K(h){var g=h.innerHTML;if(h.tagName==="INPUT"){g=$(h).text()}return g}function O(g){return !g.firstElementChild}function W(z,u,y){var x="";var q={};q[Z.SELECTOR.NODE_NAME]=z.nodeName;var g=null;var s=null;var w=[];if(u&&Array.isArray(u)){w=u.slice(0)}else{console.log("Invalid custom attributes defined: ",u)}var j=w.indexOf(Z.SELECTOR.INNERTEXT);if(j>-1){if(O(z)){w.splice(j,1);s=':contains("'+K(z)+'")';g=K(z)}else{console.warn("innerText won't be considered while generating unique selector as the target element is not a leaf node")}}var t=I(z.attributes,w);if(t[Z.DATA_TEST_ID]){x="["+Z.DATA_TEST_ID+'="'+t[Z.DATA_TEST_ID]+'"]';q[Z.DATA_TEST_ID_KEY]=t[Z.DATA_TEST_ID];delete t[Z.DATA_TEST_ID];if(L(x,null,y)){return q}}for(var k in t){if(t.hasOwnProperty(k)){x=x+"["+k+'="'+t[k]+'"]';q[k]=t[k];delete t[k];if(L(x,null,y)){return q}}}if(g){var AA=x+s;if(L(AA,g,y)){q[Z.SELECTOR.INNERTEXT]=g;return q}if(x!==""){x=x+s}}if(x===""){console.warn("Make sure target element has valid attributes to generate selector");return null}var l=z;var n=l.parentElement;var v=false;var h={};while(n!=null&&n!=document.body){i=0;q[Z.SELECTOR.PARENTS]=q[Z.SELECTOR.PARENTS]||[];var o={};o[Z.SELECTOR.NODE_NAME]=n.nodeName;var r="";h=I(n.attributes,w);for(var m in h){if(h.hasOwnProperty(m)){r=r+"["+m+'="'+h[m]+'"]';if(m==Z.DATA_TEST_ID){o[Z.DATA_TEST_ID_KEY]=h[m]}else{o[m]=h[m]}var p=r+" "+x;if(L(p,null,y)){v=true;break}}}if(r){q[Z.SELECTOR.PARENTS].push(o);x=r+" "+x}if(v){break}n=n.parentElement}l=null;n=null;h=null;if(v){if(q[Z.SELECTOR.PARENTS].length>1){q=D(q)}return q}}function b(m){var k=[];var n=null;var g=m;var h=d(g);while(h){n={};n.type="mdc";n.querySelector="[data-mdc-recordid].show";k.push(n);g=h;h=d(g.parentElement)}var j=V(g.ownerDocument.defaultView);while(g&&g.ownerDocument.defaultView!=j){var l=g.ownerDocument.defaultView.frameElement;if(l){n={};n.type="iframe";k.push(n);g=l}h=d(g);while(h){n={};n.type="mdc";n.querySelector="[data-mdc-recordid].show";k.push(n);g=h;h=d(g.parentElement)}}g=null;return k}function d(g){if(!g){return null}return $(g).closest("[data-mdc-recordid].show")[0]}function I(l,m){var j={};var k={};for(var h=0;h<l.length;h++){if(l[h].name=="name"&&l[h].value.indexOf("_")>-1){continue}if(l[h].name=="base_ref"&&Q(l[h].value)){continue}k[l[h].name]=l[h].value}for(h=0;h<Z.SELECTOR.WHITELIST.length;h++){var g=Z.SELECTOR.WHITELIST[h];if(k[g]!=undefined&&k[g]!=null){j[g]=k[g]}}if(m){for(h=0;h<m.length;h++){var g=m[h];if(k[g]!=undefined&&k[g]!=null){j[g]=k[g]}}}k=null;return j}function Q(g){return g&&g.search(/_pa\d+pz\./g)>-1}function e(g,h){if(g.name=="name"&&g.value.indexOf("_")>-1){return false}if(Z.SELECTOR.WHITELIST.indexOf(g.name)!=-1||(h&&h.indexOf(g.name)!=-1)){return true}return false}function N(h,g){var k="";for(var j=0;j<Z.SELECTOR.CONTAINERS_BLACKLIST.length;j++){k=k+Z.SELECTOR.CONTAINERS_BLACKLIST[j]+" "+g;if(j<Z.SELECTOR.CONTAINERS_BLACKLIST.length-1){k=k+","}}return $(h).find(k)}function Y(h){var g=h.ownerDocument;var j=d(h);if(j){g=j}j=null;return g}function L(h,k,g,m){if(!h){return false}if(m&&!g){g=Y(m)}var j=$(g).find(h);var l=N(g,h);if(l&&l.length>0){j=$(j).not(l)}if(k!==null&&k!==undefined){j=$(j).filter(function(){return K(this)===k})}if(j&&j.length==1){return true}return false}function G(g){var h=P(g);if(h&&h.length==1){return true}return false}function D(j){var g=JSON.parse(JSON.stringify(j));g[Z.SELECTOR.PARENTS]=[];var h=j[Z.SELECTOR.PARENTS];g[Z.SELECTOR.PARENTS].push(h[h.length-1]);var k=G(g);if(!k){g[Z.SELECTOR.PARENTS]=[];k=C(g,h)}if(k){j=g}domElements=null;return j}function C(h,j){var l=false;function g(q,p,m){for(var o=q;o<j.length-1;o++){var n=m.slice(0);n.push(j[o]);if(p>0){if(g(o+1,p-1,n)){break}}else{n.push(j[j.length-1]);h[Z.SELECTOR.PARENTS]=n.slice(0);if(G(h)){l=true;break}}}return l}for(var k=0;k<j.length;k++){l=g(0,k,[]);if(l){break}}return l}function S(g){var h=document.querySelectorAll("[data-node-id=pyFunctionalTestStepRow]");for(var j=0;j<h.length;j++){h[j].style=""}g.target.closest("[data-node-id=pyFunctionalTestStepRow]").style="background-color: #D6F1FB;"}function F(h){if(h&&h!==""){var g=$("."+h).closest("div.overlayPO")[0];if(g){g.style.zIndex=100000}}}return{getDomElement:a,getDomElementPromise:B,getAllDomElements:P,getAssertedDomValue:R,getConfiguredDomValue:X,constructSelector:M,generateSelector:A,isUniqueSelector:L,getContainersInfo:b,hasClass:J,findElementAcrossFrames:c,invokeApi:H,getAttributeValue:E,getComponentDesc:U,getPortalWindow:V,focusSelectedStep:S,makeOverlayVisible:F}})();
pega.ui.automation.manager=(function(){var U={};var T=pega.ui.automation.constants;U[T.COMPONENT.DEFAULT]={};U[T.COMPONENT.BUTTON]={};U[T.COMPONENT.TEXT_INPUT]={};U[T.COMPONENT.MENU_ITEM]={};U[T.COMPONENT.LABEL]={};U[T.COMPONENT.DROPDOWN]={};U[T.COMPONENT.AUTOCOMPLETE]={};U[T.COMPONENT.RICH_TEXT_EDITOR]={};function C(X){if(U[X]&&U[X][T.HANDLER.RECORDER]){return U[X][T.HANDLER.RECORDER]}return U[T.COMPONENT.DEFAULT][T.HANDLER.RECORDER]}function L(Y,X){U[Y]=U[Y]||{};U[Y][T.HANDLER.RECORDER]=X}function P(X){if(U[X]&&U[X][T.HANDLER.NAVIGATOR]){return U[X][T.HANDLER.NAVIGATOR]}return U[T.COMPONENT.DEFAULT][T.HANDLER.NAVIGATOR]}function S(Y,X){U[Y]=U[Y]||{};U[Y][T.HANDLER.NAVIGATOR]=X}function H(X){if(U[X]&&U[X][T.HANDLER.ASSERTOR]){return U[X][T.HANDLER.ASSERTOR]}return U[T.COMPONENT.DEFAULT][T.HANDLER.ASSERTOR]}function O(Y,X){U[Y]=U[Y]||{};U[Y][T.HANDLER.ASSERTOR]=X}function J(X){if(U[X]&&U[X][T.HANDLER.STEP_BUILDER]){return U[X][T.HANDLER.STEP_BUILDER]}return null}function W(X,Y){U[X]=U[X]||{};U[X][T.HANDLER.STEP_BUILDER]=Y}function V(){var X=Object.keys(U);var Y=X.indexOf(T.COMPONENT.DEFAULT);X.splice(Y,1);return X}function I(X){if(U[X]&&U[X][T.HANDLER.TRANSLATOR]){return U[X][T.HANDLER.TRANSLATOR]}return null}function F(X,Y){U[X]=U[X]||{};U[X][T.HANDLER.TRANSLATOR]=Y}function K(X){if(U[X]&&U[X][T.EVENTS]){return U[X][T.EVENTS]}return null}function M(X){if(U[X]&&U[X][T.HANDLER.INSPECTOR]){return U[X][T.HANDLER.INSPECTOR]}return null}function B(X,Y){U[X]=U[X]||{};U[X][T.HANDLER.INSPECTOR]=Y}function G(){var X=[];for(var Y in U){if(U[Y][T.HANDLER.INSPECTOR]){X.push(U[Y][T.HANDLER.INSPECTOR])}}return X}function D(Y){var X=Y.type;if(!Y.type){console.error("type not found in componenetObj ",Y);return }U[X]={};if(Y.events){U[X][T.EVENTS]=Y.events}if(!Y.handlers){return }if(Y.handlers.recorder){L(X,Y.handlers.recorder)}if(Y.handlers.stepbuilder){W(X,Y.handlers.stepbuilder)}if(Y.handlers.translator){F(X,Y.handlers.translator)}if(Y.handlers.navigator){S(X,Y.handlers.navigator)}if(Y.handlers.asserter){O(X,Y.handlers.asserter)}if(Y.handlers.inspector){B(X,Y.handlers.inspector)}}function N(Y,X){if(!Y||!X){return }if(!U[X]){console.log("No prent component type exists with :"+X);return }if(C(X)){L(Y,Object.create(C(X)))}if(J(X)){W(Y,Object.create(J(X)))}if(I(X)){F(Y,Object.create(I(X)))}if(P(X)){S(Y,Object.create(P(X)))}if(H(X)){O(Y,Object.create(H(X)))}if(M(X)){B(Y,Object.create(M(X)))}}function A(Z,X){var Y=Object.create(pega.ui.automation.recorder.stepbuilder.defaultComponent,{implicitAssertions:{value:":contains"}});var a={};a.type=Z;a.handlers={};a.handlers.stepbuilder=Y;if(X){a.handlers.inspector={};a.handlers.inspector.selector=X;a.handlers.inspector.selectorcb=function(){return{type:Z,subType:Z}}}D(a)}function E(Z,X){var a=Object.create(pega.ui.automation.recorder.stepbuilder.defaultComponent,{implicitAssertions:{value:":contains"}});a.getTargetElement=function(b){console.log("Invoking custom button stepbuilder");if(b.nodeName==="BUTTON"){return b}return b.querySelector("button")};var Y={};Y.type=Z;Y.handlers={};Y.handlers.stepbuilder=a;if(X){Y.handlers.inspector={};Y.handlers.inspector.selector=X;Y.handlers.inspector.selectorcb=function(){return{type:Z,subType:Z}}}D(Y)}function R(X){if(!X.type){console.error("component type is required: ",X);return }if(!X.highlightSelector){console.error("component highlightSelector is required: ",X);return }if(!((X.assertions&&X.assertions.length>0)||(X.actions&&X.actions.length>0))){console.error("component should have either assertions or actions defained: ",X);return }var Y=new Q(X.type,X.highlightSelector,X.uniqueElementSelector,X.assertions,X.actions);D(Y)}function Q(d,Z,X,g,Y){this.type=d;var a={};this.handlers=a;a.inspector={};a.inspector.selector=Z;a.inspector.selectorcb=function(){return{type:d,subType:d}};var e=g&&g.length>0?Object.keys(g):null;var f=Y&&Y.length>0?Object.keys(Y):null;if(e||f){var b=Object.create(pega.ui.automation.recorder.translator.defaultComponent);b.buildConfigs=function(){return g};a.translator=b;var c=Object.create(pega.ui.automation.recorder.stepbuilder.defaultComponent,{implicitAssertions:{value:e},implicitNavigations:{value:f}});if(X){c.customQuerySelector=X}a.stepbuilder=c}}return{getRecorder:C,registerRecorder:L,getNavigator:P,registerNavigator:S,getAssertor:H,registerAssertor:O,getStepbuilder:J,registerStepbuilder:W,getAllSupportedComponents:V,getTranslator:I,registerTranslator:F,getInspector:M,registerInspector:B,registerComponent:D,registerSubComponent:N,registerSimpleCustomComponent:R,registerTextComponent:A,registerButtonComponent:E,getAllComponentInspectorConfigs:G,getEvents:K}})();
pega.ui.automation.storeManager=(function(){var AP="currentTestCaseAndStep";var AT=[];var a=function(Ab){if(Ab){var Ac=sessionStorage.getItem("TestCase-"+Ab);Ac=JSON.parse(Ac);return Ac}return null};var AR=function(Ac){if(Ac&&Ac.id){var Ab=Ac.id;sessionStorage.setItem("TestCase-"+Ac.id,JSON.stringify(Ac));C(Ab);return true}return false};var O=function(Ad,Ae){var Ab=Z(),Ac=a(Ab),Af=Ac.pyTestCaseSteps;if(Ad<=Af.length){Af.splice(Ad-1,0,Ae)}AR(Ac)};var AH=function(Ab){if(Ab&&Ab.id){var Ac=Ab.id;sessionStorage.setItem("TestSuite-"+Ab.id,JSON.stringify(Ab));AX(Ac);if(Ab.testSuiteStartTime){b(Ab.testSuiteStartTime)}return true}return false};var U=function(Ab){if(Ab){sessionStorage.removeItem("TestCase-"+Ab);return true}return false};var AV=function(){var Ad=Object.keys(sessionStorage);for(var Ac in Ad){var Ab=Ad[Ac];if(Ab.indexOf("TestCase-")==0){sessionStorage.removeItem(Ab)}}};var c=function(){var Ab=sessionStorage.getItem("TestCaseList");Ab=JSON.parse(Ab);if(Ab){var Ac=Ab.shift();if(Ab.length>0){sessionStorage.setItem("TestCaseList",JSON.stringify(Ab))}else{sessionStorage.setItem("TestCaseList",null)}return Ac}return null};var k=function(Ab){if(Ab instanceof Array){sessionStorage.setItem("TestCaseList",JSON.stringify(Ab));return true}return false};var x=function(){sessionStorage.removeItem("TestCaseList")};var C=function(Ab){if(Ab){sessionStorage.setItem(AP,Ab+"$0");return true}return false};var AF=function(Ac){var Ab=Z();if(Ab&&!isNaN(parseInt(Ac))){sessionStorage.setItem(AP,Ab+"$"+Ac);return true}return false};var Z=function(){var Ab=sessionStorage.getItem(AP);if(Ab){Ab=Ab.substring(0,Ab.lastIndexOf("$"));return Ab}return null};var AM=function(){var Ab=sessionStorage.getItem(AP);if(Ab){Ab=Ab.substring(Ab.lastIndexOf("$")+1);return parseInt(Ab)}return null};var R=function(Ab,Af,Ae){var Ad=sessionStorage.getItem("TestCase-"+Ab);Ad=JSON.parse(Ad);var Ac=Ad[pega.ui.automation.constants.TEST_CASE_STEPS];Ac[Af]=Ae;sessionStorage.setItem("TestCase-"+Ab,JSON.stringify(Ad))};var z=function(){sessionStorage.removeItem(AP)};var AI=function(Ab){if(Ab){try{Ab=JSON.stringify(Ab);sessionStorage.setItem("TestCaseResult",Ab)}catch(Ac){console.log("Exception while parsing testcase result!")}}};var AA=function(){var Ab=sessionStorage.getItem("TestCaseResult");if(Ab){Ab=JSON.parse(Ab)}return Ab};var Aa=function(Ad){var Ac=null;var Ab=sessionStorage.getItem("TestCaseResult");if(Ab){Ab=JSON.parse(Ab);Ac=Ab.pyTestCaseSteps[Ad]}return Ac};var AY=function(){sessionStorage.removeItem("TestCaseResult")};var w=function(Ab){if(Ab){try{Ab=JSON.stringify(Ab);sessionStorage.setItem("TestCaseMetaData",Ab)}catch(Ac){console.log("Exception while parsing testcase metadata!")}}};var l=function(){var Ab=sessionStorage.getItem("TestCaseMetaData");if(Ab){Ab=JSON.parse(Ab)}return Ab};var A=function(){sessionStorage.removeItem("TestCaseMetaData")};var r=function(){sessionStorage.removeItem("StartRunIndex");sessionStorage.removeItem("StopRunIndex");sessionStorage.removeItem("ExecutorMode")};var AC=function(Ad,Ac){if(!isNaN(Ad)){var Ab=l();if(Ab==null){w({pyTestCaseSteps:[]});Ab=l()}if(!Ac){Ac={}}Ab.pyTestCaseSteps[Ad]=Ac;w(Ab)}};var AK=function(Ad){var Ac=null;if(!isNaN(Ad)){var Ab=l();if(Ab){Ac=Ab.pyTestCaseSteps[Ad]}}return Ac};var D=function(Ac){if(!isNaN(Ac)){var Ab=l();if(Ab){Ab.pyTestCaseSteps[Ac]={};w(Ab)}}};var Q=function(){var Ab=l();if(Ab){return Ab.pyTestCaseSteps}};var t=function(Ab){if(!isNaN(Ab)){sessionStorage.setItem("RecoderStepIndex",Ab)}};var y=function(){var Ab=sessionStorage.getItem("RecoderStepIndex");return Ab?parseInt(Ab):Ab};var o=function(){sessionStorage.removeItem("RecoderStepIndex")};var AB=function(Ab){sessionStorage.setItem("LastRunStepIndex",Ab)};var AJ=function(){return sessionStorage.getItem("LastRunStepIndex")};var AQ=function(Ab){sessionStorage.setItem("EditStepIndex",Ab)};var AO=function(){return sessionStorage.getItem("EditStepIndex")};var AN=function(Ab){sessionStorage.setItem("ExecutorStatus",Ab)};var AX=function(Ab){sessionStorage.setItem("SuiteInsKey",Ab)};var j=function(Ab){sessionStorage.setItem("SuiteCheckedInInsKey",Ab)};var b=function(Ab){sessionStorage.setItem("SuiteStratTime",Ab)};var K=function(){return sessionStorage.getItem("SuiteInsKey")};var q=function(){return sessionStorage.getItem("SuiteCheckedInInsKey")};var W=function(){return sessionStorage.getItem("SuiteStratTime")};var AW=function(){return sessionStorage.getItem("DocStateCaptureFlag")};var v=function(Ab){sessionStorage.setItem("DocStateCaptureFlag",Ab)};var I=function(){return sessionStorage.removeItem("DocStateCaptureFlag")};var AG=function(){if(sessionStorage!==undefined||sessionStorage!==null){return sessionStorage.getItem("ExecutorStatus")}};var P=function(Ab){sessionStorage.setItem("ExecutorMode",Ab)};var J=function(){return sessionStorage.getItem("ExecutorMode")};var n=function(Ad,Af){if(Ad){try{var Ac=Y(Af);Ac.push(Ad);var Ab=JSON.stringify(Ac);sessionStorage.setItem(AZ(Af),Ab)}catch(Ae){console.log("Exception while parsing TestCaseRunnerMessage!")}}};var Y=function(Ad){var Ab=sessionStorage.getItem(AZ(Ad));var Ac=[];if(Ab){Ac=JSON.parse(Ab)}return Ac};var AZ=function(Ab){return Ab?"TestCaseExecutorMessage":"TestCaseRunnerMessage"};var H=function(Ae){var Ad=Y(Ae);var Ab=Ad.shift();var Ac=JSON.stringify(Ad);sessionStorage.setItem(AZ(Ae),Ac);return Ab};var E=function(Ab){sessionStorage.removeItem(AZ(Ab))};var p=function(Ab){sessionStorage.setItem("AutomationJobId",Ab)};var AL=function(){return sessionStorage.getItem("AutomationJobId")};var AD=function(){sessionStorage.removeItem("AutomationJobId")};var G=function(Ab){if(sessionStorage){sessionStorage.setItem("TestCase-dynamicvalues",JSON.stringify(Ab));return true}return false};var s=function(){if(sessionStorage){var Ab=sessionStorage.getItem("TestCase-dynamicvalues");Ab=JSON.parse(Ab);return Ab}return null};var i=function(){sessionStorage.setItem("TestCase-dynamicvalues",null)};var T=function(Ab){sessionStorage.setItem("TestCaseSlowMode",Ab)};var m=function(){return sessionStorage.getItem("TestCaseSlowMode")};var g=function(){sessionStorage.removeItem("TestCaseSlowMode")};var d=function(Ab){sessionStorage.setItem("TestCasesRerunEnabled",Ab)};var S=function(){return sessionStorage.getItem("TestCasesRerunEnabled")};var AS=function(Ab){sessionStorage.setItem("TestCasesRerunCount",Ab)};var L=function(){return sessionStorage.getItem("TestCasesRerunCount")};var M=function(){sessionStorage.removeItem("TestCasesRerunEnabled")};var f=function(){sessionStorage.removeItem("TestCasesRerunCount")};var h=function(Ab){if(sessionStorage){var Ac=JSON.parse(sessionStorage.getItem("RerunTestCaseList"));if(!Ac){Ac={pxResults:[]}}Ac.pxResults.push(Ab);sessionStorage.setItem("RerunTestCaseList",JSON.stringify(Ac))}};var u=function(){return JSON.parse(sessionStorage.getItem("RerunTestCaseList"))};var B=function(){sessionStorage.removeItem("RerunTestCaseList")};var X=function(){return JSON.parse(sessionStorage.getItem("RerunInProgress"))};var N=function(Ab){sessionStorage.setItem("RerunInProgress",Ab)};var V=function(){sessionStorage.removeItem("RerunInProgress")};var AE=function(){M();f();B();V();F()};var e=function(Ab){sessionStorage.setItem("CurrentTestCaseForRerun",JSON.stringify(Ab))};var AU=function(){return JSON.parse(sessionStorage.getItem("CurrentTestCaseForRerun"))};var F=function(){sessionStorage.removeItem("CurrentTestCaseForRerun")};return{getTestCaseFromLocalStore:a,putTestCaseInLocalStore:AR,removeTestCaseFromLocalStore:U,removeAllTestCasesFromLocalStore:AV,getNextTestCaseFromLocalStore:c,putTestCasesListInLocalStore:k,removeTestCasesListFromLocalStore:x,setCurrentTestCase:C,setCurrentStepIndex:AF,updateTestCaseStepData:R,getCurrentTestCase:Z,updateCurrentTestCaseStep:O,getCurrentStepIndex:AM,removeCurrentTestCaseAndStep:z,setTestCaseResult:AI,getTestCaseResult:AA,getTestCaseStepResult:Aa,removeTestCaseResult:AY,setTestCaseMeta:w,getTestCaseMeta:l,removeTestCaseMeta:A,setTestCaseStepMeta:AC,getAllTestCaseStepsMeta:Q,getTestCaseStepMeta:AK,resetTestCaseStepMeta:D,setExecutorStatus:AN,getExecutorStatus:AG,setExecutorMode:P,setSuiteInsKey:AX,getSuiteInsKey:K,setSuiteCheckedInInsKey:j,getSuiteCheckedInInsKey:q,setSuiteStartTime:b,getSuiteStartTime:W,putTestSuiteInLocalStore:AH,getDocStateCaptureFlag:AW,setDocStateCaptureFlag:v,removeDocStateCaptureFlag:I,getExecutorMode:J,setRecoderStepIndex:t,getRecoderStepIndex:y,removeRecoderStepIndex:o,setTestCaseRunnerMessage:n,getTestCaseRunnerMessage:H,removeTestCaseRunnerMessage:E,setAutomationJobId:p,getAutomationJobId:AL,removeAutomationJobId:AD,getTestCaseDynamicValueFromLocalStore:s,setTestCaseDynamicValueInLocalStore:G,removeTestCaseDynamicValueFromLocalStore:i,setTestRunSlowMode:T,getTestRunSlowMode:m,removeTestRunSlowMode:g,setLastRunStepIndex:AB,getLastRunStepIndex:AJ,setEditStepIndex:AQ,getEditStepIndex:AO,removeTestCaseEditData:r,setIsRerunEnabeledForTestCases:d,getIsRerunEnabeledForTestCases:S,setTestCasesRerunCount:AS,getTestCasesRerunCount:L,removeTestCasesRerunStatus:M,removeTestCasesRerunCount:f,reSetTestCaseRerunList:B,addFailedTestCaseForRerun:h,getRerunTestCaseList:u,getRerunInProgress:X,setRerunInProgress:N,removeRerunInProgress:V,cleanRerunVariables:AE,setCurrentTestCaseForRerun:e,getCurrentTestCaseForRerun:AU,removeCurrentTestCaseForRerun:F}})();
pega=pega||{};pega.ui=pega.ui||{};pega.ui.automation=pega.ui.automation||{};pega.ui.automation.recorder=(function(K){var S={};var T="click";var R=null;var Z=false;var b=false;var C=null;var D=null;var B=null;var Q=false;var N=["div.runtime-recorder-panel","div.ui-inspector","i.mark-for-assertion","div[node_name='pzDefaultStepBuilderWrapper']",".autocompleteAG","div[node_name='pyTestStepAssertions']","div[node_name='pzRuntimeToolsTopBar']","div[node_name='pyDefaultStepView']"];S.getComponentName=function(e){var f=e.type;if(f==="section"){return f}return e.subType};_isValidFrame=function(g){try{if(g.pega&&g.pega.ui&&g.pega.ui.automation){return true}}catch(f){}return false};_getRecorder=function(e){if(e.pega&&e.pega.ui&&e.pega.ui.automation){return e.pega.ui.automation.recorder}return null};_getinspector=function(){return pega.ui.ScreenInspector.getInspector("recorder")};S.setCurrentStepPage=function(e){C=e};S.getCurrentStepPage=function(){return C};S.clearCurrentStepPage=function(){C=null;var e=$(".assertor-popover")[0];if(e&&e.po){e.po.close()}};var P=function(e,f){var g=e.getAttribute(f)||"";g="pega.ui.EventsEmitter.publishSync(pega.c.eventController.ON_BEFORE_EVENT_PROCESSING, event);"+g;e.setAttribute(f,g)};var W=function(g,f){if(f instanceof Array){var e=0;for(;e<f.length;e++){P(g,f[e])}}else{P(g,f)}};S.beforeElementSelection=function(h){var f=S.getComponentName(S.getValidInspactableElementData(h).inspectorData);var g=pega.ui.automation.manager.getEvents(f);if(g){var e=pega.ui.automation.manager.getStepbuilder(f);W(e.getTargetElement(h),g)}};var M=function(){var e=$(".ui-inspector",document);if(e.length!==0){e.find("a").attr("disabled",true).addClass("disabledStyle").children("i").attr("disabled",true).addClass("disabledStyle");e.find("button").attr("disabled",true).addClass("disabledStyle");e.attr("disabled",true);liveUI_dataClick=e.find("i").attr("data-click");e.find("i").removeAttr("data-click")}e=[];var f=$(".gapid_icon",document);if(f&&f.length>0){e=f.closest("div")}if(e.length!==0){e.find("a").attr("disabled",true).addClass("disabledStyle").children("i").attr("disabled",true).addClass("disabledStyle");e.find("button").attr("disabled",true).addClass("disabledStyle");e.attr("disabled",true);agileWB_dataClick=e.find("i").attr("data-click");e.find("i").removeAttr("data-click")}};var X=function(){var e=$(".ui-inspector",document);if(e.length!==0){e.find("a").removeAttr("disabled").removeClass("disabledStyle").children("i").removeAttr("disabled").removeClass("disabledStyle");e.find("button").removeAttr("disabled").removeClass("disabledStyle");e.removeAttr("disabled");e.find("i").attr("data-click",liveUI_dataClick);liveUI_dataClick=""}e=[];var f=$(".gapid_icon",document);if(f&&f.length>0){e=$(".gapid_icon",document).closest("div")}if(e.length!==0){e.find("a").removeAttr("disabled").removeClass("disabledStyle").children("i").removeAttr("disabled").removeClass("disabledStyle");e.find("button").removeAttr("disabled").removeClass("disabledStyle");e.removeAttr("disabled");e.find("i").attr("data-click",agileWB_dataClick);agileWB_dataClick=""}};S.toggle=function(f){if(window!==pega.desktop.support.getDesktopWindow()||pega.desktop.portalName==="pxExpress"||window!==pega.ui.automation.utils.getPortalWindow()){return }$(".automation-recorder").toggleClass("active");if(!R){R=new EdgePanel("recorder");R.setPanelSection("pxAutomationEdgePaneWrapper",{className:"@baseclass"})}var e=function(){var g=pega.ui.ClientCache.find("pxRequestor.pxAutomationRecorder.pyTestCaseDisplayMode");if(g){var h=g.getValue();if(h&&h==="recording"){pega.ui.automation.recorder.startRecording()}}if(f&&(typeof f=="function")){f.apply(null,arguments)}};if(R.panelState==R.STATES.ACTIVE){R.panelState=R.STATES.BUSY;X();R.hide(S.stopRecording,S);Z=false}else{if(R.panelState==R.STATES.INACTIVE){R.panelState=R.STATES.BUSY;M();R.show(e);Z=true}else{}}};S.isPanelActive=function(){return Z};S.isRecording=function(){return b};S.toggleTestActions=function(f){var g=f.target||f.srcElement;var e=$(g).parents(".pz-gap-item-row");if(e.hasClass("visible")){e.removeClass("visible");e.children(".item-2").children("div").css("right","")}else{e.parents("div[node_name='pxAutomationFunctionalTests']").find(".pz-gap-item-row.visible").each(function(){$(this).removeClass("visible");$(this).children(".item-2").children("div").css("right","")});e.addClass("visible");e[0].offsetHeight;e.children(".item-2").children("div").css("right","0")}ev.preventDefault();ev.stopPropagation();return false};function A(g){var f=g.target;if(b&&pega.c.eventController){pega.c.eventController.handler(g)}}function a(f){if(b&&f.keyCode==17){top.window.holdHighlight=true}}function U(f){if(b&&f.keyCode==17){top.window.holdHighlight=false}}function c(f){if(b){top.window.holdHighlight=false}}function L(f){try{if(f&&f.getAttribute("node_name")=="pxTestCaseDetails"){var h=f.querySelector("div[node_name='pyShowRecordingTestSteps']");var e=$(h).closest(".layout");if(h&&e.length){e.get(0).scrollTop=e.get(0).scrollHeight}}}catch(g){}}S.startRecording=function(){if(b){return }document.addEventListener("mouseover",A);document.addEventListener("keydown",a);document.addEventListener("keyup",U);document.addEventListener("contextmenu",c);pega.u.d.attachOnload(L,true);if(!pega.ui.EventsEmitter.isListenerSubscribed(pega.c.eventController.ON_BEFORE_EVENT_PROCESSING,_onBeforeEventProcessing)){pega.ui.EventsEmitter.subscribe(pega.c.eventController.ON_BEFORE_EVENT_PROCESSING,_onBeforeEventProcessing)}if(window==desktopwrappersupport_getDesktopWindow()){var k=pega.ui.ScreenInspector.getInspector("recorder");k.registerPostHighlightCallback(_markForAssertion,this);k.setBlackListedElement(N);k.addSelector("[data-ui-meta]",function(n){var o=null;var m=n.getAttribute("data-ui-meta");if(m){m=JSON.parse(m.replace(/'/g,'"'));var p=m.subType;var q=pega.ui.automation.manager.getAllSupportedComponents();if(p){for(var l=0;l<q.length;l++){if(q[l].toUpperCase()===p.toUpperCase()){o=m;break}}}}return o});var h=pega.ui.automation.manager.getAllComponentInspectorConfigs();for(var g=0;g<h.length;g++){var j=h[g];if(j.selector&&j.selectorcb){k.addSelector(j.selector,j.selectorcb)}}k.enable()}b=true;var f=window.frames;for(var g=0;g<f.length;g++){if(_isValidFrame(f[g])){var e=_getRecorder(f[g]);e.startRecording()}}};_markForAssertion=function(f,e){_markForExplicitAssertion(f);D=f;B=e};_markForExplicitAssertion=function(g){var e=document.querySelectorAll("[data-recording]");for(var f=0;f<e.length;f++){var h=e[f];h.removeAttribute("data-recording")}if(g.classList.contains("menu-item")&&!g.parentElement.classList.contains("menu-bar")){g.setAttribute("data-recording","true")}};S.getValidInspactableElementData=function(h){var k=pega.ui.ScreenInspector.getInspector("recorder");var g=k._getSelectorList();var j=h.closest(g);if(j){for(var f=0;f<N.length;f++){if(j.closest(N[f])){j=null;break}}}var e=j&&k._closestSelectorMetadata(j);if(!e){j=null}return{selectedElement:j,inspectorData:e}};_isMenu=function(e){return e=="pxMenu"||e=="pxMenuItem"};_isShowMenu=function(f,e){return _isMenu(e)&&$(f).closest("ul.menu-regular")[0]};var F=function(h){try{var f=h.getAttribute("data-hover");if(f&&f.length>0){return f.includes("showSmartTip")||f.includes("showSmartInfo")}}catch(g){console.log("Parsing error in data-hover action string")}return false};var J=function(j,g,k){if(j.type==="change"&&g=="pxAutoComplete"&&j.target&&j.target.name&&k){var i=pega.ui.automation.manager.getStepbuilder(g).getTargetElement(k);if(i&&i.name!=j.target.name){return false}}if(j.type==="mousedown"&&navigator.userAgent.lastIndexOf("Firefox/")>-1){if(g=="pxAutoComplete"||g=="pxDropdown"){var i=pega.ui.automation.manager.getStepbuilder(g).getTargetElement(k);if(i&&i.name!=j.target.name){return false}}}if(j.type==="change"&&j.target){var h=j.target.getAttribute("data-change-lazy");if(h&&h=="true"){return false}}if(j.type==="change"||j.type==="dblclick"||(j.type==="mousedown"&&j.isTrusted)||j.type==="contextmenu"){return true}else{if(j.type==="mouseover"&&F(j.target)){return true}else{var f=pega.ui.automation.manager.getRecorder(g);return f.isSupportedStepRecord(j,k)}}};var I=function(j,g){try{if(j){var h=$(j).parents("li.menu-item-active")[0];I(h,"mouseover");var i=S.getValidInspactableElementData(j);var l=i&&i.selectedElement;var f="";if(l){f=S.getComponentName(i.inspectorData)}pega.ui.automation.recorder.stepbuilder.buildAndSaveStep(l,f,g)}}catch(k){console.error("Can not record the Menu Item path")}};_onBeforeEventProcessing=function(k){if(k.name&&k.name.startsWith("PEGACKEDITOR")){k.target=k.element.$;k.type="mousedown";k.isTrusted=true}var g=S.getValidInspactableElementData(k.target);var l=g&&g.selectedElement;if(l){var f=S.getComponentName(g.inspectorData);if(f==="pxDropDown"){f="pxDropdown"}}if(k.type==="click"&&pega.u.smartinfo&&pega.u.smartinfo.targetElememnt){var j=$(k.target).closest(".smartInfoMain");if(!(j&&j.length>0)){pega.u.d.getPopOver(pega.u.smartinfo.targetElememnt).close()}}if(l&&J(k,f,l)){if(_isShowMenu(l,f)){var i=$(l).closest("li.menu-item-active")[0];if(i){I(i,"click")}return }console.log("onBefore ",k.type);var h=k.type;if(h==="mousedown"){h="click"}pega.ui.automation.recorder.stepbuilder.buildAndSaveStep(l,f,h,k.target)}};S.showAssertionPanel=function(i){var g=S.getValidInspactableElementData(D);var k=g&&g.selectedElement;if(k){var h=k;if(i&&i.target){h=i.target}var f=S.getComponentName(g.inspectorData);var j=$(k).closest(".overlayPO");if(j.length>0&&j.get(0).po&&j.get(0).po.isActive()){j.addClass("has-assertion-popover");i.stopPropagation()}console.log("*** Show assertion panel ***");pega.ui.automation.recorder.stepbuilder.showAssertorPopover(k,f,T,h);if(k.classList.contains("menu-item")){i.stopPropagation();i.preventDefault()}}};S.markAssertion=function(f){Q=true;var g=pega.ui.ScreenInspector.getInspector("recorder");g.select(D)};S.clearRecordingStore=function(){pega.ui.automation.recorder.stepbuilder.clearCurrentStepPage();pega.ui.automation.storeManager.removeRecoderStepIndex();$("[data-aftrecorder-index]").removeAttr("data-aftrecorder-index");if(pega.ui.automation.storeManager.getExecutorMode()=="edit"){pega.ui.automation.storeManager.setExecutorMode(null);pega.ui.automation.storeManager.setLastRunStepIndex(0)}};S.stopRecording=function(){if(!b){var j=pega.ui.ScreenInspector.getInspector("recorder");if(j){j.clearHighlight();j.disable()}return }if(pega.ui.automation.storeManager.getExecutorMode()!="edit"){S.clearRecordingStore()}pega.ui.EventsEmitter.unsubscribe(pega.c.eventController.ON_BEFORE_EVENT_PROCESSING,_onBeforeEventProcessing);document.removeEventListener("mouseover",A);document.removeEventListener("keydown",a);document.removeEventListener("keyup",U);document.removeEventListener("contextmenu",c);var g=document.querySelectorAll("[data-recording]");for(var h=0;h<g.length;h++){g[h].removeAttribute("data-recording")}pega.u.d.detachOnload(L);var j=pega.ui.ScreenInspector.getInspector("recorder");j.disable();b=false;var f=window.frames;for(var h=0;h<f.length;h++){if(_isValidFrame(f[h])){var e=_getRecorder(f[h]);e.stopRecording()}}};S.addToBlacklistedElements=function(e){if(!N){N=[]}N.push(e)};S.cascadeRecording=function(){var e=_getRecorder(pega.ui.automation.utils.getPortalWindow());if(e&&e.isRecording()){S.startRecording()}};function O(){var e=SafeURL_createFromURL(pega.u.d.url);e.put("pyActivity","pxSetAutomationEdgePaneSectionName");e.put("sectionName","pxAutomationTestCasesList");var f={success:function(g){pega.ui.automation.recorder.toggle()},failure:function(g){console.log("Recorder intialization failed ",g)}};pega.util.Connect.asyncRequest("POST",e.toURL(),f)}function H(){if(!G){O()}else{G=false}}var Y=function(f){if(f.preventDefault){f.preventDefault()}f.cancelBubble=true;if(f.stopPropagation){f.stopPropagation()}return false};var d=0;var G=false;function E(){var g=parent.document;var f=document.createElement("DIV");f.setAttribute("class","pz-recorder-tool");f.setAttribute("data-test-id","RecorderInspectorButton");f.setAttribute("tabindex","0");f.setAttribute("aria-label","Recorder");f.innerHTML="<div unselectable='on' class='recoderid_icon'><span  unselectable='on' class='pzbtn-img'><img src='webwb/pxIcon_ScenarioTesting.svg'/></span>Test  </div>";$(f).appendTo(document.body);f.addEventListener("click",H,true);var e=function(i){G=true;d++;if(d>5){var h=$(".pz-recorder-tool",g).outerWidth();var l=$(".pz-recorder-tool",g).outerHeight();var k=i.clientX-(h/2);var j=i.clientY-(l/2);if(i.clientX<0||i.clientY<0||i.clientX>$(window).width()||i.clientY>$(window).height()){d=0;$(".ui-recorder-tree-mask",g).remove();window.removeEventListener("mousemove",e,true);$(".pz-recorder-tool",g).removeClass("noClick");return Y(i)}if(k<0){k=0}if(j<0){j=0}if(k>($(window).width()-h)){k=($(window).width()-h)}if(j>($(window).height()-l)){j=($(window).height()-l)}$(".pz-recorder-tool",g).css({position:"fixed",top:j,left:k})}return Y(i)};f.addEventListener("mousedown",function(h){if(!$(f).hasClass("noClick")){if($(".ui-recorder-tree-mask",g).length===0){$(document.body,g).append("<div class='ui-recorder-tree-mask'></div>")}window.addEventListener("mousemove",e,true)}return Y(h)},true);window.addEventListener("mouseup",function(h){if($(".ui-recorder-tree-mask",g).length>0){d=0;$(".ui-recorder-tree-mask",g).remove();window.removeEventListener("mousemove",e,true)}},true);window.addEventListener("resize",function(){if($(".pz-recorder-tool").css("top")!=="auto"){var j=$(".pz-recorder-tool");var l=j.offset();var i=l.top;var k=l.left;var o=$(window).height()-j.height();var h=$(window).width()-j.width();var m=$(window).scrollTop();var n=$(window).scrollLeft();if(i<0){j.css({top:"0px"})}else{if((i-m)>o){j.css({top:(o+"px")})}}if(k<0){j.css({left:"0px"})}if((k-n)>h){j.css({left:(h+"px")})}}},true)}function V(){var f=pega.ui.automation.storeManager.getAllTestCaseStepsMeta();if(f){var g=0;for(;g<f.length;g++){if(f[g]&&f[g].status){var e="pxRequestor.pxAutomationRecorder.pyTestCaseSteps("+(g+1)+")";pega.u.d.setProperty(e+".pyStepRunStatus",f[g].status)}}}}S.initStepStatus=V;S.initialize=function(){var e=["pxExpress","pxAdminStudio"];if(window!==pega.desktop.support.getDesktopWindow()||e.includes(pega.desktop.portalName)||window!==pega.ui.automation.utils.getPortalWindow()){return }if($(".automation-recorder").length<1){E()}if(window.pzAutomationMode==="display"||window.pzAutomationMode==="debug"||window.pzAutomationMode==="recording"){var f=function(){if(window.pzAutomationMode==="display"||window.pzAutomationMode==="debug"){V()}};pega.ui.automation.recorder.toggle(f);if(window.bIsAutomationRecordingOn==="true"){pega.ui.automation.recorder.startRecording()}}};return S})();document.addEventListener("DOMContentLoaded",function(){pega.ui.automation.recorder.cascadeRecording()},false);window.addEventListener("load",function(){pega.ui.automation.recorder.initialize()});pega.ui.EventsEmitter.subscribe("BeforeLogOff",function(){if(!pega.ui.automation.recorder.isRecording()){return }var A=SafeURL_createFromURL(pega.u.d.url);A.put("pyActivity","pzCancelFunctionalTestCase");var B={success:function(C){if(pega.ui.automation.recorder.isPanelActive()){pega.ui.automation.recorder.toggle()}},failure:function(C){console.log("Recorder intialization failed ",C)}};pega.util.Connect.asyncRequest("POST",A.toURL(),B)});pega.ui.EventsEmitter.subscribe("StepResult",function(G){var A="pxRequestor.pxAutomationRecorder.pyTestCaseSteps("+(G.currentStepIndex+1)+")";var D=G.currentStepIndex;var E=pega.ui.automation.storeManager.getTestCaseStepMeta(D)||{};if(G.pyStepResult=="Passed"){E.status="Passed";pega.ctxmgr.setContext(pega.ctxmgr.getRootDocumentContext());top.pega.u.d.setProperty(A+".pyStepRunStatus","Passed");pega.ctxmgr.resetContext()}else{E.status="Failed";pega.ctxmgr.setContext(pega.ctxmgr.getRootDocumentContext());top.pega.u.d.setProperty(A+".pyStepRunStatus","Failed");top.pega.u.d.setProperty("pxRequestor.pxAutomationRecorder.pyLastRunStatus","Failed");pega.ctxmgr.resetContext();var F=pega.ui.automation.storeManager.getExecutorMode();if(F=="debug"||F=="edit"){var I=pega.ui.automation.sequencer.getStepAtIndex(D);var B=I.pySelector;if(B){var H=pega.ui.automation.utils.getDomElement(B);var C=pega.ui.ScreenInspector.getInspector("recorder");if(!H||H.style.display=="none"||H.hidden){}else{C.highlightError(H)}}}}pega.ui.automation.storeManager.setTestCaseStepMeta(D,E)});pega.ui.automation.recorder.defaultComponent=(function(){function A(B,C){return false}return{isSupportedStepRecord:A}})();pega.ui.automation.manager.registerRecorder(pega.ui.automation.constants.COMPONENT.DEFAULT,pega.ui.automation.recorder.defaultComponent);
var EdgePanel=(function(){function A(C,B){this.ANIMATION_DURATION=333;this.ANIMATION_EASING="linear";this.previousHarnessCSS="";this.isPanelMinimized=false;this.BELOW351="runtime-body-below351 ";this.BELOW261="runtime-body-below261 ";this.PANEL_WIDTH=375;this.STATES={ACTIVE:"ACTIVE",INACTIVE:"INACTIVE",BUSY:"BUSY"};this.panelState="INACTIVE";this.sectionName=B;this.panelName=C;this.options={}}A.prototype.show=function(I,E){var C=document.querySelector("div[data-portalharnessinsname]");var B=this.getPanel();var G=C.getBoundingClientRect().top;if(!B){var J="<div class='runtime-panel-tab'></div>\n                                <div class='runtime-panel-resize ui-resizable-handle ui-resizable-w'></div>\n                                <div class='runtime-panel-body'>\n                                    <div></div>\n                                </div>";var H=document.createElement("DIV");H.className="edge-panel runtime-"+this.panelName+"-panel";H.style.top=G+"px";H.innerHTML=J;document.body.appendChild(H)}var F=this;var D={success:function(){if(I&&(typeof I=="function")){I.apply(E,[F.getPanel()])}}};this._loadSection(D.success);this.previousHarnessCSS=C.getAttribute("style");if(typeof this.previousHarnessCSS==="undefined"){this.previousHarnessCSS=""}this.animateShow()};A.prototype.hide=function(E,C){var B=this.getPanel();if(!B){return true}var D=B.parentElement;this.animateHide();if(E&&(typeof E=="function")&&C){if(C){E.apply(C,[])}}};A.prototype.getPanelName=function(){return this.panelName};A.prototype.getPanel=function(){return document.querySelector("div.edge-panel.runtime-"+this.panelName+"-panel")};A.prototype.getPanelBody=function(){return document.querySelector("div.runtime-panel-body")};A.prototype._loadSection=function(F){if(!this.getPanel()||!this.sectionName){return false}var C=this.options.preActivityName||"";var E=this.options.preActivityParams||"";var D=document.querySelector(".edge-panel.runtime-"+this.panelName+"-panel .runtime-panel-body > div");D.className="sectionDivStyle";D.id="RULE_KEY";D.setAttribute("node_type","MAIN_RULE");D.setAttribute("version","1");D.setAttribute("objclass","Rule-HTML-Section");if(pega.ctx.isUITemplatized===true){D.dataset.template=true}D.setAttribute("node_name",this.sectionName);D.setAttribute("pyclassname",this.options.className||"@baseclass");D.dataset.nodeId=this.sectionName;if(this.options.baseRef&&this.options.baseRef!=""){D.setAttribute("BASE_REF",this.options.baseRef)}var B=pega.ctx.KeepPageMessages;pega.ctx.KeepPageMessages=true;pega.u.d.reloadSection(D,C,E,false,false,-1,false,null,null,null,F);pega.ctx.KeepPageMessages=B;return true};A.prototype.setPanelSection=function(C,B){this.sectionName=C;this.options=B};A.prototype.getTopHarness=function(){return document.querySelector("div[data-portalharnessinsname]")};A.prototype.getResizeBar=function(){return document.querySelector(".runtime-"+this.panelName+"-panel div.runtime-panel-resize")};A.prototype.getTab=function(){return document.querySelector(".runtime-"+this.panelName+"-panel div.runtime-panel-tab")};A.prototype.animateShow=function(){var G=$(this.getTopHarness());var C=this.getPanel();var E=this.getPanelBody();var F=this.getTab();var H=this.getResizeBar();var B;var K=this;var L=document.querySelector("div[data-node-id='pzRuntimeToolsTopBar']");if(L){L.classList.add("disable-slide")}G.css({position:"absolute",left:"0px",right:"0px","min-width":"0px"});if(this.PANEL_WIDTH>G.offsetWidth){B=G.offsetWidth-(100)+"px"}else{if(this.PANEL_WIDTH<10){B="10px"}else{B=this.PANEL_WIDTH+"px"}}if(this.isPanelMinimized){B="0px"}$(C).removeClass("panel-hidden");$(F).css("display","");$(H).css("display","");$(E).css("display","block");G.animate({right:B},this.ANIMATION_DURATION,this.ANIMATION_EASING,function(){});if(this.isPanelMinimized){$(F).addClass("runtime-panel-tab-min")}else{$(F).addClass("runtime-panel-tab-max")}$(C).animate({width:B},this.ANIMATION_DURATION,this.ANIMATION_EASING,function(){$(C).addClass("showing");if(!$(C).hasClass("ui-resizable")){K.resizeHandler();K.clickHandler()}K.panelState=K.STATES.ACTIVE});if($(".screen-layout").hasClass("flex")){var J,D,I,M;J=$(".screen-layout-region-header").hasClass("screen-layout-region-resize ui-resizable");D=$(".screen-layout-region-footer").hasClass("screen-layout-region-resize ui-resizable");I=$(".screen-layout-region-main-sidebar1").hasClass("screen-layout-region-resize ui-resizable");M=$(".screen-layout-region-main-sidebar2").hasClass("screen-layout-region-resize ui-resizable");if(J||D||I||M){this.updateScreenLayoutFlex(B)}}};A.prototype.updateScreenLayoutFlex=function(C){if($(".screen-layout").hasClass("flex")){var F,E,B;var D=$(window).width();B=$(".screen-layout-region-main-sidebar1").outerWidth()||0;F=$(".screen-layout-region-main-sidebar2").outerWidth()||0;E=B+F+parseInt(C);$(".screen-layout-region-main-middle").css({width:(D-E)+"px"})}};A.prototype.animateHide=function(){var C=$(this.getTopHarness());var B=this.getPanel();var E=this.getPanelBody();var H=this;var D=this.getTab();var F=this.getResizeBar();var G=this;C.animate({right:"0px"},this.ANIMATION_DURATION,this.ANIMATION_EASING,function(){C.attr("style",H.previousHarnessCSS)});$(D).removeClass("runtime-panel-tab-min");$(D).removeClass("runtime-panel-tab-max");$(B).animate({width:"0px"},this.ANIMATION_DURATION,this.ANIMATION_EASING,function(){$(B).removeClass("showing");$(B).addClass("panel-hidden");$(F).css("display","none");$(B).removeClass("runtime-recorder-panel-active");$(E).css("display","none");G.panelState=G.STATES.INACTIVE;var I=document.querySelector("div[data-node-id='pzRuntimeToolsTopBar']");if(I){I.classList.remove("disable-slide")}})};A.prototype.resizeHandler=function(){var C=$(this.getTopHarness());var G=this;var B=this.getPanel();var E=this.getTab();var D=$(".runtime-"+this.panelName+"-panel .runtime-panel-tab");var F=$(B).outerWidth();$(B).css({right:"0px",left:""});C.css({position:"absolute",left:"0px",right:F+"px","min-width":"0"});$(B).resizable({handles:{w:".runtime-panel-resize"},resize:function(K,L){var I=L.element;var J=I.width();I.css({right:"0px",left:""});var H=$(window).outerWidth();if(J>H-100){J=H-100;I.css({width:J+"px"})}$(this).removeClass(G.BELOW261);$(this).removeClass(G.BELOW351);if(J<351){$(this).addClass(G.BELOW351)}if(J<261){$(this).addClass(G.BELOW261)}C.css({right:J+"px"})},start:function(I,J){C.css({position:"absolute",left:"0px","min-width":"0"});var H=document.createElement("div");H.classList="ui-gapidentifier-tree-mask";document.body.append(H)},stop:function(H,I){G.PANEL_WIDTH=$(B).outerWidth();G.isPanelMinimized=false;document.querySelector(".ui-gapidentifier-tree-mask").remove()}})};A.prototype.clickHandler=function(){var F=this;var C=$(this.getTopHarness());var B=this.getPanel();var D=$(".runtime-"+this.panelName+"-panel .runtime-panel-tab");var E=function(){C.css({position:"absolute",left:"0px"});if(F.isPanelMinimized){if(F.PANEL_WIDTH>$(window).width()-100){F.PANEL_WIDTH=$(window).width()-100}C.css("right",F.PANEL_WIDTH+"px");D.removeClass("runtime-panel-tab-min");D.addClass("runtime-panel-tab-max");$(B).css("width",F.PANEL_WIDTH+"px");F.isPanelMinimized=false}else{F.isPanelMinimized=true;C.css("right",0+"px");D.addClass("runtime-panel-tab-min");D.removeClass("runtime-panel-tab-max");$(B).css("width",0+"px")}};D.click(function(){E()})};return A}());
var ScreenInspector=(function(){function A(B){this.name=B;this.listOfSelectorToHighlight=[];this.blackListElements=[];this.highlightHandler=null;this.inspectorHandler=null;this.infoBarHandler=null;this.lastHighlightedElement=null;this.preHighlightCallback=null;this.preHighlightCallbackContext=null;this.postHighlightCallback=null;this.postHighlightCallbackContext=null;this.inspectorConfig=null;pega.ui.ScreenInspector.setInspector(this);this.addSelector("[data-ui-meta]",function(D){var C=D.getAttribute("data-ui-meta");if(C){C=JSON.parse(C.replace(/'/g,'"'))}else{C={type:"Cell",subType:"Custom"}}return C})}A.prototype._getInfobarContent=function(B){var C="<div>\n                                            <div class='idpanel-text'>\n                                              <span class='runtime-tree-prefix'>"+B+"</span>\n                                            </div>\n                                            <div class='id-recorder-icon-container'>\n                                              <img src='webwb/pxAddAssertion.png' \ntitle = "+window.gStrMarkforassertiontooltip+" id = \"addexplicitassertion\"onclick='pega.ui.automation.recorder.showAssertionPanel(event)'></i>\n                                            </div>\n                                          </div>";return C};A.prototype._getElementDimensions=function(G,B){var E=$(G).closest("#modalWrapper").length>0;var D=G.ownerDocument.defaultView;var H={};var C=G.getBoundingClientRect();H.left=C.left+$(D).scrollLeft();H.top=C.top+$(D).scrollTop();H.width=C.width;H.height=C.height;while(D){if((D==window||!D.parent)||(B!=null&&D==B)){break}else{var F=D.frameElement.getBoundingClientRect();H.left+=F.left;H.top+=F.top;if(G.ownerDocument.defaultView==D&&!E){H.top-=$(D).scrollTop();H.left-=$(D).scrollLeft()}D=D.parent}}return H};A.prototype._isEnabled=function(){if(this.inspectorHandler&&this.inspectorHandler.isEnabled()){return true}return false};A.prototype._getSelectorList=function(){var C=[];for(var B in this.listOfSelectorToHighlight){C.push(B)}return C};A.prototype._closestSelectorMetadata=function(C){var B=null;if(!C||top.window.holdHighlight){return null}for(var E in this.listOfSelectorToHighlight){var D=C.closest(E);if(D==C){B=this.listOfSelectorToHighlight[E](C);break}}return B};A.prototype._highlightCallback=function(B){if(B.foundElement){var C=B.foundElement;var D=pega.ui.ScreenInspector.getInspector("recorder");D.highlight(C)}};A.prototype.enable=function(){if(this._isEnabled()){return }this.inspectorConfig={elementFoundCallback:this._highlightCallback,selectorList:this._getSelectorList(),ignoreList:this.blackListElements};this.highlightHandler=new pega.ui.inspector.Highlight("automation-Element-Highlighter");this.inspectorHandler=new pega.ui.components.Inspector(this.inspectorConfig);this.infoBarHandler=new pega.ui.inspector.InfoBar("automation-Element-Infobar",null,null,{});this.inspectorHandler.enable()};A.prototype.disable=function(){if(!this._isEnabled()){return }this.highlightHandler.cleanup();this.infoBarHandler.removeFromDom();this.inspectorHandler.disable()};A.prototype.highlightError=function(D){var B=this._closestSelectorMetadata(D);var C=this._getElementDimensions(D,pega.ui.inspector.getDesktopWindow());this.highlightHandler=new pega.ui.inspector.Highlight("automation-Element-Highlighter");this.highlightHandler.show(C.left,C.top,C.width,C.height)};A.prototype.clearHighlight=function(){if(this.highlightHandler){this.highlightHandler.cleanup()}};A.prototype.highlight=function(G){var C=this._closestSelectorMetadata(G);if(!C){return false}try{if(this.lastHighlightedElement==null||this.lastHighlightedElement!=G){this.lastHighlightedElement=G}else{return false}}catch(F){this.lastHighlightedElement=G}if(this.preHighlightCallback&&this.preHighlightCallbackContext){this.preHighlightCallback.apply(this.preHighlightCallbackContext,[G,C])}var D=$(".automation-Element-Highlighter");if(D.hasClass("highlighter-warning")){D.removeClass("highlighter-warning")}var E=this._getElementDimensions(G,pega.ui.inspector.getDesktopWindow());this.highlightHandler.show(E.left,E.top,E.width,E.height);var B=this._getInfobarContent(C.subType||C.type);this.infoBarHandler.overlayElem.classList.remove("infobar-warning");this.infoBarHandler.setContent(B);this.infoBarHandler.showByPosition(E.left,E.top,E.width,E.height);if(this.postHighlightCallback&&this.postHighlightCallbackContext){this.postHighlightCallback.apply(this.postHighlightCallbackContext,[G,C])}};A.prototype.registerPreHighlightCallback=function(C,B){this.preHighlightCallback=C;this.preHighlightCallbackContext=B};A.prototype.registerPostHighlightCallback=function(C,B){this.postHighlightCallback=C;this.postHighlightCallbackContext=B};A.prototype.addSelector=function(B,C){if(typeof C=="function"){this.listOfSelectorToHighlight[B]=C}};A.prototype.setBlackListedElement=function(B){this.blackListElements=B};return A}());pega=pega||{};pega.ui=pega.ui||{};pega.ui.ScreenInspector=pega.ui.ScreenInspector||(function(){var A=null;var B=null;var F=function(G){var H=C();return H.getInspectorObject(G)};var D=function(G){A=G;B=G.name};var C=function(){var G=window;while(G!==desktopwrappersupport_getDesktopWindow()){G=G.parent}return G.pega.ui.ScreenInspector};var E=function(G){if(!G){return A}if(A&&A.name==G){return A}A=new ScreenInspector(G);B=G;return A};return{getInspector:F,setInspector:D,getInspectorObject:E}})();
pega.ui.automation.assertor=(function(){function A(B){try{if(!B){console.debug("Invalid Step Page Passed");return }var D=B[pega.ui.automation.constants.COMPONENT_TYPE];var C=pega.ui.automation.manager.getAssertor(D);return C.doAssertion(B)}catch(E){console.error(E);pega.ui.EventsEmitter.publish("abortTestExecution",E)}}return{performAssertion:A}})();pega.ui.automation.assertor.defaultComponent=(function(){var C=pega.ui.automation.constants;function A(F){console.debug("Invoking default assertion");var H=[];var G={};H.push(G);G[C.STEP_RESULT.STATUS]=C.STEP_RESULT.PASSED;var I=pega.ui.automation.utils.getDomElementPromise(F[C.DOM_SELECTOR],true);var J=this;return I.then(function(L){if(!L){G[C.STEP_RESULT.STATUS]=C.STEP_RESULT.FAILED;G[C.STEP_RESULT.FAILURE_REASON]="Element not found with given selector";G[C.STEP_RESULT.FAILURE_TYPE]=C.STEP_RESULT.FAILURE_TYPES.DOM;var K=pega.ui.automation.utils.constructSelector(F[C.DOM_SELECTOR]);G[C.STEP_RESULT.SELECTOR]=K}else{var M=J.doAssertionsOnDomElement(L,F);if(M){H=M}L=null}return H})}function D(H,J){var K=pega.ui.automation.recorder.translator.getConfigOptions(J[C.COMPONENT_TYPE],H);if(K&&K.length>0){var G=E(J[C.ATTRIBUTES],K);if(G&&G.length>0){console.debug("New assertion options available on the dom: ",G);var I=pega.ui.automation.storeManager.getCurrentStepIndex();I--;var F=pega.ui.automation.storeManager.getTestCaseStepMeta(I)||{};F.assertionOptions=G;delete F.isUpdated;pega.ui.automation.storeManager.setTestCaseStepMeta(I,F)}}}function E(M,K){if(!M||M.length==0){return K}var G={};for(var J=0;J<M.length;J++){var I=M[J][C.ATTRIBUTE_DESC];if(!G[I]){G[I]=M[J]}}var H=0;for(J=0;J<K.length;J++){var L=K[J][C.ATTRIBUTE_DESC];if(G[L]){if(G[L][C.ATTRIBUTE_NAME]!=K[J][C.ATTRIBUTE_NAME]||G[L][C.ATTRIBUTE_VALUE]!=K[J][C.ATTRIBUTE_VALUE]){H++}delete G[L]}}if(H==0&&M.length>=K.length){return null}for(var F in G){K.push(G[F])}return K}function B(M,K){var J=pega.ui.automation.storeManager.getExecutorMode();if(J=="debug"){D(M,K)}var N=K[C.ASSERTIONS];if(!N||N.length<=0){return null}var G=[];for(var F=N.length-1;F>=0;F--){var O={};var L=N[F];var I=L[pega.ui.automation.constants.COMPARATOR];var H=pega.ui.automation.assertor.matchers.getMatcher(I);if(!H){console.debug("No matcher found for : "+I);O[C.STEP_RESULT.STATUS]=C.STEP_RESULT.FAILED;O[C.STEP_RESULT.FAILURE_REASON]="No matcher found with "+I;O[C.STEP_RESULT.FAILURE_TYPE]=C.STEP_RESULT.FAILURE_TYPES.INTERNAL;O[C.STEP_RESULT.FAILURE_CODE]=C.STEP_RESULT.FAILURE_CODES.MACTHER}else{O=H.matches(L,M,K[C.COMPONENT_TYPE]);console.debug("assertionResult: "+O)}G.push(O)}return G}return{doAssertion:A,doAssertionsOnDomElement:B}})();pega.ui.automation.manager.registerAssertor(pega.ui.automation.constants.COMPONENT.DEFAULT,pega.ui.automation.assertor.defaultComponent);
pega.ui.automation.assertor.matchers=(function(){var C=pega.ui.automation.constants;var A={"Is Equal":{matches:function(J,I,K){var N={};var L=J[C.ATTRIBUTE_NAME];var F=J[C.ATTRIBUTE_DESC];var G=J[C.EXPECTED_VALUE]||"";try{var M;var E=pega.ui.automation.utils.getPortalWindow();if(G.indexOf("D_pyScenerioTestData")==0){G=E.pega.ui.ClientCache.find(G).getValue()}M=pega.ui.automation.utils.getConfiguredDomValue(K,I,J)}catch(H){N[C.STEP_RESULT.STATUS]="failed";N[C.STEP_RESULT.FAILURE_REASON]="Internal JS error: "+H.message;N[C.STEP_RESULT.FAILURE_TYPE]=C.STEP_RESULT.FAILURE_TYPES.INTERNAL;N[C.STEP_RESULT.FAILURE_CODE]=C.STEP_RESULT.FAILURE_CODES.CODE}N[C.STEP_RESULT.STATUS]=C.STEP_RESULT.PASSED;N[C.STEP_RESULT.ACTUAL_VALUE]=M;if(M!=null&&M!=undefined){M=M.toString()}if(!B(M,G)){N[C.STEP_RESULT.STATUS]=C.STEP_RESULT.FAILED;N[C.STEP_RESULT.FAILURE_REASON]="Expected: "+G+", but got Actual: "+M;N[C.STEP_RESULT.FAILURE_TYPE]=C.STEP_RESULT.FAILURE_TYPES.ASSERTOR}return N}},Contains:{matches:function(K,J,E){console.log("Matcher called for Contains");var G={};var F=K[C.EXPECTED_VALUE];if(F.trim().length==0){G[C.STEP_RESULT.STATUS]="failed";G[C.STEP_RESULT.FAILURE_REASON]="Empty String is provided.";G[C.STEP_RESULT.FAILURE_TYPE]=C.STEP_RESULT.FAILURE_TYPES.INTERNAL;G[C.STEP_RESULT.FAILURE_CODE]=C.STEP_RESULT.FAILURE_CODES.CODE;return G}try{var I=pega.ui.automation.utils.getConfiguredDomValue(E,J,K)}catch(H){G[C.STEP_RESULT.STATUS]="failed";G[C.STEP_RESULT.FAILURE_REASON]="Internal JS error: "+H.message;G[C.STEP_RESULT.FAILURE_TYPE]=C.STEP_RESULT.FAILURE_TYPES.INTERNAL;G[C.STEP_RESULT.FAILURE_CODE]=C.STEP_RESULT.FAILURE_CODES.CODE;return G}G[C.STEP_RESULT.STATUS]=C.STEP_RESULT.PASSED;G[C.STEP_RESULT.ACTUAL_VALUE]=I;if(I.indexOf(F.trim())==-1){G[C.STEP_RESULT.STATUS]=C.STEP_RESULT.FAILED;G[C.STEP_RESULT.FAILURE_REASON]=I+" does not contains "+F;G[C.STEP_RESULT.FAILURE_TYPE]=C.STEP_RESULT.FAILURE_TYPES.ASSERTOR}return G}}};function D(E){return A[E]}function B(G,E){if(E.search(/{(.*?)}/)>-1){E=E.replace(/\$/g,"\\$");E=E.replace(/{(.*?)}/g,"(.*?)");var F=new RegExp(E);return F.test(G)}if(E.search(/_pa\d+pz/)>-1){E=E.replace(/\$/g,"\\$");E=E.replace(/_pa\d+pz/g,"_pa(\\d+)pz");var F=new RegExp(E);return F.test(G)}return G==E}return{getMatcher:D}})();
pega.ui.automation.navigator=(function(){var C=pega.ui.automation.constants;function A(I,L,J,K,H){I[C.STEP_RESULT.STATUS]=C.STEP_RESULT.FAILED;I[C.STEP_RESULT.FAILURE_REASON]=L;I[C.STEP_RESULT.FAILURE_TYPE]=J;if(K){I[C.STEP_RESULT.FAILURE_CODE]=K}if(H){I[C.STEP_RESULT.SELECTOR]=H}}function B(I){var H=new Promise(function(N){var L=I[C.CASE_CLASS_NAME];var K=I[C.CASE_FLOW_NAME];var J={};J[C.STEP_RESULT.STATUS]=C.STEP_RESULT.PASSED;try{setTimeout(function(){pega.desktop.createNewWork(L,null,K);N([J])},3000)}catch(M){console.error(M);A(J,"Internal JS error: "+M.message,C.STEP_RESULT.FAILURE_TYPES.INTERNAL,C.STEP_RESULT.FAILURE_CODES.CODE);N([J]);pega.ui.EventsEmitter.publish("abortTestExecution",M)}});H.then(function(J){return J});return H}function G(H){try{if(!H){console.debug("Step information unavailable");return }if(H[C.IS_CUSTOM_STEP]==="true"){if(H[C.CUSTOM_TYPE]==="case"){return B(H)}}else{return F(H)}}catch(I){console.error(I);pega.ui.EventsEmitter.publish("abortTestExecution",I)}}function F(H){var I=new Promise(function(L){var J=[];var K=pega.ui.automation.utils.getDomElementPromise(H[C.DOM_SELECTOR],true);K.then(function(R){var S=[];if(H[C.NAVIGATORS]){S=H[C.NAVIGATORS]}else{S.push(H[C.NAVIGATOR])}if(!R){var N={};var M=pega.ui.automation.utils.constructSelector(H[C.DOM_SELECTOR]);A(N,"Element not found with given selector",C.STEP_RESULT.FAILURE_TYPES.DOM,null,M);for(var Q=0;Q<S.length;Q++){J.push(N)}L(J)}else{var P=H[C.COMPONENT_TYPE];var O=pega.ui.automation.manager.getNavigator(P);if(!O){var N={};console.log("No navigator found with component type : "+P);A(N,"Internal Error: No navigator found for "+P,C.STEP_RESULT.FAILURE_TYPES.INTERNAL,C.STEP_RESULT.FAILURE_CODES.CODE);for(var Q=0;Q<S.length;Q++){J.push(N)}L(J)}else{$(R).focus();D(P,H[C.DOM_SELECTOR],S,0,J,R,L)}}})});I.then(function(J){return J});return I}function D(L,M,K,T,O,S,R){try{var P={};O.push(P);P[C.STEP_RESULT.STATUS]=C.STEP_RESULT.PASSED;var J=function(){};if(T===K.length-1){J=function(){R(O)}}var Q=K[T][C.NAVIGATOR_ACTION_NAME];if(Q===C.ACTION_NAMES.CHANGE){var I=K[T][C.NAVIGATOR_ACTION_VALUE]||"";if(I&&I.indexOf("D_pyScenerioTestData")===0){var H=pega.ui.automation.utils.getPortalWindow();I=H.pega.ui.ClientCache.find(I).getValue()}}if(Q){pega.ui.automation.manager.getNavigator(L).doAction(S,Q,I,J)}else{J()}if(T<K.length-1){pega.ui.automation.stateManager.queueOrFireClientIdleCallback(function(){var U=T+1;var V={};V.componentType=L;V.selector=M;V.navigators=K;V.actionIndex=U;V.navigationResults=O;V.actionElem=S;V.promiseResolutionFunc=R;pega.ui.EventsEmitter.publish("ResumeNavigatorAction",V)})}else{J()}}catch(N){console.error(N);A(P,"Internal JS error: "+N.message,C.STEP_RESULT.FAILURE_TYPES.INTERNAL,C.STEP_RESULT.FAILURE_CODES.CODE);pega.ui.EventsEmitter.publish("abortTestExecution",N)}}function E(J){var H=J.actionElem;if(H&&$(H).is(":visible")&&$(H).closest("body").length>0){pega.ui.automation.navigator.fireComponentAction(J.componentType,J.selector,J.navigators,J.actionIndex,J.navigationResults,H,J.promiseResolutionFunc);H=null}else{var I=pega.ui.automation.utils.getDomElementPromise(J.selector,true);I.then(function(K){pega.ui.automation.navigator.fireComponentAction(J.componentType,J.selector,J.navigators,J.actionIndex,J.navigationResults,K,J.promiseResolutionFunc);K=null})}}return{performAction:G,resumeComponentAction:E,fireComponentAction:D}})();pega.ui.EventsEmitter.subscribe("ResumeNavigatorAction",pega.ui.automation.navigator.resumeComponentAction);pega.ui.automation.navigator.defaultComponent=(function(){var B=pega.ui.automation.constants;function A(F,E,G,D){console.log("Invoking default component action");if(E===B.ACTION_NAMES.CHANGE&&(F.type!="button"||F.type!="submit")){if(window===F.ownerDocument.defaultView){pega.u.d.setProperty(F.name,G)}else{F.ownerDocument.defaultView.pega.u.d.setProperty(F.name,G)}}else{if(E===B.ACTION_NAMES.CONTEXTMENU){var C=document.createEvent("Event");C.initEvent(B.ACTION_NAMES.CONTEXTMENU,true,true);F.dispatchEvent(C)}else{pega.control.actionSequencer.fireTopPriorityEvent(F,E)}}D&&D()}return{doAction:A}})();pega.ui.automation.manager.registerNavigator(pega.ui.automation.constants.COMPONENT.DEFAULT,pega.ui.automation.navigator.defaultComponent);
pega.ui.automation.recorder=pega.ui.automation.recorder||{};pega.ui.automation.recorder.stepbuilder=(function(){var b="base_ref";var n="full_base_ref";var i="parentSelectorAttr";var O="parentSelectorElem";var e="stepObj";var q="pzAutomationRecorderWrapper";var U="pxCreateFunctionalTestCaseStep";var p="div.runtime-recorder-panel";var S="mouseover";var Y=pega.ui.automation.constants;var J=null;var L=null;var E=null;function V(t,u){J=t;L=u}function r(){J=null;L=null}function D(){return J}function f(){return L}function X(t){var u=pega.ui.automation.utils.getPortalWindow();if(u!=window&&u.pega&&u.pega.ui.automation&&u.pega.ui.automation.recorder.stepbuilder){u.pega.ui.automation.recorder.stepbuilder.setCurrentStepPage(t)}else{E=t}u=null}function N(){var t=pega.ui.automation.utils.getPortalWindow();if(t!=window&&t.pega&&t.pega.ui.automation&&t.pega.ui.automation.recorder.stepbuilder){return t.pega.ui.automation.recorder.stepbuilder.getCurrentStepPage()}else{return E}t=null}function C(){var u=pega.ui.automation.utils.getPortalWindow();if(u!=window&&u.pega&&u.pega.ui.automation&&u.pega.ui.automation.recorder.stepbuilder){u.pega.ui.automation.recorder.stepbuilder.clearCurrentStepPage()}else{E=null;var t=$(".assertor-popover")[0];if(t&&t.po){t.po.close()}}u=null}function k(){var t=pega.ui.automation.utils.findElementAcrossFrames("[node_name='pyDefaultStepBuilder'][uniqueid]");return !!t.length}function P(){C()}function F(w,t,v){var u={isValid:true};if(k()){P();console.log("Close the edge pane and proceed with any new assertion");if(v){u.isValid=false}}return u}function Z(u,w,t){var v={isValid:true};var x=N();if(!x){v.isValid=false;return v}if(x.doNotCreateNextStep){console.log("Do not create this step since it is fired witin");v.isValid=false;return v}var y=pega.ui.automation.manager.getStepbuilder(t);return y.validateComponentCurrentStep(x,u,w)}function I(w,t,v){var u={};console.log("**** Creating new step ****");var u=Q(w,t,v);return u}function Q(w,AA,x){var z={};z[Y.COMPONENT_TYPE]=AA;if(AA!="DYNAMICREPEATING"&&c(w,AA)){AA=pega.ui.automation.constants.COMPONENT.DISPLAY_TEXT}var AB=pega.ui.automation.manager.getStepbuilder(AA);if(!AB){return null}var y=AB.getTargetElement(w,f());if(!y){var v=pega.ui.automation.recorder.getValidInspactableElementData(w.parentElement);if(v&&v.inspectorData){var u=pega.ui.automation.recorder.getComponentName(v.inspectorData);if(u&&v.selectedElement){H(v.selectedElement,u,D());return null}}}if(!y){j("Unable to record this element as this is<br>an unsupported element or has an invalid DOM structure");return null}AB.updateComponentSpecificData(z,y,D(),x,f());s(z,y,x,AA);var t=h(AB,y);if(!t){j(window.gStrDuplicateTestIDMsg);return null}z[Y.DOM_SELECTOR]=t;return z}function h(w,u){var t=null;if(w.customQuerySelector){t={pyPath:w.customQuerySelector};if(!pega.ui.automation.utils.isUniqueSelector(w.customQuerySelector,null,null,u)){j(window.gStrDuplicateTestIDMsg);return null}var v=pega.ui.automation.utils.getContainersInfo(u);if(v&&v.length>0){t.pyContainers=v}}else{t=pega.ui.automation.utils.generateSelector(u,w.customSelectorAttributes)}return t}function c(w,u){var v=pega.ui.automation.manager.getStepbuilder(u);if(v&&v.isReadonlySupported!=null){return v.isReadonlySupported}var t=w.querySelector(".dataValueRead");if(!t&&pega.ui.automation.utils.hasClass(w,"dataValueRead")){if(v&&!v.implicitNavigations){t=true}}return !!t}function j(w){var x=pega.ui.automation.utils.getPortalWindow();var v=x.$(".automation-Element-Infobar");var u=x.$(".automation-Element-Highlighter");v.addClass("infobar-warning").find(".runtime-tree-prefix").html(w);v.find(".id-recorder-icon-container").hide();u.addClass("highlighter-warning");var t=parseInt(v.css("top"));v.css("top",t-19)}function M(u){var t=R();u.setAttribute("data-aftrecorder-index",t)}function a(y,AA,u,AC){var t=F(y,AA);if(t.isValid==false){return }V(u,AC);stepObj=I(y,AA);r();if(!stepObj){return }var AF=SafeURL_createFromEncryptedURL(pega.u.d.url);var v=new SafeURL();var w=U;var AE=Z(stepObj,y,AA);if(AE.forceUpdateActions==true||AE.updateActions==true){w="pxUpdateFunctionalTestCaseStep";X({data:stepObj,selectedELem:y,stepType:Y.STEP_TYPE.EXPLICIT})}else{M(y)}X({data:stepObj,selectedELem:y,stepType:Y.STEP_TYPE.EXPLICIT});if(typeof (AF.hashtable.pzFromFrame)!="undefined"){AF.hashtable.pzFromFrame=""}AF.put("pyActivity","reloadSection");AF.put("StreamName","pzDefaultStepBuilderWrapper");AF.put("StreamClass","Rule-HTML-Section");AF.put("BaseReference","pxRequestor.pxAutomationRecorder");AF.put("UITemplatingStatus","N");AF.put("PreActivity",w);v.put(e,JSON.stringify(stepObj));AF.put("AJAXTrackID",pega.ui.ChangeTrackerMap.getTracker().id);var z=$.parseXML($("#PRXML").text().trim());var AB=$(z).find("pyPageName").text();if(!AB){AB=AF.get("pzPrimaryPageName")}pega.u.d.usesModalTemplate=false;var AD={success:function(AI){strResponse=AI.responseText;var AJ=pega.ui.ChangeTrackerMap.getTrackers();for(var AG in AJ){var AH=AJ[AG];AH.parseForChangeTrackerDiv(strResponse,false)}_rtepopOver=pega.u.d.getPopOver(y);if(typeof _rtepopOver=="object"){var AK=$("<div>"+strResponse+"</div>")[0];_rtepopOver.open({content:{type:"domElement",element:AK},bindings:{associatedElement:y},buttons:{ok:false,cancel:false},position:{fieldAttach:"leftBottom",popOverAttach:"leftTop"},visual:{contentClass:"assertor-popover"},callbacks:{onClose:this.popoverCloseCallback}})}},failure:function(AG){alert("Modal Dialog: Ajax Call For Modal Dialog Failure!")},scope:this};var x=pega.u.d.asyncRequest("POST",AF,AD,v.toEncodedPostBody());pega.util.Connect.handleReadyState(x,AD);event&&event.stopPropagation&&event.stopPropagation()}function K(){var u=new SafeURL();var t=pega.u.automation.utils.getPortalWindow().document.querySelector("div[node_name='pxTestCaseDetails']");if(t){var v=null;if(pega.ui.automation.storeManager.getExecutorMode()=="edit"){v=function(){var y=pega.ui.automation.storeManager.getRecoderStepIndex();if(y==null){y=1}var z=pega.ui.automation.utils.getPortalWindow().$("[show_when*='Failed'][show_when*='Passed']");var x=pega.ui.automation.utils.getPortalWindow().$("[show_when*='Passed']").not("[show_when*='Failed']");for(var w=0;w<y;w++){z[w].style.display="none";x[w].style.display="block"}}}pega.u.automation.utils.getPortalWindow().pega.u.d.reloadSection(t,"","",false,false,-1,false,null,null,null,v)}}function R(){var t=pega.ui.automation.storeManager.getRecoderStepIndex();if(t==null){t=1}else{t++}pega.ui.automation.storeManager.setRecoderStepIndex(t);return t}function H(w,y,u,AA){if(u=="change"){G(w,y);return }var t=F(w,y,true);if(t.isValid==false){return }V(u,AA);var x=I(w,y,true);r();if(!x){return }var AB=Z(x,w,y);if(AB.forceUpdateActions==true||AB.updateActions==true){if(!d(y,w)){x[Y.IS_NAVIGATOR]="true";var v=[];var z={};z[Y.NAVIGATOR_ACTION_NAME]=u;v.push(z);x[Y.NAVIGATORS]=v;T(w,x,Y.STEP_TYPE.IMPLICIT)}}else{M(w);X({data:x,selectedELem:w,stepType:Y.STEP_TYPE.IMPLICIT});l(x,w.getAttribute("data-aftrecorder-index"))}}function d(u,v){var w=pega.ui.automation.manager.getStepbuilder(u);if(!w){return null}var t=w.getTargetElement(v,f());return t&&t.disabled}function l(w,u){var v=SafeURL_createFromURL(pega.u.d.url);var t=new SafeURL();v.put("pyActivity",U);var x={success:function(y){K()},failure:function(y){console.log("Data: ",y)}};t.put("stepObj",JSON.stringify(w));if(pega.ui.automation.storeManager.getExecutorMode()=="edit"){v.put("mode","edit");if(u>0){v.put("editStepIndex",u)}pega.ui.automation.storeManager.setLastRunStepIndex(u);pega.ui.automation.storeManager.updateCurrentTestCaseStep(u,w)}v.put("implicitSave","true");pega.u.d.asyncRequest("POST",v,x,t.toEncodedPostBody())}function T(z,w,u,v){var x=SafeURL_createFromURL(pega.u.d.url);var t=new SafeURL();x.put("pyActivity","pxUpdateFunctionalTestCaseStep");if(v>0){x.put("recorderStepIndex",v)}t.put("stepObj",JSON.stringify(w));console.log("Updating step: ",w);var AA={success:function(AB){K()},failure:function(AB){console.log("Data: ",AB)}};var y=N();X({data:y.data,selectedELem:y.selectedELem,stepType:u});pega.u.d.asyncRequest("POST",x,AA,t.toEncodedPostBody())}function m(x,v){console.log("Creating implicit case step");var u={};u[Y.IS_NAVIGATOR]="true";u[Y.IS_CUSTOM_STEP]="true";u[Y.CUSTOM_TYPE]="case";u[Y.CUSTOM_TYPE]="case";u[Y.CASE_FLOW_NAME]=v;u[Y.CASE_CLASS_NAME]=x;u[Y.TEST_STEP_NAME]="Initiate "+x.substring(x.lastIndexOf("-")+1);R();var w=SafeURL_createFromURL(pega.u.d.url);var t=new SafeURL();w.put("pyActivity",U);var y={success:function(z){K()},failure:function(z){console.log("Data: ",z)}};t.put("stepObj",JSON.stringify(u));w.put("implicitSave","true");pega.u.d.asyncRequest("POST",w,y,t.toEncodedPostBody())}function G(y,t){var AA=pega.ui.automation.manager.getStepbuilder(t);if(!AA){return }var v={};var u=y.getAttribute("data-aftrecorder-index");if(u==null||u==undefined){return }console.log("Creating change step of: "+t);AA.updateComponentSpecificData(v,AA.getTargetElement(y),"change",true,f());var x=AA.getElementValue(AA.getTargetElement(y));v[Y.IS_NAVIGATOR]="true";var z=[];var w={};w[Y.NAVIGATOR_ACTION_NAME]="change";w[Y.NAVIGATOR_ACTION_VALUE]=x;z.push(w);v[Y.NAVIGATORS]=z;T(y,v,Y.STEP_TYPE.CHANGE,u)}function A(u){var y=pega.ui.automation.recorder.stepbuilder.getCurrentStepPage();if(!y){return true}var w=y.data;var t=w[Y.ATTRIBUTES];var x=u[Y.ATTRIBUTES];if(x.length!=t.length){return true}for(var v=0;v<x.length;v++){if(x[v][Y.ATTRIBUTE_DESC]!=t[v][Y.ATTRIBUTE_DESC]||x[v][Y.ATTRIBUTE_NAME]!=t[v][Y.ATTRIBUTE_NAME]||x[v][Y.ATTRIBUTE_VALUE]!=t[v][Y.ATTRIBUTE_VALUE]){return true}}return false}function W(AA,AC,z,y,AB){var x=[];var AD=pega.ui.automation.recorder.translator.getConfigOptions(AB,z);if(AD&&AD.length>0){AA[Y.ATTRIBUTES]=AD;if(AC&&AC.length>0){for(var v=0;v<AD.length;v++){var u=AD[v];var w=u[Y.ATTRIBUTE_DESC];if(AC.indexOf(w)>-1){var t=B(u);x.push(t)}}}if(x.length==0&&!y){var t=B(AD[0]);x.push(t)}if(x.length>0){AA[Y.ASSERTIONS]=x;AA[Y.IS_ASSERTOR]="true"}}}function B(v){var t=JSON.parse(JSON.stringify(v));var u=v[Y.COMPARATOR_LIST];if(u&&u.length>0){t.pyComparator=u[0]["pyName"]}t.pyExpectedValue=v.pyAttributeValue;return t}function o(t,w,y,v){var u={};var x=pega.ui.automation.utils.getAssertedDomValue(t,w);if(x==null||x==undefined){return null}u[Y.ATTRIBUTE_NAME]=w;u[Y.ATTRIBUTE_VALUE]=x;u[Y.ATTRIBUTE_DESC]=y;return u}function g(z,t,x){var v=[];z[Y.ACTIONS]=v;var AA=[];z[Y.NAVIGATORS]=AA;for(var w=0;w<t.length;w++){var u=t[w];var y={};y[Y.ATTRIBUTE_NAME]=u;v.push(y);var AB={};AB[Y.NAVIGATOR_ACTION_NAME]=u;if(!x){AB.pyIsTempAction="true"}AA.push(AB)}}function s(x,w,v,z){var AC=[];var y=pega.ui.automation.manager.getStepbuilder(z);var AA=y[Y.IMPLICIT_ASSERTIONS];W(x,AA,w,v,z);var u=[];var t=D();var AB=y[Y.IMPLICIT_NAVIGATIONS];if(AB&&AB.length>0){if(AB.indexOf(t)==-1){u.push(t)}else{u.push.apply(u,AB)}}else{if(t==S||(t&&v)){u.push(t)}}if(u&&u.length>0&&!w.disabled){x[Y.IS_NAVIGATOR]="true";g(x,u,v)}if(x[Y.IS_NAVIGATOR]!="true"){x[Y.IS_ASSERTOR]="true"}}return{buildAndSaveStep:H,createCaseStep:m,refreshSteps:K,showAssertorPopover:a,setCurrentStepPage:X,getCurrentStepPage:N,clearCurrentStepPage:C}})();pega.ui.automation.recorder.stepbuilder.defaultComponent=(function(){var B=pega.ui.automation.constants;function H(M,L){console.log("Invoking default stepbuilder");return M}function E(R,Q,L,P,U){var S=R[B.COMPONENT_TYPE];var M=Q&&Q.innerText;if(!M){M=pega.ui.automation.utils.getAttributeValue(Q,B.ATTRIBUTE.LABEL)}M=M.trim();if(M.length>10){M=M.substr(0,10)+"..."}var V=pega.ui.automation.utils.getComponentDesc(S).trim();var O="Verify ";var N=this.getNavigationActions(Q,L,U);if(P&&N&&N.length>0){L=N[0]}if(L==="change"){O="Change "}else{if(L==="dblclick"){O="DoubleClick "}else{if(L==="contextmenu"){O="RightClick "}else{O=L.charAt(0).toUpperCase()+L.slice(1)+" "}}}var T=O+M+" ("+V+")";R[B.TEST_STEP_NAME]=T}function G(L){return L.value}function J(P,M,O){var N={isValid:true};var L=P.data;if(this.hasSameSelector(L,M)&&this.hasSameAssertions(L,M,O)){var Q=P.stepType;if(Q!=B.STEP_TYPE.CHANGE){console.log("*** Updating action in previous step ****");N.updateActions=true}}return N}function A(M,L){return JSON.stringify(M[B.DOM_SELECTOR])===JSON.stringify(L[B.DOM_SELECTOR])}function D(N,M,P){var L=N[B.ATTRIBUTES];var Q=M[B.ATTRIBUTES];if(!Q){if(!L){return true}else{return false}}else{if(!L){return false}}if(Q.length!=L.length){return false}for(var O=0;O<Q.length;O++){if(Q[O][B.ATTRIBUTE_DESC]!=L[O][B.ATTRIBUTE_DESC]||Q[O][B.ATTRIBUTE_NAME]!=L[O][B.ATTRIBUTE_NAME]||Q[O][B.ATTRIBUTE_VALUE]!=L[O][B.ATTRIBUTE_VALUE]){return false}}return true}function K(M,N,O){var L=[];if(this.implicitNavigations.indexOf(N)==-1){L.push(N)}else{L.push.apply(L,this.implicitNavigations)}return L}var C=["Value","Property"];var F=["click"];var I=null;return{getTargetElement:H,getElementValue:G,updateComponentSpecificData:E,implicitAssertions:C,implicitNavigations:F,customSelectorAttributes:I,validateComponentCurrentStep:J,hasSameSelector:A,hasSameAssertions:D,getNavigationActions:K,customQuerySelector:null}})();pega.ui.automation.recorder.stepbuilder.inputTextStepbuilder=Object.create(pega.ui.automation.recorder.stepbuilder.defaultComponent,{implicitNavigations:{value:null}});pega.ui.automation.recorder.stepbuilder.inputTextStepbuilder.getTargetElement=function(A){console.log("Invoking simple text input stepbuilder");return A.querySelector("input")};pega.ui.automation.recorder.stepbuilder.inputTextStepbuilder.updateComponentSpecificData=function(F,E,G){var B=pega.ui.automation.constants;var A=E&&(E.innerText).trim();if(!A){A=pega.ui.automation.utils.getAttributeValue(E,B.ATTRIBUTE.LABEL)}var I=" (Text)";var D="Verify ";var C="";if(G==="change"){D="Enter ";C=this.getElementValue(E);if(C.length>20){C=C.substring(0,20)+"..."}C=" : "+C}else{if(G==="dblclick"){D="DoubleClick "}else{if(G==="contextmenu"){D="RightClick "}}}var H=D;if(A){H=H+A}H=H+I;H=H+C;F[B.TEST_STEP_NAME]=H};pega.ui.automation.manager.registerStepbuilder(pega.ui.automation.constants.COMPONENT.TEXT_INPUT,pega.ui.automation.recorder.stepbuilder.inputTextStepbuilder);pega.ui.automation.recorder.stepbuilder.buttonStepbuilder=Object.create(pega.ui.automation.recorder.stepbuilder.defaultComponent,{implicitAssertions:{value:null}});pega.ui.automation.recorder.stepbuilder.buttonStepbuilder.getTargetElement=function(A){console.log("Invoking button stepbuilder");return A.querySelector("button")};pega.ui.automation.recorder.stepbuilder.buttonStepbuilder.updateComponentSpecificData=function(F,E,G,D){var B=pega.ui.automation.constants;var A=E&&(E.innerText).trim();if(!A){A=pega.ui.automation.utils.getAttributeValue(E,B.ATTRIBUTE.LABEL)}var I=" (Button)";var C="Verify ";if(G==="click"&&D){C="Click "}else{if(G==="dblclick"){C="DoubleClick "}else{if(G==="contextmenu"){C="RightClick "}}}var H=C;if(A){H=H+A}H=H+I;F[B.TEST_STEP_NAME]=H};pega.ui.automation.manager.registerStepbuilder(pega.ui.automation.constants.COMPONENT.BUTTON,pega.ui.automation.recorder.stepbuilder.buttonStepbuilder);pega.ui.automation.manager.registerInspector(pega.ui.automation.constants.COMPONENT.MENU_ITEM,{selector:"li.menu-item",selectorcb:function(){return{type:"pxMenu",subType:"pxMenuItem"}}});pega.ui.automation.recorder.stepbuilder.menuItemStepbuilder=Object.create(pega.ui.automation.recorder.stepbuilder.buttonStepbuilder,{implicitAssertions:{value:null},customSelectorAttributes:{value:[pega.ui.automation.constants.SELECTOR.INNERTEXT,"class"]}});pega.ui.automation.recorder.stepbuilder.menuItemStepbuilder.getTargetElement=function(A){console.log("Invoking menu item stepbuilder");return A.querySelector(".menu-item-title")};pega.ui.automation.recorder.stepbuilder.menuItemStepbuilder.updateComponentSpecificData=function(F,E,G,D){var B=pega.ui.automation.constants;var A=E&&(E.innerText).trim();if(!A){A=pega.ui.automation.utils.getAttributeValue(E,B.ATTRIBUTE.LABEL)}var I=" (Menu)";var C="Verify ";if(D){C="Select "}else{if(G==="contextmenu"){C="RightClick "}}var H=C;if(A){H=H+A}H=H+I;F[B.TEST_STEP_NAME]=H};pega.ui.automation.manager.registerStepbuilder(pega.ui.automation.constants.COMPONENT.MENU_ITEM,pega.ui.automation.recorder.stepbuilder.menuItemStepbuilder);pega.ui.automation.recorder.stepbuilder.labelStepbuilder=Object.create(pega.ui.automation.recorder.stepbuilder.defaultComponent,{implicitAssertions:{value:["Value"]},implicitNavigations:{value:null}});pega.ui.automation.recorder.stepbuilder.labelStepbuilder.getTargetElement=function(A){console.log("Invoking label stepbuilder");if(pega.ui.automation.utils.hasClass(A,"dataLabelRead")||pega.ui.automation.utils.hasClass(A,"dataLabelWrite")){return A}return A.querySelector(".dataLabelRead, .dataLabelWrite")};pega.ui.automation.recorder.stepbuilder.labelStepbuilder.updateComponentSpecificData=function(F,E,G,D){var A=pega.ui.automation.constants;var B=E&&(E.innerText).trim()||"";if(!B){B=pega.ui.automation.utils.getAttributeValue(E,A.ATTRIBUTE.LABEL)}var I="(Label)";var C="Verify ";if(D){C="Check "}else{if(G==="dblclick"){C="DoubleClick "}else{if(G==="contextmenu"){C="RightClick "}}}var H=C+I+" : "+B;F[A.TEST_STEP_NAME]=H};pega.ui.automation.manager.registerStepbuilder(pega.ui.automation.constants.COMPONENT.LABEL,pega.ui.automation.recorder.stepbuilder.labelStepbuilder);pega.ui.automation.recorder.stepbuilder.linkStepbuilder=Object.create(pega.ui.automation.recorder.stepbuilder.defaultComponent,{implicitAssertions:{value:["Link Caption"]}});pega.ui.automation.recorder.stepbuilder.linkStepbuilder.getTargetElement=function(A){console.log("Invoking simple link stepbuilder");return A.querySelector("a")};pega.ui.automation.recorder.stepbuilder.linkStepbuilder.updateComponentSpecificData=function(F,E,G,D){var B=pega.ui.automation.constants;var A=E&&(E.innerText).trim();if(!A){A=pega.ui.automation.utils.getAttributeValue(E,B.ATTRIBUTE.LABEL)}var I=" (Link)";var C="Verify ";if(G==="click"&&D){C="Click "}else{if(G==="contextmenu"){C="RightClick "}}var H=C;if(A){H=H+A}H=H+I;F[B.TEST_STEP_NAME]=H};pega.ui.automation.manager.registerStepbuilder(pega.ui.automation.constants.COMPONENT.LINK,pega.ui.automation.recorder.stepbuilder.linkStepbuilder);pega.ui.automation.recorder.stepbuilder.iconStepbuilder=Object.create(pega.ui.automation.recorder.stepbuilder.defaultComponent,{implicitAssertions:{value:["Icon source"]}});pega.ui.automation.recorder.stepbuilder.iconStepbuilder.getTargetElement=function(A){console.log("Invoking Icon stepbuilder");return A.querySelector("[data-ctl='Icon']")};pega.ui.automation.recorder.stepbuilder.iconStepbuilder.updateComponentSpecificData=function(F,E,G,D){var B=pega.ui.automation.constants;var A=E&&(E.innerText).trim();if(!A){A=pega.ui.automation.utils.getAttributeValue(E,B.ATTRIBUTE.LABEL)}var I=" (Icon)";var C="Verify";if(G==="click"&&D){C="Click"}else{if(G==="dblclick"){C="DoubleClick"}else{if(G==="contextmenu"){C="RightClick"}}}var H=C;if(A){H=H+" "+A}H=H+I;F[B.TEST_STEP_NAME]=H};pega.ui.automation.manager.registerStepbuilder(pega.ui.automation.constants.COMPONENT.ICON,pega.ui.automation.recorder.stepbuilder.iconStepbuilder);pega.ui.automation.recorder.stepbuilder.displayTextStepbuilder=Object.create(pega.ui.automation.recorder.stepbuilder.defaultComponent,{implicitAssertions:{value:["Value"]}});pega.ui.automation.recorder.stepbuilder.displayTextStepbuilder.getTargetElement=function(C){console.log("Invoking display text stepbuilder");this.implicitNavigations=null;if(pega.ui.automation.utils.hasClass(C,"gridCell")){this.implicitNavigations=["click"]}var B=C.querySelector(".dataValueRead span")||C.querySelector(".dataValueRead p")||C.querySelector("span");if(!B&&pega.ui.automation.utils.hasClass(C,"dataValueRead")){B=C}if(B&&!B.getAttribute("data-test-id")){var A=B.querySelector("[data-test-id]");if(A){B=A}}return B};pega.ui.automation.recorder.stepbuilder.displayTextStepbuilder.updateComponentSpecificData=function(G,E,H,D){var B=pega.ui.automation.constants;var A=pega.ui.automation.utils.getAttributeValue(E,B.ATTRIBUTE.LABEL);var J=" (Text)";var C="Verify ";var F="";if(H==="click"&&D){F=E&&(E.innerText).trim()}else{if(H==="dblclick"){C="DoubleClick "}else{if(H==="contextmenu"){C="RightClick "}}}var I=C;if(A){I=I+A}I=I+J;if(F){I=I+" : "+F}G[B.TEST_STEP_NAME]=I};pega.ui.automation.manager.registerStepbuilder(pega.ui.automation.constants.COMPONENT.DISPLAY_TEXT,pega.ui.automation.recorder.stepbuilder.displayTextStepbuilder);
pega.ui.automation.recorder=pega.ui.automation.recorder||{};pega.ui.automation.recorder.translator=(function(){function B(M,L){var C=pega.ui.automation.constants;var Q=pega.ui.automation.manager.getTranslator(M);if(!Q){return null}var P=Q.buildConfigs(L);var R=Q.getCommonConfigs(L);if(R){P.push(R)}var O=[];if(!P){return O}for(var I=0;I<P.length;I++){if(P[I][C.ATTRIBUTE_VALUE]==null&&!P[I][C.ATTRIBUTE_VALUE_LIST]){var E=pega.ui.automation.utils.getAssertedDomValue(L,P[I][C.ATTRIBUTE_NAME]);if(E==null||E==undefined){continue}P[I][C.ATTRIBUTE_VALUE]=E}if(P[I][C.ATTRIBUTE_VALUE_LIST]){var D=P[I][C.ATTRIBUTE_VALUE_LIST];var K=[];for(var F=0;F<D.length;F++){var J={};J.pyValue=D[F];K.push(J)}P[I][C.ATTRIBUTE_VALUE_LIST]=K}if(!P[I][C.COMPARATOR_LIST]){P[I][C.COMPARATOR_LIST]=[{pyName:"Is Equal"}]}else{var H=P[I][C.COMPARATOR_LIST];var N=[];for(var F=0;F<H.length;F++){var G={};G.pyName=H[F];N.push(G)}P[I][C.COMPARATOR_LIST]=N}O.push(P[I])}return O}function A(C,I,J){var E=pega.ui.automation.manager.getTranslator(C);if(!E){return null}var H=E.buildConfigs(I);var G;if(H){for(var D=H.length-1;D>=0;D--){if(H[D][pega.ui.automation.constants.ATTRIBUTE_DESC]==J){var F=H[D][pega.ui.automation.constants.ATTRIBUTE_VALUE];if(F!=null&&F!=undefined){G=F}else{G=H[D][pega.ui.automation.constants.ATTRIBUTE_VALUE_LIST]}}}}return G}return{getConfigOptions:B,getConfiguredValue:A}})();pega.ui.automation.recorder.translator.defaultComponent=(function(){function _buildConfigs(inspectableElement){return null}function _getCommonConfigs(inspectableElement){return _getSmartTipConfig(inspectableElement)}function _getSmartTipConfig(domElement){if(domElement.disabled){return null}var _constants=pega.ui.automation.constants;var dataHover=domElement.getAttribute("data-hover");if(dataHover!=null){var dataHoverArray=[];try{dataHoverArray=eval(dataHover)}catch(e){console.error("Data Hover of the cell can not be evaluated")}try{var closestSpan=$(domElement).closest("span");dataHover=closestSpan.getAttribute("data-hover");dataHoverArray=eval(dataHover)}catch(e){console.error("Data Hover of the span can not be evaluated")}for(var i=0;i<dataHoverArray.length;i++){var actionString=dataHoverArray[i];if(actionString[0]==="showSmartTip"){try{var message=actionString[1][2];var config={};config[_constants.ATTRIBUTE_DESC]="Smart Tip";config[_constants.ATTRIBUTE_VALUE]=message;return config}catch(e){console.error("Explicit option for Smart Tip assertion can not be created")}break}}}return null}var returnApi={buildConfigs:_buildConfigs,getCommonConfigs:_getCommonConfigs};return returnApi})();pega.ui.automation.manager.registerTranslator(pega.ui.automation.constants.COMPONENT.DEFAULT,pega.ui.automation.recorder.translator.defaultComponent);pega.ui.automation.recorder.translator.inputTextTranslator=Object.create(pega.ui.automation.recorder.translator.defaultComponent);pega.ui.automation.recorder.translator.inputTextTranslator.buildConfigs=function(){var B=pega.ui.automation.constants;var C=[];var A={};A[B.ATTRIBUTE_DESC]="Value";A[B.ATTRIBUTE_NAME]=B.ATTRIBUTE.VALUE;C.push(A);A={};A[B.ATTRIBUTE_DESC]="Property";A[B.ATTRIBUTE_NAME]=B.ATTRIBUTE.NAME;C.push(A);A={};A[B.ATTRIBUTE_DESC]="Tooltip";A[B.ATTRIBUTE_NAME]=B.ATTRIBUTE.TITLE;C.push(A);A={};A[B.ATTRIBUTE_DESC]="Label";A[B.ATTRIBUTE_NAME]=B.ATTRIBUTE.LABEL;C.push(A);A={};A[B.ATTRIBUTE_DESC]="Placeholder";A[B.ATTRIBUTE_NAME]=B.ATTRIBUTE.PLACEHOLDER;C.push(A);A={};A[B.ATTRIBUTE_DESC]="Disabled";A[B.ATTRIBUTE_NAME]=B.ATTRIBUTE.DISABLE;C.push(A);A={};A[B.ATTRIBUTE_DESC]="Required";A[B.ATTRIBUTE_NAME]=B.ATTRIBUTE.REQUIRED;C.push(A);A={};A[B.ATTRIBUTE_DESC]="has error";A[B.ATTRIBUTE_NAME]=B.ATTRIBUTE.ERROR;C.push(A);return C};pega.ui.automation.manager.registerTranslator(pega.ui.automation.constants.COMPONENT.TEXT_INPUT,pega.ui.automation.recorder.translator.inputTextTranslator);pega.ui.automation.recorder.translator.buttonTranslator=Object.create(pega.ui.automation.recorder.translator.defaultComponent);pega.ui.automation.recorder.translator.buttonTranslator.buildConfigs=function(E){var B=pega.ui.automation.constants;var D=[];var A={};A[B.ATTRIBUTE_DESC]="Button Caption";A[B.ATTRIBUTE_NAME]=B.ATTRIBUTE.INNER_TEXT;D.push(A);A={};A[B.ATTRIBUTE_DESC]="Tooltip";A[B.ATTRIBUTE_NAME]=B.ATTRIBUTE.TITLE;D.push(A);A={};A[B.ATTRIBUTE_DESC]="Disabled";A[B.ATTRIBUTE_NAME]=B.ATTRIBUTE.DISABLE;D.push(A);var C="left";if(E.querySelector("img")!=null){A={};A[B.ATTRIBUTE_DESC]="Image source";A[B.ATTRIBUTE_NAME]="img"+B.ASSERTION_CUSTOM_NAME_SEPARATOR+"@src";D.push(A);if(E.childNodes.length>=2&&E.childNodes[1].tagName=="IMG"){C="right"}A={};A[B.ATTRIBUTE_DESC]="Image position";A[B.ATTRIBUTE_VALUE]=C;D.push(A)}else{if(E.querySelector("i")!=null){A={};A[B.ATTRIBUTE_DESC]="Image source";A[B.ATTRIBUTE_NAME]="i"+B.ASSERTION_CUSTOM_NAME_SEPARATOR+"@class";D.push(A);if(E.childNodes.length>=2&&E.childNodes[1].tagName=="I"){C="right"}A={};A[B.ATTRIBUTE_DESC]="Image position";A[B.ATTRIBUTE_VALUE]=C;D.push(A)}}return D};pega.ui.automation.manager.registerTranslator(pega.ui.automation.constants.COMPONENT.BUTTON,pega.ui.automation.recorder.translator.buttonTranslator);pega.ui.automation.recorder.translator.menuItemTranslator=Object.create(pega.ui.automation.recorder.translator.defaultComponent);pega.ui.automation.recorder.translator.menuItemTranslator.buildConfigs=function(A){var D=pega.ui.automation.constants;var E=[];var C={};C[D.ATTRIBUTE_DESC]="Tooltip";C[D.ATTRIBUTE_NAME]="..."+D.ASSERTION_CUSTOM_NAME_SEPARATOR+D.ASSERTION_CUSTOM_NAME_SEPARATOR+D.ATTRIBUTE.TITLE;E.push(C);C={};C[D.ATTRIBUTE_DESC]="Label";C[D.ATTRIBUTE_NAME]=D.ATTRIBUTE.INNER_TEXT;E.push(C);C={};C[D.ATTRIBUTE_DESC]="Description";C[D.ATTRIBUTE_NAME]="."+D.ASSERTION_CUSTOM_NAME_SEPARATOR+".menu-item-description"+D.ASSERTION_CUSTOM_NAME_SEPARATOR+":contains";E.push(C);C={};C[D.ATTRIBUTE_DESC]="Badge Label";C[D.ATTRIBUTE_NAME]="."+D.ASSERTION_CUSTOM_NAME_SEPARATOR+".menu-item-badge"+D.ASSERTION_CUSTOM_NAME_SEPARATOR+":contains";E.push(C);C={};C[D.ATTRIBUTE_DESC]="Badge Format";C[D.ATTRIBUTE_NAME]="."+D.ASSERTION_CUSTOM_NAME_SEPARATOR+".menu-item-badge"+D.ASSERTION_CUSTOM_NAME_SEPARATOR+"@class";E.push(C);C={};C[D.ATTRIBUTE_DESC]="Disabled";C[D.ATTRIBUTE_NAME]="..."+D.ASSERTION_CUSTOM_NAME_SEPARATOR+D.ASSERTION_CUSTOM_NAME_SEPARATOR+D.ATTRIBUTE.DISABLE;E.push(C);var B=A.parentElement.parentElement;if(B.querySelector("img")!=null){C={};C[D.ATTRIBUTE_DESC]="Image source";C[D.ATTRIBUTE_NAME]=".."+D.ASSERTION_CUSTOM_NAME_SEPARATOR+"img"+D.ASSERTION_CUSTOM_NAME_SEPARATOR+"@src";E.push(C)}else{if(B.querySelector(".menu-item-icon-imageclass")!=null){C={};C[D.ATTRIBUTE_DESC]="Image source";C[D.ATTRIBUTE_NAME]=".."+D.ASSERTION_CUSTOM_NAME_SEPARATOR+".menu-item-icon-imageclass"+D.ASSERTION_CUSTOM_NAME_SEPARATOR+"@class";E.push(C)}}return E};pega.ui.automation.manager.registerTranslator(pega.ui.automation.constants.COMPONENT.MENU_ITEM,pega.ui.automation.recorder.translator.menuItemTranslator);pega.ui.automation.recorder.translator.labelTranslator=Object.create(pega.ui.automation.recorder.translator.defaultComponent);pega.ui.automation.recorder.translator.labelTranslator.buildConfigs=function(){var B=pega.ui.automation.constants;var C=[];var A={};A[B.ATTRIBUTE_DESC]="Value";A[B.ATTRIBUTE_NAME]=B.ATTRIBUTE.INNER_TEXT;C.push(A);return C};pega.ui.automation.manager.registerTranslator(pega.ui.automation.constants.COMPONENT.LABEL,pega.ui.automation.recorder.translator.labelTranslator);pega.ui.automation.manager.registerTranslator(pega.ui.automation.constants.COMPONENT.DROPDOWN,pega.ui.automation.recorder.translator.inputTextTranslator);pega.ui.automation.recorder.translator.linkTranslator=Object.create(pega.ui.automation.recorder.translator.defaultComponent);pega.ui.automation.recorder.translator.linkTranslator.buildConfigs=function(C){var B=pega.ui.automation.constants;var E=[];var A={};A[B.ATTRIBUTE_DESC]="Link Caption";A[B.ATTRIBUTE_NAME]=B.ATTRIBUTE.INNER_TEXT;E.push(A);A={};A[B.ATTRIBUTE_DESC]="Tooltip";A[B.ATTRIBUTE_NAME]=B.ATTRIBUTE.TITLE;E.push(A);A={};A[B.ATTRIBUTE_DESC]="Disabled";A[B.ATTRIBUTE_NAME]=B.ATTRIBUTE.DISABLE;E.push(A);var D="left";if(C.querySelector("img")!=null){A={};A[B.ATTRIBUTE_DESC]="Image source";A[B.ATTRIBUTE_NAME]="img"+B.ASSERTION_CUSTOM_NAME_SEPARATOR+"@src";E.push(A);if(C.childNodes.length>=2&&C.childNodes[1].tagName=="IMG"){D="right"}A={};A[B.ATTRIBUTE_DESC]="Image position";A[B.ATTRIBUTE_VALUE]=D;E.push(A)}else{if(C.querySelector("i")!=null){A={};A[B.ATTRIBUTE_DESC]="Image source";A[B.ATTRIBUTE_NAME]="i"+B.ASSERTION_CUSTOM_NAME_SEPARATOR+"@class";E.push(A);if(C.childNodes.length>=2&&C.childNodes[1].tagName=="I"){D="right"}A={};A[B.ATTRIBUTE_DESC]="Image position";A[B.ATTRIBUTE_VALUE]=D;E.push(A)}}return E};pega.ui.automation.manager.registerTranslator(pega.ui.automation.constants.COMPONENT.LINK,pega.ui.automation.recorder.translator.linkTranslator);pega.ui.automation.recorder.translator.iconTranslator=Object.create(pega.ui.automation.recorder.translator.defaultComponent);pega.ui.automation.recorder.translator.iconTranslator.buildConfigs=function(B){var C=pega.ui.automation.constants;var D=[];var A={};A[C.ATTRIBUTE_DESC]="Tooltip";A[C.ATTRIBUTE_NAME]=C.ATTRIBUTE.TITLE;D.push(A);A={};A[C.ATTRIBUTE_DESC]="Disabled";A[C.ATTRIBUTE_NAME]=C.ATTRIBUTE.DISABLE;D.push(A);if(B.tagName=="A"||B.tagName=="I"){A={};A[C.ATTRIBUTE_DESC]="Icon source";A[C.ATTRIBUTE_NAME]=C.ATTRIBUTE.CLASS;D.push(A)}else{if(B.tagName=="IMG"){A={};A[C.ATTRIBUTE_DESC]="Icon source";A[C.ATTRIBUTE_NAME]=C.ATTRIBUTE.SRC;D.push(A);if(B.getAttribute("style")&&B.getAttribute("style").indexOf("width")>=0){A={};A[C.ATTRIBUTE_DESC]="Image dimensions";A[C.ATTRIBUTE_NAME]=C.ATTRIBUTE.STYLE;D.push(A)}}}return D};pega.ui.automation.manager.registerTranslator(pega.ui.automation.constants.COMPONENT.ICON,pega.ui.automation.recorder.translator.iconTranslator);pega.ui.automation.recorder.translator.displayTextTranslator=Object.create(pega.ui.automation.recorder.translator.defaultComponent);pega.ui.automation.recorder.translator.displayTextTranslator.buildConfigs=function(B){var C=pega.ui.automation.constants;var D=[];var A={};A[C.ATTRIBUTE_DESC]="Value";A[C.ATTRIBUTE_NAME]=C.ATTRIBUTE.INNER_TEXT;D.push(A);A={};A[C.ATTRIBUTE_DESC]="Label";A[C.ATTRIBUTE_NAME]=C.ATTRIBUTE.LABEL;D.push(A);return D};pega.ui.automation.manager.registerTranslator(pega.ui.automation.constants.COMPONENT.DISPLAY_TEXT,pega.ui.automation.recorder.translator.displayTextTranslator);
(function(M){function F(){for(var A=0;A<Z.length;A++){Z[A][0](Z[A][1])}Z=[];W=!1}function V(B,A){Z.push([B,A]);W||(W=!0,T(F,0))}function S(B,A){function E(c){U(A,c)}function C(c){Y(A,c)}try{B(E,C)}catch(D){C(D)}}function K(B){var A=B.owner,E=A.state_,A=A.data_,C=B[E];B=B.then;if("function"===typeof C){E=X;try{A=C(A)}catch(D){Y(B,D)}}J(B,A)||(E===X&&U(B,A),E===R&&Y(B,A))}function J(B,A){var E;try{if(B===A){throw new TypeError("A promises callback cannot return that same promise.")}if(A&&("function"===typeof A||"object"===typeof A)){var C=A.then;if("function"===typeof C){return C.call(A,function(c){E||(E=!0,A!==c?U(B,c):I(B,c))},function(c){E||(E=!0,Y(B,c))}),!0}}}catch(D){return E||Y(B,D),!0}return !1}function U(B,A){B!==A&&J(B,A)||I(B,A)}function I(B,A){B.state_===Q&&(B.state_=H,B.data_=A,V(P,B))}function Y(B,A){B.state_===Q&&(B.state_=H,B.data_=A,V(O,B))}function G(B){var A=B.then_;B.then_=void 0;for(B=0;B<A.length;B++){K(A[B])}}function P(A){A.state_=X;G(A)}function O(A){A.state_=R;G(A)}function b(A){if("function"!==typeof A){throw new TypeError("Promise constructor takes a function argument")}if(!1===this instanceof b){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}this.then_=[];S(A,this)}var a=M.Promise,N=a&&"resolve" in a&&"reject" in a&&"all" in a&&"race" in a&&function(){var A;new a(function(B){A=B});return"function"===typeof A}();"undefined"!==typeof exports&&exports?(exports.Promise=N?a:b,exports.Polyfill=b):"function"==typeof define&&define.amd?define(function(){return N?a:b}):N||(M.Promise=b);var Q="pending",H="sealed",X="fulfilled",R="rejected",L=function(){},T="undefined"!==typeof setImmediate?setImmediate:setTimeout,Z=[],W;b.prototype={constructor:b,state_:Q,then_:null,data_:void 0,then:function(B,A){var C={owner:this,then:new this.constructor(L),fulfilled:B,rejected:A};this.state_===X||this.state_===R?V(K,C):this.then_.push(C);return C.then},"catch":function(A){return this.then(null,A)}};b.all=function(A){if("[object Array]"!==Object.prototype.toString.call(A)){throw new TypeError("You must pass an array to Promise.all().")}return new this(function(B,k){function C(c){i++;return function(d){j[c]=d;--i||B(j)}}for(var j=[],i=0,E=0,D;E<A.length;E++){(D=A[E])&&"function"===typeof D.then?D.then(C(E),k):j[E]=D}i||B(j)})};b.race=function(A){if("[object Array]"!==Object.prototype.toString.call(A)){throw new TypeError("You must pass an array to Promise.race().")}return new this(function(B,E){for(var C=0,D;C<A.length;C++){(D=A[C])&&"function"===typeof D.then?D.then(B,E):B(D)}})};b.resolve=function(A){return A&&"object"===typeof A&&A.constructor===this?A:new this(function(B){B(A)})};b.reject=function(A){return new this(function(B,C){C(A)})}})("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);
pega.ui=pega.ui||{};pega.ui.automation=pega.ui.automation||{};pega.ui.automation.executor=(function(){var K=window.alert;var V=-1;window.alert=function(o){var n=pega.ui.automation.storeManager.getExecutorStatus();if(n=="busy"){return true}else{K(o)}};var B=function(u,q){var n=pega.ui.automation.storeManager.getCurrentTestCase(),t=pega.ui.automation.storeManager.getExecutorMode(),o=pega.ui.automation.storeManager.getTestCaseResult(),s=pega.ui.automation.storeManager.getCurrentStepIndex();if(n){pega.ui.EventsEmitter.unsubscribe(pega.ui.statetracking.IDLE_EVENT,pega.ui.automation.executor.captureIdleState);pega.u.d.setProperty("pxRequestor.pxAutomationRecorder.pyTestRunStatus","Finished");pega.ui.automation.storeManager.setExecutorStatus("idle");if(!o){o={}}o.pyTestCaseRunResult="Failed";o.pyTestCaseFailureMessage="JS error occured at step "+s+" : "+u;pega.ui.automation.storeManager.setTestCaseResult(o);var r={};r.mode=t;r.testCaseId=n;pega.ui.automation.resultsPublisher.publishResult(r);if(t==="landing"&&pega.desktop.AFTHelper){pega.desktop.AFTHelper.abortTestcases()}console.error(q);d();if(pega.ui.automation.storeManager.getIsRerunEnabeledForTestCases()){var p=pega.ui.automation.storeManager.getCurrentTestCaseForRerun();pega.ui.automation.storeManager.addFailedTestCaseForRerun(p)}}};var h=window.onerror;window.onerror=function(r,p,n,o){var q="Error caught in windown.onerror "+r+" at line "+n+" Column "+o+" file "+p;B(r,q);h(r)};var R=window.confirm;window.confirm=function(o){var n=pega.ui.automation.storeManager.getExecutorStatus();if(n=="busy"){return true}else{return R(o)}};var T=pega.ui.automation.constants;var J=function(){var r=pega.ui.automation.storeManager.getExecutorStatus();var p=pega.ui.automation.utils.getPortalWindow();var q=p&&p.document.querySelector(".document-statetracker");var t="";if(q){t=q.getAttribute("data-aft-reload")}if(r=="busy"&&t!="NO"){if(pega.ui.automation.storeManager.getExecutorMode()=="single"){p.pega.ui.automation.recorder.toggle(function(){var u=pega.ui.automation.utils.getPortalWindow();u.pega.ui.automation.recorder.initStepStatus()});q.setAttribute("data-aft-reload","NO")}var n=pega.ui.automation.storeManager.getTestRunSlowMode();var s=pega.ui.automation.storeManager.getCurrentStepIndex();if(parseInt(s)>0){prevStepMetaData=pega.ui.automation.sequencer.getStepAtIndex(s-1);if(prevStepMetaData&&parseInt(prevStepMetaData.pyDelayInMillis)>0){n=parseInt(prevStepMetaData.pyDelayInMillis)}}var o=sessionStorage.getItem("WaitinInprogress");if(!isNaN(n)&&parseInt(n)>0){if(o=="false"){sessionStorage.setItem("WaitinInprogress",true);setTimeout(function(){sessionStorage.setItem("WaitinInprogress",false);console.log("Calling resume on load of document with wait");p.pega.ui.EventsEmitter.publish("ResumeTestCase")},parseInt(n))}}else{console.log("Calling resume on load of document");p.pega.ui.EventsEmitter.publish("ResumeTestCase")}}};var W=function(q,p,o){var n=SafeURL_createFromURL(pega.u.d.url);n.put("pyActivity","pzGetTestCaseData");n.put("pyClassName","Rule-Test-Functional-Case");n.put("testCaseName",q);n.put("testCaseClass",p);var r={success:function(s){try{var u=JSON.parse(s.responseText);u.id=u.pzInsKey;if(u&&u.id){if(u.pyIsInactive==="true"){console.log(u.id+" is not being excuted as it is marked as disabled.")}else{pega.ui.automation.storeManager.putTestCaseInLocalStore(u);var v=pega.ui.automation.storeManager.getExecutorMode();pega.ui.automation.storeManager.removeTestRunSlowMode();if(u.pyEnableSlowMode&&(v=="single"||v=="landing"||v=="hybrid")){if(u.pyScenarioTestDelayInMillis>0){pega.ui.automation.storeManager.setTestRunSlowMode(u.pyScenarioTestDelayInMillis)}}if((v!="single"&&v!="debug"&&v!="edit")&&(u.pyEnableRerunMode===true&&pega.ui.automation.storeManager.getIsRerunEnabeledForTestCases()==null)&&pega.ui.automation.storeManager.getTestCasesRerunCount()==null){pega.ui.automation.storeManager.setIsRerunEnabeledForTestCases(true);pega.ui.automation.storeManager.setTestCasesRerunCount(u.pyScenarioTestRerunCount)}if(pega.ui.automation.storeManager.getIsRerunEnabeledForTestCases()){var t={pyClassName:u.pyClassName,pyCategory:u.pyCategory,pyIsInactive:u.pyIsInactive,pyPurpose:u.pyPurpose};pega.ui.automation.storeManager.setCurrentTestCaseForRerun(t)}m(o)}}}catch(w){console.error("Exception while parsing test case data.",w);B(w)}},failure:function(s){}};pega.u.d.ServerProxy.doAction(n,null,{online:function(){pega.u.d.asyncRequest("POST",n,r)},offline:function(){}})};var g=function(){var n=SafeURL_createFromURL(pega.u.d.url);n.put("pyActivity","pzGetAllFunctionalTestCases");var o={success:function(q){try{jsonResponse=JSON.parse(q.responseText);var p=jsonResponse.pxResults;if(p){pega.ui.automation.storeManager.putTestCasesListInLocalStore(p);l()}}catch(r){console.error("Exception while parsing test case list.",r);B(r)}},failure:function(p){}};pega.u.d.ServerProxy.doAction(n,null,{online:function(){pega.u.d.asyncRequest("POST",n,o)},offline:function(){}})};var f=function(s,q,r){var o=pega.ui.automation.storeManager.getCurrentStepIndex();var p=o;var n=pega.ui.automation.storeManager.getTestCaseStepMeta(o-1);if(n&&n.isUpdated==true){p=o-1}m(p)};var M=function(n){A(n)};var E=function(r,o,p,n){try{console.log("********** Running Test Case: "+r+" ************");if(pega.ui.automation.storeManager.getDocStateCaptureFlag()=="true"){pega.ui.EventsEmitter.unsubscribe(pega.ui.statetracking.IDLE_EVENT,pega.ui.automation.executor.captureIdleState);pega.ui.EventsEmitter.subscribe(pega.ui.statetracking.IDLE_EVENT,pega.ui.automation.executor.captureIdleState)}if(!p||p=="single"){pega.ui.automation.storeManager.setExecutorMode("single")}else{if(p=="debug"){pega.ui.automation.storeManager.setExecutorMode("debug")}else{if(p=="landing"){pega.ui.automation.storeManager.setExecutorMode("landing")}}}W(r,o,n)}catch(q){console.error("Error in executeTestCase",q);B(q)}};var U=function(p,n){var o=Z();if(o<0||o==null||o==undefined){return }k(p,n,o);N(-1)};var Z=function(){return V};var N=function(n){if(n==null||n==undefined){n=$(event.target).closest("[node_name='pyRecordingTestStepRow']").attr("index")}if(isNaN(parseInt(n))){console.log("Invalid rerecordStepIndex");return }V=n};var k=function(s,q,o){if(o==null||o==undefined){o=$(event.target).closest("[node_name='pyRecordingTestStepRow']").attr("index")}if(isNaN(parseInt(o))){console.log("Invalid editStepIndex");return }console.log("********** Running Test Case for edit "+s+" ************");pega.ui.automation.storeManager.setExecutorMode("edit");var r=pega.ui.automation.storeManager.getLastRunStepIndex();if(r==null||r=="undefined"||parseInt(o)<parseInt(r)){r=0}pega.ui.automation.storeManager.setEditStepIndex(o);var n=pega.ui.automation.storeManager.getCurrentTestCase();var p=pega.ui.automation.storeManager.getTestCaseFromLocalStore(n);if(!p){W(s,q,r)}else{m(r)}};var c=function(n,p){try{pega.ui.automation.storeManager.setExecutorMode("hybrid");if(n){pega.ui.automation.storeManager.setAutomationJobId(p);pega.ui.automation.storeManager.putTestCasesListInLocalStore(n);l()}}catch(o){console.error("Error in runTestCases",o);B(o)}};var P=function(o,n){pega.ui.automation.storeManager.setExecutorMode("hybrid");pega.ui.automation.storeManager.setAutomationJobId(o);pega.ui.automation.storeManager.cleanRerunVariables();pega.desktop.AFTRunner.executeTestSuite(n,window)};var i=function(n){pega.ui.automation.storeManager.setExecutorMode("hybrid");pega.ui.automation.storeManager.setAutomationJobId(n);pega.ui.automation.storeManager.cleanRerunVariables();g()};var O=function(){pega.ui.automation.storeManager.setExecutorMode("bulk");g()};var C=function(){try{var o=pega.ui.automation.storeManager.getNextTestCaseFromLocalStore();if(o){E(o.pyPurpose,o.pyClassName,"bulk")}else{if(pega.ui.automation.storeManager.getIsRerunEnabeledForTestCases()&&pega.ui.automation.storeManager.getTestCasesRerunCount()>0&&pega.ui.automation.storeManager.getRerunTestCaseList()&&pega.ui.automation.storeManager.getRerunTestCaseList().pxResults.length>0){var p=pega.ui.automation.storeManager.getTestCasesRerunCount();pega.ui.automation.storeManager.setTestCasesRerunCount(--p);var n=pega.ui.automation.storeManager.getRerunTestCaseList();pega.ui.automation.storeManager.reSetTestCaseRerunList();pega.ui.automation.storeManager.setRerunInProgress(true);pega.ui.automation.storeManager.putTestCasesListInLocalStore(n.pxResults);C()}else{pega.ui.automation.executor.messenger.setRunnerMessage("AllTestcasesFinished");pega.ui.automation.resultsPublisher.publishAllResults();Q()}}}catch(q){console.error("Error in runNextTestCase",q);B(q)}};var m=function(n){var o=false;sessionStorage.setItem("WaitinInprogress",false);if(!isNaN(parseInt(n))){pega.ui.automation.storeManager.setCurrentStepIndex(parseInt(n))}else{o=Y()}if(!o){try{I()}catch(p){console.error("Exception while running step",p);B(p)}}};var l=function(){C()};var I=function(){if(pega.ui.automation.storeManager.getExecutorMode()=="edit"){var n=pega.ui.automation.storeManager.getEditStepIndex();if(n!=null&&n!=="undefined"&&pega.ui.automation.storeManager.getCurrentStepIndex()==n){console.log("**** Edit Mode *** stopping test case at step: ",n);pega.ui.automation.storeManager.setLastRunStepIndex(n);pega.ui.automation.storeManager.setExecutorStatus("idle");pega.ui.automation.stateManager.queueOrFireClientIdleCallback(function(){pega.ui.automation.recorder.startRecording();pega.ui.automation.storeManager.setRecoderStepIndex(n)});pega.u.d.setProperty("pxRequestor.pxAutomationRecorder.pyTestRunStatus","Stopped");return }}var o=pega.ui.automation.utils.getPortalWindow();if(o.pega.ui.ClientCache.find("D_pyScenerioTestData")==null){var s=pega.ui.automation.storeManager.getTestCaseDynamicValueFromLocalStore();if(s!=null){var r=JSON.stringify(s);var o=pega.ui.automation.utils.getPortalWindow();o=o||window;o.afttestdatacp=o.pega.ui.ClientCache.createPage("D_pyScenerioTestData");o.afttestdatacp.adoptJSON(r);o.afttestdatacp=null}else{console.log("Dynamic data not present in session store")}}var w=null,u=false;var q=pega.ui.automation.sequencer.getNextStep();pega.ui.automation.storeManager.setExecutorStatus("busy");if(q){var p=pega.ui.automation.storeManager.getCurrentStepIndex();console.log("*** Running test case step index: ",p);var t={};t.currentStepIndex=p;t.testCaseId=pega.ui.automation.storeManager.getCurrentTestCase();pega.ui.EventsEmitter.publish("StepBegin",t);var v=new Promise(function(y,x){y()});v.then(function(x){if(q[pega.ui.automation.constants.IS_ASSERTOR]!=="true"){return true}else{var y=new Promise(function(AA,z){a(q,AA)});return y}}).then(function(y){if(q[pega.ui.automation.constants.IS_NAVIGATOR]!=="true"){return y}else{var x=new Promise(function(AA,z){X(q,AA,y)});return x}}).then(function(x){x.currentStepIndex=p-1;var z=pega.ui.automation.storeManager.getExecutorMode();console.log("*** Step Status : "+x.pyStepResult+" ***");if(z=="hybrid"&&x.pyStepResult==pega.ui.automation.constants.STEP_RESULT.FAILED){var y=pega.ui.automation.storeManager.getCurrentTestCase();pega.ui.automation.executor.messenger.setRunnerMessage("TestcaseFail",[y,""+x.currentStepIndex])}console.log("*** Step Completed ***");pega.ui.EventsEmitter.publish("StepComplete",x)})}else{if(q==null){pega.ui.EventsEmitter.publish("TestCaseComplete")}}};var X=function(o,p,n){var q=pega.ui.automation.navigator.performAction(o);q.then(function(r){var z={};z.pyStepResult=T.STEP_RESULT.PASSED;if(typeof n=="object"){z.assertionResults=n.assertionResults;z.pyStepResult=n.pyStepResult}var u=pega.ui.automation.storeManager.getExecutorMode();var v=true;var y=true;if(r instanceof Array){for(var t in r){if(r[t][T.STEP_RESULT.STATUS]==T.STEP_RESULT.FAILED){y=false;z.pyStepResult=T.STEP_RESULT.FAILED;break}}z.navigationResults=r}else{y=false;z.pyStepResult=T.STEP_RESULT.FAILED;console.error("Navigation returned no result!")}if((u=="edit"||u=="debug"||u=="hybrid")&&(!r||!y||(typeof n=="object"&&n.pyStepResult==T.STEP_RESULT.FAILED))){v=false;pega.u.d.setProperty("pxRequestor.pxAutomationRecorder.pyTestRunStatus","Stopped")}if(v){var s=pega.ui.automation.storeManager.getTestRunSlowMode();var x=s&&!isNaN(s)&&parseInt(s)>0;if((u=="single"||u=="landing"||u=="hybrid")&&x){z.customWait=s;console.info("slow motion delay : "+z.customWait);if(u=="single"||u=="landing"){G(o)}}if(parseInt(o.pyDelayInMillis)>0){z.customWait=parseInt(o.pyDelayInMillis);console.info("custom wait :"+z.customWait)}var w=sessionStorage.getItem("WaitinInprogress");if(z.customWait){if(w=="false"){sessionStorage.setItem("WaitinInprogress",true);setTimeout(function(){sessionStorage.setItem("WaitinInprogress",false);pega.ui.EventsEmitter.publish("ResumeTestCase")},z.customWait)}}else{if(z.pyStepResult==T.STEP_RESULT.FAILED){console.log("Calling resume on failure");pega.ui.EventsEmitter.publish("ResumeTestCase")}else{pega.ui.automation.stateManager.queueOrFireClientIdleCallback(function(){console.log("Called from queueOrFireClientIdleCallback");pega.ui.EventsEmitter.publish("ResumeTestCase")})}}}p(z)})};var a=function(r,t){var o=true;var p,n={};n.pyStepResult=T.STEP_RESULT.PASSED;n.resumeOperation=true;var s=pega.ui.automation.storeManager.getExecutorMode();var q=pega.ui.automation.assertor.performAssertion(r);q.then(function(v){if(v instanceof Array){for(var u in v){if(v[u][T.STEP_RESULT.STATUS]==T.STEP_RESULT.FAILED){o=false;n.pyStepResult=T.STEP_RESULT.FAILED;break}}n.assertionResults=v}else{o=false;n.pyStepResult=T.STEP_RESULT.FAILED;console.error("Assertion returned no result!")}if((s=="edit"||s=="debug"||s=="hybrid")&&(!o||!v)){n.resumeOperation=false;pega.u.d.setProperty("pxRequestor.pxAutomationRecorder.pyTestRunStatus","Stopped")}else{if(r[pega.ui.automation.constants.IS_NAVIGATOR]!=="true"){console.log("Called resume from Assertor");pega.ui.EventsEmitter.publish("ResumeTestCase")}}t(n)})};var G=function(o){var n=o.pySelector;if(n){var p=pega.ui.automation.utils.getDomElement(n);var q=pega.ui.ScreenInspector.getInspector("testExecutor");if(!p||p.style.display=="none"||p.hidden){}else{b();q.highlightError(p)}}};var b=function(){var n=pega.ui.ScreenInspector.getInspector("testExecutor");n.clearHighlight()};var H=function(o){pega.u.d.setProperty("pxRequestor.pxAutomationRecorder.pyTestRunStatus","Running");if(o&&o.testCaseId&&o.type=="resumeAndFetch"){var n=pega.ui.automation.storeManager.getCurrentStepIndex();if(o.bResumeFromCurrentStep==false){n++}E(o.testCaseId,o.testCaseClass,"debug",n)}else{I()}};var Y=function(){pega.u.d.setProperty("pxRequestor.pxAutomationRecorder.pyTestRunStatus","Running");var o=pega.ui.automation.utils.getPortalWindow();if(pega.ui.automation.storeManager.getTestCaseDynamicValueFromLocalStore()==null){var q=new SafeURL(pega.u.d.url);q.put("pyActivity","pzGetScenerioTestDynamicValues");q.put("pyClassName","Rule-Test-Functional-Case");try{var v=JSON.parse(httpRequestAsynch(q.toURL(),null,50,100));if(v){pega.ui.automation.storeManager.setTestCaseDynamicValueInLocalStore(v);if(o.pega.ui.ClientCache.find("D_pyScenerioTestData")==null){var s=pega.ui.automation.storeManager.getTestCaseDynamicValueFromLocalStore();if(s!=null){var r=JSON.stringify(s);var o=pega.ui.automation.utils.getPortalWindow();o=o||window;o.afttestdatacp=o.pega.ui.ClientCache.createPage("D_pyScenerioTestData");o.afttestdatacp.adoptJSON(r);o.afttestdatacp=null}else{console.log("Dynamic data not present in session store")}}}}catch(t){console.error("error while fetching data from activity",t);B(t)}}var w=o&&o.document.querySelector(".document-statetracker");if(w){w.setAttribute("data-aft-reload","NO")}if(pega.ui.automation.storeManager.getExecutorMode()=="hybrid"){var u=pega.ui.automation.storeManager.getCurrentTestCase();pega.ui.automation.executor.messenger.setRunnerMessage("TestcaseStart",[u])}e();var p=pega.ui.automation.storeManager.getCurrentTestCase();var n=pega.ui.automation.storeManager.getTestCaseFromLocalStore(p);if(n.pyPortalName&&pega.u.d.portalName&&n.pyPortalName!==pega.u.d.portalName){pega.ui.automation.storeManager.setExecutorStatus("busy");changePortal(n.pyPortalName,pega.u.d.portalName);return true}return false};var D=function(){console.log("********** Completed Test Case ************");sessionStorage.setItem("WaitinInprogress",false);var r=pega.ui.automation.storeManager.getExecutorMode();if(r!=="single"&&r!=="debug"&&r!=="edit"&&pega.ui.automation.storeManager.getIsRerunEnabeledForTestCases()){var p=pega.ui.automation.storeManager.getTestCaseResult().pyTestCaseRunResult;if(p=="Failed"){var o=pega.ui.automation.storeManager.getCurrentTestCaseForRerun();pega.ui.automation.storeManager.addFailedTestCaseForRerun(o)}}pega.ui.EventsEmitter.unsubscribe(pega.ui.statetracking.IDLE_EVENT,pega.ui.automation.executor.captureIdleState);pega.u.d.setProperty("pxRequestor.pxAutomationRecorder.pyTestRunStatus","Finished");pega.ui.automation.storeManager.setExecutorStatus("idle");if(pega.ui.automation.storeManager.getDocStateCaptureFlag()=="true"){var t=pega.ui.automation.storeManager.getTestCaseResult();pega.ui.EventsEmitter.publish("TestCaseResultWithDocState",t)}var n=pega.ui.automation.storeManager.getCurrentTestCase();if(n){var q={};var s=pega.ui.automation.storeManager.getExecutorMode();if(s=="edit"){S();d();return }q.mode=s;q.testCaseId=n;if(s=="single"||s=="debug"||s=="landing"){if(s=="debug"){S()}pega.ui.automation.resultsPublisher.publishResult(q);d()}else{if(s=="bulk"){pega.ui.automation.resultsPublisher.publishResult(q);C()}else{if(s=="hybrid"){pega.ui.automation.executor.messenger.setRunnerMessage("TestcaseFinish",[n])}}}}};var S=function(){var o=pega.ui.automation.storeManager.getTestCaseResult();var n="Passed";for(var p in o.pyTestCaseSteps){if(o.pyTestCaseSteps[p].pyStepResult=="Failed"){n="Failed";break}}o.pyTestCaseRunResult=n;pega.ui.automation.storeManager.setTestCaseResult(o)};var F=function(n){L(n)};var e=function(){var o={};var n=pega.ui.automation.storeManager.getCurrentTestCase();var p=pega.ui.automation.storeManager.getTestCaseFromLocalStore(n);o.pyPurpose=n;o.pyClassName=p.pyClassName;o.pxObjClass="Data-TestCaseResults-Functional";o.pyLabel=p.pyLabel;o.pyTestCaseRunResult="Passed";o.startTime=performance.now();o.pyTestCaseKey=p.pxInstanceLockedKey?p.pxInstanceLockedKey:p.pzInsKey;o.pyTestCaseSteps=[];pega.ui.automation.storeManager.setTestCaseResult(o)};var A=function(n){var q=pega.ui.automation.storeManager.getCurrentStepIndex()-1;var r=pega.ui.automation.storeManager.getTestCaseResult();var o={};if(r.pyTestCaseSteps&&r.pyTestCaseSteps[q]){o=r.pyTestCaseSteps[q]}o.pyDocStateData=n;var p=pega.ui.automation.utils.getPortalWindow();o.pyPerformanceTiming=p.performance.timing;o.pyPaintPerformanceTiming=p.performance.getEntriesByType("paint");r.pyTestCaseSteps[q]=o;pega.ui.automation.storeManager.setTestCaseResult(r)};var L=function(n){var p=pega.ui.automation.storeManager.getTestCaseResult();var o=pega.ui.automation.sequencer.getStepAtIndex(n.currentStepIndex);var r={};if(p.pyTestCaseSteps&&p.pyTestCaseSteps[n.currentStepIndex]){r=p.pyTestCaseSteps[n.currentStepIndex]}if(o){r.pyTestStepName=o.pyTestStepName;r.pyComponentType=o.pyComponentType;r.pxObjClass="Embed-Test-Steps-Result";if(n.pyStepResult==T.STEP_RESULT.PASSED){r.pyStepResult="Passed"}else{if(n.pyStepResult==T.STEP_RESULT.FAILED){r.pyStepResult="Failed";if(p){p.pyTestCaseRunResult="Failed"}if(n.assertionResults){r.pyAssertionResults=[];for(var q in n.assertionResults){r.pyAssertionResults[q]=j(o,n.assertionResults[q],q)}}if(n.navigationResults){r.pyNavigationResults=j(o,n.navigationResults[0])}}}}if(p){p.pyTestCaseSteps[n.currentStepIndex]=r;pega.ui.automation.storeManager.setTestCaseResult(p)}r.currentStepIndex=n.currentStepIndex;pega.ui.automation.resultsPublisher.publishStepResult(r)};var j=function(o,q,n){var p={};p.pxObjClass="Embed-ExpectedResults-Functional";if(q[T.STEP_RESULT.STATUS]==T.STEP_RESULT.PASSED){p.pyStatus="Passed";if(n){p.pyAttributeDesc=o.pyTestAssertions[n].pyAttributeDesc}}else{p.pyStatus="Failed";p.pyFailureReason=q[T.STEP_RESULT.FAILURE_REASON];if(q[T.STEP_RESULT.FAILURE_TYPE]==T.STEP_RESULT.FAILURE_TYPES.NAVIGATOR){if(q[T.STEP_RESULT.SELECTOR]){p.pyElementSelector=q[T.STEP_RESULT.SELECTOR]}p.pyActionName=o.pyTestNavigator.pyNavigatorActionName}else{if(q[T.STEP_RESULT.FAILURE_TYPE]==T.STEP_RESULT.FAILURE_TYPES.ASSERTOR){p.pyExpectedValue=o.pyTestAssertions[n].pyExpectedValue;p.pyActualValue=q[T.STEP_RESULT.ACTUAL_VALUE];p.pyComparator=o.pyTestAssertions[n].pyComparator;p.pyAttributeDesc=o.pyTestAssertions[n].pyAttributeDesc}else{if(q[T.STEP_RESULT.FAILURE_TYPE]==T.STEP_RESULT.FAILURE_TYPES.DOM){p.pyElementSelector=q[T.STEP_RESULT.SELECTOR]}else{if(q[T.STEP_RESULT.FAILURE_TYPE]==T.STEP_RESULT.FAILURE_TYPES.INTERNAL){p.pyFailureCode=q[T.STEP_RESULT.FAILURE_CODE]}}}}}return p};var d=function(n){var p=pega.ui.automation.storeManager.getExecutorMode();pega.ui.automation.storeManager.removeTestCaseFromLocalStore(n);pega.ui.automation.storeManager.removeCurrentTestCaseAndStep();b();if(p=="single"||p=="debug"||p=="hybrid"||p=="edit"){pega.ui.automation.storeManager.removeTestCaseDynamicValueFromLocalStore();var o=pega.ui.automation.utils.getPortalWindow();var q=o.pega.ui.ClientCache&&o.pega.ui.ClientCache.find("D_pyScenerioTestData");if(q){q.remove();q=null}}};var Q=function(){pega.ui.automation.storeManager.removeAllTestCasesFromLocalStore();pega.ui.automation.storeManager.removeCurrentTestCaseAndStep();pega.ui.automation.storeManager.removeTestCasesListFromLocalStore();pega.ui.automation.storeManager.removeTestCaseDynamicValueFromLocalStore();var n=pega.ui.automation.utils.getPortalWindow();var o=n.pega.ui.ClientCache.find("D_pyScenerioTestData");if(o){o.remove();o=null}};return{onload:J,executeTestCase:E,runAll:O,cleanAll:Q,onResume:H,onTestCaseComplete:D,onStepComplete:F,resumeTestCase:f,runTestCases:c,runAllTestCases:i,runTestCasesOfSuite:P,runNextTestCase:C,runAndEditTestCase:k,runAndRerecordTestCase:U,setRerecordStepIndex:N,captureIdleState:M,onAbortTestExecution:B}})();pega.ui.EventsEmitter.subscribe("ResumeTestCase",pega.ui.automation.executor.onResume);pega.ui.EventsEmitter.subscribe("StepComplete",pega.ui.automation.executor.onStepComplete);pega.ui.EventsEmitter.subscribe("TestCaseComplete",pega.ui.automation.executor.onTestCaseComplete);pega.ui.EventsEmitter.subscribe("abortTestExecution",pega.ui.automation.executor.onAbortTestExecution);pega.u.d.attachOnload(pega.ui.automation.executor.onload);
pega.ui=pega.ui||{};pega.ui.automation=pega.ui.automation||{};pega.ui.automation.executor=pega.ui.automation.executor||{};pega.ui.automation.executor.messenger={getExecutorMessage:function(){var A=pega.ui.automation.storeManager.getTestCaseRunnerMessage(false);return JSON.stringify(A)},setExecutorMessage:function(B,A){var C={};C.actionName=B;C.actionArgs=A;pega.ui.automation.storeManager.setTestCaseRunnerMessage(C,true);this.fireExecutorAction();return true},setRunnerMessage:function(B,A){var C={};C.actionName=B;C.actionArgs=A;pega.ui.automation.storeManager.setTestCaseRunnerMessage(C,false);return true},resetMessage:function(A){pega.ui.automation.storeManager.removeTestCaseRunnerMessage(A?true:false)},fireExecutorAction:function(){var A=pega.ui.automation.storeManager.getTestCaseRunnerMessage(true);if(A){if(A.actionName=="Resume"){pega.ui.EventsEmitter.publish("ResumeTestCase")}else{if(A.actionName=="UploadResult"){pega.ui.automation.resultsPublisher.publishResultWithScreenshots({testCaseId:A.actionArgs[0],screenshots:A.actionArgs[1]})}}}}};
pega.ui.automation.storeManager=(function(){var AP="currentTestCaseAndStep";var AT=[];var a=function(Ab){if(Ab){var Ac=sessionStorage.getItem("TestCase-"+Ab);Ac=JSON.parse(Ac);return Ac}return null};var AR=function(Ac){if(Ac&&Ac.id){var Ab=Ac.id;sessionStorage.setItem("TestCase-"+Ac.id,JSON.stringify(Ac));C(Ab);return true}return false};var O=function(Ad,Ae){var Ab=Z(),Ac=a(Ab),Af=Ac.pyTestCaseSteps;if(Ad<=Af.length){Af.splice(Ad-1,0,Ae)}AR(Ac)};var AH=function(Ab){if(Ab&&Ab.id){var Ac=Ab.id;sessionStorage.setItem("TestSuite-"+Ab.id,JSON.stringify(Ab));AX(Ac);if(Ab.testSuiteStartTime){b(Ab.testSuiteStartTime)}return true}return false};var U=function(Ab){if(Ab){sessionStorage.removeItem("TestCase-"+Ab);return true}return false};var AV=function(){var Ad=Object.keys(sessionStorage);for(var Ac in Ad){var Ab=Ad[Ac];if(Ab.indexOf("TestCase-")==0){sessionStorage.removeItem(Ab)}}};var c=function(){var Ab=sessionStorage.getItem("TestCaseList");Ab=JSON.parse(Ab);if(Ab){var Ac=Ab.shift();if(Ab.length>0){sessionStorage.setItem("TestCaseList",JSON.stringify(Ab))}else{sessionStorage.setItem("TestCaseList",null)}return Ac}return null};var k=function(Ab){if(Ab instanceof Array){sessionStorage.setItem("TestCaseList",JSON.stringify(Ab));return true}return false};var x=function(){sessionStorage.removeItem("TestCaseList")};var C=function(Ab){if(Ab){sessionStorage.setItem(AP,Ab+"$0");return true}return false};var AF=function(Ac){var Ab=Z();if(Ab&&!isNaN(parseInt(Ac))){sessionStorage.setItem(AP,Ab+"$"+Ac);return true}return false};var Z=function(){var Ab=sessionStorage.getItem(AP);if(Ab){Ab=Ab.substring(0,Ab.lastIndexOf("$"));return Ab}return null};var AM=function(){var Ab=sessionStorage.getItem(AP);if(Ab){Ab=Ab.substring(Ab.lastIndexOf("$")+1);return parseInt(Ab)}return null};var R=function(Ab,Af,Ae){var Ad=sessionStorage.getItem("TestCase-"+Ab);Ad=JSON.parse(Ad);var Ac=Ad[pega.ui.automation.constants.TEST_CASE_STEPS];Ac[Af]=Ae;sessionStorage.setItem("TestCase-"+Ab,JSON.stringify(Ad))};var z=function(){sessionStorage.removeItem(AP)};var AI=function(Ab){if(Ab){try{Ab=JSON.stringify(Ab);sessionStorage.setItem("TestCaseResult",Ab)}catch(Ac){console.log("Exception while parsing testcase result!")}}};var AA=function(){var Ab=sessionStorage.getItem("TestCaseResult");if(Ab){Ab=JSON.parse(Ab)}return Ab};var Aa=function(Ad){var Ac=null;var Ab=sessionStorage.getItem("TestCaseResult");if(Ab){Ab=JSON.parse(Ab);Ac=Ab.pyTestCaseSteps[Ad]}return Ac};var AY=function(){sessionStorage.removeItem("TestCaseResult")};var w=function(Ab){if(Ab){try{Ab=JSON.stringify(Ab);sessionStorage.setItem("TestCaseMetaData",Ab)}catch(Ac){console.log("Exception while parsing testcase metadata!")}}};var l=function(){var Ab=sessionStorage.getItem("TestCaseMetaData");if(Ab){Ab=JSON.parse(Ab)}return Ab};var A=function(){sessionStorage.removeItem("TestCaseMetaData")};var r=function(){sessionStorage.removeItem("StartRunIndex");sessionStorage.removeItem("StopRunIndex");sessionStorage.removeItem("ExecutorMode")};var AC=function(Ad,Ac){if(!isNaN(Ad)){var Ab=l();if(Ab==null){w({pyTestCaseSteps:[]});Ab=l()}if(!Ac){Ac={}}Ab.pyTestCaseSteps[Ad]=Ac;w(Ab)}};var AK=function(Ad){var Ac=null;if(!isNaN(Ad)){var Ab=l();if(Ab){Ac=Ab.pyTestCaseSteps[Ad]}}return Ac};var D=function(Ac){if(!isNaN(Ac)){var Ab=l();if(Ab){Ab.pyTestCaseSteps[Ac]={};w(Ab)}}};var Q=function(){var Ab=l();if(Ab){return Ab.pyTestCaseSteps}};var t=function(Ab){if(!isNaN(Ab)){sessionStorage.setItem("RecoderStepIndex",Ab)}};var y=function(){var Ab=sessionStorage.getItem("RecoderStepIndex");return Ab?parseInt(Ab):Ab};var o=function(){sessionStorage.removeItem("RecoderStepIndex")};var AB=function(Ab){sessionStorage.setItem("LastRunStepIndex",Ab)};var AJ=function(){return sessionStorage.getItem("LastRunStepIndex")};var AQ=function(Ab){sessionStorage.setItem("EditStepIndex",Ab)};var AO=function(){return sessionStorage.getItem("EditStepIndex")};var AN=function(Ab){sessionStorage.setItem("ExecutorStatus",Ab)};var AX=function(Ab){sessionStorage.setItem("SuiteInsKey",Ab)};var j=function(Ab){sessionStorage.setItem("SuiteCheckedInInsKey",Ab)};var b=function(Ab){sessionStorage.setItem("SuiteStratTime",Ab)};var K=function(){return sessionStorage.getItem("SuiteInsKey")};var q=function(){return sessionStorage.getItem("SuiteCheckedInInsKey")};var W=function(){return sessionStorage.getItem("SuiteStratTime")};var AW=function(){return sessionStorage.getItem("DocStateCaptureFlag")};var v=function(Ab){sessionStorage.setItem("DocStateCaptureFlag",Ab)};var I=function(){return sessionStorage.removeItem("DocStateCaptureFlag")};var AG=function(){if(sessionStorage!==undefined||sessionStorage!==null){return sessionStorage.getItem("ExecutorStatus")}};var P=function(Ab){sessionStorage.setItem("ExecutorMode",Ab)};var J=function(){return sessionStorage.getItem("ExecutorMode")};var n=function(Ad,Af){if(Ad){try{var Ac=Y(Af);Ac.push(Ad);var Ab=JSON.stringify(Ac);sessionStorage.setItem(AZ(Af),Ab)}catch(Ae){console.log("Exception while parsing TestCaseRunnerMessage!")}}};var Y=function(Ad){var Ab=sessionStorage.getItem(AZ(Ad));var Ac=[];if(Ab){Ac=JSON.parse(Ab)}return Ac};var AZ=function(Ab){return Ab?"TestCaseExecutorMessage":"TestCaseRunnerMessage"};var H=function(Ae){var Ad=Y(Ae);var Ab=Ad.shift();var Ac=JSON.stringify(Ad);sessionStorage.setItem(AZ(Ae),Ac);return Ab};var E=function(Ab){sessionStorage.removeItem(AZ(Ab))};var p=function(Ab){sessionStorage.setItem("AutomationJobId",Ab)};var AL=function(){return sessionStorage.getItem("AutomationJobId")};var AD=function(){sessionStorage.removeItem("AutomationJobId")};var G=function(Ab){if(sessionStorage){sessionStorage.setItem("TestCase-dynamicvalues",JSON.stringify(Ab));return true}return false};var s=function(){if(sessionStorage){var Ab=sessionStorage.getItem("TestCase-dynamicvalues");Ab=JSON.parse(Ab);return Ab}return null};var i=function(){sessionStorage.setItem("TestCase-dynamicvalues",null)};var T=function(Ab){sessionStorage.setItem("TestCaseSlowMode",Ab)};var m=function(){return sessionStorage.getItem("TestCaseSlowMode")};var g=function(){sessionStorage.removeItem("TestCaseSlowMode")};var d=function(Ab){sessionStorage.setItem("TestCasesRerunEnabled",Ab)};var S=function(){return sessionStorage.getItem("TestCasesRerunEnabled")};var AS=function(Ab){sessionStorage.setItem("TestCasesRerunCount",Ab)};var L=function(){return sessionStorage.getItem("TestCasesRerunCount")};var M=function(){sessionStorage.removeItem("TestCasesRerunEnabled")};var f=function(){sessionStorage.removeItem("TestCasesRerunCount")};var h=function(Ab){if(sessionStorage){var Ac=JSON.parse(sessionStorage.getItem("RerunTestCaseList"));if(!Ac){Ac={pxResults:[]}}Ac.pxResults.push(Ab);sessionStorage.setItem("RerunTestCaseList",JSON.stringify(Ac))}};var u=function(){return JSON.parse(sessionStorage.getItem("RerunTestCaseList"))};var B=function(){sessionStorage.removeItem("RerunTestCaseList")};var X=function(){return JSON.parse(sessionStorage.getItem("RerunInProgress"))};var N=function(Ab){sessionStorage.setItem("RerunInProgress",Ab)};var V=function(){sessionStorage.removeItem("RerunInProgress")};var AE=function(){M();f();B();V();F()};var e=function(Ab){sessionStorage.setItem("CurrentTestCaseForRerun",JSON.stringify(Ab))};var AU=function(){return JSON.parse(sessionStorage.getItem("CurrentTestCaseForRerun"))};var F=function(){sessionStorage.removeItem("CurrentTestCaseForRerun")};return{getTestCaseFromLocalStore:a,putTestCaseInLocalStore:AR,removeTestCaseFromLocalStore:U,removeAllTestCasesFromLocalStore:AV,getNextTestCaseFromLocalStore:c,putTestCasesListInLocalStore:k,removeTestCasesListFromLocalStore:x,setCurrentTestCase:C,setCurrentStepIndex:AF,updateTestCaseStepData:R,getCurrentTestCase:Z,updateCurrentTestCaseStep:O,getCurrentStepIndex:AM,removeCurrentTestCaseAndStep:z,setTestCaseResult:AI,getTestCaseResult:AA,getTestCaseStepResult:Aa,removeTestCaseResult:AY,setTestCaseMeta:w,getTestCaseMeta:l,removeTestCaseMeta:A,setTestCaseStepMeta:AC,getAllTestCaseStepsMeta:Q,getTestCaseStepMeta:AK,resetTestCaseStepMeta:D,setExecutorStatus:AN,getExecutorStatus:AG,setExecutorMode:P,setSuiteInsKey:AX,getSuiteInsKey:K,setSuiteCheckedInInsKey:j,getSuiteCheckedInInsKey:q,setSuiteStartTime:b,getSuiteStartTime:W,putTestSuiteInLocalStore:AH,getDocStateCaptureFlag:AW,setDocStateCaptureFlag:v,removeDocStateCaptureFlag:I,getExecutorMode:J,setRecoderStepIndex:t,getRecoderStepIndex:y,removeRecoderStepIndex:o,setTestCaseRunnerMessage:n,getTestCaseRunnerMessage:H,removeTestCaseRunnerMessage:E,setAutomationJobId:p,getAutomationJobId:AL,removeAutomationJobId:AD,getTestCaseDynamicValueFromLocalStore:s,setTestCaseDynamicValueInLocalStore:G,removeTestCaseDynamicValueFromLocalStore:i,setTestRunSlowMode:T,getTestRunSlowMode:m,removeTestRunSlowMode:g,setLastRunStepIndex:AB,getLastRunStepIndex:AJ,setEditStepIndex:AQ,getEditStepIndex:AO,removeTestCaseEditData:r,setIsRerunEnabeledForTestCases:d,getIsRerunEnabeledForTestCases:S,setTestCasesRerunCount:AS,getTestCasesRerunCount:L,removeTestCasesRerunStatus:M,removeTestCasesRerunCount:f,reSetTestCaseRerunList:B,addFailedTestCaseForRerun:h,getRerunTestCaseList:u,getRerunInProgress:X,setRerunInProgress:N,removeRerunInProgress:V,cleanRerunVariables:AE,setCurrentTestCaseForRerun:e,getCurrentTestCaseForRerun:AU,removeCurrentTestCaseForRerun:F}})();
pega.ui.automation.sequencer=(function(){var C=null;var A=function(){var F=null;var D=pega.ui.automation.storeManager.getCurrentTestCase();C=pega.ui.automation.storeManager.getTestCaseFromLocalStore(D);if(C!=null){var E=C[pega.ui.automation.constants.TEST_CASE_STEPS];if(E&&E instanceof Array){var G=pega.ui.automation.storeManager.getCurrentStepIndex();if(!isNaN(parseInt(G))&&G<E.length){F=E[G];G++;pega.ui.automation.storeManager.setCurrentStepIndex(G)}}}return F};var B=function(G){var F=null;var D=pega.ui.automation.storeManager.getCurrentTestCase();if(C==null&&D!=null){C=pega.ui.automation.storeManager.getTestCaseFromLocalStore(D)}if(C!=null){var E=C[pega.ui.automation.constants.TEST_CASE_STEPS];if(E&&E instanceof Array){if(!isNaN(parseInt(G))&&G<E.length){F=E[G]}}}return F};return{getNextStep:A,getStepAtIndex:B}})();
pega.ui.automation.resultsPublisher=(function(){var G=function(O){var L=pega.ui.automation.storeManager.getTestCaseResult();L.pyActualElapsedTime=performance.now()-L.startTime;var M=pega.ui.automation.storeManager.getAutomationJobId(M);if(M){L.pyJobID=M}var R=pega.ui.automation.storeManager.getExecutorMode();if(R=="hybrid"){L.pyTestRunType="remote"}else{L.pyTestRunType="local"}if(R!="single"&&R!="debug"&&R!="edit"&&pega.ui.automation.storeManager.getRerunInProgress()==true){L.pyIsRerunResult="true"}delete L.startTime;var Q=new SafeURL("Data-TestCaseResults-Functional.pzSetTestCaseResult");Q.put("testCaseName",O.testCaseId);Q.put("testCaseClass",L.pyClassName);var P=pega.ui.automation.storeManager.getSuiteInsKey();var N=pega.ui.automation.storeManager.getSuiteCheckedInInsKey();if(P&&P!=""){var S=pega.ui.automation.storeManager.getSuiteStartTime();console.log("From pzPega_ui_automation_resultsPublisher  : "+P+" and time is "+S);Q.put("testSuiteInsKey",P);if(N){Q.put("testSuiteCheckedInInsKey",N)}Q.put("testSuiteRunStartTime",S);console.log("Sending test suite result keys to actiivty pzSetTestCaseResult  : "+P+" and checked in inskey is "+N+" and time is "+S)}var K=new SafeURL();K.put("testCaseResult",JSON.stringify(L));var T={success:function(U){var V=U.responseText;if(V.indexOf("true")==-1){console.error("Test Result upload returned failed!")}pega.ui.EventsEmitter.publish("TestcaseWrapup",O.testCaseId);if(R=="hybrid"){pega.ui.automation.executor.messenger.setRunnerMessage("TestcaseWrapup",[O.testCaseId]);pega.ui.automation.executor.runNextTestCase()}},failure:function(U){pega.ui.EventsEmitter.publish("TestcaseWrapup",O.testCaseId);if(R=="hybrid"){pega.ui.automation.executor.messenger.setRunnerMessage("TestcaseWrapup",[O.testCaseId]);pega.ui.automation.executor.runNextTestCase()}}};pega.u.d.ServerProxy.doAction(Q,K,{online:function(){pega.u.d.asyncRequest("POST",Q,T,K)},offline:function(){}})};var F=function(L){if(L.mode!="debug"){G(L)}var K=pega.ui.automation.storeManager.getTestCaseResult();top.pega.u.d.setProperty("pxRequestor.pxAutomationRecorder.pyLastRunStatus",K.pyTestCaseRunResult);top.pega.u.d.setProperty("pxRequestor.pxAutomationRecorder.pyTestRunStatus","Finished")};var C=function(K){pega.ui.EventsEmitter.publish("StepResult",K)};var D=function(){};var I=function(O){var N={};N.testCaseId=O.testCaseId;var K=O.screenshots;if(K){var L=pega.ui.automation.storeManager.getTestCaseResult();for(var M in K){if(!isNaN(M)){L.pyTestCaseSteps[M].pyStepFailureScreenshot=K[M]}}pega.ui.automation.storeManager.setTestCaseResult(L)}G(N)};var E=function(){var L=pega.ui.automation.storeManager.getCurrentStepIndex();L--;var K=pega.ui.automation.storeManager.getTestCaseStepMeta(L)||{};K.isUpdated=true;pega.ui.automation.storeManager.setTestCaseStepMeta(L,K);var M=SafeURL_createFromURL(pega.u.d.url);M.put("pyActivity","pxGetUpdatedTestCaseStepData");var N={success:function(Q){if(Q&&Q.responseText){try{var O=JSON.parse(Q.responseText);var P=pega.ui.automation.storeManager.getCurrentTestCase();pega.ui.automation.storeManager.updateTestCaseStepData(P,L,O)}catch(R){console.error("Invalid step json: ",R)}}},failure:function(O){}};M.put("stepInd",L+1);pega.util.Connect.asyncRequest("POST",M.toURL(),N)};var A=function(O){var L=J(O.target);console.log("stepInd: "+L);var K=pega.ui.automation.storeManager.getTestCaseStepMeta(L-1);var N=K&&K.assertionOptions;console.log("assertionOptions: "+N);if(!N||N.length==0){return }var M=SafeURL_createFromURL(pega.u.d.url);M.put("pyActivity","pxUpdateTestStepAssertionOptions");var P={success:function(Q){console.log("Assertion options updated")},failure:function(Q){}};M.put("attributes",JSON.stringify(N));M.put("stepInd",L);pega.util.Connect.asyncRequest("POST",M.toURL(),P)};var J=function(O){var M=O;var P=null;var N=-1;var L=-1;var K="pxRequestor.pxAutomationRecorder.pyTestCaseSteps(";while(M!=null&&M!=document.body){P=M.getAttribute("base_ref");if(P){N=P.indexOf(K)}if(N==0){L=P.substring(K.length,P.indexOf(")",K.length));break}M=M.parentElement}return L};var H=function(L){var K=($(".stepResultsContent").closest("div.overlayPO"))[0];if(K){K.style.zIndex=L}};var B=function(P){var L=J(P.target);var R=$(".stepResultDescription .content-item")[0];L--;var K=pega.ui.automation.storeManager.getTestCaseStepResult(L);var Q="<ul>";if(K){var T=K.pyAssertionResults;if(T){for(var N=0;N<T.length;N++){var S=T[N];if(S.pyStatus=="Failed"){Q+="<li style='color:red;'>"+S.pyFailureReason+"</li>"}}}var O=K.pyNavigationResult;if(O){if(O.pyStatus=="Failed"){Q+="<li style='color:red;'>"+O.pyFailureReason+"</li>"}}Q+="</ul>";var M=document.createElement("div");M.innerHTML=Q;R&&R.appendChild(M)}H("1000000")};return{publishResult:F,publishStepResult:C,publishAllResults:D,publishResultWithScreenshots:I,populateStepMetaData:A,populateStepFailures:B,updateCurrentStep:E}})();
pega.ui.automation.stateManager=(function(){var E=null;var B=function(){var F=pega.ui.statetracking.getDocumentStateTracker();if(F&&F.getAttribute("data-state-busy-status")==="none"){return true}return false};var D=function(F){if(!F||typeof F!="function"){return }if(B()){E=null;setTimeout(function(){F()},10)}else{E=F}};var C=function(){if(!E){return }var F=pega.ui.automation.storeManager.getExecutorStatus();if(F==="busy"){console.log("Firing the client idle callback.");E();E=null}};var A=function(){pega.ui.EventsEmitter.unsubscribe(pega.ui.statetracking.IDLE_EVENT,C);pega.ui.EventsEmitter.subscribe(pega.ui.statetracking.IDLE_EVENT,C)};return{queueOrFireClientIdleCallback:D,subscribeToClientIdle:A,fireClientIdleCallback:C}})();pega.u.d.attachOnload(pega.ui.automation.stateManager.subscribeToClientIdle);
(function(){var C=Object.create(pega.ui.automation.recorder.stepbuilder.defaultComponent,{implicitNavigations:{value:null}});C.getTargetElement=function(D){console.log("Invoking simple text area stepbuilder");return D.querySelector("textarea")};C.updateComponentSpecificData=function(J,I,K,H){var E=pega.ui.automation.constants;var D=I&&(I.innerText).trim();if(!D){D=pega.ui.automation.utils.getAttributeValue(I,E.ATTRIBUTE.LABEL)}var M=" (Text)";var F="";var G="Verify ";if(K=="change"){G="Enter "}else{if(K==="dblclick"){G="DoubleClick "}else{if(K==="contextmenu"){G="RightClick "}}}if(K==="change"){F=this.getElementValue(I);if(F.length>20){F=F.substring(0,20)+"..."}}var L=G;if(D){L=L+D}L=L+M;if(F){L=L+" : "+F}J[E.TEST_STEP_NAME]=L};var A=Object.create(pega.ui.automation.recorder.translator.defaultComponent);A.buildConfigs=function(){var E=pega.ui.automation.constants;var F=[];var D={};D[E.ATTRIBUTE_DESC]="Value";D[E.ATTRIBUTE_NAME]=E.ATTRIBUTE.VALUE;F.push(D);D={};D[E.ATTRIBUTE_DESC]="Property";D[E.ATTRIBUTE_NAME]=E.ATTRIBUTE.NAME;F.push(D);D={};D[E.ATTRIBUTE_DESC]="Placeholder";D[E.ATTRIBUTE_NAME]=E.ATTRIBUTE.PLACEHOLDER;F.push(D);D={};D[E.ATTRIBUTE_DESC]="Label";D[E.ATTRIBUTE_NAME]=E.ATTRIBUTE.LABEL;F.push(D);D={};D[E.ATTRIBUTE_DESC]="Tooltip";D[E.ATTRIBUTE_NAME]=E.ATTRIBUTE.TITLE;F.push(D);D={};D[E.ATTRIBUTE_DESC]="Disabled";D[E.ATTRIBUTE_NAME]=E.ATTRIBUTE.DISABLE;F.push(D);D={};D[E.ATTRIBUTE_DESC]="Required";D[E.ATTRIBUTE_NAME]=E.ATTRIBUTE.REQUIRED;F.push(D);D={};D[E.ATTRIBUTE_DESC]="has error";D[E.ATTRIBUTE_NAME]=E.ATTRIBUTE.ERROR;F.push(D);return F};var B={type:"pxTextArea",handlers:{stepbuilder:C,translator:A}};pega.ui.automation.manager.registerComponent(B)})();
(function(){var A=Object.create(pega.ui.automation.recorder.stepbuilder.defaultComponent,{implicitNavigations:{value:null}});A.getTargetElement=function(E){console.log("Invoking checkbox stepbuilder");return E.querySelector("input[type='checkbox']")};A.getElementValue=function(E){return E.checked};A.updateComponentSpecificData=function(L,H,M){var F="";var K=H.parentElement.querySelector("label");if(K!=null){var J=(K.innerText).trim();if(J){F=J}}var P=" (Checkbox)";var G="Verify ";var E="";try{if(M==="change"){var O=H.querySelector("input[type='checkbox']").checked;G="Set ";if(O){E="Checked "}else{E="Unchecked "}}else{if(M==="dblclick"){G="DoubleClick "}else{if(M==="contextmenu"){G="RightClick "}}}}catch(I){}var N=G+F+P;if(E){N=N+" : "+E}L[pega.ui.automation.constants.TEST_STEP_NAME]=N};var B=Object.create(pega.ui.automation.recorder.translator.defaultComponent);B.buildConfigs=function(H){var F=pega.ui.automation.constants;var G=[];var E={};E[F.ATTRIBUTE_DESC]="Value";E[F.ATTRIBUTE_NAME]=F.ATTRIBUTE.VALUE;G.push(E);E={};E[F.ATTRIBUTE_DESC]="Property";E[F.ATTRIBUTE_NAME]=F.ATTRIBUTE.NAME;G.push(E);E={};E[F.ATTRIBUTE_DESC]="Tooltip";E[F.ATTRIBUTE_NAME]="."+F.ASSERTION_CUSTOM_NAME_SEPARATOR+F.ASSERTION_CUSTOM_NAME_SEPARATOR+"@title";G.push(E);E={};E[F.ATTRIBUTE_DESC]="Checkbox Caption";E[F.ATTRIBUTE_NAME]="."+F.ASSERTION_CUSTOM_NAME_SEPARATOR+"label"+F.ASSERTION_CUSTOM_NAME_SEPARATOR+":contains";G.push(E);E={};E[F.ATTRIBUTE_DESC]="Disabled";E[F.ATTRIBUTE_NAME]=F.ATTRIBUTE.DISABLE;G.push(E);E={};E[F.ATTRIBUTE_DESC]="has error";E[F.ATTRIBUTE_NAME]=F.ATTRIBUTE.ERROR;G.push(E);return G};var C=Object.create(pega.ui.automation.navigator.defaultComponent);C.doAction=function(G,F,H,E){console.log("Invoking checkbox component action");if(F=="click"){E()}else{pega.ui.automation.navigator.defaultComponent.doAction(G,F,H,E)}};var D={type:"pxCheckbox",handlers:{stepbuilder:A,translator:B,navigator:C}};pega.ui.automation.manager.registerComponent(D)})();
(function(){var D=Object.create(pega.ui.automation.recorder.stepbuilder.buttonStepbuilder);D.customSelectorAttributes=["class"];var B={type:"pzModalButton",events:"onclick",handlers:{stepbuilder:D}};pega.ui.automation.manager.registerComponent(B);var C={type:"pxGridEditModalSubmit",handlers:{stepbuilder:D}};pega.ui.automation.manager.registerComponent(C);var A={type:"pzOverlayButton",events:"onclick",handlers:{stepbuilder:D}};pega.ui.automation.manager.registerComponent(A)})();
(function(){var D=Object.create(pega.ui.automation.recorder.stepbuilder.inputTextStepbuilder);var A=Object.create(pega.ui.automation.navigator.defaultComponent);var C=Object.create(pega.ui.automation.recorder.translator.inputTextTranslator);A.doAction=function(L,K,F,M){if(window!==L.ownerDocument.defaultView){try{L.ownerDocument.defaultView.pega.ui.automation.manager.getNavigator("pxAutoComplete").doAction(L,K,F,M);return }catch(I){}}var H=true;if(F){L.value=F}var J=function(){var N=document.querySelector(".match-highlight")||document.querySelector(".match");if(!N){N=document.querySelector(".autocompleteAG.lookupPO #PEGA_GRID_CONTENT [data-gargs]");if(N){N=N.querySelector(".gridCell")}}if(!N){var O=document.querySelector(".autocompleteAG.lookupPO .autocomplete-main #acresults_list");if(O){N=O.querySelector(".ac-primary-option:not(.ac-freeform-option)")}}N.click()};var E=function(){M()};if(K=="change"){pega.ui.EventsEmitter.subscribeOnce("AutoCompleteResultsOpen",J);pega.ui.EventsEmitter.subscribeOnce("AutoCompleteResultsClose",E);var G={keyCode:40,target:L,srcElement:L,type:"keyup"};L.focus();pega.c.eventController.handler(G)}else{pega.ui.automation.navigator.defaultComponent.doAction(L,K,F,M)}};var B={type:"pxAutoComplete",handlers:{stepbuilder:D,navigator:A,translator:C}};pega.ui.automation.manager.registerComponent(B)})();
(function(){var D=Object.create(pega.ui.automation.manager.getStepbuilder("pxTextInput"),{implicitAssertions:{value:["Value"]},implicitNavigations:{value:null}});D.updateComponentSpecificData=function(J,I,K){var F=pega.ui.automation.constants;var G="";var E=pega.ui.automation.utils.getAttributeValue(I,F.ATTRIBUTE.LABEL);var M=" (DateTime)";var H="Verify ";if(K==="change"){H="Enter ";G=I.value}else{if(K==="dblclick"){H="DoubleClick "}else{if(K==="contextmenu"){H="RightClick "}}}var L=H;if(E){L=L+E}L=L+M;if(G){L=L+" : "+G}J[F.TEST_STEP_NAME]=L};D.validateComponentCurrentStep=function(J,F,I){var H={isValid:true};var E=J.data;if(this.hasSameSelector(E,F)){var G=I.querySelector("select");if(G){H.updateActions=true}else{if(this.hasSameAssertions(J,F,I)){var K=J.stepType;if(K!=_constants.STEP_TYPE.CHANGE){console.log("*** Updating action in previous step ****");H.updateActions=true}}}}return H};var C=Object.create(pega.ui.automation.recorder.translator.defaultComponent);C.buildConfigs=function(F){var H=pega.ui.automation.constants;var K=[];var E={};E[H.ATTRIBUTE_DESC]="Value";E[H.ATTRIBUTE_NAME]=H.ATTRIBUTE.VALUE;K.push(E);E={};E[H.ATTRIBUTE_DESC]="Property";E[H.ATTRIBUTE_NAME]=H.ATTRIBUTE.NAME;K.push(E);E={};E[H.ATTRIBUTE_DESC]="Tooltip";var J=F.parentElement.querySelector("select");if(J){var I=J.getAttribute("title");if(I){E[H.ATTRIBUTE_VALUE]=I.split(":")[0]}}else{E[H.ATTRIBUTE_NAME]=H.ATTRIBUTE.TITLE}K.push(E);E={};E[H.ATTRIBUTE_DESC]="Label";E[H.ATTRIBUTE_NAME]=H.ATTRIBUTE.LABEL;K.push(E);E={};E[H.ATTRIBUTE_DESC]="Placeholder";if(F.type=="hidden"&&F.value==""){var G=F.parentElement.querySelector("span.placeholder");if(G){E[H.ATTRIBUTE_VALUE]=G.innerText}}else{E[H.ATTRIBUTE_NAME]=H.ATTRIBUTE.PLACEHOLDER}K.push(E);E={};E[H.ATTRIBUTE_DESC]="Disabled";E[H.ATTRIBUTE_NAME]=H.ATTRIBUTE.DISABLE;K.push(E);E={};E[H.ATTRIBUTE_DESC]="Required";E[H.ATTRIBUTE_NAME]=H.ATTRIBUTE.REQUIRED;K.push(E);E={};E[H.ATTRIBUTE_DESC]="has error";E[H.ATTRIBUTE_NAME]=H.ATTRIBUTE.ERROR;K.push(E);return K};var A=Object.create(pega.ui.automation.navigator.defaultComponent);A.doAction=function(R,N,E,S){console.log("Invoking dateTime component action");if(N=="change"){if(R.type=="hidden"){var J=R.parentElement.querySelector("select");if(J){var T=E.split(" ");if(T.length==3){var G=T[0].split("/");var M=G[0];var P=G[1];var O=G[2];var F=T[1].split(":");var I=F[0];var H=F[1];var Q=T[2]}else{if(T.length==2){var F=T[0].split(":");var I=F[0];var H=F[1];var Q=T[1]}else{if(T.length==1){var G=T[0].split("/");var M=G[0];var P=G[1];var O=G[2]}}}var L=R.name;if(M!=undefined){R.parentElement.querySelector("[id='"+L+"MoSel']").value=M}if(P!=undefined){R.parentElement.querySelector("[id='"+L+"DySel']").value=P}if(O!=undefined){R.parentElement.querySelector("[id='"+L+"YrSel']").value=O}if(I!=undefined){R.parentElement.querySelector("[id='"+L+"HrSel']").value=I}if(H!=undefined){R.parentElement.querySelector("[id='"+L+"MiSel']").value=parseInt(H)}if(Q!=undefined){R.parentElement.querySelector("[id='"+L+"ApSel']").value=Q}}var K=R.parentElement.querySelector(".inactvDtTmTxt");if(K){K.innerText=E}}}pega.ui.automation.navigator.defaultComponent.doAction(R,N,E,S)};var B={type:"pxDateTime",handlers:{stepbuilder:D,translator:C,navigator:A}};pega.ui.automation.manager.registerComponent(B)})();
(function(){var A=Object.create(pega.ui.automation.recorder.stepbuilder.defaultComponent,{implicitNavigations:{value:null},implicitAssertions:{value:["Content"]}});A.updateComponentSpecificData=function(J,I,K,H){var E=pega.ui.automation.constants;var G=pega.ui.automation.utils.getAttributeValue(I.parentElement,":contains");var D=pega.ui.automation.utils.getAttributeValue(I,E.ATTRIBUTE.LABEL);var M="(Paragraph)";var F="Verify";var L=F;if(D){L=L+" "+D}L=L+" "+M+" : "+G;J[pega.ui.automation.constants.TEST_STEP_NAME]=L};A.getTargetElement=function(D){console.log("Invoking Paragraph step builder ");return D.querySelector("span")};var C=Object.create(pega.ui.automation.recorder.translator.defaultComponent);C.buildConfigs=function(){var E=pega.ui.automation.constants;var F=[];var D={};D[E.ATTRIBUTE_DESC]="Content";D[E.ATTRIBUTE_NAME]="."+E.ASSERTION_CUSTOM_NAME_SEPARATOR+""+E.ASSERTION_CUSTOM_NAME_SEPARATOR+":contains";F.push(D);return F};var B={type:"Paragraph",handlers:{stepbuilder:A,translator:C}};pega.ui.automation.manager.registerComponent(B)})();
(function(){function B(I){var K=-1;var J=F(I);if(J&&J.length){K=J.length;K=K.toString()}return K}function D(I){var K=[];var L=F(I);if(L){for(var J=0;J<L.length;J++){K.push(L[J].value)}}return K}function F(I){return I.type==="radio"?[I]:I.querySelectorAll("input")}var C=Object.create(pega.ui.automation.recorder.stepbuilder.defaultComponent,{implicitNavigations:{value:null},implicitAssertions:{value:["Value"]}});C.getTargetElement=function(I){return I.querySelector(".radioTable")||I.querySelector("[type='radio']")};C.getElementValue=function(I){return domUtils.getDOMElementValue(F(I)[0])};var H=function(I){var M="";if(I.type==="radio"){return }var L=F(I)[0];var N=document.getElementsByName(L.name);for(var J=0;J<N.length;J++){if(N[J].checked){var K=N[J].closest("span");if(K){M=K.innerText;break}}}return M};C.updateComponentSpecificData=function(O,L,I){var J=pega.ui.automation.utils.getAttributeValue(L,pega.ui.automation.constants.ATTRIBUTE.LABEL);var M=" (Radiobutton)";var N="Verify ";if(I==="change"){N="Select ";var P=H(L);if(P){if(P.length>20){P=P.substring(0,20)+"..."}M=M+" : "+P}}var K=N;if(J){K=K+J}K=K+M;O[pega.ui.automation.constants.TEST_STEP_NAME]=K};var A=Object.create(pega.ui.automation.recorder.translator.defaultComponent);A.buildConfigs=function(J){var L=pega.ui.automation.constants;var M=[];var N=B(J);var K=D(J);var I={};I[L.ATTRIBUTE_DESC]="Value";I[L.ATTRIBUTE_VALUE]=domUtils.getDOMElementValue(F(J)[0]);M.push(I);I={};I[L.ATTRIBUTE_DESC]="Label";I[L.ATTRIBUTE_NAME]=L.ATTRIBUTE.LABEL;M.push(I);I={};I[L.ATTRIBUTE_DESC]="Disabled";I[L.ATTRIBUTE_NAME]="input"+L.ASSERTION_CUSTOM_NAME_SEPARATOR+L.ATTRIBUTE.DISABLE;M.push(I);I={};I[L.ATTRIBUTE_DESC]="Required";I[L.ATTRIBUTE_NAME]="input"+L.ASSERTION_CUSTOM_NAME_SEPARATOR+L.ATTRIBUTE.REQUIRED;M.push(I);I={};I[L.ATTRIBUTE_DESC]="Count";I[L.ATTRIBUTE_VALUE]=N;M.push(I);I={};I[L.ATTRIBUTE_DESC]="Options";I[L.ATTRIBUTE_VALUE_LIST]=K;I[L.COMPARATOR_LIST]=["Contains"];M.push(I);I={};I[L.ATTRIBUTE_DESC]="has error";I[L.ATTRIBUTE_NAME]=L.ATTRIBUTE.ERROR;M.push(I);return M};var E=Object.create(pega.ui.automation.navigator.defaultComponent);E.doAction=function(K,J,L,I){console.log("Invoking RadioGroup component action");if(J=="change"){K=F(K)[0]}pega.ui.automation.navigator.defaultComponent.doAction(K,J,L,I)};var G={type:"pxRadioButtons",handlers:{stepbuilder:C,translator:A,navigator:E}};pega.ui.automation.manager.registerComponent(G)})();
(function(){var A=Object.create(pega.ui.automation.recorder.stepbuilder.defaultComponent,{implicitNavigations:{value:null}});A.getTargetElement=function(E){console.log("Invoking RTE stepbuilder");return E.querySelector("textarea")};A.updateComponentSpecificData=function(K,J,L){var G=pega.ui.automation.constants;var E=pega.ui.automation.utils.getAttributeValue(J,G.ATTRIBUTE.LABEL);var M=" (Text)";var H="";var I="Verify ";if(L==="change"){I="Enter ";var F=$(this.getElementValue(J))[0];if(F){H=F.innerText}if(H.length>20){H=H.substring(0,20)+"..."}}var N=I;if(E){N=N+E}N=N+M;if(H){N=N+" : "+H}K[G.TEST_STEP_NAME]=N};var C=Object.create(pega.ui.automation.recorder.translator.defaultComponent);C.buildConfigs=function(E){var H=pega.ui.automation.constants;var I=[];config={};config[H.ATTRIBUTE_DESC]="Value";config[H.ATTRIBUTE_NAME]=H.ATTRIBUTE.VALUE;I.push(config);config={};config[H.ATTRIBUTE_DESC]="Property";config[H.ATTRIBUTE_NAME]=H.ATTRIBUTE.NAME;I.push(config);config={};config[H.ATTRIBUTE_DESC]="Placeholder";var F=JSON.parse(E.getAttribute("data-config"));var G=F&&F[1].placeholder;if(G){config[H.ATTRIBUTE_VALUE]=G}I.push(config);config={};config[H.ATTRIBUTE_DESC]="Label";config[H.ATTRIBUTE_NAME]=H.ATTRIBUTE.LABEL;I.push(config);config={};config[H.ATTRIBUTE_DESC]="Disabled";config[H.ATTRIBUTE_NAME]=H.ATTRIBUTE.DISABLE;I.push(config);config={};config[H.ATTRIBUTE_DESC]="Required";config[H.ATTRIBUTE_NAME]=H.ATTRIBUTE.REQUIRED;I.push(config);config={};config[H.ATTRIBUTE_DESC]="has error";config[H.ATTRIBUTE_NAME]=H.ATTRIBUTE.ERROR;I.push(config);return I};var B=Object.create(pega.ui.automation.navigator.defaultComponent);B.doAction=function(J,G,K,E){var F=true;console.log("Invoking RTE Action");if(G=="change"){J.value=K;var H=J.id;var I=J.ownerDocument.defaultView.CKEDITOR;I.instances[H].setData(K);I.instances[H].updateElement()}if(!J||!J){F=false}else{if(window==J.ownerDocument.defaultView){pega.control.actionSequencer.fireTopPriorityEvent(J,G)}else{J.ownerDocument.defaultView.pega.control.actionSequencer.fireTopPriorityEvent(J,G)}}E()};pega.ui.automation.manager.registerNavigator(pega.ui.automation.constants.COMPONENT.RICH_TEXT_EDITOR,B);var D={type:"pxRichTextEditor",handlers:{stepbuilder:A,translator:C,navigator:B}};pega.ui.automation.manager.registerComponent(D)})();
(function(){function B(I){var J=-1;if(I&&I.length){if(I.options[0].value.length==0){J=I.length-1}else{J=I.length}J=J.toString()}return J}function D(I){var K=[];if(I&&I.options){var L=I.options;for(var J=0;J<L.length;J++){if(J==0&&I.options[J].value.length==0){continue}K.push(L[J].innerText)}}return K}function G(I){if(I&&I.options&&I.options.length>0){if(I.options[0].value.length==0){return I.options[0].innerText}}return""}var F=pega.ui.automation.constants;var E=Object.create(pega.ui.automation.recorder.defaultComponent);E.isSupportedStepRecord=function(J,I){if(J.type==="mouseover"&&J.target.tagName=="SELECT"&&J.target.getAttribute("data-loadmode")=="OnDemand"){return true}};var A=Object.create(pega.ui.automation.recorder.stepbuilder.defaultComponent);A.getTargetElement=function(I){return I.querySelector("select")};A.implicitAssertions=["Value"];A.implicitNavigations=null;A.updateComponentSpecificData=function(N,M,O){var I=pega.ui.automation.utils.getAttributeValue(M,pega.ui.automation.constants.ATTRIBUTE.LABEL);if(!I){I=M.getAttribute("id")}var R=" (Dropdown)";var L="Verify ";var J="";if(O==="change"){L="Select ";J=this.getElementValue(M);var Q="[value='"+J+"']";var K=M.querySelector(Q);if(K&&K.innerText){J=K.innerText}if(J.length>20){J=J.substring(0,20)+"..."}}var P=L+I+R;if(J){P=P+" : "+J}N[pega.ui.automation.constants.TEST_STEP_NAME]=P};var H=Object.create(pega.ui.automation.recorder.translator.defaultComponent);H.buildConfigs=function(I){var K=pega.ui.automation.constants;var N=B(I);var J=D(I);var M=G(I);var L=[];config={};config[K.ATTRIBUTE_DESC]="Value";config[K.ATTRIBUTE_NAME]=K.ATTRIBUTE.VALUE;L.push(config);config={};config[K.ATTRIBUTE_DESC]="Property";config[K.ATTRIBUTE_NAME]=K.ATTRIBUTE.NAME;L.push(config);config={};config[K.ATTRIBUTE_DESC]="Placeholder";config[K.ATTRIBUTE_VALUE]=M;L.push(config);config={};config[K.ATTRIBUTE_DESC]="Label";config[K.ATTRIBUTE_NAME]=K.ATTRIBUTE.LABEL;L.push(config);config={};config[K.ATTRIBUTE_DESC]="Tooltip";config[K.ATTRIBUTE_NAME]=K.ATTRIBUTE.TITLE;L.push(config);config={};config[K.ATTRIBUTE_DESC]="Disabled";config[K.ATTRIBUTE_NAME]=K.ATTRIBUTE.DISABLE;L.push(config);config={};config[K.ATTRIBUTE_DESC]="Required";config[K.ATTRIBUTE_NAME]=K.ATTRIBUTE.REQUIRED;L.push(config);config={};config[K.ATTRIBUTE_DESC]="Count";config[K.ATTRIBUTE_VALUE]=N;L.push(config);config={};config[K.ATTRIBUTE_DESC]="Options";config[K.ATTRIBUTE_VALUE_LIST]=J;config[K.COMPARATOR_LIST]=["Contains"];L.push(config);config={};config[K.ATTRIBUTE_DESC]="has error";config[K.ATTRIBUTE_NAME]=K.ATTRIBUTE.ERROR;L.push(config);return L};var C={type:"pxDropdown",handlers:{recorder:E,stepbuilder:A,translator:H}};pega.ui.automation.manager.registerComponent(C)})();
(function(){function A(E){var H=0;if(E){var G=E.querySelectorAll(".content-item.content-sub_section");if(G&&G.length){for(var F=0;F<G.length;F++){if($(G[0]).css("visibility")=="visible"||$(G[0]).css("display")=="block"){H++}}}}return H}var C=Object.create(pega.ui.automation.recorder.stepbuilder.defaultComponent);C.getTargetElement=function(E){return E};C.implicitAssertions=null;C.implicitNavigations=null;C.isNotReadonlySupported=true;C.updateComponentSpecificData=function(K,E,F,L){var G=pega.ui.automation.utils.getAttributeValue(E,pega.ui.automation.constants.ATTRIBUTE.LABEL);if(!G){G=E.getAttribute("id")}var I="(RDL)";var J="Verify ";if(F==="click"&&L){J="Click "}else{if(F==="dblclick"){J="DoubleClick "}else{if(F==="contextmenu"){J="RightClick "}}}var H=J;if(G){H=H+G+" "}H=H+I;K[pega.ui.automation.constants.TEST_STEP_NAME]=H};var D=Object.create(pega.ui.automation.recorder.translator.defaultComponent);D.buildConfigs=function(E){var F=pega.ui.automation.constants;var G=A(E);var H=[];config={};config[F.ATTRIBUTE_DESC]="Count";config[F.ATTRIBUTE_VALUE]=G;H.push(config);return H};var B={type:"DYNAMICREPEATING",isRepeating:true,handlers:{stepbuilder:C,translator:D}};pega.ui.automation.manager.registerComponent(B)})();
(function(){var C=Object.create(pega.ui.automation.recorder.stepbuilder.defaultComponent,{implicitAssertions:{value:null}});C.getTargetElement=function(G){var I=G.parentElement.children;var H=-1;for(var F=0;F<I.length;F++){if(I[F]==G){H=F+1;break}}var D="ul[role='tablist']";var E=$(G).closest(D)[0];if(E.getAttribute("data-test-id")){D="ul[data-test-id='"+E.getAttribute("data-test-id")+"']"}E=null;if(H!=-1){this.customQuerySelector=D+" li:nth-child("+H+")"}return G};C.getNavigationActions=function(E,F,G){var D=[];if(F=="click"&&G&&G.id=="close"){D.push("close")}else{if(this.implicitNavigations.indexOf(F)==-1){D.push(F)}else{D.push.apply(D,this.implicitNavigations)}}return D};var A=Object.create(pega.ui.automation.navigator.defaultComponent);A.doAction=function(F,E,G,D){console.log("Invoking tabgroup component action");var H=F;if(E=="close"){H=F.querySelector("#close")}pega.control.actionSequencer.fireTopPriorityEvent(H,"click");H=null;D()};var B={type:"Tab",handlers:{stepbuilder:C,navigator:A,inspector:{selector:"ul.tab-ul li.tab-li",selectorcb:function(){return{type:"pxTabGroup",subType:"Tab"}}}}};pega.ui.automation.manager.registerComponent(B)})();
(function(){var C=Object.create(pega.ui.automation.recorder.stepbuilder.defaultComponent,{implicitAssertions:{value:["Value","Title"]},customSelectorAttributes:{value:[pega.ui.automation.constants.SELECTOR.INNERTEXT]}});C.getTargetElement=function(E){var F=E.querySelector('.layout-group-item-title[id^="headerlabel"]');if(!F.firstElementChild){return F}return E};var A=Object.create(pega.ui.automation.recorder.translator.defaultComponent);A.buildConfigs=function(){var E=pega.ui.automation.constants;var F=[];config={};config[E.ATTRIBUTE_DESC]="Value";config[E.ATTRIBUTE_NAME]=E.ATTRIBUTE.INNER_TEXT;F.push(config);config={};config[E.ATTRIBUTE_DESC]="Title";config[E.ATTRIBUTE_NAME]=E.ATTRIBUTE.TITLE;F.push(config);return F};var B=Object.create(pega.ui.automation.navigator.defaultComponent);var D={type:"LayoutGroupItem",handlers:{stepbuilder:C,navigator:B,translator:A,inspector:{selector:"[data-lg-id] [role='tab']",selectorcb:function(){return{type:"pxLayoutGroup",subType:"LayoutGroupItem"}}}}};pega.ui.automation.manager.registerComponent(D)})();
(function(){function B(K){var M=0;if(K){K=K.querySelector(".gridTable>tbody");while(K&&!K.firstChild.classList.contains("cellCont")){K=K.querySelector(".gridTable>tbody")}var L=K.childNodes;if(L&&L.length){L.forEach(function(N){if(N.id!="Grid_NoResults"&&(N.classList)&&(N.classList.contains("oddRow")||N.classList.contains("evenRow"))){if($(N).css("visibility")=="visible"&&$(N).css("display")!="none"){M++}}})}}return M}var H=Object.create(pega.ui.automation.recorder.stepbuilder.defaultComponent);H.getTargetElement=function(K){return K.querySelector("#gridLayoutTable")};H.implicitAssertions=null;H.implicitNavigations=null;H.isReadonlySupported=false;H.updateComponentSpecificData=function(P,O,Q,N){var S="(RepeatingGrid)";var L="";var M="Verify ";if(Q==="click"&&N){M="Click "}else{if(Q==="dblclick"){M="DoubleClick "}else{if(Q==="contextmenu"){M="RightClick "}}}var K=O.querySelector("#gridLayoutTable");if(K){L=K.getAttribute("summary")}var R=M;if(L){R=R+L+" "}R=R+S;P[pega.ui.automation.constants.TEST_STEP_NAME]=R};var E=Object.create(pega.ui.automation.recorder.translator.defaultComponent);E.buildConfigs=function(L){var M=pega.ui.automation.constants;var N=B(L);var O=[];var K={};K[M.ATTRIBUTE_DESC]="Count";K[M.ATTRIBUTE_VALUE]=N;O.push(K);return O};var F={type:"REPEATGRID",handlers:{stepbuilder:H,translator:E}};pega.ui.automation.manager.registerComponent(F);var C=Object.create(pega.ui.automation.recorder.stepbuilder.defaultComponent,{implicitAssertions:{value:null}});C.isReadonlySupported=false;C.updateComponentSpecificData=function(P,N,K,Q){var M="(GridRow)";var O="Verify ";if(K==="click"&&Q){O="Click "}else{if(K==="dblclick"){O="DoubleClick "}else{if(K==="contextmenu"){O="RightClick "}}}var R=N.getAttribute("pl_index");var L=O+M;if(R){L=L+" : "+R}P[pega.ui.automation.constants.TEST_STEP_NAME]=L};var A=Object.create(pega.ui.automation.navigator.defaultComponent);A.doAction=function(M,L,O,K){console.log("Invoking GridRow component action");if(pega.ui.automation.utils.hasClass(M,"editMode")){return }var P=M.parentElement.querySelector(".editMode");if(P&&P!=M){var N=document.createEvent("Event");N.initEvent("mouseup",true,true);if(window==P.ownerDocument.defaultView){document.body.dispatchEvent(N)}else{P.ownerDocument.body.dispatchEvent(N)}N=null}if(window==M.ownerDocument.defaultView){pega.control.actionSequencer.fireTopPriorityEvent(M.firstChild,L)}else{M.ownerDocument.defaultView.pega.control.actionSequencer.fireTopPriorityEvent(M.firstChild,L)}K()};var J={type:"GridRow",handlers:{stepbuilder:C,navigator:A,inspector:{selector:"#PEGA_GRID_CONTENT .cellCont.oddRow,#PEGA_GRID_CONTENT .cellCont.evenRow",selectorcb:function(){return{type:"pxRepeatingGrid",subType:"GridRow"}}}}};pega.ui.automation.manager.registerComponent(J);var D=Object.create(pega.ui.automation.recorder.stepbuilder.defaultComponent,{implicitAssertions:{value:["Value","Title"]}});var G=Object.create(pega.ui.automation.recorder.translator.defaultComponent);G.buildConfigs=function(){var K=pega.ui.automation.constants;var L=[];config={};config[K.ATTRIBUTE_DESC]="Value";config[K.ATTRIBUTE_NAME]=K.ATTRIBUTE.INNER_TEXT;L.push(config);config={};config[K.ATTRIBUTE_DESC]="Title";config[K.ATTRIBUTE_NAME]=K.ATTRIBUTE.TITLE;L.push(config);return L};var I={type:"GridHeader",handlers:{stepbuilder:D,translator:G,inspector:{selector:".gridTable [role='columnheader']",selectorcb:function(){return{type:"pxRepeatingGridHeader",subType:"GridHeader"}}}}};pega.ui.automation.manager.registerComponent(I)})();
(function(){var B=Object.create(pega.ui.automation.recorder.stepbuilder.defaultComponent,{implicitAssertions:{value:["Value"]},customSelectorAttributes:{value:[pega.ui.automation.constants.SELECTOR.INNERTEXT]}});B.getTargetElement=function(D){console.log("Invoking layout header stepbuilder");return D.querySelector(".header-title")};B.updateComponentSpecificData=function(I,H,J,G){var E=pega.ui.automation.constants;var K=I[E.COMPONENT_TYPE];var M=pega.ui.automation.utils.getComponentDesc(K);var D=H&&H.innerText;if(!D){D=pega.ui.automation.utils.getAttributeValue(H,E.ATTRIBUTE.LABEL)}var F="Verify ";if(J==="click"&&G){F="Click "}if(J==="dblclick"){F="DoubleClick "}else{if(J==="contextmenu"){F="RightClick "}}var L=F;if(D){L=L+D}L=L+" ("+M+")";I[E.TEST_STEP_NAME]=L};var A=Object.create(pega.ui.automation.recorder.translator.defaultComponent);A.buildConfigs=function(D){var E=pega.ui.automation.constants;var F=[];config={};config[E.ATTRIBUTE_DESC]="Value";config[E.ATTRIBUTE_NAME]=E.ATTRIBUTE.INNER_TEXT;F.push(config);return F};var C={type:"pyHeaderTable",handlers:{stepbuilder:B,translator:A,inspector:{selector:"div[node_type='HEADER'],legend.fieldset-legend",selectorcb:function(){return{type:"pyHeader",subType:"pyHeaderTable"}}}}};pega.ui.automation.manager.registerComponent(C)})();
//static-content-hash-trigger-YUI
(function(){var J=function(N,M){var L="Verify errors on";if(M){if(M.length>20){M=M.substring(0,20)+"..."}L=L+" : "+M}N[pega.ui.automation.constants.TEST_STEP_NAME]=L};var F=function(N,L){var M=pega.ui.automation.utils.getAttributeValue(L,"<label>");J(N,M)};var D=function(P,M){var O="";M=M.children;for(var N=0;N<M.length;N++){var L=M[N].getAttribute("id");L=L.substr(L.indexOf(".")+1,L.length);O=O+" "+L}J(P,O)};var E=function(P,M){var O="";M=M.querySelectorAll("li");for(var N=0;N<M.length;N++){var L=pega.ui.automation.utils.getAttributeValue(M[N],":contains");L=L.substr(0,L.indexOf(":"));O=O+" "+L}J(P,O)};var H=Object.create(pega.ui.automation.recorder.stepbuilder.defaultComponent,{implicitAssertions:{value:["Value"]},implicitNavigations:{value:null},customSelectorAttributes:{value:["id","class"]}});H.updateComponentSpecificData=F;var A=Object.create(pega.ui.automation.recorder.stepbuilder.defaultComponent,{implicitAssertions:{value:["Value"]},implicitNavigations:{value:null}});A.getTargetElement=function(L){var M=document.querySelectorAll("#ERRORTABLE");var O=0;for(var N=0;N<M.length;N++){if(L===M[N]){O=N;break}}this.customQuerySelector="#ERRORTABLE:eq("+O+")";return L};A.updateComponentSpecificData=E;var K=Object.create(pega.ui.automation.recorder.stepbuilder.defaultComponent,{implicitAssertions:{value:["Value"]},implicitNavigations:{value:null},customSelectorAttributes:{value:["class"]}});var G=Object.create(pega.ui.automation.recorder.translator.defaultComponent);G.buildConfigs=function(L){var M=pega.ui.automation.constants;var N=[];config={};config[M.ATTRIBUTE_DESC]="Value";config[M.ATTRIBUTE_NAME]=M.ATTRIBUTE.INNER_TEXT;N.push(config);return N};K.updateComponentSpecificData=D;var I={type:"FieldError",handlers:{stepbuilder:H,translator:G,inspector:{selector:"#PegaRULESErrorFlag,.inputError,.iconError",selectorcb:function(){return{type:"Errors",subType:"FieldError"}}}}};var C={type:"ErrorTable",handlers:{stepbuilder:A,translator:G,inspector:{selector:"#ERRORTABLE",selectorcb:function(){return{type:"Errors",subType:"ErrorTable"}}}}};var B={type:"CustomErrorList",handlers:{stepbuilder:K,translator:G,inspector:{selector:"ul.custom_errorlist_ul",selectorcb:function(){return{type:"Errors",subType:"CustomErrorList"}}}}};pega.ui.automation.manager.registerComponent(I);pega.ui.automation.manager.registerComponent(C);pega.ui.automation.manager.registerComponent(B)})();
(function(){var B=Object.create(pega.ui.automation.recorder.stepbuilder.inputTextStepbuilder);var A=Object.create(pega.ui.automation.recorder.translator.inputTextTranslator);B.updateComponentSpecificData=function(L,K,M,J){var G=pega.ui.automation.constants;var F=K&&(K.innerText).trim();if(!F){F=pega.ui.automation.utils.getAttributeValue(K,G.ATTRIBUTE.LABEL)}var N=L[G.COMPONENT_TYPE];var O=pega.ui.automation.utils.getComponentDesc(N);var H="";var I="Verify ";if(M==="change"){I="Enter "}else{if(M==="dblclick"){I="DoubleClick "}else{if(M==="contextmenu"){I="RightClick "}}}if(M==="change"){H=this.getElementValue(K);if(H.length>20){H=H.substring(0,20)+"..."}}var P=I;if(F){P=P+F}P=P+" ("+O+")";if(H){P=P+" : "+H}L[G.TEST_STEP_NAME]=P};var E={stepbuilder:B,translator:A};var D=["pxEmail","pxPhone","pxPassword","pxNumber","pxURL","pxCurrency","Decimal","pxInteger","pxSlider"];for(var C=0;C<D.length;C++){pega.ui.automation.manager.registerComponent({type:D[C],handlers:E})}})();