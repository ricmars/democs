var OnlyOnceMgr=(function(){function A(){this.oNewNames=null;this.oAllNames={}}A.prototype.getAllNamesObject=function(){return this.oAllNames};A.prototype.addToSafeURL=function(C){for(var B in this.oAllNames){C.put("$O"+B,"")}return C};A.prototype.getAsPostString=function(){var C="";for(var B in this.oAllNames){C+=("&$O"+B+"=")}return C};A.prototype.mergeNewNames=function(B){if(B&&B!=null){this.oNewNames=B;for(var D=0;D<B.length;D++){var C=B[D];this.oAllNames[C]=C}}};return A}());
try{pega.ui=pega.namespace("pega.ui"),pega.desktop=pega.namespace("pega.desktop")}catch(a){}function _initDesktopNotifyMgr(){"undefined"==typeof pega.ui.dnmgr&&(pega.ui.dnmgr=new pega.ui.DesktopNotifyMgr,window.setTimeout("pega.ui.dnmgr._initAlertNotify();",10))}try{pega.ui.DesktopNotifyMgr=function(){this._oSysAlPan=this._oSysAlDiv=null;this._iSysAlShowing=this._iSysAlTotal=0;this._iSysAlTmOut=5E3;this._iSysAlTimer=-1;this._bSysAlVis=!1}}catch(a){}
try{pega.ui.DesktopNotifyMgr.prototype={_initAlertNotify:function(){try{this._oSysAlDiv=document.createElement("DIV"),this._oSysAlDiv.innerHTML='\x3cdiv id\x3d"SystemAlertsPopup"\x3e\x3cdiv class\x3d"hd" style\x3d"font-size:4; background-color:#ced7ff;" align\x3d"center"\x3e\x3cb\x3eo o o o o o\x3c/b\x3e\x3c/div\x3e\x3cdiv style\x3d"font-size:4" class\x3d"container-close"\x3eX\x3c/div\x3e\x3cdiv class\x3d"bd" id\x3d"SystemAlertsBody" style\x3d"font-family:tacoma; font-size:12;"\x3e\x3c/div\x3e\x3c/div\x3e',
document.body.appendChild(this._oSysAlDiv),this._oSysAlPan=new pega.widget.Panel("SystemAlertsPopup",{xy:[600,0],visible:!1,constraintoviewport:!0,close:!0,draggable:!0,width:"200",effect:[{effect:pega.widget.ContainerEffect.FADE,duration:1.2}]}),this._oSysAlPan.render(),pega.util.Event.addListener("SystemAlertsBody","click",pega.ui.dnmgr._openAlertsWindow)}catch(a){}},_openAlertsWindow:function(){try{var a=new SafeURL;a.put("pyStream","MyAlerts");a.put("initDisplay",!0);var b=a.toURL();window.open(b,
"Alerts","",!0);this._hideSysAlPopup()}catch(c){}},_showSysAlPopup:function(a){try{0!=a&&window.setTimeout("pega.ui.dnmgr._doShowSysAlPopup("+a+");",50)}catch(b){}},_doShowSysAlPopup:function(a){try{this._oSysAlPan.cfg.config.visible.value?this._iSysAlShowing+=a:(this._iSysAlShowing=a,this._oSysAlPan.show());this._oSysAlPan.setBody('\x3ctable cellpadding\x3d"0" cellspacing\x3d"0"\x3e\x3ctr\x3e\x3ctd\x3e\x3cspan class\x3d"alertPopupIcon"\x3e\x3c/span\x3e\x3c/td\x3e\x3ctd\x3e\x3cspan class\x3d"bd" id\x3d"SystemAlertsBody" class\x3d"alertCounterPopupText"\x3e\x3cb\x3e'+
this._iSysAlShowing+" new system alert"+(1<this._iSysAlShowing?"s":"")+"\x3c/b\x3e\x3c/span\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e");-1<this._iSysAlTimer&&window.clearTimeout(this._iSysAlTimer);var b=this._iSysAlTmOut;try{b=PPTimeout.value}catch(c){}this._iSysAlTimer=window.setTimeout("pega.ui.dnmgr._hideSysAlPopup();",b);this._iSysAlTotal+=a;return!1}catch(c){}},_hideSysAlPopup:function(){this._oSysAlPan.hide()}}}catch(a){};
pega.namespace("pega.ui");pega.ui.LoadManager=function(a){this.loadQ="loadQueue"in a?a.loadQueue:new pega.tools.Queue;this.adpBoundSections=[];this.adpRequestQ=[];this.lazyLoadedElements=[];this.lazyLoadedInfo=!1;if(!1 in a&&!1 in a)throw Error("queuePopulator is mandatory in absence of loadQueue");this.QPopulator="queuePopulator"in a?a.queuePopulator:null;this.isScreenLayoutPanelDeferLoaded=!1;this.screenLayoutPanelsCount=0};
(function(){pega.ui.LoadManager.prototype={startLoading:function(){if(!1!==this.processBeforeLoad()){pega.ui.statetracking.setLoadMgrBusy();if(this.QPopulator){this.QPopulator.call(null,this.loadQ,this.adpBoundSections);var a=this.lazyLoadedElements,d=this.adpBoundSections;this.lazyLoadedInfo=!1;var c=this;pega.ctx.dom.$(".lazyload-layout").each(function(){var a="true"==this.getAttribute("data-isadp"),b=pega.u.d.getSectionDiv(this);a&&d?(a=document.createElement("span"),a.innerHTML=this.getAttribute("data-adpparameterpage"),
a.innerText.split(","),a=c.getParams(a.innerText),a.put("pyUsingPage",this.getAttribute("data-pyusingpage")),a.put("pyDPScope",this.getAttribute("data-pydpscope")),a.put("UITemplatingStatus","N"),this.getAttribute("data-pydpparams")&&a.put("pyDPParams",this.getAttribute("data-pydpparams")),this.setAttribute("id",this.getAttribute("data-lazyloaddivid")),d.push({reloadElement:b,layoutId:this.getAttribute("data-pysectionid"),qParamsSafeURL:a,harnessId:pega.ctx.pzHarnessID,isAssociateRequestor:"true"==
this.getAttribute("data-isassociaterequestor")})):c.loadQ.enqueue({section:b,layoutDiv:this,type:"layout",harnessId:pega.ctx.pzHarnessID});$(this).removeClass("lazyload-layout")});pega.ctx.dom.$(".lazyload-harness").each(function(){a.push({section:this,layoutDiv:this,type:"harness"});$(this).removeClass("lazyload-harness");"true"==$(this).attr("bIsScreenlayout")&&(c.isScreenLayoutPanelDeferLoaded=!0,c.screenLayoutPanelsCount++)})}this.processADPQ();this.processFirstInQ();this.processLazyLoadedElements();
this.processFlowActionLazyLoad();pega.ui.statetracking.setLoadMgrDone()}},getParams:function(a){a=a.split(",");for(var d=a.length,c=new SafeURL,f,b=!1,k=0;k<d;k++)0<a[k].indexOf("\x3d")&&(f=a[k].split("\x3d"),2==f.length&&(!b&&"isADP"==f[0]&&"1"==f[1]||!f[1]?b=!0:c.put(f[0],decodeURIComponent(f[1]))));return c},processADPQ:function(){var a=this.adpBoundSections;0<a.length?this.ADPload(a.pop())||this.processADPQ():0<this.adpRequestQ.length&&(pega.u.NonBlockingAjax.addRequests(this.adpRequestQ),this.adpRequestQ=
[])},handleADPResponse:function(a){},ADPload:function(a){var d=['id\x3d"CT"',"id\x3d'CT'","data-refresh","data-required","layout-active-when"];if(!("reloadElement"in a&&"layoutId"in a))return!1;var c=a.reloadElement;"string"===typeof c&&(c=pega.ctx.dom.getElementById(c));if(!c||"object"!==typeof c)return!1;var f="no";"D_LongPoll"==a.qParamsSafeURL.hashtable.pyUsingPage&&(f="yes");var b=a.isAssociateRequestor;a.qParamsSafeURL.hashtable.pyAssociateRequestor&&(b="true"==a.qParamsSafeURL.hashtable.pyAssociateRequestor,
delete a.qParamsSafeURL.hashtable.pyAssociateRequestor);c=pega.u.d.reload({reloadElement:c,bSectionSubmit:!1,strReloadType:"Queued",queueParams:{domElement:c,domAction:"replace",domChange:f,adpReload:"ADPLoad",beforeDomActionContext:this,beforeDomAction:this.loadQueuedContent,layoutId:a.layoutId,qParamsSafeURL:a.qParamsSafeURL},isADP:"true"});if("unsafeToReload"===c)this.loadQ.enqueue(a);else if(c){(f=c.callback)||(f={});var k;k=f.scope?f.scope:this;var m=f.success;f.success=function(a){pega.ui.statetracking.setLoadMgrBusy("callback.success");
var c={},b=arguments[7];c.format=b?b.format:"";c.responseText=b?b.response:"";if(pega.ui.ExpressionEvaluator&&!pega.ui.ExpressionEvaluator.getNTExpressionStatus()&&pega.isUITemplatized&&c.responseText)for(b=0;b<d.length;b++)if(-1!=c.responseText.indexOf(d[b])){pega.ui.ExpressionEvaluator.setNTExpressionStatus(!0);break}c.successful=arguments[8];c.argument=arguments;var b=pega.ui.ChangeTrackerMap.getTrackers(),f;for(f in b){var e=b[f];e.parseForChangeTrackerDiv(c.responseText,!1);e.handleXThreadChanges();
pega.u.d.notifyDCForCTChanges(e)}(f=pega.namespace("pega.ui.maps.addressmap"))&&"function"==typeof f.notifyMapsOnCT&&(b=pega.ui.ChangeTrackerMap.getTracker(),f.notifyMapsOnCT(b));(f=pega.namespace("pega.ui.trackingmaps"))&&"function"==typeof f.notifyMapsOnCT&&(b=pega.ui.ChangeTrackerMap.getTracker(),f.notifyMapsOnCT(b));pega.u.d.parseLazyLoadSpan(c.responseText);pega.u.d.initRenderingEngine(c,function(a,b){pega.ui.ClientCache.reset();a||(a=document.createDocumentFragment(),a.appendChild($("\x3cdiv\x3e\x3c/div\x3e").html(c.responseText).get(0)),
pega.ui.template.DataBinder.bindData(a),b=a.firstChild);c.responseText=b.innerHTML;c.argument&&7<c.argument.length&&(a=c.argument[0],b=c.argument[6],"ADPLoad"==b.adpReload&&(a=pega.ctx.dom.$(a).find("div[data-pysectionid\x3d'"+b.layoutId+"']"))&&$(a).hasClass("lazyload-layout")&&(c.argument[0]=a[0]));"function"==typeof m&&m.call(k,c)});pega.ui.statetracking.setLoadMgrDone()};a=function(a,b){b=JSON.parse(b);for(var c in b)b[c]=pega.c.eventParser.replaceTokensWrapper(b[c],"","",!1);a.data.adpParameters=
b};var g=c.strURLSF,c=c.queryString,e=pega.ctx.pzHarnessID;e&&g.put("pzHarnessID",e);(e=pega.ctx.dom.querySelector("input#HeaderButtonSectionIndicator"))&&g.put("HeaderButtonSectionName",e.value);c&&"string"==typeof c&&(c=SafeURL_createFromURL(c));e={serviceName:"adp",mode:"initiate",data:{}};e.data.threadId=pega.u.d.getThreadName();e.data.isAssociateRequestor=b;e.data.pxReqURI=pega.ctx.pxReqURI;e.data.adp="";e.data.adpScope="";e.data.adpParameters={};e.data.activity={};e.DataPreProcessor={functions:[{funcRef:function(a){if(pega.ui.onlyOnce){var b=
pega.ui.onlyOnce.getAsPostString(),b=SafeURL_createFromURL(b),c=[],d;for(d in b.hashtable)""!=d&&c.push(d);a.activity.OONames=c}},args:[],scope:this}]};e.Callbacks={functions:[{funcRef:f.success,args:f.argument,scope:this}]};for(var h in g.hashtable)""!=h&&0!=h.indexOf("$")&&(e.data.activity[h]=g.hashtable[h]);for(h in c.hashtable)if(""!=h)if("pyUsingPage"==h&&(e.data.adp=c.hashtable[h]),"pyDPScope"==h&&(e.data.adpScope=c.hashtable[h]),"pyDPParams"==h){b=c.hashtable[h].replace(/\;/g,",").replace(/\'/g,
'"');e.DataPreProcessor.functions.push({funcRef:a,args:[e,b],scope:this});var b=JSON.parse(b),l;for(l in b)b[l]=pega.c.eventParser.replaceTokensWrapper(b[l],"","",!1);e.data.adpParameters=b}else e.data.activity[h]="OONames"==h?[].concat(c.hashtable[h]):c.hashtable[h];this.adpRequestQ.push(e);return!1}return!0},processLazyLoadedElements:function(){if(0<this.lazyLoadedElements.length){var a=this.lazyLoadedElements.shift();this.loadLazyLoadedElements(a.section,a.layoutDiv,a.type,null,a.harnessId)}},
loadLazyLoadedElements:function(a,d,c,f,b){var k=pega.ctx.pzHarnessID,m=!1;b!=k&&(pega.ctxmgr.setContext(pega.ctxmgr.getHarnessContext(b)),m=!0);b=SafeURL_createFromURL(pega.ctx.url);var g=pega.u.d.getReadOnlyValue("",d);b.put("ReadOnly",g);if("harness"==c)b.put("pyActivity","Rule-HTML-Harness.GetContainerHTML"),b.put("ClassName",pega.ctx.strHarnessClass),b.put("StreamName",pega.ctx.strHarnessPurpose),b.put("PrimaryPage",pega.ctx.strPrimaryPage),0<pega.ctx.dom.$(d).parents(".screen-layout-region-main-middle").length&&
!pega.u.d.centerPanelHarness&&(pega.u.d.centerPanelHarness=d.getAttribute("data-localstoreid"));else{b.put("pyActivity","ReloadSection");var e=a.getAttribute("node_name")?a.getAttribute("node_name"):a.getAttribute("data-node-id");b.put("StreamName",e);b.put("StreamClass",a.getAttribute("objclass"));b.put("ReadOnly",g);g=pega.ctx.strHarnessPurpose||"";b.put("strPHarnessClass",pega.ctx.strHarnessClass||"");b.put("strPHarnessPurpose",g);g=pega.u.d.getBaseRef(a);b.put("BaseReference",g);"undefined"!=
typeof pega.ctx.bClientValidation&&b.put("bClientValidation",pega.ctx.bClientValidation);b.put("FieldError",pega.ctx.fieldErrorType||"");b.put("FormError",pega.ctx.formErrorType||"");b.put("pyCustomError",pega.ctx.pyCustomError||"");b.put("pzKeepPageMessages","true")}b.put("pyCallStreamMethod",$(d).attr("data-deferinvoke"));b.put("pyLayoutMethodName",$(d).attr("data-deferinvoke"));var h=$(d).attr("bIsScreenlayout"),g=$(d).attr("sectionsDetails"),e=$(d).attr("strIncludedScripts");h&&""!=h&&b.put("bIsScreenLayout",
h);g&&""!=g&&b.put("sectionsDetails",g);e&&""!=e&&b.put("strIncludedScripts",e);g=pega.ctx.dom.$(d)[0];e="N";g&&g.children[0]&&(e=g.children[0].hasAttribute("data-template")?"Y":"N");b.put("UITemplatingStatus",e);pega.u.d.setBusyIndicator(d);var l=this,e=Array(d),g=null;if(d&&d.hasAttribute("data-parampage")&&(g=new SafeURL,g=this.getParams(d.getAttribute("data-parampage")),g.remove("PreDataTransform"),g.get("PreActivitiesList"))){var n=document.createElement("span");n.innerHTML=g.get("PreActivitiesList");
g.put("PreActivitiesList",n.innerText);n=null}e={success:function(a){var b=a.responseText;-1!=b.indexOf("data-propref")&&pega.clientTools.putParamValue("bRDLShowDetails",!1);a=a.argument[0];if(0<=b.indexOf("\x3chtml\x3e")||0<b.indexOf("PegaServErr")||pega.u.d.checkExceptions(b,a))pega.u.d.inCall=!1,pega.u.d.changeInEventsArray&&pega.u.d.changeInEventsArray.fire();else{var c=document.createDocumentFragment(),d=document.createElement("DIV");d.style.display="none";c.appendChild(d);d.innerHTML=b;var e=
pega.util.Dom.getElementsById("PegaOnlyOnce",d);e&&e[0]&&(pega.u.d.handleOnlyOnce(e[0]),e[0].parentNode.removeChild(e[0]));pega.c&&pega.c.t&&pega.c.t.processControlTemplates(d);e=d.getElementsByClassName("error-table");if(0<e.length){var g=d.cloneNode(!0);e[0].parentNode.removeChild(e[0]);b=d.innerHTML}(e=d.querySelector("div#pyCustomError"))&&e.parentElement&&(e.parentElement.removeChild(e),b=d.innerHTML);d.innerHTML=null;c.removeChild(d);c=null;$(a).is("[data-localstoreid]")&&(1<$(a.parentNode).children().length&&
$.each($(a.parentNode).children().not(a),function(a,c){b=c.outerHTML+b}),a=a.parentNode);pega.u.d.handleDOMLoad({domObj:a,newHTML:b,callback:function(a){pega.u.d.loadHTMLEleCallback(a);"true"==h&&(l.screenLayoutPanelsCount--,pega&&pega.offline&&l.isScreenLayoutPanelDeferLoaded&&0>=l.screenLayoutPanelsCount&&(pega.u.d.HCLoadManager.setScreenLayoutLoaded(),pega.u.d.WebViewManager&&pega.u.d.WebViewManager.setScreenLayoutLoaded(),l.isScreenLayoutPanelDeferLoaded=!1));f&&!0===f?l.afterLoad():l.processLazyLoadedElements()}});
g&&pega.u.d.handleFormErrors(g);pega&&pega.offline&&pega.offline.Indicator&&(pega.offline.Indicator.refreshNetworkStatusIndicator(),pega.offline.Indicator.refreshSynchronizationStatusIndicator())}pega.u.d.gBusyInd&&pega.u.d.gBusyInd.hide()},failure:function(a){pega.u.d.gBusyInd&&pega.u.d.gBusyInd.hide();pega.clientTools.putParamValue("bRDLShowDetails",!1)},argument:e};n=null;a&&(n=pega.ctx.dom.closest(a,"[data-repeat-source]"));n&&n.hasAttribute("data-details-flowaction")&&pega.clientTools.putParamValue("bRDLShowDetails",
!0);"harness"==c?(a=pega.u.d.ServerProxy,a.isHybridClient()&&!a.isDestinationLocal()&&a.setDestination(a.DESTINATION.LOCAL),a.doAction(b,null,{offline:function(a,b,c){a=$(d).attr("data-localStoreId");pega.offline.clientstorehelper.getSectionStream(null,a,c.success,c.failure)}},e)):pega.u.d.asyncRequest("POST",b,e,g);m&&pega.ctxmgr.setContext(pega.ctxmgr.getHarnessContext(k))},processFirstInQ:function(){var a=this.loadQ;a.isEmpty()||a.isDequeueLocked()||this.load(a.dequeueAndLock())||this.afterLoad()},
load:function(a){var d=!1;if(a.hasOwnProperty("layoutDiv")){var c;a.layoutDiv.hasAttribute("data-parampage")&&(c=this.getParams(a.layoutDiv.getAttribute("data-parampage")));c||(c=new SafeURL);a.layoutDiv.hasAttribute("data-deferinvoke")?d=!0:(c.put("UITemplatingStatus","N"),a.reloadElement=a.layoutDiv,a.layoutId=a.layoutDiv.getAttribute("data-layoutid"),a.qParamsSafeURL=c,a.layoutDiv.setAttribute("id",a.layoutDiv.getAttribute("data-lazyloaddivid")),delete a.layoutDiv,delete a.section,delete a.type)}if(d){if(!document.body.contains(a.layoutDiv)||
!document.body.contains(a.section))return!1;this.loadLazyLoadedElements(a.section,a.layoutDiv,a.type,!0,a.harnessId)}else{if(!("reloadElement"in a&&"layoutId"in a))return!1;var f=a.reloadElement;"string"===typeof f&&(f=pega.ctx.dom.getElementById(f));if(!f||"object"!==typeof f||!document.body.contains(f))return!1;var b="no";"D_LongPoll"==a.qParamsSafeURL.hashtable.pyUsingPage&&(b="yes");d=pega.ctx.pzHarnessID;c=!1;a.harnessId!=d&&(pega.ctxmgr.setContext(pega.ctxmgr.getHarnessContext(a.harnessId)),
c=!0);f=pega.u.d.reload({reloadElement:f,bSectionSubmit:!1,strReloadType:"Queued",queueParams:{domElement:f,domAction:"replace",domChange:b,beforeDomActionContext:this,beforeDomAction:this.loadQueuedContent,layoutId:a.layoutId,qParamsSafeURL:a.qParamsSafeURL}});c&&pega.ctxmgr.setContext(pega.ctxmgr.getHarnessContext(d));"unsafeToReload"===f&&(this.loadQ.putInFront(a),this.loadQ.unlockDequeue());pega.u.d.clearReloadedStatus()}return!0},loadQueuedContent:function(a){if(!a)return!1;pega.ui.statetracking.setLoadMgrBusy();
var d=this.getLazyContent(a.responseText);!a.successful||"false"!=a.successful&&0!=a.successful||null!=d&&""!=d||(d=a.responseText);var c=a.argument[0];a=a.argument[6];var f=pega.ctx.dom.$(a.domElement);if("ADPLoad"==a.adpReload){var b=pega.ctx.dom.$(a.domElement).find("div[data-pysectionid\x3d'"+a.layoutId+"']")[0];b&&(a.domElement=b)}f?this.parseContentAndLoadDOM(c,d,a):this.afterLoad();pega.ui.statetracking.setLoadMgrDone();return!1},getLazyContent:function(a){if(!a)return null;var d=document.createElement("div");
d.innerHTML="\x26nbsp;"+a;if((a=pega.util.Dom.getElementsById("lazyContent",d,"DIV"))&&0<a.length)a=a[0];else return null;var c=a.innerHTML;d.innerHTML="";a.innerHTML="";return c},parseContentAndLoadDOM:function(a,d,c){var f=pega.util.Dom,b=this,k=document.createElement("div"),m=function(a){pega.u.d.loadHTMLEleCallback(a);b.afterLoad()};if(d){k.innerHTML="\x26nbsp;"+d;for(var g=d=null;0<(d=f.getChildren(k)).length;)1==d.length?(c.domAction="yes"!=c.domChange?"replace":null,g=m):c.domAction="insert",
pega.u.d.loadDOMObject(a,k.innerHTML,g,c),k.removeChild(d[0])}else c.domAction="remove",pega.u.d.loadDOMObject(a,k.innerHTML,m,c)},afterLoad:function(){var a=this;setTimeout(function(){a.loadQ.unlockDequeue();a.processFirstInQ()},10)},beforeLoad:[],attachBeforeLoad:function(a){for(var d=0;d<this.beforeLoad.length;d++)if(this.beforeLoad[d]==a)return;this.beforeLoad.push(a)},detachBeforeLoad:function(a){for(var d=0;d<this.beforeLoad.length;d++)if(this.beforeLoad[d]==a){this.beforeLoad.splice(d,1);break}},
processBeforeLoad:function(){for(var a=!0,d=0;d<this.beforeLoad.length;d++){var c=this.beforeLoad[d];try{!1===c()&&(a=!1)}catch(f){}}return a},processFlowActionLazyLoad:function(){var a=function(a,d,b){var c=pega.u.d.getBaseRef(d),f=SafeURL_createFromURL(pega.ctx.url);f.put("pyActivity","ReloadSection");f.put("StreamList",a);f.put("StreamClass","Rule-HTML-Section");f.put("BaseReference",c);f.put("pzKeepPageMessages","true");"undefined"!=typeof pega.ctx.bClientValidation&&f.put("bClientValidation",
pega.ctx.bClientValidation);pega.u.d.setBusyIndicator(d);a={success:function(a){pega.ui.roboticAutomation&&pega.ui.roboticAutomation.showHideBusyIndicator(null,"hide");d.removeAttribute("id");d.removeAttribute("data-section-methodname");d.removeAttribute("data-automation-meta");d.removeAttribute("data-lazyloadInvoked");var b=a.argument[0],c=document.createElement("div");c.innerHTML=a.responseText;a=pega.util.Dom.getElementsById("SECGRP",c,"DIV");null!=a&&1<=a.length&&pega.util.Dom.getElementsById("RULE_KEY",
a[0],"DIV")&&pega.u.d.loadDOMObject(b,a[0].innerHTML)},failure:pega.u.d.handleFailure,scope:pega.u.d,argument:Array(d)};c="";try{if(b){var g=d.getAttribute("data-automation-primaryPage"),c=new SafeURL,e=JSON.stringify(b);2<e.length&&c.put("PreActivitiesList",'\x3cpagedata\x3e\x3cpreActivities REPEATINGTYPE\x3d"PageList"\x3e\x3crowdata REPEATINGINDEX\x3d"1"\x3e\x3cactivity\x3epzUpdateClipboardWithAutomationValues\x3c/activity\x3e\x3cparams REPEATINGTYPE\x3d"PageList"\x3e\x3crowdata REPEATINGINDEX\x3d"1"\x3e\x3cname\x3e\x3c/name\x3e\x3cvalue\x3eundefined\x3c/value\x3e\x3c/rowdata\x3e\x3crowdata REPEATINGINDEX\x3d"2"\x3e\x3cname\x3eclipboardPageName\x3c/name\x3e\x3cvalue\x3e'+
g+'\x3c/value\x3e\x3c/rowdata\x3e\x3crowdata REPEATINGINDEX\x3d"3"\x3e\x3cname\x3ejsonString\x3c/name\x3e\x3cvalue\x3e'+e+"\x3c/value\x3e\x3c/rowdata\x3e\x3c/params\x3e\x3c/rowdata\x3e\x3c/preActivities\x3e\x3c/pagedata\x3e");for(var h in b)null!=b[h]&&void 0!=b[h]&&c.put(pega.u.property.toHandle(g+"."+h),b[h])}}catch(l){}pega.u.d.asyncRequest("POST",f,a,c)},d=pega.ctx.dom.getElementById("preAutomationMeta");d&&!d.hasAttribute("data-lazyloadInvoked")&&(d.setAttribute("data-lazyloadInvoked",!0),d=
pega.u.d.findParent(d,"pyFlowActionHTML"),pega.ui.roboticAutomation&&pega.ui.roboticAutomation.isAutomationConfigured("preLoad",d)&&pega.ui.roboticAutomation.runAutomation("preLoad",d,a))}}})();
pega.ui.GridRowsLoadManager=function(a){pega.ui.GridRowsLoadManager.superclass.constructor.call(this,a)};pega.extend(pega.ui.GridRowsLoadManager,pega.ui.LoadManager);pega.ui.GridRowsLoadManager.prototype.load=function(a){return a&&a.GridToRefresh&&(a=a.GridToRefresh,a.rowsToRefresh)?(a.refreshRows({rowsArray:a.rowsToRefresh}),a.rowsToRefresh=null,!0):!1};
pega.ui.accessibility={};pega.ui.accessibility.AccessKeyMap={PREVIOUS_TAB_HORIZONTAL:{keyCode:"37"},PREVIOUS_TAB_VERTICAL:{keyCode:"38"},PREVIOUS_TAB_CONTENT:{modifier1:"ctrlKey",keyCode:"33"},NEXT_TAB_HORIZONTAL:{keyCode:"39"},NEXT_TAB_VERTICAL:{keyCode:"40"},NEXT_TAB_CONTENT:{modifier1:"ctrlKey",keyCode:"34"},CLOSE_TAB:{modifier1:"altKey",modifier2:"ctrlKey",keyCode:"46"},CLOSE_TAB_BY_ACTIONKEY:{keyCode:"13"},SPACE:{keyCode:"32"}};
pega.ui.Doc.prototype.HeavyOperations=function(){var b=[],c={};pega.ui.Doc.prototype.doOnceOnInit=function(){var a=b,d;for(d in a){var e=a[d];try{pega.u.d[e].call(pega.u.d)}catch(f){}}b=[];c={}};return{registerOnceOnInit:function(a){c[a]||(c[a]=!0,b.push(a))}}}();
var pega=pega||{};pega.ui=pega.ui||{};
pega.ui.AutopopulateSupport=function(){function n(a){this.dpName=a.pyDataObject;this.dpClass=a.pyDataObjectClass;this.pageClass=a.pyPageClass;this.propertyMode=a.pyPropertyMode;this.linkType=a.pyDataRetrievalType;this.isPageList="PageList"===this.propertyMode;this.isPage="Page"===this.propertyMode;this.isReferDP="AUTOMATIC"===this.linkType;this.isCopyDP="AUTOMATICNONREF"===this.linkType;this.DOParamMap={};if(Array.isArray(a.pyDOParamList))for(var b=0;b<a.pyDOParamList.length;b++)this.DOParamMap[a.pyDOParamList[b].pyName]=this.getDOParamValue(a.pyDOParamList[b].pyValue)}
var l;n.prototype.getDOParamValue=function(a){if(0==a.indexOf('"')&&a.lastIndexOf('"')==a.length-1)return a.replace(/"/g,"");0==a.indexOf(".")&&(a="pyWorkPage"+a);return(a=pega.ui.ClientCache.find(a))?a.getValue():""};var m={},p=function(a,b){if("undefined"==typeof pega.offline||pega.u.d.ServerProxy&&pega.u.d.ServerProxy.isDestinationRemote())return null;b=b.replace(/(\w*?)\(\d+\)/g,"$1");if(a&&0<a.length&&b&&0<b.length){a=a.toUpperCase();b=b.toUpperCase();if(!m[a+"!"+b]){var c=pega.offline.rulecache.getRuleFromCache("RULE-OBJ-PROPERTY",
a+"!"+b);if(!c||"AUTOMATIC"!==c.pyDataRetrievalType&&"AUTOMATICNONREF"!==c.pyDataRetrievalType||"PageList"!==c.pyPropertyMode&&"Page"!==c.pyPropertyMode)return null;m[a+"!"+b]=new n(c)}return m[a+"!"+b]}return null},q=function(a,b,c){var e=/\w*?(\(\d+\))/g;b=pega.ui.ParametrizedDPUtils.createDPInstance(a.dpName,b);a.isPageList&&e.test(c)?(a=c.replace(e,"$1"),b+=".pxResults"+a):a.isPageList&&(b+=".pxResults");return b},r=function(a,b,c,e){b=pega.ui.ParametrizedDPUtils.createDPInstance(a.dpName,b);
b=pega.ui.ClientCache.find(b);var d=e.lastIndexOf(")");-1!==d&&e.length===d+1&&(d=e.substring(e.lastIndexOf("(")+1,e.lastIndexOf(")")),isNaN(d)?d=null:e=e.substring(0,e.lastIndexOf("(")));d=d?!(!c[e]||!c[e][d]):!!c[e];if(!d)if(a.isPageList)for(a=b.get("pxResults").iterator(),b=0;a.hasNext();)d=a.next(),c[e]||(c[e]=[]),c[e][b]=JSON.parse(d.getJSON()),b++;else c[e]=JSON.parse(b.getJSON())};return{resolveReference:function(a,b,c,e){if(!pega.ui.AutopopulateSupport.hasAutoPopulateProperties)return a;var d,
f,k,h,g="";if((a=a.split("."))&&1<=a.length)for(c=c||b.trackedPropertiesList,k=0;k<a.length;k++)if(d=a[k],f=c.pxObjClass,h=p(f,d),f=b.returnListOrGroupProp(d),f=d==f?c[d]:c[f.key]&&c[f.key][f.index],"undefined"!=typeof f&&null!=f||null!=h)h?(Object.keys(h.DOParamMap).forEach(function(a){pega.clientTools.putParamValue(a,h.DOParamMap[a])}),h.isReferDP&&!e?g=q(h,b,d):(r(h,b,c,d),""!=g&&(g+="."),g+=d,c=f)):(c=f,""!=g&&(g+="."),g+=d);else{for(;k<a.length;k++)d=a[k],""!=g&&(g+="."),g+=d;break}return g},
get hasAutoPopulateProperties(){if(void 0===l){var a;pega&&pega.mobile&&pega.mobile.support&&(a=pega.mobile.support.getPortalWindow());l=a&&a!==window&&a.pega?a.pega.ui.AutopopulateSupport.hasAutoPopulateProperties:!0}return l},set hasAutoPopulateProperties(a){l=a}}}();
var $pNamespace=pega.namespace;$pNamespace("pega.ui");
pega.ui.Panel=function(g,c,a){a=a||{};null==a.className&&(a.className="");null==a.enableTransition&&(a.enableTransition=!0);var b=document.createElement("DIV");null!=pega.ui.inspector&&null!=c&&($(b).appendTo(c),pega.ui.inspector.utilities.loadSectionIntoDom("pzPega_UI_Panel","@baseclass",b,function(){},"","pzClearPegaUIPanel","\x26panelName\x3d"+g));$(b).addClass("ui-panel");this.panelElement=b;this.state="hidden";this.panelClass="";$(b).addClass(a.className);!0===a.enableTransition&&$(b).addClass("transition-panel");
this.show=function(){$(this.panelElement).addClass("show-ui-panel");this.state="showing"};this.hide=function(){$(this.panelElement).removeClass("show-ui-panel");this.state="hidden"};this.getWidth=function(){return $(this.panelElement).width()};this.isOpen=function(){return"showing"==this.state};this.load=function(a,b,c,d){var f=pega.u.d.getSectionByName("pzPanel","",this.panelElement);if(null!=f){this.panelClass=a;if(null===b||void 0===b)b="";var e=new SafeURL;e.put("panelClass",a);e.put("key",b);
if(d)for(a=0;a<d.length;a++)e.put(d[a].param,d[a].value);pega.u.d.reloadSection(f,"pzLoadPanel",e.toQueryString(),!1,!1,-1,!1,null,null,null,c)}}};
pega.ui.rdlMasterDetails={RDL_MD_THREAD:"$WorkProcessing",RDLMDDismissibleActions:["showHarnessWrapper","createNewWork","openWorkByHandle"],isWOBound:function(a){if(a&&"Work"==this.getRDLClassFamily(a))return!0},isOnlineWOBound:function(a){var b=!1;this.isWOBound(a)&&(pega.u.d.ServerProxy.isHybridClient()?this.isRDLCaseOfflinable(a)||(b=!0):b=!0);return b},cleanup:function(a){a.__oResponse=null;a.__responseReceived=null;a.__responseLoaded=null},getWorkProcessingThread:function(){var a;if(pega.ctx.RDL.masterDetailsParams&&
pega.ctx.RDL.masterDetailsParams.isShowDetailsOpen){if(!this.getActiveRDLMetaInfo().isOnlineWOBound)return;a=pega.u.d.getThreadName();a=-1==a.indexOf(pega.ui.rdlMasterDetails.RDL_MD_THREAD)?a+"/"+pega.ui.rdlMasterDetails.RDL_MD_THREAD:a}return a},getActiveRDLMetaInfo:function(){var a=this.getActiveRow();if(a&&pega.util.Dom.isAncestor(document.body,a)){var b=a.getAttribute("base_ref"),c=b.match(/\(\d+\)/g),c=parseInt(c[c.length-1].replace("(","").replace(")",""),10),d=this.getEnclosingRL(a),e=d.getAttribute("data-repeat-source"),
f=pega.ctx.dom.$(".RDLShowDetails.open").get(0)||pega.ctx.dom.$(d).siblings(".RDLShowDetails").get(0),g;f&&(g=f.getAttribute("data-methodname"));var h=pega.ctx.dom.$(d).closest("[node_name]").get(0),h=h?h.getAttribute("node_name"):"",k=this.isOnlineWOBound(d),l=this.isWOBound(d),m=this.getRDLClassFamily(d),n=pega.u.d.getBaseRef(pega.u.d.getEnclosingSection(a))||pega.u.d.primaryPageName;return{rowNode:a,rowPage:b,rowIndex:c,RDLNode:d,RDLSource:e,showDetailsNode:f,rowMethodName:g,RDLSectionName:h,isOnlineWOBound:k,
isWOBound:l,RDLClassFamily:m,RDLSectionContext:n}}},refreshRDLSections:function(a,b){b=!1;if(a.match(/\(\d+\)/g)&&0<a.match(/\(\d+\)/g).length){var c=a.substring(0,a.indexOf("("));pega.ctx.dom.querySelector("[data-repeat-source\x3d'"+a+"']").closest("[data-repeat-source\x3d'"+c+"']")&&(b=!0)}b&&!pega.ui.rdlMasterDetails.isShowDetailsOpen&&(a=a.substring(0,a.indexOf("(")));var d=[];pega.ctx.dom.$("[data-repeat-source\x3d'"+a+"']").each(function(a,b){(a=pega.u.d.getSectionDiv(b))&&-1==d.indexOf(a)&&
d.push(a)});for(a=0;a<d.length;a++)pega.u.d.reloadSection(d[a],"","",!1,!1,"",!1)},showDetails:function(a){pega.ui.appview.disableNavToggle();var b=a&&a.refreshShowDetails,c,d;pega.ctx.RDL||(pega.ctx.RDL={});pega.ctx.RDL.masterDetailsParams||(pega.ctx.RDL.masterDetailsParams={});if(!pega.ctx.RDL.masterDetailsParams.showDetailsLoading||pega.ctx.RDL.masterDetailsParams.showDetailsLoading&&b){pega.ctx.RDL.masterDetailsParams.showDetailsLoading=!0;if(a.refreshShowDetails)b=a.target,c=b.getAttribute("base_ref");
else if(b=pega.util.Event.getTarget(a),c=pega.u.d.getBaseRef(b),pega.ctx.RDL.masterDetailsParams.__activeRDLRowObject=pega.ctx.dom.$(b).closest("[data-repeat-source] \x3e .content-item")[0]||pega.ctx.dom.$(b).closest("[data-repeat-source] .rdl-category-rows \x3e .content-item")[0],!pega.ctx.RDL.masterDetailsParams.__activeRDLRowObject){pega.ctx.RDL.masterDetailsParams.showDetailsLoading=!1;return}c=pega.u.d.getBaseRef(pega.util.Dom.getFirstChild(b)||b);var e=this.getEnclosingRL(b),f=e.getAttribute("data-details-flowaction");
if(b==e||e&&e.classList.contains("rdlHasNoRows"))pega.ctx.RDL.masterDetailsParams.showDetailsLoading=!1;else{if(a.refreshShowDetails){d=pega.ctx.dom.$("div.RDLShowDetails.open").get(0);for(var g=pega.ui.property.toHandle(c),h="$P"+pega.ui.DataRepeaterUtils.getPackagedPageName(),k=b.querySelectorAll("[data-propref]"),l=0;l<k.length;l++){var m=k[l].getAttribute("data-propref");m&&-1<m.indexOf(pega.ui.DataRepeaterUtils.getPackagedPageName())&&(m=m.replace(h,g),k[l].setAttribute("data-propref",m))}}else{pega.ctx.RDL.masterDetailsParams.__destination=
pega.u.d.ServerProxy.isDestinationRemote()?pega.u.d.ServerProxy.DESTINATION.REMOTE:pega.u.d.ServerProxy.DESTINATION.LOCAL;d=pega.ctx.dom.$(e).siblings(".RDLShowDetails").get(0);l=pega.ctx.dom.$("#modalOverlay");l[0]?l.after(d):pega.ctx.dom.getContextRoot().appendChild(d);$.data(d,"targetRDL",e);d.style.display="block";d.offsetWidth;(function(){var a=pega.ctx.dom.$(d).find("\x3e .sectionDivStyle \x3e .layout:nth-child(1), .sectionDivStyle \x3e #pega_ui_mask ~ .layout:nth-child(2)"),b=pega.ctx.dom.$(d).find("\x3e .sectionDivStyle \x3e .layout:nth-child(2), .sectionDivStyle \x3e #pega_ui_mask ~ .layout:nth-child(3)");
a&&a.get(0)&&b&&b.get(0)&&pega.ctx.dom.$(b.get(b.length-1)).css({height:"calc(100% - "+a.get(0).offsetHeight+"px)"})})();var n=this,r=function(){d.removeEventListener("transitionend",q,!1);pega.ctx.dom.$(d).addClass("md-loaded");n.getFlowAction(a,f,c,d)},q=function(){setTimeout(r,500)};d.addEventListener("transitionend",q,!1);pega.ctx.RDL.masterDetailsParams||(pega.ctx.RDL.masterDetailsParams={});pega.ctx.RDL.masterDetailsParams.isShowDetailsOpen=!0}this.setMasterDetailContext(d,c);this.bindLocalData(e,
d,c);d.setAttribute("base_ref",c);d.removeAttribute("full_base_ref");d.firstElementChild.setAttribute("base_ref",c);d.firstElementChild.removeAttribute("full_base_ref");this.copyContextTreeOnToChangeTracker(c);e=d.querySelectorAll("div#CT[swp]");g=e.length;for(l=0;l<g;l++)h=e[l],h.removeAttribute("sec_baseref"),h.removeAttribute("fullprops"),h.style.display="none";g&&(pega.u.d.ServerProxy.isDestinationLocal()?pega.u.d.evaluateAllVisibleWhens():pega.u.d.evaluateClientConditions("ALL",null,!0,!1));
pega.ctx.RDL.masterDetailsParams.__activeRDLRowObject=pega.ctx.dom.$(b).closest("[data-repeat-source] \x3e [base_ref]")[0]||pega.ctx.dom.$(b).closest("[data-repeat-source] .rdl-category-rows \x3e [base_ref]")[0];pega.ctx.RDL.masterDetailsParams.__activeDetailsNode=d;b=function(){pega.ctx.dom.$(d).addClass("open")};a.refreshShowDetails?this.getFlowAction(a,f,c,d):window.setTimeout(b,1)}}},_convertToDotNotation:function(a){return a?a.replace(/\(([^)]+)\)/g,function(a,c){isNaN(c)||c--;return"."+c}):
""},_index:function(a,b){if(a)return/^'.*'$/.test(b)&&(b=b.substring(1,b.length-1)),a[b]},copyContextTreeOnToChangeTracker:function(a){if(a&&pega.mobile&&pega.mobile.isHybridClient&&pega.u.d.ServerProxy.isDestinationRemote()){var b=pega.ui.ChangeTrackerMap,c=pega.ui.ClientDataProvider;if(b&&b.getTracker()&&c&&c.getTracker()){var d=c.getTracker().threadName,c=c.getTrackerByThread(d),b=b.getTrackerByThread(d);if(c&&b&&c.trackedPropertiesList&&b.trackedPropertiesList&&(a=this._convertToDotNotation(a),
d=a.split(".").reduce(this._index,c.trackedPropertiesList),a=a.split(".").reduce(this._index,b.trackedPropertiesList),d&&a&&"object"==typeof d&&"object"==typeof a))for(var e in d)d.hasOwnProperty(e)&&(e.startsWith("$")||e in a||"object"!=typeof d[e]&&(a[e]=d[e]))}}},hideDetails:function(a,b){a=pega.util.Event.getTarget(a);var c=pega.ctx.dom.$(a).closest(".RDLShowDetails.open").get(0)||pega.ctx.dom.$("div.RDLShowDetails.open").get(0);if(c){a=this.getActiveRDLMetaInfo();var d=a.rowNode,e=a.rowPage,
f=a.isOnlineWOBound;pega.ui.appview.determineNavToggleState();var g=this,h=pega.ctx.pzHarnessID,k=function(){var a=!1,d=pega.ctx.pzHarnessID;h&&h!=d&&(pega.ctxmgr.setContext(pega.ctxmgr.getHarnessContext(h)),a=!0);pega.ctx.dom.$(c).removeClass("md-loaded");b||(c.style.display="none");pega.ctx.dom.$(c).insertAfter($.data(c,"targetRDL"));pega.ctx.dom.$(c).find(".secondarySection").html("");pega.ctx.dom.$(c).find("div[node_name\x3d'pyRDLRowDetailsPlaceHolderSection']").removeClass("hide");pega.ctx.RDL.masterDetailsParams.showDetailsLoading=
!1;pega.u.d.gBusyInd.hide();pega.u.d.ServerProxy.isHybridClient()&&(g.__destination==pega.u.d.ServerProxy.DESTINATION.REMOTE?pega.u.d.ServerProxy.setDestination(pega.u.d.ServerProxy.DESTINATION.REMOTE):pega.u.d.ServerProxy.setDestination(pega.u.d.ServerProxy.DESTINATION.LOCAL));c.removeEventListener("transitionend",l,!1);f&&pega.clientTools.reset();g.cleanup(g);a&&pega.ctxmgr.setContext(pega.ctxmgr.getHarnessContext(d))},l=function(){setTimeout(k,500)};b?(f&&this.removeThread(this.RDL_MD_THREAD),
k()):c.addEventListener("transitionend",l,!1);b||pega.ctx.dom.$(c).removeClass("open");pega.ctx.RDL.masterDetailsParams||(pega.ctx.RDL.masterDetailsParams={});pega.ctx.RDL.masterDetailsParams.isShowDetailsOpen=!1;b||this.bindLocalData(null,d,e);f&&!b&&this.removeThread(this.RDL_MD_THREAD);pega.ctx.RDL.masterDetailsParams.__activeRDLRowObject=null}},bindLocalData:function(a,b,c){var d=[];b&&(d=b.querySelectorAll("[data-propref]"));for(b=0;b<d.length;b++){var e=d[b].getAttribute("data-propref"),f,e=
pega.ui.property.toReference(e);if(pega.u.d.ServerProxy.isDestinationLocal()){var g=pega.ui.DataRepeaterUtils.getPackagedPageName();0==e.indexOf(g)&&(f=e.split(g)[1])}else g=c.substring(0,c.lastIndexOf("(")),0==e.indexOf(g)?(f=e.split(g)[1],f=f.substr(f.indexOf(")")+1)):(g=pega.ui.DataRepeaterUtils.getPackagedPageName(),0==e.indexOf(g)&&(f=e.split(g)[1]));if(f){e=pega.ui.property.toHandle(c+f);if(!a)break;var g=a.querySelector("[data-propref\x3d'"+e+"']"),h=d[b];h&&g?h.innerHTML=g.innerHTML:(!g&&
h&&(h.innerHTML=""),pega.ui.debug&&console.log("pega.ui.DataRepeaterUtils: Cannot find element with entry handle "+e))}}},setMasterDetailContext:function(a,b){var c=a.innerHTML,d="#~"+a.getAttribute("base_ref");d&&(d=d.replace(/\(/g,"\\(").replace(/\)/g,"\\)"),c=c.replace(new RegExp(d,"g"),"#~"+b),a.innerHTML=c)},getActiveRow:function(){var a=null;pega.ctx.RDL&&pega.ctx.RDL.masterDetailsParams&&(document.body.contains(pega.ctx.RDL.masterDetailsParams.__activeRDLRowObject)||(pega.ctx.RDL.masterDetailsParams.__activeRDLRowObject=
null),a=pega.ctx.RDL.masterDetailsParams.__activeRDLRowObject);return a},getEnclosingRL:function(a){var b=$(a).closest("div[data-repeat-source]")[0];this.isElementInShowDetails(a)&&(a=this.getActiveRow(),a=pega.ctx.dom.$(a).closest("[base_ref\x3d'"+pega.u.d.getBaseRef(a)+"']").get(0),b=$(a).closest("div[data-repeat-source]")[0]);return b},getRDLClassFamily:function(a){if(a&&(a=a.getAttribute("data-classinfo")))return JSON.parse(a).classFamily},isRDLCaseOfflinable:function(a){if(a)return(a=a.getAttribute("data-classinfo"))?
"true"==JSON.parse(a).isCaseOfflinable:!1},isElementInShowDetails:function(a){if(pega.ctx.dom.$(a).closest(".RDLShowDetails.open").get(0))return!0},getFlowAction:function(a,b,c){var d=pega.ui.DataRepeaterUtils.getPackagedPageName(),e=pega.ui.ClientCache.find(c);if(e)var f=e.get("pxObjClass"),g=e.get("pzInsKey"),h=e.get("pxRefObjectKey"),k=e.get("pxRefObjectClass"),f=f?f.getValue():"",g=g?g.getValue():"",l=h?h.getValue():"",k=k?k.getValue():"";var m=pega.ui.rdlMasterDetails.getActiveRDLMetaInfo(),
n=m.RDLSource,n=n.split(".")[0],r=m.RDLNode,h="Work"===this.getRDLClassFamily(r)&&g&&f?!0:!1,q="Assign"===this.getRDLClassFamily(r)&&l&&k?!0:!1;!(m=m.isOnlineWOBound)||pega.ctx.RDL.masterDetailsParams&&pega.ctx.RDL.masterDetailsParams.__RDLWOThreadInitialized||(pega.ctx.RDL.masterDetailsParams.__RDLThreadSetup=!0);var p={mTObjClass:"@baseclass",fAObjClass:c,isShowDetails:!0,isCenterOverlay:"false",isLocalAction:"true",doNotRefresh:!0,doNotSubmit:!0,modalSection:"pzModalAction",taskStatus:b,pxObjClass:null!=
e?f:"",isOnlineWOBound:m,noThreadProcess:!0,bRODetails:!0};b=a.refreshShowDetails?a.target:pega.util.Event.getTarget(a);r=this.getEnclosingRL(b);h||q||!e||(b=e.getName(),b=b.substring(0,b.indexOf("(")),e.getParent().put("$partialListProperty$"+b,!0));if(pega.u.d.ServerProxy.isHybridClient()&&(h||q)){var t=h?g:l,e=function(b){pega.ui.rdlMasterDetails.callProcessAction(p,a);b=new SafeURL;b.put("pzInsKey",t);b.put("api","RDLShowDetails");b.put("rdl-source",n);pega.u.d.ServerProxy.onActionComplete(b.toURL())};
b=function(a){pega.ui.rdlMasterDetails.showErrorOnSecondaryFA(pega.u.d.fieldValuesList.get("CannotLoadItem"))};pega.process.metadata.caseCache[h?f:k]?pega.ui.rdlMasterDetails.loadWorkObject(t,e,b):(f=pega.ui.ClientCache.find("pxRequestor.pzIsPegaServerAvailable"),!f||f&&"false"==f.getValue()?(c=pega.u.d.fieldValuesList.get("CannotPerformWhenOffline"),pega.ui.DCUtil.isActionFromNonOsco&&pega.u.d.ServerProxy.setDestination(pega.u.d.ServerProxy.DESTINATION.REMOTE),pega.ui.rdlMasterDetails.showErrorOnSecondaryFA(c)):
(p.contextParams={packagedContext:d,runtimeContext:c},pega.u.d.ServerProxy.setDestination(pega.u.d.ServerProxy.DESTINATION.REMOTE),pega.ui.rdlMasterDetails.callProcessAction(p,a)))}else p.contextParams={packagedContext:d,runtimeContext:c},this.callProcessAction(p,a)},showDetailsFlowAction_Success:function(a){if(pega.ctx.RDL.masterDetailsParams&&pega.ctx.RDL.masterDetailsParams.isShowDetailsOpen){var b=this.getActiveRDLMetaInfo(),c=b.rowPage,d=b.RDLSource,d=d.split(".")[0],e=pega.ui.ClientCache.find(c);
if(e){var f=e.getName(),f=f.substring(0,f.indexOf("("));e.getParent().remove("$partialListProperty$"+f)}var f=b.isOnlineWOBound,e=pega.clientTools.find(c),g;e&&(g=e.getJSON());var h;if(pega.mobile.isHybridClient&&pega.u.d.ServerProxy.isDestinationRemote()&&!g){var k=pega.ui.TemplateEngine.getValueFromChangeTracker(c);k&&(g=JSON.stringify(k))}if(f){pega.ctx.RDL.masterDetailsParams||(pega.ctx.RDL.masterDetailsParams={});pega.ctx.RDL.masterDetailsParams.__RDLThreadSetup=!1;pega.ctx.RDL.masterDetailsParams.__RDLWOThreadInitialized=
!0;f=pega.u.d.baseThreadName+"/"+this.RDL_MD_THREAD;pega.u.d.ServerProxy.isHybridClient()&&(k=document.createElement("div"),k.innerHTML=a.responseText,pega.u.d.initChangeTracker(k),a.responseText=k.innerHTML,pega.ui.updatePegaServerAvailability(1),pega.u.d.switchThread(f));if(pega.mobile.isHybridClient){c=c.split(".");pega.clientTools.init(f);f=pega.clientTools.createPage(c[0]);for(k=1;k<c.length;k++)f.put(c[k],{}),f=f.get(c[k]);f.adoptJSON(g)}var l;e&&(l=e.get("pzInsKey"));l&&(h=l.getValue());h&&
(g=new SafeURL,g.put("pzInsKey",h),g.put("api","RDLShowDetails"),g.put("rdl-source",d),pega.u.d.ServerProxy.onActionComplete(g.toURL()))}b.showDetailsNode&&this.showDetailsFA(a)}},showDetails_PreSuccess:function(a){var b=a.responseText;pega.u.d.baseThreadName||(pega.u.d.baseThreadName=pega.u.d.getThreadName());a=document.createElement("div");a.innerHTML=b;b=pega.u.d.initChangeTracker(a);a.innerHTML=null;pega.u.d.switchThread(b);pega.ui.ClientCache.init(b)},showDetailsFA:function(a){var b=this.getActiveRDLMetaInfo().showDetailsNode,
c=b.querySelector("div[node_name\x3d'pyRDLRowDetailsPlaceHolderSection']"),d=b.querySelector(".secondarySection");d&&d.parentNode.removeChild(d);var e=document.createElement("div");e.className="secondarySection hide";c.parentElement.appendChild(e);c.className+=" hide";pega.ctx.dom.$(b).find("div.secondarySection").removeClass("hide");pega.u.d.loadDOMObject(e,a.responseText,function(){pega.u.d.loadHTMLEleCallback(e);pega.u.d.gBusyInd.hide()})},showErrorOnSecondaryFA:function(a){pega.ui.rdlMasterDetails.showDetailsFA({responseText:"\x3cdiv class\x3d'layout-noheader-errors'\x3e\x3cdiv class\x3d'dataValueRead'\x3e"+
a+"\x3c/div\x3e\x3c/div\x3e"})},loadWorkObject:function(a,b,c){pega.clientTools.objOpenByHandle(a,pega.ui.DataRepeaterUtils.getPackagedPageName(),b,c,{priority:"client-first"})},callProcessAction:function(a,b){var c;c=this.getActiveRDLMetaInfo().showDetailsNode;if(b.isOnlineWOBound){var d=pega.ctx.dom.$("div.RDLShowDetails.open").get(0);d.setAttribute("base_ref","pyWorkPage");d.removeAttribute("full_base_ref")}pega.u.d.processAction(a.taskStatus,"","Rule-Obj-FlowAction","","","masterdetail",b,"pzModalAction",
null,c,null,"",null,a,!1)},removeThread:function(a){if(a){var b=pega.u.d.baseThreadName,c=b+"/"+a;pega.u.d.switchThread(b);a=SafeURL_createFromURL(pega.u.d.url);a.put("pyActivity","removeThead");a.put("threadName",c);pega.util.Connect.asyncRequest("POST",a.toURL(),{success:function(a){delete pega.ctx.RDL.masterDetailsParams.__RDLWOThreadInitialized;delete pega.ctx.RDL.masterDetailsParams.__RDLThreadSetup;"FAIL"==a.responseText&&pega.ui.debug&&console.log("An error has occurred deleting thread "+c)},
failure:function(a){pega.ui.debug&&console.log("An error has occurred deleting thread "+c+": "+a)}})}},dismissRDLMasterDetail:function(a,b){if(pega.ctx.RDL.masterDetailsParams&&pega.ctx.RDL.masterDetailsParams.isShowDetailsOpen&&pega.util.Event.getTarget(a)&&this.getActiveRDLMetaInfo()&&this.getActiveRDLMetaInfo().RDLNode&&(b=JSON.parse(b)))for(var c=0;c<b.length;c++)if(-1!=this.RDLMDDismissibleActions.indexOf(b[c][0])){this.hideDetails(a,!0);break}},invokePostMasterDetailEdit:function(a){var b=a.getReference(),
c=a.getReference();if(0==c.indexOf("D_")||0==c.indexOf("Declare_"))0<c.indexOf(".")&&(b=c.substring(0,c.indexOf("."))),pega.ui.ParametrizedDPUtils.isParametrizedDataPageInstance(a.getReference())&&(b=a.getParent().get("pzPageNameBase").getValue());if(b&&(c=window["postMasterDetailEdit$"+b])&&"function"==typeof c)try{c(a)}catch(d){pega.clientTools.log("Error encountered while invoking post master detail edit function: postMasterDetailEdit$"+b+"(). Error: "+d.message)}}};
pega.desktop.DataRepeater={add:function(a,b){if(a&&b&&(a=pega.ui.DataRepeaterUtils.getAbsoluteDataSourceFromDataSource(a).dataSource)){var c=pega.ctx.dom.querySelectorAll("[data-repeat-source\x3d'"+a+"']");a="PageListProperty\x3d"+a+"\x26PageName\x3d"+b;b=[];for(var d=0;d<c.length;d++)b.push(pega.u.d.getSectionDiv(c[d]));pega.u.d.reloadSections("",b,"pzAddToDataRepeater",a,null,null,[],[],null,null)}},remove:function(a){var b=pega.util.Event.getTarget(a),b=pega.ui.rdlMasterDetails.getEnclosingRL(b);
a=pega.ui.DataRepeaterUtils.getAbsoluteDataSourceFromEvent(a);var c=a.dataSource;a=a.rowIndex;if(c&&a){a="PageListProperty\x3d"+c+"\x26Index\x3d"+a;for(var c=b.getAttribute("data-repeat-source"),b=pega.ctx.dom.querySelectorAll("[data-repeat-source\x3d'"+c+"']"),c=[],d=0;d<b.length;d++)c.push(pega.u.d.getSectionDiv(b[d]));pega.u.d.reloadSections("",c,"pzRemoveFromDataRepeater",a,null,null,[],[],null,null)}},addToRepeatSourceWithoutLA:function(a,b,c,d,h,e){var f=pega.ctx.dom.$(a.target).closest(".content-layout-group"),
g=new SafeURL;g.put("pzActivity","@baseclass.pzAddToRepeatSource");g.put("pyActivity","pzRunActionWrapper");g.put("skipReturnResponse","true");g.put("pySubAction","runAct");g.put("rowClass",d);g.put("datasource",e);g.put("position",c);g.put("listAction","ADD");g.put("pzPrimaryPageName",b.substring(0,b.lastIndexOf(".")));g.put("bSkipLocalAction",h);d=pega.ctx.dom.$("[data-lg-repeatsource\x3d'"+b+"']");0<d.length?(pega.ctx.dom.$("[data-lg-repeatsource\x3d'"+b+"']").addClass("active"),a.srcElement=pega.ctx.dom.$("[data-lg-repeatsource\x3d'"+
b+"']"),LayoutGroupModule.setLayoutActiveIndex(d,"ADD"+c),d.append("\x3cinput type\x3d'hidden' name\x3d'addDeletePos' value\x3d'ADD"+c+"' /\x3e")):(d=pega.ctx.dom.$("[data-lg-repeatsource\x3d'"+e+"']"),0<d.length&&(pega.ctx.dom.$("[data-lg-repeatsource\x3d'"+e+"']").addClass("active"),a.srcElement=pega.ctx.dom.$("[data-lg-repeatsource\x3d'"+e+"']"),LayoutGroupModule.setLayoutActiveIndex(d,"ADD"+c),d.append("\x3cinput type\x3d'hidden' name\x3d'addDeletePos' value\x3d'ADD"+c+"' /\x3e")));clickedAddTabEvent=
a;a=pega.ctx.dom.$(f).closest("div[data-repeat-id]");c=a.attr("data-repeat-id");pega.util.Dom.getElementsByName("EXPANDED"+c,a[0]);var l=pega.ctx.dom.$(a).children("div[base_ref]").length;pega.ctx.dom.$(a).children("div[base_ref]").each(function(){pega.ctx.dom.$(this).attr("base_ref")&&(l=pega.ctx.dom.$(this).attr("data-lg-child-id"))});l=parseInt(l)+1;pega.ctx.dom.$("input[name\x3d'EXPANDED"+c+"']").val(l);pega.u.d.asyncRequest("POST",g);b&&e&&e.startsWith(".")?(pega.ui.ChangeTrackerMap.getTracker().addRemovePagesList.push(b),
pega.ui.TemplateEngine.invalidateDataSource(b),pega.desktop.DataRepeater.updatePaginationClass(b)):e&&(pega.ui.ChangeTrackerMap.getTracker().addRemovePagesList.push(e),pega.ui.TemplateEngine.invalidateDataSource(e),pega.desktop.DataRepeater.updatePaginationClass(e))},addToRepeatSourceUsingLA:function(a,b,c,d,h,e,f){f=new SafeURL;f.put("pyActivity","@baseclass.pzAddToRepeatSource");f.put("rowClass",e);f.put("datasource",b);f.put("position",c);f.put("listAction","ADD");f.put("pzPrimaryPageName",b.substring(0,
b.lastIndexOf(".")));e={mTObjClass:e,fAObjClass:e,isLocalAction:"true",doNotRefresh:!0,doNotSubmit:!0,isAddingNewRow:!0,cancelModalActivity:"pzDataRepeaterModalCancel",datasource:b,position:c};"INSERTFIRST"===c&&pega.ui.RDL&&pega.ui.RDL.getAndUpdateAllRDLsForPartialRefresh(b,!0);var g=pega.ctx.dom.$("[data-lg-repeatsource\x3d'"+b+"']");0<g.length&&(LayoutGroupModule.setLayoutActiveIndex(g,"ADD"+c),g.append("\x3cinput type\x3d'hidden' name\x3d'addDeletePos' value\x3d'ADD"+c+"' /\x3e"));pega.u.d.processAction(d,
"","Rule-Obj-FlowAction","","",!0,a,h,f,null,null,"",{submit:function(a){pega.u.d.submitModalDlgParam&&(pega.u.d.submitModalDlgParam.isAddingNewRow=!1);"INSERTFIRST"===c&&pega.ui.DataRepeaterUtils.updateEntryHandles(b,"INSERT",0);b&&(pega.ui.ChangeTrackerMap.getTracker().addRemovePagesList.push(b),pega.ui.TemplateEngine.invalidateDataSource(b),"INSERTLAST"===c&&(a=a.responseText,pega.ui.RDL&&pega.ui.RDL.appendRow(b,a)),pega.desktop.DataRepeater.updatePaginationClass(b))},cancel:function(){0<g.length&&
LayoutGroupModule.setLayoutActiveIndex(g,"")}},e,!1)},removeFromRepeatSource:function(a){var b=SafeURL_createFromURL(pega.u.d.url),c=a.dataSource,d=a.rowIndex,h=a.domIndex;a=a.sectionContext;b.put("pyActivity","@baseclass.pzRemoveFromRepeatSource");b.put("PageListProperty",c);b.put("Index",d);b.put("listAction","DELETE");b.put("pzPrimaryPageName",c+"("+d+")");b.put("postActivityContext",a);pega.ui.RDL&&pega.ui.RDL.getAndUpdateAllRDLsForPartialRefresh(c,!0);var e=pega.ctx.dom.$("[data-lg-repeatsource\x3d'"+
c+"']");if(0<e.length){e.append("\x3cinput type\x3d'hidden' name\x3d'addDeletePos' value\x3d'DEL"+d+"' /\x3e");LayoutGroupModule.setLayoutActiveIndex(e,"DEL"+d);a=pega.ctx.dom.$(e[0]).attr("data-repeat-id");var f=pega.ctx.dom.$("input[name\x3d'EXPANDED"+a+"']").val(),f=parseInt(f)?parseInt(f):"";(f=LayoutGroupModule.getActiveTabElement(e))&&f.parent()&&f.parent().next()&&f.parent().next().hasClass("layout")||pega.ctx.dom.$("input[name\x3d'EXPANDED"+a+"']").val(d-1)}pega.u.d.asyncRequest("POST",b,
{success:function(b){c&&(pega.ui.DataRepeaterUtils.updateEntryHandles(c,"DELETE",h),pega.u.d.handleErrorAfterPartialSuccess(b)||(pega.ui.ChangeTrackerMap.getTracker().addRemovePagesList.push(c),pega.ui.TemplateEngine.invalidateDataSource(c),pega.desktop.DataRepeater.updatePaginationClass(c)))},failure:function(){0<e.length&&(e.remove("[name\x3d'addDeletePos']"),LayoutGroupModule.setLayoutActiveIndex(e,""))},argument:[""]})},updatePaginationClass:function(a){pega.ctx.dom.$("[data-repeat-source\x3d'"+
a+"']").each(function(b,a){(b=a.getAttribute("data-uniqueid"))&&pega.ctx.RDL&&pega.ctx.RDL.map&&pega.ctx.RDL.map[b]&&(b=pega.ctx.RDL.map[b].paginationClass)&&pega.ctx.dom.$(a).addClass(b)})},loadMoreData:function(a){var b=pega.util.Event.getTarget(a),c=pega.ctx.dom.$(b).closest(".RDLPaginator").get(0);pega.ui.RDL.focusNewRow=!1;if(!c)var c=pega.ctx.dom.$(a.target).closest("div.rdl-paginatorsection"),d=pega.ctx.dom.$(c).siblings("div[data-repeat-source]").get(0),h=parseInt(d.getAttribute("data-pagesize")),
e=pega.ui.template.pzRDLTemplate.loadPage(pega.ui.RDL.getNextRowIndex(d),h,d,a);else if(pega.u.d.ServerProxy.isDestinationRemote()){a=c.getAttribute("data-methodname");var b=pega.u.d.getSectionDiv(c).getAttribute("node_name"),d=pega.ctx.dom.$(c).siblings("div[data-repeat-source]").get(0),f=d.getAttribute("data-repeat-source"),g=pega.u.d.getBaseRef(d),l,m=c.getAttribute("data-pagination-config");m&&(m=JSON.parse(m),"Progressive"==m.listPaginationMode&&(e=parseInt(m.listStartIndex,10),h=parseInt(m.listPageSize,
10),l=e+h-1));var k=SafeURL_createFromURL(pega.u.d.url);k.put("pyActivity","pzdoRDLAction");k.put("baseref",g);k.put("pyCallStreamMethod",a);k.put("StreamName",b);k.put("StreamClass","Rule-HTML-Section");k.put("listAction","PAGINATE");k.put("listPaginationMode","Progressive");k.put("listSource",f);e&&k.put("listStartIndex",e);l&&k.put("listEndIndex",l);h&&k.put("listPageSize",h);pega.u.d.asyncRequest("GET",k,{success:function(a){if("NO_MORE_RESULTS"==a.responseText||"ERROR_FETCHING_RESULTS"==a.responseText)c.style.display=
"none";else{var b=document.createElement("div");b.innerHTML=a.responseText;(a=b.lastElementChild.getAttribute("id"))&&a.toUpperCase().startsWith("AJAXCT")&&b.removeChild(b.lastElementChild);a=b.children.length;for(var e=0;e<a;e++)pega.u.d.loadDOMObject(d,b.children[e].outerHTML,null,{domAction:"append",domElement:d});m&&(m.listStartIndex=l+1,c.setAttribute("data-pagination-config",JSON.stringify(m)),a<h&&(c.style.display="none"))}},failure:function(a){pega.ui.debug&&console.log("pega.desktop.DataRepeater.loadMoreData: An error occurred while retrieveing data from Server.")}})}}};
pega.ui.template.DataRepeater.Actions=function(){return{doListAction:function(){var d=pega.ui.DataRepeaterUtils,b=arguments[0],a=d.getLayoutType(b);Array.isArray(arguments[1])&&Array.isArray(arguments[2])&&(arguments="grid"===a?[b].concat(arguments[2]):[b].concat(arguments[1]));if("grid"===a||!a&&b.cachedGridObj)b=arguments,pega.ui.grid&&window.doGridAction&&("FLOWACTION"===b[1]&&(a=b[3],"false"===a.overrideTemplate&&(a.templateName="pyGridModalTemplate")),doGridAction.apply(null,b));else{var c=arguments[1],
a=!1;if(pega.u.d.ServerProxy&&pega.u.d.ServerProxy.isDestinationLocal()){if(c==pega.ui.tGridConstants.GRID_PAGINATE_ACTION||c==pega.ui.tGridConstants.GRID_SORT_ACTION||"REFRESHLIST"==c||"SETFOCUS"==c)a=!0}else a=!0;if(a)if("SETFOCUS"==c.toUpperCase()?(a=arguments[arguments.length-1])||(a=d.getClosestRepeatLayoutInfo(b,!0)):"ADDITEM"==c.toUpperCase()||"REFRESHLIST"==c.toUpperCase()?(a=d.getClosestRepeatLayoutInfo(b,!0),a||(a={},a.type=d.TEMPLATE_GRID)):a=d.getClosestRepeatLayoutInfo(b,!0),a.rowNode&&
a.rowNode.className.match("cat-row"))pega.ui.logger.LogHelper.debug("Grid actions are not suported for categorised rows");else switch(a.type){case d.TEMPLATE_GRID:switch(c.toUpperCase()){case "SETFOCUS":var e=arguments[3];pega.ui.TemplateGrids.focusRow(e,a);b=a;b.domNode=null;b.rowNode=null;break;case "EDITITEM":pega.ui.TemplateGrids.editrow(b,a);break;case "DELETEITEM":pega.ui.TemplateGrids.deleterow(b,a,arguments[2]);break;case "ADDITEM":var f=arguments[2]||"",e=arguments[3]||"",d=arguments[4]||
"",c=arguments[5]||"";pega.ui.TemplateGrids.composeRow({event:b,layoutInfo:a,source:f,position:e,flowActionName:d,templateName:c,skipModal:arguments[6]||"false",pyDataTransform:arguments[7]||"pyDefault"});break;case "REFRESHLIST":f=arguments[2]||"";pega.ui.TemplateGrids&&pega.ui.TemplateGrids.refreshList(b,f,a);break;case "FLOWACTION":d=arguments[2]||"",c=arguments[3].templateName||"",e=new SafeURL,e.put("pzHarnessID",pega.ctx.pzHarnessID),e.put("BaseReference",a.rowRef),e.put("InterestPage",a.rowRef),
pega.ui.TemplateGrids&&pega.ui.TemplateGrids.performOpenLocalAction(b,a,d,c,e)}}else alert("This feature is not supported in offline mode")}}}}();
pega.namespace("pega.ui.pdf");
$.extend(pega.ui.pdf,function(){var f=[],h=function(c,a){var d=c+"/"+a+".pdf";pega.mobile.sdk.plugins.clientstore.getItems([{type:"APP-RESOURCE",handle:d}]).then(function(a){a[0]&&a[0].url?pega.mobile.sdk.plugins.documents.preview(a[0].url):console.error("Cannot find pdf with handle "+d)})},l=function(c,a,d){var f=a+".pdf",b=new XMLHttpRequest;b.open("GET",c+"/"+a+".pdf",!0);b.responseType="blob";b.onload=function(a){200==this.status&&(pega.u.d.setBusyIndicator(null,!0),a=new Blob([this.response],
{type:"application/pdf"}),k(a,f,d))};b.send()},k=function(c,a,d){if(f[a]){var g;try{g=f[a].toURL(),window.launchbox.DocumentViewer?(pega.u.d.gBusyInd.hide(),window.launchbox.DocumentViewer.open(g,{preview:d},{onSuccess:function(){},onFailure:function(){pega.u.d.setBusyIndicator(null,!0);window.requestFileSystem(window.TEMPORARY|window.LocalFileSystem.SHARED_AMONG_USERS|window.LocalFileSystem.SHARED_AMONG_APPS,52428800,function(b){b.root.getFile(a,{create:!0},function(b){b.createWriter(function(e){e.onwriteend=
function(){pega.u.d.gBusyInd.hide();f[a]=b;window.launchbox.DocumentViewer.open(b.toURL(),{preview:d},{onSuccess:function(){},onFailure:function(){}})};e.onerror=function(a){pega.u.d.gBusyInd.hide();alert("Write failed with error: "+a.toString())};e.write(c)})})})}})):console.log("DocumentViewer is not present in window.launchbox.DocumentViewer")}catch(b){window.requestFileSystem(window.TEMPORARY|window.LocalFileSystem.SHARED_AMONG_USERS|window.LocalFileSystem.SHARED_AMONG_APPS,52428800,function(b){b.root.getFile(a,
{create:!0},function(b){b.createWriter(function(e){e.onwriteend=function(){pega.u.d.gBusyInd.hide();f[a]=b;window.launchbox.DocumentViewer.open(b.toURL(),{preview:d},{onSuccess:function(){},onFailure:function(){}})};e.onerror=function(a){pega.u.d.gBusyInd.hide();alert("Write failed with error: "+a.toString())};e.write(c)})})})}}else window.requestFileSystem(window.TEMPORARY|window.LocalFileSystem.SHARED_AMONG_USERS|window.LocalFileSystem.SHARED_AMONG_APPS,52428800,function(b){b.root.getFile(a,{create:!0},
function(b){b.createWriter(function(e){e.onwriteend=function(){pega.u.d.gBusyInd.hide();f[a]=b;window.launchbox.DocumentViewer.open(b.toURL(),{preview:d},{onSuccess:function(){},onFailure:function(){}})};e.onerror=function(a){pega.u.d.gBusyInd.hide();alert("Write failed with error: "+a.toString())};e.write(c)})})})},m=function(c,a){c=c+"/"+a+".pdf";c=(new SafeURL).toURL()+"/"+c;a+=".pdf";var d=document.createElement("a");"download"in d?($(d).attr({href:c,target:"_target",download:a}).hide().appendTo("body").on("click",
function(){$(this).remove()}),d.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0})),navigator.mozGetUserMedia||window.URL.revokeObjectURL(d.href)):openUrlInWindow(c,a)};return{view:function(c,a){pega.mobile.isHybridClient?l(c,a,!0):pega.mobile.sdk?h(c,a):m(c,a)}}}());
var harnessSizing={SCROLL_ADJUSTMENT:20,gCurrTotalHeight:0,gDoGadgetResize:!1,callResizeHarness:!0,topGutter:"0px 0px 0px 0px",leftGutter:"0px 5px 0px 0px",rightGutter:"0px 0px 0px 6px",bottomGutter:"0px 0px 0px 0px",isCollapsed:0,resizeTimeoutId:null,resizingHarness:!1,stretchHarness:!1,resizeHarness:function(){pega.u.d.executeResizeHarness&&1==pega.u.d.executeResizeHarness?pega.u.d.resizeHarnessActual():(clearTimeout(pega.u.d.resizeHarnessTimeoutId),pega.u.d.resizeHarnessTimeoutId=setTimeout(function(){pega.ui.statetracking.setBusy("harnessSizing.resizeHarness");
pega.u.d.resizeHarnessActual();pega.ui.statetracking.setDone()},1))},resizeHarnessActual:function(){pega.u.d.bModalDialogOpen&&pega.u.d.bResizeModalDlg&&pega.u.d.resizeModalDialog();"function"===typeof this.resizeAccordion&&this.resizeAccordion();null==document.forms[0]||"actionForm"!=document.forms[0].name||pega.u.d.bModalDialogOpen||this.resizeActionIFrame(!1);this.resizeHarnessCallback()},getDocumentHeight:function(a){try{if(null!=window.frameElement&&"undefined"!=typeof window.frameElement.PegaWebGadget){var b=
document.getElementById("HARNESS_CONTENT"),c=document.getElementById("HARNESS_BUTTONS"),e=0;c&&(0<c.getElementsByTagName("button").length||c.hasChildNodes()&&"HarnessFooter"==c.children[0].id)&&(e=c.offsetHeight);if("undefined"!=typeof window.parent.pega&&"undefined"!=typeof window.parent.pega.u&&"undefined"!=typeof window.parent.pega.u.d&&window.parent.pega.u.d.isPortal()){if(!0!==a&&(this.stretchHarness||"true"==pega.u.d.keepFixedVisible&&c&&(c.getElementsByTagName("button")&&0<c.getElementsByTagName("button").length||
c.hasChildNodes()&&"HarnessFooter"==c.children[0].id)))return pega.u.d.setHarnessHeight();b.style.overflow="auto";c&&a&&(b.style.height="auto");var d=pega.u.d.getDivScrollHeight(b)+e;b.style.overflow="visible";return d}c&&(b.style.overflow="auto",b.style.height="auto");return pega.u.d.getDivScrollHeight(b)>b.offsetHeight?pega.u.d.getDivScrollHeight(b)+e:b.offsetHeight+e}return pega.util.Event.isIE||pega.util.Event.isSafari?document.body.offsetHeight:document.body.clientHeight}catch(f){return document.body?
document.body.offsetHeight:0}},getDocumentWidth:function(a){var b=document.getElementById("HARNESS_CONTENT");return"true"==pega.u.d.keepFixedVisible?!0===a?parseInt(document.body.offsetWidth):parseInt(document.body.scrollWidth):b?parseInt(b.scrollWidth):parseInt(document.body.scrollWidth)},getTotalHeight:function(){var a=document.getElementById("HARNESS_BUTTONS"),b=document.getElementById("HARNESS_CONTENT"),c=0;a&&(c=a.offsetHeight);return b?(b.style.overflow="auto",pega.u.d.getDivScrollHeight(b)+
c):document.body.scrollHeight},getDivScrollHeight:function(a,b){var c,e=0<pega.env.ua.gecko,d=a.style.overflow,f=""==d||"visible"==d;e&&f&&(a.style.overflow="hidden");c=a.scrollHeight;e&&f&&(a.style.overflow=d);b&&a.scrollWidth>a.offsetWidth&&(c+=pega.u.d.SCROLL_ADJUSTMENT);return c},setHarnessHeight:function(){try{if(null!=window.frameElement&&"undefined"!=typeof window.frameElement.PegaWebGadget){var a=document.getElementById("HARNESS_BUTTONS");document.getElementById("HARNESS_CONTENT");a&&document.getElementById("HARNESS_BUTTONS");
if("undefined"!=typeof window.parent.pega.u.d&&window.parent.pega.u.d.isPortal()&&(0!=parseInt(window.frameElement.offsetHeight)||pega.util.Event.isSafari&&"100%"==window.frameElement.height)){var b=pega.u.d.getPanelDiv();if(b){for(var c=b.getElementsByTagName("DIV"),e=c.length,d=a=0;d<e;d++)if("RULE_KEY"===c[d].id){a=d;break}var f=c[a].offsetHeight-window.frameElement.offsetHeight,h=b.parentNode,l=parseInt(h.clientHeight),g,k;h.currentStyle?(g=h.currentStyle,k=parseInt(g.paddingTop)+parseInt(g.paddingBottom)):
(g=window.getComputedStyle(h,null),k=parseInt(g.getPropertyValue("padding-top"))+parseInt(g.getPropertyValue("padding-bottom")));return 0<f&&0<l-f?l-f-k:0==f?l-k:window.frameElement.offsetHeight}}}}catch(m){}},resizeHarnessCallback:function(){try{this.invokeResizeCallbacks(this.resizeFunctions),bActionIframe&&this.invokeResizeCallbacks(parent.pega.u.d.resizeFunctions)}catch(a){}if("CSS1Compat"!==document.compatMode)try{this.handleQuirksAdjustments()}catch(a){}},handleQuirksAdjustments:function(){if(-1!=
navigator.userAgent.indexOf("MSIE 8"))for(var a=document.body.getElementsByTagName("table"),b=0;b<a.length;b++){var c=pega.util.Dom.getElementsById("PEGA_GRID_CONTENT",a[b]);if(!(c&&c[0]||!a[b].className||-1==a[b].className.indexOf("repeatReadOnlyRowColRepeat")&&-1==a[b].className.indexOf("repeatReadWriteRowColRepeat")))for(var c=a[b].getElementsByTagName("th"),e=0;e<c.length;e++){var d=c[e].getElementsByTagName("div");d&&0<d.length&&d[0].parentNode==c[e]&&(d[0].style.width=d[0].parentNode.offsetWidth+
"px")}}},invokeResizeCallbacks:function(a){try{for(var b=0;b<a.length;b++){var c=a[b];try{c()}catch(e){}}}catch(e){}},shrinkToFit:function(){var a=parseInt(document.body.clientHeight),b=parseInt(document.body.scrollHeight),c=parseInt(document.body.scrollWidth),e=parseInt(document.body.clientWidth),d=1;b>a&&(d=a/b);c>e&&(a=e/c,a<d&&(d=a));pega.util.Dom.setStyle(document.body,"zoom",d);document.body.style.visibility="inherit"},doHarnessResize:function(){pega.u.d.resizingHarness||(pega.util.Event.isIE||
pega.util.Event.isSafari||pega.Mashup?(clearTimeout(pega.u.d.resizeTimeoutId),pega.u.d.resizeTimeoutId=setTimeout(pega.u.d.doHarnessResizeActual,10)):pega.u.d.doHarnessResizeActual())},mashupResizeHandler:function(){clearTimeout(pega.u.d.mashupResizeHandler.resizeTimer);pega.u.d.mashupResizeHandler.resizeTimer=setTimeout(pega.u.d.postMashupHeight,100)},postMashupHeight:function(){if(pega&&pega.Mashup&&!window.opener){var a=document.getElementById("HARNESS_CONTENT");if(a){var b=0;if(a.classList.contains("harness-content-workarea-view"))for(var a=
a.childNodes,c=0,e=a.length;c<e;c++){if(1==a[c].nodeType&&"HEADER"!==a[c].nodeName&&"FOOTER"!==a[c].nodeName)if(a[c].classList.contains("workarea-view-scroll-wrapper")){var d=a[c].getElementsByTagName("section")[0];d.style.height="auto";b+=pega.u.d.getOuterHeight(d,"scroll")}else b+=a[c].scrollHeight}else a&&(b=a.scrollHeight);(a=document.getElementById("HARNESS_BUTTONS"))&&(0<a.getElementsByTagName("button").length||a.hasChildNodes()&&"HarnessFooter"==a.children[0].id)&&(b+=a.offsetHeight);$("header").outerHeight()&&
(b+=$("header").outerHeight());$("footer").outerHeight()&&(b+=$("footer").outerHeight());pega.desktop.support.doGadgetAction({name:"resizeMashup",height:b})}}},doHarnessResizeActual:function(){pega.u.d.resizingHarness=!0;pega.u.d.harnessType&&"layout"==pega.u.d.harnessType&&pega.u.d.portal.layoutObj.resize();var a=null;try{a=window.frameElement}catch(c){}null!=a&&"undefined"!=typeof a.PegaWebGadget&&(a=window.frames.actionIFrame)&&1!=pega.u.d.gIsLoading&&"complete"==a.document.readyState&&a.pega&&
a.pega.u&&a.pega.u.d&&a.pega.u.d.resizeActionIFrame(!1);pega.u.d.callResizeHarness&&pega.u.d.resizeHarnessCallback();if(pega.u.d.isPortal())pega.u.d.resizingHarness=!1;else{var b=document.getElementById("HARNESS_BUTTONS");null==b?pega.u.d.resizingHarness=!1:(document.getElementById("HARNESS_CONTENT"),a=!0,b&&(0<b.getElementsByTagName("button").length||0<$("#HARNESS_BUTTONS #HarnessFooter td td *").length)&&(a=!1),a&&(b.style.display="none",(b=document.getElementById("fixedBBStyles"))&&b.parentNode.removeChild(b)),
pega.u.d.resizingHarness=!1,a&&pega.u.d.resizeHarness())}}};pega.lang.augmentObject(pega.ui.Doc.prototype,harnessSizing);
(function(l){var r=l.u.d,G=l.desktop.support;l=function(){var l=function(a){pega.control&&pega.control.Actions&&pega.control.Actions.prototype.hideSkeleton&&pega.control.Actions.prototype.hideSkeleton();alert(a)},C=function(a){var c=document.createElement("div");c.innerHTML=a;(a=$(c).find("main.screen-layout-region-main-middle a#appview-nav-toggle-one.nav-toggle-one").get(0))&&a.remove();(a=$(c).find("main.screen-layout-region-main-middle a#appview-nav-toggle-two.nav-toggle-two").get(0))&&a.remove();
return c},w=function(a,c){return"object"==typeof a&&a&&"safeURL"===a.name&&"Yes"===a.get("submitCurrent")?!1:pega.ctx.bIsDCSPA?(a=pega.ctx,c=(c=pega.ctxmgr.getContextByProperty("isMDC",!0))?c:pega.ctxmgr.getDCSPAContext(),pega.ctxmgr.setContext(c),c="true"!==pega.ctx.ignoreDirty&&pega.u.d.isFormDirty(!0,!1),pega.ctxmgr.resetContext(a),c):"true"!==pega.ctx.ignoreDirty&&pega.u.d.isFormDirty(!0,!1,null,null,c)},D=function(){if(pega.desktop.infinity&&pega.desktop.infinity.isNewTab&&pega.desktop.infinity.isNewTab()){if(-1!==
pega.ctx.pxReqURI.indexOf("DCSPA")&&-1===pega.u.d.portalName.indexOf("autoThread"))return pega.u.d.portalName;if(-1!==pega.ctx.pxReqURI.indexOf("DCSPA")&&-1!==pega.u.d.portalName.indexOf("autoThread"))return r.getPortalThreadName()}return"DCSPA_"+pega.u.d.portalName},v=function(a,c,d,b){function e(){function e(a){var b=document.querySelector("head link[rel\x3d'canonical']");b&&b.remove();(b=a.querySelector("link[rel\x3d'canonical']"))&&document.head.appendChild(b)}function t(){return pega.u.d.bIsDCSPA&&
pega.u.d.replaceWorkArea?document.querySelector("#workarea"):document.querySelector("main")}function l(){var a,b=pega.ctxmgr.getHarnessContextMap(),c=pega.ctxmgr.getDCSPAContext();c?(a=pega.ctx,pega.ctxmgr.setContext(c)):b[pega.ctx.pzHarnessID]||(a=pega.ctx,c=Object.keys(b)[0],pega.ctxmgr.setContext(b[c]));return a}b&&(pega.ui.DCUtil.historyGlobalState=f);var k;if("object"===typeof a&&"safeURL"===a.name&&"true"===a.get("isURLReady")){if(k=a,"true"!==a.get("isFromHistory")&&("undefined"!==typeof pega.ctx.pxReqURI&&
""!==pega.ctx.pxReqURI&&k.put("pxReqURI",pega.ctx.pxReqURI),n="ReloadHarness"===k.get("pyActivity")&&!pega.u.d.isDCSPAThread(pega.u.d.getThreadName()),r.bIsDCSPA&&!n&&"activate"!==k.get("api")&&k.get("pxReqURI"))){var q=k.get("pxReqURI"),z=r.getPortalThreadName(),w=D(),q=q.replace(z,w);k.put("pxReqURI",q)}}else g.set("url",g.get("url").replace("/PRRestService/","/PRServlet/")),delete a.pxReqURI,k=A(a),q=k.get("pxReqURI"),k.put("pxReqURI",q);pega.ui.statetracking.setPALInteraction("abc?"+k.toUnencodedQueryString());
var x="activate"===k.get("api"),B="true"===k.get("isHistoryStateNull");k.remove("isHistoryStateNull");var v={preRenderer:function(a){var b=document.createElement("div"),c;b.innerHTML=a.responseText;var d=b.querySelector("script#harnessvars");if(d){pega.u.d.gBusyInd&&pega.u.d.gBusyInd.hide(null,null,!0);var e=t();e&&pega.u.d.cleanUpHarnessElements(null,[e]);if(e=pega.ctxmgr.getDCSPAContext())pega.ui.EventsEmitter.publishSync("onHarnessUnload"),pega.ui.HarnessContextMgr.unloadHarnessContext(e.pzHarnessID);
if(x||B||n){c=!0;var e=pega.ctxmgr.getContextByThreadName(pega.u.d.getPortalThreadName()),h=document.body;e&&(pega.ui.EventsEmitter.publishSync("onHarnessUnload"),pega.ui.HarnessContextMgr.unloadHarnessContext(e.pzHarnessID,!0),h.classList.remove(h.getAttribute("data-harness-id")),h.removeAttribute("data-harness-id"))}e=document.createElement("script");e.innerHTML=d.innerHTML;d.parentNode.removeChild(d);document.head.appendChild(e);evaluateJSONVariables(c);deferredFieldValues();pega.ctx.bIsDCSPA=
!0;pega.ctx.baseThreadName||(pega.ctx.baseThreadName=pega.u.d.getThreadName());pega.ctx.basePrimaryPageName||(pega.ctx.basePrimaryPageName=pega.ctx.primaryPageName);e=t();pega.ctxmgr.registerContextSwitching(e);b.querySelector("div#AJAXCT")&&pega.u.d.initChangeTracker(b);a.responseText=b.innerHTML}b.innerHTML=null},success:function(a){a=C(a.responseText);var b=l();e(a);var h=pega.util.Dom.getElementsById("PegaOnlyOnce",a,"div");h&&h[0]&&(pega.u.d.handleOnlyOnce(h[0]),h[0].parentNode.removeChild(h[0]));
var f=!1,h=pega.util.Dom.getElementsById("PEGA_HARNESS",a,"div");h||(f=!0,h=a.querySelectorAll("main div.screen-layout-region-content\x3ediv"));pega.u.d.modalDialog&&pega.u.d.bModalDialogOpen&&pega.u.d.modalDialog.hide();pega.u.d.modalDialog=null;var m=document.getElementsByClassName("modal-overlay");if(0<m.length)for(var g=m.length-1;0<=g;g--)m[g].remove();m=pega.util.Dom.getElementsById("modalOverlay",a,"div");f&&m&&0<m.length&&document.body.insertBefore(m[0],document.body.firstElementChild);if(h&&
0<h.length){for(var q=function(){var a="";pega&&pega.util&&pega.util.Event&&pega.util.Event.isIE&&(a=window.location.href);return a},h=h[0],f=a.querySelectorAll("script"),m=a.querySelectorAll("link[rel\x3d'stylesheet']"),g=a.querySelectorAll("style"),p=a.querySelector("textarea#docsRecreateInfo"),t=f.length,n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),u=0;u<t;u++)h.appendChild(f[u]);t=m.length;for(u=0;u<t;u++)h.appendChild(m[u]);t=g.length;for(u=0;u<t;u++)h.appendChild(g[u]);var f=
g=m=null,r=k.get("isFromHistory"),f=k.get("isReloaded"),y=k.get("skipHistoryUpdation");"displayOnPage"===k.get("action")&&(y="true");"string"===typeof newTabIsReloaded&&"true"===newTabIsReloaded&&(f="true",newTabIsReloaded="");m=null;n&&(m=document.title);"true"===r&&"true"!==f||"true"===y||(g={title:document.title,url:k.toURL(),index:pega.ui.DCUtil.historyGlobalState,isActivateDocument:x},"true"===f?(history.state&&1===history.state.page&&(g.page=1),history.replaceState(g,m,q()),k.remove("isReloaded")):
(g.index=++pega.ui.DCUtil.historyGlobalState,history.pushState(g,m,q()),k.remove("isFromHistory")));"workspace"!==pega.desktop.portalCategory&&(document.title=a.getElementsByTagName("title")[0].text.trim());a=document.createElement("div");a.appendChild(h);var v=$("main.screen-layout-region-main-middle a#appview-nav-toggle-one.nav-toggle-one").get(0),w=$("main.screen-layout-region-main-middle a#appview-nav-toggle-two.nav-toggle-two").get(0);pega.ui.DCUtil.replace(h.parentNode,function(a){var b=l(),
e=pega.ui.HarnessContextMgr,h=k.get("action");pega.u.d.loadHTMLEleCallback(a,!0);"true"===r||null===history.state||history.state.isActivateDocument||"displayOnPage"===h||"true"===y||((a=pega.ui.DCUtil.rewriteURL(p))&&(k=a),a={title:history.state.title,url:k.toURL(),index:pega.ui.DCUtil.historyGlobalState},h=null,n&&(h=document.title),history.state&&1===history.state.page&&(a.page=1),history.replaceState(a,h,q()));v&&(a=$(".screen-layout-region-main-middle .screen-layout-region-content").get(0))&&
((h=$("main.screen-layout-region-main-middle a#appview-nav-toggle-one.nav-toggle-one").get(0))&&h.remove(),$(a).prepend(v));w&&(a=$(".screen-layout-region-main-middle .screen-layout-region-content").get(0))&&((h=$("main.screen-layout-region-main-middle a#appview-nav-toggle-two.nav-toggle-two").get(0))&&h.remove(),$(a).prepend(w));pega.u.d.gBusyInd&&pega.u.d.gBusyInd.hide();pega.u.d.resetBusyState();c&&pega.ui.HarnessContextMap.set("SubmitInProgress",!1);pega.ctx.baseFrameName=SafeURL_createFromURL(e.get("url")).get("pzFromFrame");
null==pega.u.d.modalDialog&&pega.u.d.modalDialogInit();pega.ui.HarnessContextMap.set("gSectionReloaded",null);d&&d.success&&d.success();b&&pega.ctxmgr.setContext(b);pega&&pega.Mashup&&window.doHarnessResize&&doHarnessResize()})}b&&pega.ctxmgr.setContext(b)},failure:function(){d&&d.failure&&d.failure()}};pega.ctx.isUITemplatized?k.put("UITemplatingStatus","Y"):k.put("UITemplatingStatus","N");var p=new SafeURL;c&&(p=c);p instanceof FormData?p.append("isDCSPA","true"):p.put("isDCSPA","true");if((q=pega.ctxmgr.getDCSPAContext())&&
(x||B))pega.ctxmgr.setContext(q),pega.u.d.doClose(null,!0,{success:function(){pega.ctxmgr.setRootDocumentContext();var a=SafeURL_createFromURL(pega.u.d.homeURL),b=a.get("pyActivity"),c=a.get("pyPreActivity"),d=a.get("pzActivity"),e=a.get("Location");("pzRunActionWrapper"===b&&"Embed-PortalLayout.RedirectAndRun"===d||"Embed-PortalLayout.RedirectAndRun"===b||"Embed-PortalLayout.RedirectAndRun"===c)&&e.startsWith("pyActivity%3DData-Portal.ShowSelectedPortal")&&(a.remove("pyActivity"),b=a.get("ThreadName"),
a.remove("ThreadName"),e=new SafeURL_createFromEncryptedURLwithQueryString(e),a.remove("Location"),a=a.get("pxReqURI").replace(pega.u.d.getThreadName({url:a.get("pxReqURI")}),b),e.put("pxReqURI",a),a=e);a.put("isURLReady","true");a.put("isDCSPA","true");x&&((e=a.get("Location"))?(e+="\x26AJAXTrackID\x3d"+pega.ui.ChangeTrackerMap.getTracker().id,a.put("Location",e+"\x26api\x3dactivate")):(a.put("api","activate"),p instanceof FormData?p.append("AJAXTrackID",pega.ui.ChangeTrackerMap.getTracker().id):
p.put("AJAXTrackID",pega.ui.ChangeTrackerMap.getTracker().id)));if(null===history.state||history.state.mspPortalInitialLoad)(e=a.get("Location"))?a.put("Location",e+"\x26isHistoryStateNull\x3dtrue"):a.put("isHistoryStateNull","true");pega.ctx.isUITemplatized?a.put("UITemplatingStatus","Y"):a.put("UITemplatingStatus","N");pega.u.d.asyncRequest("POST",a,v,p)},failure:function(){console.error("Doclose request for DCSPA thread failed")}},!0),pega.ctxmgr.resetContext();else{q=k.get("pyActivity");z=k.get("skipHistoryUpdation");
("ReloadHarness"!==q||"true"!==z)&&pega.u.d.closeOnlyMDCDocs&&pega.u.d.closeOnlyMDCDocs(null,!0,!0,!0);if(x||B)p instanceof FormData?p.append("AJAXTrackID",pega.ui.ChangeTrackerMap.getTracker().id):p.put("AJAXTrackID",pega.ui.ChangeTrackerMap.getTracker().id);pega.u.d.asyncRequest("POST",k,v,p)}}var f,n=!1;b&&(f=b.state?b.state.index:0);var g=pega.ui.HarnessContextMgr;!a.skipDirtyCheck&&w(a,e)?(b&&history.go(pega.ui.DCUtil.historyGlobalState-f),pega&&pega.control&&pega.control.Actions&&pega.control.Actions.prototype.hideSkeleton&&
pega.control.Actions.prototype.hideSkeleton(),pega.u.d.gBusyInd&&pega.u.d.gBusyInd.hide(),pega.ui.statetracking.setDocumentDone()):e()},E=function(a){var c=pega.ui.HarnessContextMgr,d=pega.ui.ClientCache.find("pxRequestor.pzIsPegaServerAvailable");if(!d||d&&"false"===d.getValue())a=pega.u.d.fieldValuesList.get("CannotPerformWhenOffline"),pega.ui.DCUtil.isActionFromNonOsco&&pega.u.d.ServerProxy.setDestination(pega.u.d.ServerProxy.DESTINATION.REMOTE),pega.u.d.gBusyInd&&pega.u.d.gBusyInd.hide(),pega.ui&&
pega.ui.DCUtil&&pega.ui.DCUtil.cancelTransition&&pega.ui.DCUtil.cancelTransition(),l(a),pega.mobile.isMultiWebViewOfflinePegaMobileClient&&pega.mobile.sdk.plugins.layout.getCurrentNavigationItemStackSize().then(function(a){0===a&&pega.mobile.sdk.plugins.layout.selectLastVisitedNavigationItem()});else if("undefined"!==typeof pmcPortalConfiguration&&pega.mobile.isMultiWebViewOfflinePegaMobileClient){a.offlineEnabled="false";a.isRemoteCase="true";a.mdcTarget=pega.ctx.mdcName;var b=pega.redux.Utils.getAjaxContainerState();
b.reference&&"openAssignment"===a.action?(a.recordId=b.reference.name,a.reload=!0,pega.redux.store.dispatch(pega.redux.actions(pega.redux.actionTypes.CLOSETOCLAIM,a)),delete b.reference):pega.redux.store.dispatch(pega.redux.actions(pega.redux.actionTypes.ADD,a))}else if(pega.mobile.isMultiWebViewOfflinePegaMobileClient){c=pega.mobile.support.getPortalWindow();d=new SafeURL;for(b in a)metaValue=a[b],null!==metaValue&&""!==metaValue&&void 0!==metaValue&&d.put(b,metaValue);d.put("offlineEnabled","false");
d.put("isRemoteCase","true");c.pega.ui.EventsEmitter.publishSync("MDCAction",d)}else a&&a.action&&"runflow"!==a.action.toLowerCase()&&pega.process.engine.removeTopLevelPages(),c.set("url",c.get("url").replace("/PRRestService/","/PRServlet/")),(b=pega.ui.ChangeTrackerMap.getTrackers())&&b.NONOSCOThread&&(pega.u.d.switchThread("NONOSCOThread"),pega.ui.ClientCache.init("NONOSCOThread")),a=A(a),pega.mobile.isSingleWebViewOfflinePegaMobileClient&&a.put("pxReqURI",pega.ctx.pxReqURI),b=a.get("pxReqURI"),
b=b.replace(b.substring(b.indexOf("!")+1),"NONOSCOThread"),a.put("pxReqURI",b),a.put("isRemoteCase","true"),a.put("UITemplatingStatus","Y"),b={},pega.u.d.ServerProxy.setDestination(pega.u.d.ServerProxy.DESTINATION.REMOTE),b.success=function(a){pega.u.d.modalDialog&&pega.u.d.bModalDialogOpen&&pega.u.d.modalDialog.hide();a=C(a.responseText);pega.ui.updatePegaServerAvailability(1);pega.ui.DCUtil.isFromNonOsco=!0;(a=pega.util.Dom.getElementsById("PEGA_HARNESS",a,"div"))&&0<a.length?(a=a[0],pega.ui.DCUtil.replace(a.parentNode)):
console.log("Harness not found. Invalid response from the server.");pega.u.d.gBusyInd&&pega.u.d.gBusyInd.hide()},b.failure=function(a){pega.u.d.isAppOfflineEnabled()&&(pega.u.d.ServerProxy.setDestination(pega.u.d.ServerProxy.DESTINATION.LOCAL),pega.u.d.switchThread("STANDARD"),pega.ui.ClientCache.init("STANDARD"));pega.u.d.gBusyInd&&pega.u.d.gBusyInd.hide();pega.ui&&pega.ui.DCUtil&&pega.ui.DCUtil.cancelTransition&&pega.ui.DCUtil.cancelTransition();console.error(a.status+": "+a.statusText);a=pega.u.d.fieldValuesList.get("CannotPerformWhenOffline");
l(a)},pega.u.d.asyncRequest("GET",a,b)},F=function(a){var c={},d=a.get("api");c.action=d;pega&&pega.ui&&pega.ui.DCUtil&&pega.ui.DCUtil.setActiveDocumentType&&pega.ui.DCUtil.setActiveDocumentType(d);switch(d.toLowerCase()){case "openassignment":case "openworkbyhandle":c.key=a.get("param");delete a.hashtable.param;break;case "showharness":case "display":c.label=a.get("name");c.className=a.get("ClassName");c.harnessName=a.get("HarnessName");c.preActivity=a.get("preActivityName");c.pzPrimaryPageName=
a.get("page");delete a.hashtable.name;delete a.hashtable.ClassName;delete a.hashtable.HarnessName;delete a.hashtable.preActivityName;delete a.hashtable.page;break;case "createnewwork":c.flowClass=a.get("param");c.className=a.get("param");c.flowName=a.get("FlowType");delete a.hashtable.param;delete a.hashtable.FlowType;break;case "openworkitem":c.workID=a.get("param");a.get("workpool")?(c.workPool=a.get("workpool"),delete a.hashtable.workpool):c.workPool=G.getCurrentWorkPool();delete a.hashtable.param;
break;case "openlanding":d=a.get("customParam");c.label=a.get("Name");c.className=a.get("className");c.harnessName=a.get("harnessName");c.action=a.get("Action");c.landingAction="openlanding";c.pzPrimaryPageName=a.get("page");delete a.hashtable.customParam;delete a.hashtable.Name;delete a.hashtable.className;delete a.hashtable.harnessName;delete a.hashtable.Action;delete a.hashtable.page;if("undefined"!=typeof d)for(var b in d)c[b]=d[b];break;case "activate":c.action="display";pega.ui.ChangeTrackerMap.getTrackerByThread(pega.ui.DCUtil.primaryThread).trackedPropertiesList.Declare_pyDisplay.pyDCDisplayState.pyActiveDocumentType=
"HOME";if(pega.u.d.centerPanelHarness)c.harnessName=pega.u.d.centerPanelHarness;else{var d=$(".screen-layout"),e="";b="";d&&0<d.length&&(d=d[0],(d=d.getAttribute("data-portalharnessinsname"))&&-1<d.indexOf("!")&&(d=d.split("!"),e=d[0],b=d[1]));if(""===e||""===b)e=window.strHarnessClass,b=window.strHarnessPurpose;c.className=e;c.harnessName=b;c.preActivity="";c.pzPrimaryPageName=""}break;case "reportdefinition":d=a.get("ParamKeys");c.harnessName="DisplayReport";c.className="Code-Pega-List";c.pyReportClass=
a.get("ReportClass");c.pyReportName=a.get("ReportName");c.pyShortcutHandle=a.get("ShortcutHandle");c.ReportAction=a.get("ReportAction");if(d){b=d.split("\x26");for(e in b)d=b[e].split("\x3d"),c[d[0]]=d[1];delete a.hashtable.ParamKeys}delete a.hashtable.ReportClass;delete a.hashtable.ShortcutHandle;delete a.hashtable.ReportAction;delete a.hashtable.ReportName}for(var f in a.hashtable)f&&""!==f&&(c[f]=a.hashtable[f]);return c},A=function(a){var c,d=pega.ui.HarnessContextMgr,b=d.get("url"),e=r.getPortalThreadName();
if(r.bIsDCSPA&&"activate"!==a.api)var f=D(),b=b.replace(e,f);b=new SafeURL_createFromEncryptedURL(b);b.remove("pzPrimaryPageName");b.remove("pzTransactionId");b.remove("pzFromFrame");r.bIsDCSPA&&b.remove("AJAXTrackID");b.put("pyActivity","@baseclass.doUIAction");b.put("isSDM","true");f=a.action.toLowerCase();if("display"===f.toLowerCase()){try{if(c=a.preActivityParams){c=JSON.parse(c);var n=c.preActivityDynamicParams;delete c.preActivityDynamicParams;a.preActivityParams=JSON.stringify(c);n&&(a.preActivityDynamicParams=
JSON.stringify(n))}}catch(H){}try{var g=a.model;if(g){var g=JSON.parse(g),l=g.pyDataTransformDynamicParams;delete g.pyDataTransformDynamicParams;a.model=JSON.stringify(g);l&&(a.pyDataTransformDynamicParams=JSON.stringify(l))}}catch(H){}}a.landingAction&&"openlanding"===a.landingAction?b.put("landingAction",f):"openworkbyurl"!==f.toLowerCase()&&b.put("action",f);for(var t in a)c=a[t],null!==c&&""!==c&&void 0!==c&&b.put(t,c);b.put("portalName",d.get("portalName"));b.put("portalThreadName",e);b.put("tabIndex",
1);return b};return{offlineHandler:function(a,c){c=function(){};if(pega.u.d.isFormDirty(!0))pega.u.d.gBusyInd.hide(),pega.u.d.ServerProxy.resetDestination(),pega.ui&&pega.ui.DCUtil&&pega.ui.DCUtil.cancelTransition&&pega.ui.DCUtil.cancelTransition();else{pega.ui.HarnessContextMap.set("gDirtyOverride",null);var d=a.get("accessFromServer");d&&a.remove("accessFromServer");var b=F(a),e=pega.u.d.getAllMDCContainers();if(b.mdcTarget&&"dynamicContainer"!==b.mdcTarget)for(var f=0;f<e.length;f++){var n=e[f];
$(n).is(":visible")&&(n=n.getAttribute("data-mdc-id"),a.put("mdcTarget",n))}var e=b.action,g=function(){E(b)};"runflow"!==e.toLowerCase()&&"display"!==e.toLowerCase()&&pega.process.engine.removeTopLevelPages();f={runflow:["Work-.NewCovered","Work-.AddCovered"]};(!f[e.toLowerCase()]||-1!==f[e.toLowerCase()].indexOf(b.pyActivity)||pega.offline.NetworkStatus.isDataNetworkAvailable())&&pega.ui.rdlMasterDetails&&pega.ui.rdlMasterDetails.hideDetails({},!0);switch(e.toLowerCase()){case "openassignment":d=
b.key;a=a.get("offlineEnabled");"false"===a?g():"true"===a?b.mdcTarget?pega.mobile.isMultiWebViewPegaMobileClient&&pega.redux.store.dispatch(pega.redux.actions(pega.redux.actionTypes.ADD,b)):(pega.u.d.switchThread(pega.u.d.baseThreadName),pega.process.engine.openAssignment(d,c,g,b)):b.mdcTarget?pega.mobile.isMultiWebViewPegaMobileClient&&pega.redux.store.dispatch(pega.redux.actions(pega.redux.actionTypes.ADD,b)):pega.process.engine.openAssignment(d,c,g,b);break;case "display":case "reportdefinition":if(b.mdcTarget&&
"dynamicContainer"!==b.mdcTarget)pega.redux&&pega.mobile.isMultiWebViewPegaMobileClient&&pega.redux.store.dispatch(pega.redux.actions(pega.redux.actionTypes.ADD,b));else{var l=b.harnessName;(c=b.className)?"true"===d||pega.ui.DCUtil.isActionFromNonOsco?g():(pega.process.engine.removeTopLevelPages(),pega.u.d.ServerProxy.displayHarness(l,c)):(a=a.get("triggerDeltaSync"),"undefined"==typeof a&&(a="true"),pega.ui.DCUtil.isFromNonOsco&&pega.offline&&pega.offline.DataSync&&"true"===a&&(pega.ui.DCUtil.isFromNonOsco=
!1,pega.u.d.switchThread(pega.ui.DCUtil.primaryThread),"function"===typeof pega.offline.DataSync.start&&pega.offline.DataSync.start()),pega.u.d.ServerProxy.doAction(new SafeURL,new SafeURL,{offline:function(a,b,c){pega.offline.clientstorehelper.getSectionStream(null,l,function(a){pega.u.d.setPrimaryPage("pyDisplayHarness");c.success(a)},function(a){console.log("Harness which is trying to accessed is not available in local store")})}},{success:function(a){pega.ui.DCUtil.replace(a.responseText);pega.u.d.gBusyInd&&
pega.u.d.gBusyInd.hide()},failure:function(a){pega.u.d.gBusyInd&&pega.u.d.gBusyInd.hide();pega.ui&&pega.ui.DCUtil&&pega.ui.DCUtil.cancelTransition&&pega.ui.DCUtil.cancelTransition();console.log("DOMLoadCallback failure.")}}))}break;case "createnewwork":(pega.mobile.isMultiWebViewOfflinePegaMobileClient?pega.mobile.support.getPortalWindow().pega.process.metadata.caseCache[b.className]:pega.process.metadata.caseCache[b.className])?b.mdcTarget?pega.mobile.isMultiWebViewOfflinePegaMobileClient&&pega.redux.store.dispatch(pega.redux.actions(pega.redux.actionTypes.ADD,
b)):(pega.u.d.baseThreadName&&pega.u.d.switchThread(pega.u.d.baseThreadName),b.flowParamNames=b.flowParamNames?b.flowParamNames:"",pega.process.engine.createNewWorkWithParams(b,c,c)):g();break;case "openworkbyhandle":a=a.get("offlineEnabled");"false"===a?g():b.mdcTarget&&pega.mobile.isMultiWebViewPegaMobileClient?pega.offline.clientstorehelper.getWorkItem(b.key,function(a){b.offlineEnabled="true";pega.redux.store.dispatch(pega.redux.actions(pega.redux.actionTypes.ADD,b))},function(a){b.offlineEnabled=
"false";g()},{source:"client"}):pega.process.engine.openWorkByHandle(b.key,c,g);break;case "refresh":pega.process.engine.refresh(c,c);break;case "runflow":if(b.pyActivity)switch(b.pyActivity){case "Work-.NewCovered":b.mdcTarget&&pega.mobile.isMultiWebViewOfflinePegaMobileClient?(a={flowClass:b.InsClass,flowName:b.FlowType,action:"createNewCoveredWork",source:"webview"},pega.process.engine.createNewCoveredWorkActionWithParams(a,c,c)):pega.process.engine.createNewCoveredWork(b.InsClass,b.FlowType,c,
c);break;case "Work-.AddCovered":b.mdcTarget&&pega.mobile.isMultiWebViewOfflinePegaMobileClient?(a=Object.assign(b,{action:"addCoveredWork",source:"webview"}),delete a.mdcTarget,pega.process.engine.addCoveredWork(a,c,c)):pega.process.engine.addCoveredWork(b,c,c);break;case "Work-.StartNewFlow":b.mdcTarget&&pega.mobile.isMultiWebViewOfflinePegaMobileClient&&(a=Object.assign(b,{action:"startNewFlow",source:"webview"}),delete a.mdcTarget);pega.process.engine.startNewFlow(b,c,g);break;default:E(b)}}}},
onlineHandler:function(a,c){c=pega.ui.HarnessContextMgr;if("openRule"!==a.get("api").substring(0,8)&&(a=F(a),c.get("baseThreadName")&&r.switchThread(c.get("baseThreadName")),!pega.u.d.isSingleMDCDoc||!pega.u.d.closeOnlyMDCDocs())){if("dynamicContainer"===a.mdcTarget&&(pega.ctxmgr.setRootDocumentContext(),!pega.ctx.bIsDCSPA)){if(w(a))return;pega.u.d.closeOnlyMDCDocs(null,!0,!0,!0)}a.mdcTarget&&"dynamicContainer"!==a.mdcTarget?pega.redux?pega.redux.store.dispatch(pega.redux.actions(pega.redux.actionTypes.ADD,
a)):pega.mobile&&pega.mobile.support&&pega.mobile.support.getPMCRedux()&&(c=pega.mobile.support.getPMCRedux(),c.store.dispatch(c.actions(c.actionTypes.ADD,a))):pega.ctx.bIsDCSPA?v(a):(a=A(a),pega.desktop.navigateTo(a.toURL()))}},singlePageRenderer:v}}();r.UIActionRouter=l})(pega);
var dynC={retainLock:!1,cleanupForDC:function(a){var c="";if(!this.pyDeleteDocumentPgCompleted&&"undefined"!=typeof Grids&&Grids){var d=pega.ctx.gridsMap,b;for(b in d)if(d[b].bFilterable&&(c+=""==c?d[b].gridFilterPage:"\x26"+d[b].gridFilterPage),d[b].bTreegrid&&d[b].RDContPage)var e=d[b].RDContPage,e=e+("\x26pgRepPg"+e.substring(6)),c=c+(""==c?e:"\x26"+e)}if(window!=top||pega.ctx.bIsDCSPA)b=SafeURL_createFromURL(pega.u.d.url),d=new SafeURL,delete b.hashtable.pzTransactionId,pega.ui.HarnessContextMap.getCurrentHarnessContext().getProperty("bExpressionCalculation")&&
b.put("pyRemCtlExpProp","true"),(e=document.getElementById("pzHarnessID"))&&b.put("pzHarnessID",e.value),""!=c&&d.put("pyPagesToRemove",c),pega.ui.ChangeTrackerMap.getTracker().id&&b.put("AJAXTrackID",pega.ui.ChangeTrackerMap.getTracker().id),b.put("retainLock",pega.u.d.retainLock),void 0!=pega.u.d.isRecentItemRemoved&&b.put("isRecentItemRemoved",pega.u.d.isRecentItemRemoved),void 0!=pega.u.d.key&&b.put("key",pega.u.d.key),void 0!=pega.u.d.elementName&&b.put("elementName",pega.u.d.elementName),e=
"true",a&&(a.skipDCCleanUp&&(e="false"),a.saveAsOnCurrentThread&&b.put("saveAsOnCurrentThread",a.saveAsOnCurrentThread),a.clearThreadState&&b.put("clearThreadState",a.clearThreadState)),b.put("dcCleanup",e),b.put("pyActivity","DoClose"),(c=pega.desktop.support.getDesktopWindow())||(c=window),"true"!=e||pega.ctx.bIsDCSPA||(pega.u.d.skipCleanup=!0,pega.u.d.harnessOnUnload(),pega.u.d.onUnloads=[],pega.u.d.skipUnloads=!0),b=c.gIsMultiTenantPortal&&"function"==typeof pega.u.d.getAbsoluteURL?pega.u.d.getAbsoluteURL(b):
b.toURL(),c.pega.util.Connect.asyncRequest("GET",b,a,d.toEncodedPostBody()),this.pyDeleteDocumentPgCompleted=!0},registerDCCTNotifyCallback:function(a,c,d,b){"function"==typeof a&&(pega.u.d.dcctNotifyCallback?(pega.u.d.dcctNotifyCallback[pega.u.d.dcctNotifyCallback.length]=a,pega.u.d.dcctNotifyCallbackContext[pega.u.d.dcctNotifyCallbackContext.length]=c,pega.u.d.dcctNotifyCallbackData[pega.u.d.dcctNotifyCallbackData.length]=d,pega.u.d.dcctNotifyTriggerPropertyList[pega.u.d.dcctNotifyTriggerPropertyList.length]=
b):(pega.u.d.dcctNotifyCallback=[a],pega.u.d.dcctNotifyCallbackContext=[c],pega.u.d.dcctNotifyCallbackData=[d],pega.u.d.dcctNotifyTriggerPropertyList=[b]))},notifyDCForCTChanges:function(a){var c=!0;if("object"==typeof a.changedPropertiesList&&0<a.changedPropertiesList.length)for(var d=0;d<a.changedPropertiesList.length;d++)if("Declare_pzRecentsCache.pyClearedRecentItems"==a.changedPropertiesList[d]){c=a.trackedPropertiesList.Declare_pzRecentsCache.pyClearedRecentItems;delete a.trackedPropertiesList.Declare_pzRecentsCache.pyClearedRecentItems;
a.changedPropertiesList.splice(d,1);pega.desktop.updateRecentList(c);c=!1;break}if(c&&a.currentCTJSONObj&&a.currentCTJSONObj.RequestorChangeSet)for(var d=a.currentCTJSONObj.RequestorChangeSet.Values||[],b=pega.u.d.getPortalThreadName(),e=!1,c=0;c<d.length&&!e;c++){var h=d[c],f;for(f in h){if(e)break;if(f===b){var k=h[f],l;for(l in k){if(e)break;var m=k[l],g;for(g in m){var n=m[g];if("Declare_pzRecentsCache"===g&&n.pyClearedRecentItems){pega.desktop.updateRecentList(n.pyClearedRecentItems);e=!0;break}}}}}}if(pega.u.d.dcctNotifyCallback&&
0<pega.u.d.dcctNotifyCallback.length)for(f=0;f<pega.u.d.dcctNotifyCallback.length;f++)if(pega.u.d.dcctNotifyTriggerPropertyList&&0!=pega.u.d.dcctNotifyTriggerPropertyList[f].length||"object"==typeof a.changedPropertiesList&&0<a.changedPropertiesList.length&&pega.u.d.dcctNotifyCallback[f].call(pega.u.d.dcctNotifyCallbackContext[f],a,pega.u.d.dcctNotifyCallbackData[f]),"object"==typeof pega.u.d.dcctNotifyTriggerPropertyList[f]&&0<pega.u.d.dcctNotifyTriggerPropertyList[f].length&&"object"==typeof a.changedPropertiesList&&
0<a.changedPropertiesList.length)for(c=0;c<pega.u.d.dcctNotifyTriggerPropertyList[f].length;c++)for(d=0;d<a.changedPropertiesList.length;d++)if(pega.u.d.dcctNotifyTriggerPropertyList[f][c]==a.changedPropertiesList[d]){pega.u.d.dcctNotifyCallback[f].call(pega.u.d.dcctNotifyCallbackContext[f],a,pega.u.d.dcctNotifyCallbackData[f]);break}},_isJSResizeEnabled:function(){var a=document.getElementById("workarea"),c=!1,d=document.getElementById("layout-doc");if(d&&d.getAttribute("class")&&d.getAttribute("class").match("yui-layout-doc"))return!1;
a&&(c=a.getAttribute("data-responsiveDC"));return"true"==c?!0:!1},_isDC:function(){return this.isDcExists()},isDcExists:function(){return!!document.getElementById("workarea")},getDocTitle:function(a){a=pega.desktop.support.getDesktopWindow().document.querySelector("#"+(a+"Ifr"));return a.contentDocument&&a.contentDocument.title?a.contentDocument.title:""},getCustomTitle:function(a,c){if(a.newValue&&a.newValue.GadgetName)return a.newValue.get("element").innerText;if(c){if(a.label)return a.get("element").innerText;
if(a.GadgetName)return pega.u.d.getDocTitle(a.GadgetName)}else if(pega.u.d.portalDefaultTitle)return pega.u.d.portalDefaultTitle},updateWindowTitle:function(a,c){if(!(!1===pega.u.d.SET_WINDOW_TITLE||a.newValue&&a.prevValue&&a.newValue===a.prevValue))if("undefined"!==typeof updateWindowTitleWrapper&&"function"===typeof updateWindowTitleWrapper&&updateWindowTitleWrapper)try{updateWindowTitleWrapper(a)}catch(e){}else{var d=pega.desktop.support.getDesktopWindow(),b;d.gIsCustomTabHeaderEnabled?b=pega.u.d.getCustomTitle(a,
c):a.newValue&&a.newValue.GadgetName?b=pega.u.d.getDocTitle(a.newValue.GadgetName):c&&a.GadgetName?b=pega.u.d.getDocTitle(a.GadgetName):pega.u.d.portalDefaultTitle&&(b=pega.u.d.portalDefaultTitle);b&&(d.document.title=b)}}};pega.lang.augmentObject(pega.ui.Doc.prototype,dynC);dynC=null;
var docDeprecated={actionName:"",cpm:!1,explorerFormExecuteAction:function(a,b){switch(a){case "FORM":case "SPLIT":return"FAILURE";case "ACTIVATE":break;case "REFRESH":pega.u.d.isFormDirty()||window.location.reload();break;case "CLOSE":oUrl=new SafeURL("DoClose");oUrl.put("pzPrimaryPageName","pyWorkPage");this.asyncRequest("POST",oUrl);break;case "PRINT":pega.u.d.doPrintDiv("HARNESS_CONTENT");break;case "DEACTIVATE":break;case "BUTTONACTION":a=b.get("name");b=b.get("action");"close"==a&&pega.u.d.doButtonAction(a,
b);break;default:return"FAILURE"}return"SUCCESS"}};pega.lang.augmentObject(pega.ui.Doc.prototype,docDeprecated);
var accordion={panelAccorHeight:new Hashtable,AccLen:[],initializeAccor:function(){var a=pega.util.Dom.getElementsById("PEGA_ACCORDION");if(null!=a&&null!=a)for(var b=a.length,c=0;c<b;c++,pega.u.d.tabViewIndex++)pega.u.d.AccLen.push(pega.u.d.tabViewIndex),a[c].id="PEGA_ACCORDION"+pega.u.d.tabViewIndex,pega.u.d.AccordionView(a[c])},markAccordionErrors:function(){for(var a=pega.u.d.AccLen.length,b=0;b<a;b++){var c=document.getElementById("PEGA_ACCORDION"+pega.u.d.AccLen[b]);if(c)for(var c=c.getElementsByTagName("ul")[0].childNodes,
e=c.length,d=0;d<e;d++)if(1==c[d].nodeType&&pega.util.Dom.getElementsById("PegaRulesErrorFlag",c[d])){var k=document.createElement("div");k.style.display="block";k.className="iconErrorTabsDiv";k.innerHTML="\x3cspan class\x3d'iconErrorTabs' title\x3d'The Section Contains Errors' id\x3d'PegaRULESErrorFlag'/\x3e";var g=c[d].getElementsByTagName("tr")[2].getElementsByTagName("td")[0];g.insertBefore(k,g.getElementsByTagName("*")[0])}}},AccordionView:function(a){var b=new pega.ui.TabView(a);if(null!=b){var c=
b.get("tabs").length,e=0,d=0,k,g=null,f=pega.u.d.fieldValuesList.get("CLICK_TO_LOAD_TEXT"),p=a.getAttribute("defaultTab"),m=0,r=!1,l=a.getElementsByTagName("ul")[0];b._isSectionAccordion=l&&l.getAttribute("role")?!0:!1;pega.u.d&&pega.u.d.portal&&(g=pega.u.d.portal.getLayoutUnit(a));g&&(e=g.offsetHeight-a.offsetHeight,pega.u.d.panelAccorHeight.put(g.id,e),d=a.offsetWidth,k=pega.util.Dom.getElementsById("pyCurrentSpace",a),this.portal.layoutObj.getUnitById(g.id).on("resize",pega.u.d.resizeAccordion),
pega.util.Event.isIE&&pega.util.Dom.setStyle(a,"width",g.parentNode.offsetWidth));for(l=c-1;0<=l;l--){var h=b.getTab(l),q=h.get("contentEl"),n=h.get("element");n.id&&b._isSectionAccordion&&pega.util.Event.addListener(n,"keydown",pega.u.d.accordionAccessibilityHandler);h.AnimHeight=0;h.labelValue="";h.panelId=null;if(g){h.AnimHeight=e;h.panelId=g.id;var n="",t=h.getElementsByTagName("A");t&&((n=t[0].getAttribute("accorTitle"))&&(n=trim(n)),t[0].title=f+" "+n);(h.labelValue=n)&&0<=n.toUpperCase().indexOf("WORK")&&
(this.portal.accorIndex=l,this.portal.accorObj=b);h.set("title",f+" "+n)}else h.set("title",pega.u.d.expandCollapseText);q.title="";h.get("active")||(h.get("element").className="unselected",0!=h.AnimHeight&&(pega.util.Dom.setStyle(q,"height",h.AnimHeight),pega.util.Dom.setStyle(q,"width",d),g.style.overflow="hidden",g.isPreviousLayoutAccordion="true",q.style.overflow="auto",n=q,pega.util.Event.isIE?(q.style.overflowX="auto",q.style.overflowY=n.scrollHeight<n.clientHeight?"hidden":"auto",pega.util.Dom.setStyle(g.parentNode,
"overflow","auto")):q.style.overflow="auto"),r||h.get("id")!="Tab"+p&&0!=l||(r=!0,m=l,0!=h.AnimHeight&&k&&(k[0].value=h.labelValue,pega.util.Event.fireEvent(k[0],"change")),pega.util.Event.isIE&&(n=pega.u.d.getHeight(q),0==h.AnimHeight&&pega.util.Dom.setStyle(q,"height",n)),q.parentNode.removeChild(q),h.appendChild(q),h.set("contentAppended","true")))}b.addListener("activeTabChange",this.AccorActiveTabChange,{tabGrpDiv:a,tabGrp:b});0!=c&&(a={tabGrpDiv:a,tabGrp:b,secType:"accordion"},pega.u.d.harnessInit&&
(a.focusElement=pega.u.d.initFocusOnFirstInput),b.on("activeTabChange",this.setActiveTabIndex,a),b.set("activeIndex",m));pega.u.d.setAriaAttributes(b,!0);b.contentTransition=this.AccorContentTransition}},AccorActiveTabChange:function(a,b){var c=a.newValue,e=a.prevValue;c.get("element").className="selected";a=null;pega.u.d&&pega.u.d.portal&&(a=pega.u.d.portal.getLayoutUnit(b.tabGrpDiv));a?(e&&pega.u.d.SetAccorAnchorTitle(e,!0),pega.u.d.SetAccorAnchorTitle(c,!1),c=c.get("contentEl"),pega.util.Dom.setStyle(c,
"width",a.offsetWidth-c.offsetLeft)):(e&&e.set("title",pega.u.d.expandCollapseText),c.set("title",""));pega.u.d.setAriaAttributes(b.tabGrp,!0)},accordionAccessibilityHandler:function(a){var b;b="37"==a.keyCode||"39"==a.keyCode||"40"==a.keyCode||"38"==a.keyCode||"32"==a.keyCode||"13"==a.keyCode?!0:!1;if(b){b=pega.util.Event.getTarget(a);if("LI"!=b.tagName){for(;null!=b&&"ACCORANCHOR"!=b.id;)b=b.parentNode;b&&"ACCORANCHOR"==b.id&&(b=b.parentNode)}if(b)switch(a.type){case "keydown":var c="37"==a.keyCode||
"38"==a.keyCode?-1:"39"==a.keyCode||"40"==a.keyCode?1:0;0===c?(b.getElementsByTagName("A")[0].click(),pega.util.Event.preventDefault(a)):(a=pega.u.d.getNextOperableLi(c,b),null!=a&&a.getElementsByTagName("a")[0].focus())}}},SetAccorAnchorTitle:function(a,b){var c=a.getElementsByTagName("A"),e=pega.u.d.fieldValuesList.get("CLICK_TO_LOAD_TEXT");c&&(b?(a.set("title",e+" "+a.labelValue),c[0].title=e+" "+a.labelValue):(a.set("title",""),c[0].title=""))},AccorContentTransition:function(a,b){var c=a.get("element").getAttribute("contentAppended");
if(!c||"false"==c){var c=a.get("contentEl"),e={};try{if(e=$("#"+c.id+" textarea[id^\x3d'PEGACKEDITOR']")){for(var d=0;d<e.length;d++)CKEDITOR.instances[e[d].id].destroy();for(var k=pega.u.d.harnessElements,d=0;d<k.length;d++){var g=k[d].element;g&&1==g.isRichTextEditor&&"destroyed"==g.myEditor.status&&(pega.u.d.harnessElements.splice(d,1),d--)}}}catch(t){console.log(t)}c.parentNode.removeChild(c);a.appendChild(c);try{if(e)for(d=0;d<e.length;d++){var f=e[d],p=f.getAttribute("showEditorInReadOnly"),
m=f.getAttribute("usid"),r=f.getAttribute("name"),l=f.getAttribute("data-config"),h=pega.control.eventParser.parseJSON(l),q=f.getAttribute("data-advConfig"),n=pega.control.eventParser.parseJSON(q);pega.ui.rte=new pega.ui.RichTextEditor(r,f.id,m,p,h,n)}}catch(t){console.log(t)}a.get("element").setAttribute("contentAppended","true");pega.util.Event.isIE&&(d=pega.u.d.getHeight(c),0==a.AnimHeight&&pega.util.Dom.setStyle(c,"height",d))}a.anim&&a.anim.isAnimated()&&a.anim.stop(!0);b.anim&&b.anim.isAnimated()&&
b.anim.stop(!0);b.get("element").className="unselected";pega.u.d.AnimateAccordion(b,"collapse");pega.u.d.AnimateAccordion(a,"expand")},AnimateAccordion:function(a,b){var c=a.AnimHeight;if(0!=c&&null!=a.panelId){var e=pega.u.d.panelAccorHeight.get(a.panelId);e!=c&&(c=e,a.AnimHeight=e)}e=a.get("contentEl");if(!pega.util.Event.isIE)var d=pega.u.d.getHeight(e);a.anim=a.anim||new pega.util.Anim(e);pega.util.Event.isIE&&(d=pega.u.d.getHeight(e));"expand"==b?(a.anim.onStart.subscribe(this.newTabShowContent,
a,a),a.anim.onComplete.subscribe(this.newTabHideContent,a,a)):"collapse"==b&&(a.divHeight=d,a.anim.onComplete.subscribe(this.oldTabHideContent,a,a));"expand"==b?a.anim.attributes.height=0==c?{from:0,to:d}:{from:0,to:c}:"collapse"==b&&(a.anim.attributes.height=0==c?{from:d,to:1}:{from:c,to:1});a.anim.useSeconds=!1;a.anim.duration=pega.u.d.AccordionAnimSpeed;e.style.overflow="hidden";a.anim.animate()},newTabHideContent:function(){var a=pega.u.d.getFirstChildObj(this.get("contentEl"));0!=this.AnimHeight?
pega.util.Event.isIE?(this.get("contentEl").style.overflowX="auto",a.scrollHeight<a.clientHeight?this.get("contentEl").style.overflowY="hidden":this.get("contentEl").style.overflowY="auto"):this.get("contentEl").style.overflow="auto":(this.get("contentEl").style.overflow="visible",a.style.overflow="visible");this.anim.onComplete.unsubscribe(pega.u.d.newTabHideContent);0==this.AnimHeight&&pega.u.d.resizeHarness();0!=this.AnimHeight&&(a=pega.util.Dom.getElementsById("pyCurrentSpace"))&&(a[0].value=
this.labelValue,pega.util.Event.fireEvent(a[0],"change"))},newTabShowContent:function(){this.set("contentVisible",!0);this.anim.onStart.unsubscribe(pega.u.d.newTabShowContent)},oldTabHideContent:function(){this.set("contentVisible",!1);pega.util.Event.isIE||(0==this.AnimHeight?pega.util.Dom.setStyle(this.get("contentEl"),"height",this.divHeight+"px"):pega.util.Dom.setStyle(this.get("contentEl"),"height",this.AnimHeight+"px"));this.anim.onComplete.unsubscribe(pega.u.d.oldTabHideContent)},getHeight:function(a){var b=
pega.util.Dom,c=!1;if("none"==a.style.display){var c=!0,e=b.getStyle(a,"position"),d=b.getStyle(a,"visiblity");b.setStyle(a,"position","absolute");b.setStyle(a,"visiblity","hidden");b.setStyle(a,"display","block");b.setStyle(a,"height","auto")}var k=a.offsetHeight;"auto"==k&&(b.setStyle(a,"zoom","1"),k=a.clientHeight);c&&(b.setStyle(a,"display","none"),b.setStyle(a,"visiblity",d),b.setStyle(a,"position",e));return parseInt(k)},resizeAccordion:function(){for(var a=[],b=pega.u.d.tabViewIndex,c=null,
e=0;e<b;e++)c=document.getElementById("PEGA_ACCORDION"+e),null!=c&&a.push(c);var c=a.length,d=null;if(0==c&&pega.u.d&&pega.u.d.portal&&(e=pega.u.d.portal.getLUs())&&e.units)for(var b=e.units.length,k=0;k<b;k++){var g=document.getElementById(e.units[k].body),f=g.getElementsByTagName("DIV");if(f&&"true"==g.isPreviousLayoutAccordion)for(var p=0;p<f.length&&(!f[p].id||!f[p].id.match(/^PEGA_ACCORDION[\d]*/));p++)p==f.length-1&&g.style&&"hidden"==g.style.overflow&&(g.style.overflow="",g.isPreviousLayoutAccordion=
"false")}for(e=c-1;0<=e;e--)for(c=a[e],pega.u.d&&pega.u.d.portal&&(d=pega.u.d.portal.getLayoutUnit(c)),pega.util.Event.isIE&&d&&pega.util.Dom.setStyle(c,"width",d.parentNode.offsetWidth),b=c.getElementsByTagName("ul")[0].childNodes,k=b.length,g=0;g<k;g++)if(1==b[g].nodeType&&"LI"==b[g].tagName)for(f=b[g].childNodes,p=0;p<f.length;p++)if(1==f[p].nodeType&&"DIV"==f[p].tagName&&"block"==f[p].style.display){var m=f[p],f=0,r=pega.u.d.getFirstChildObj(m);pega.util.Event.isIE||d||(f=this.getHeight(r),pega.u.d.inStandardsMode&&
(f=f+parseInt(pega.util.Dom.getStyle(m,"paddingTop"))+parseInt(pega.util.Dom.getStyle(m,"paddingBottom"))));var l=new pega.util.Anim(m),h=function(){d&&(pega.util.Event.isIE?(m.style.overflowX="auto",m.style.overflowY=r.scrollHeight<r.clientHeight?"hidden":"auto"):m.style.overflow="auto");l.onComplete.unsubscribe(h)};l.useSeconds=!1;l.duration=pega.u.d.AccordionAnimSpeed;d?(pega.util.Event.isIE&&pega.util.Dom.setStyle(c,"width",d.parentNode.offsetWidth),f=d.offsetHeight-c.offsetHeight+m.offsetHeight,
pega.util.Dom.setStyle(m,"width",d.offsetWidth-m.offsetLeft)):pega.util.Event.isIE&&!d&&(f=this.getHeight(r),pega.u.d.inStandardsMode&&(f=f+parseInt(pega.util.Dom.getStyle(m,"paddingTop"))+parseInt(pega.util.Dom.getStyle(m,"paddingBottom"))));d&&1<f&&pega.u.d.panelAccorHeight.put(d.id,f);l.onComplete.subscribe(h,l,l);l.attributes.height={to:f};l.animate();break}}};pega.lang.augmentObject(pega.ui.Doc.prototype,accordion);
var expandC={expandDivNode:null,expandHeader:function(a,b,c,d){b=b||window.event;var e=pega.util.Event.getTarget(b),f=pega.ctx.dom.$(e).closest(".header");if(!f||0==f.length||f[0].isEqualNode(a))if(!d||32==b.keyCode||13==b.keyCode){d=e;for(f=0;d&&7>=f;){if(d.tagName&&"button"==d.tagName.toLowerCase()){e=d;break}d=d.parentNode;f++}if(!e.tagName.match(/^(input|select|textarea|button|a|option)$/gi)){if("i"==e.tagName.toLowerCase()||"img"==e.tagName.toLowerCase())if(e.getAttribute("data-ctl")&&"Icon"==
e.getAttribute("data-ctl")||e.getAttribute("data-click"))return;c?this.loadContainer(a,b,c):this.expandIt(a,b);this.setARIAAttributesForHeader(a,b)}}},setARIAAttributesForHeader:function(a,b){b=a.getAttribute("aria-label");var c;"undefined"==typeof gStrClickToExpandText&&(gStrClickToExpandText="");"undefined"==typeof gStrClickToCollapseText&&(gStrClickToCollapseText="");null!=b&&""!=b&&(b=b.replace(gStrClickToExpandText,""),b=b.replace(gStrClickToCollapseText,""));if("TABLE"==a.tagName)var d=pega.util.Dom.getElementsById("EXPAND-PLUSMINUS",
a)[0];else"DIV"===a.tagName&&(d=pega.util.Dom.getFirstChild(a),c=a.querySelector(".header-content\x3e.header-title\x3e.dl-accordion-btn"));if("DIV"==a.tagName&&-1!=a.parentNode.className.indexOf("Expanded")||"TABLE"==a.tagName&&-1!=a.className.indexOf("Expanded")){if(c){c.setAttribute("aria-expanded",!0);return}a.setAttribute("aria-expanded",!0);a.setAttribute("aria-label",gStrClickToCollapseText+b);d&&""!=d.title&&d.setAttribute("title",gStrClickToCollapseText+b)}else{if(c){c.setAttribute("aria-expanded",
!1);return}a.setAttribute("aria-expanded",!1);a.setAttribute("aria-label",gStrClickToExpandText+b);d&&""!=d.title&&d.setAttribute("title",gStrClickToExpandText+b)}a.blur();c=a.style.width;a.style.width="100px";a.focus();a.style.width=c},expandIt:function(a,b){b=void 0==b?window.event:b;var c,d,e=pega.util.Dom.setStyle,f=!1,h;null==a&&(a=pega.util.Event.getTarget(b));h=a;d=pega.u.d.findParentTable(a);if(null!=a){var g=a.className;"RULE_KEY"==a.id&&null!=a.getAttribute("node_type")&&"HEADER"==a.getAttribute("node_type")&&
null!=g&&-1==g.indexOf("header-bar")&&(0<=a.className.indexOf("titleBarBorderExpanded")?a.className=a.className.replace("titleBarBorderExpanded","titleBarBorderCollapsed"):a.className=a.className.replace("titleBarBorderCollapsed","titleBarBorderExpanded"))}for(;"EXPAND-OUTERFRAME"!=a.id;)if(a=a.parentNode,null==a)return;for(g=a;"RULE_KEY"!=g.id&&(g=g.parentNode,null!=g););for(;g&&"TR"!=g.tagName&&(g=g.parentNode,null!=g););for(;null!=h&&"smartInfoBody"!=h.id;)if(h=h.parentNode,null!=h&&"smartInfoBody"==
h.id){f=!0;break}(c=pega.ctx.dom.$(pega.util.Event.getTarget(b)).closest("[id\x3d'EXPAND-PLUSMINUS']").siblings("[id\x3d'EXPAND-INNERDIV']"))&&null!=c&&1!=c.length&&(c=pega.util.Dom.getElementsById("EXPAND-INNERDIV",a));null!=c&&null!=c.length&&(c=c[0]);a=pega.util.Dom.getElementsById("EXPAND-PLUSMINUS",a);h=null;null!=a&&null!=a.length&&(a=a[0],h=a.className);b=pega.util.Dom.getElementsById("EXPAND-INDICATOR",c);null!=b&&null!=b.length&&(b=b[b.length-1]);if(f){var f=g=!1,k=c.style.visibility,l=c.style.display;
""==k?"none"==l?g=!0:""==l&&(f=!0):"visible"==k?"block"==l?g=!0:f=!0:"hidden"==k&&("none"==l?g=!0:f=!0);if(g)if("none"==l){c.style.display="block";c.style.visibility="visible";g=pega.ctx.dom.getElementsByTagName("textarea",c);f=g.length;for(c=0;c<f;c++)g[c].cols=47;null!=a&&(null!=a.getAttribute("name")&&null!=h?a.className=h.replace(/Collapsed/gi,"Expanded"):a.innerHTML="-\x26nbsp;");null!=b&&(b.value="true");pega.u.d.expandAllStyles(a)}else c.style.visibility="hidden",c.style.display="none",(g=
pega.util.Dom.getElementsById("smartInfoBody",document))&&g.length&&(g=g[0]),e(g,"overflow",""),null!=a&&(null!=a.getAttribute("name")&&null!=h?a.className=h.replace(/Expanded/gi,"Collapsed"):a.innerHTML="+"),null!=b&&(b.value="false"),pega.u.d.collapseAllStyles(a);else f&&("hidden"==k?(c.style.visibility="",c.style.display="",null!=a&&(null!=a.getAttribute("name")&&null!=h?a.className=h.replace(/Collapsed/gi,"Expanded"):a.innerHTML="-\x26nbsp;"),null!=b&&(b.value="true"),pega.u.d.expandAllStyles(a)):
(c.style.visibility="hidden",c.style.display="",null!=a&&(null!=a.getAttribute("name")&&null!=h?a.className=h.replace(/Expanded/gi,"Collapsed"):a.innerHTML="+"),null!=b&&(b.value="false"),pega.u.d.collapseAllStyles(a)))}else if("none"==pega.util.Dom.getStyle(c,"display")){e(c,"display","");if(g)for(f=pega.ctx.dom.getElementsByTagName("TD",g),k=f.length,c=0;c<k;c++)f[c].parentNode==g&&f[c].getAttribute("prevHeight")&&e(f[c],"height",f[c].getAttribute("prevHeight"));null!=a&&(null!=a.getAttribute("name")&&
null!=h?a.className=h.replace(/Collapsed/gi,"Expanded"):a.innerHTML="-\x26nbsp;","undefined"!=typeof pega.ui.textarea&&pega.ui.textarea.resizeAllExpandedTextAreas(!0),null!=b&&(b.value="true"),pega.u.d.expandAllStyles(a))}else{e(c,"display","none");if(g)for(f=pega.ctx.dom.getElementsByTagName("TD",g),k=f.length,l=pega.util.Dom.getStyle(a,"height"),c=0;c<k;c++){var m=f[c],n=m.style.height;m.parentNode==g&&""!=n&&(m.setAttribute("prevHeight",n),a&&e(m,"height",l))}null!=a&&(null!=a.getAttribute("name")&&
null!=h?a.className=h.replace(/Expanded/gi,"Collapsed"):a.innerHTML="+",null!=b&&(b.value="false"),pega.u.d.collapseAllStyles(a))}d=pega.util.Dom.getElementsById("EXPAND-SUMMARY-TD",d);null!=d&&(null!=d.length&&(d=d[0]),"none"==pega.util.Dom.getStyle(d,"display")?e(d,"display",""):e(d,"display","none"));window.postExpand&&postExpand();pega.u.d.resizeHarness()},toggleExpandCollapse:function(a){a=void 0==a?window.event:a;pega.util.Event.stopEvent(a);var b=0<pega.ctx.dom.$(a.target).parents("[class^\x3d'tabbed_']").length?
pega.ctx.dom.$(a.target).parents("[class^\x3d'tabbed_']")[0]:document,c=pega.util.Dom.getElementsById("EXPAND-INNERDIV",b),b=pega.util.Dom.getElementsById("EXPAND-PLUSMINUS",b),d=pega.util.Event.getTarget(a);if(null!==c&&null!==c.length)for(var e=0;e<c.length;e++)if(c[e].parentElement&&c[e].parentElement.contains(d)){c=c[e];break}if(d&&null==d.getAttribute("isExpanded")){e=!0;if(null!=c)if(null!=c.length)for(var f=0;f<c.length;f++)this.expandDivNode=c[f],"none"==pega.util.Dom.getStyle(this.expandDivNode,
"display")&&(e=!1);else this.expandDivNode=c,"none"==pega.util.Dom.getStyle(this.expandDivNode,"display")&&(e=!1);e||d.setAttribute("isExpanded","false")}if(a)if("false"==d.getAttribute("isExpanded"))try{if(this.doExpandCollapse("expand",c,b,a),d.setAttribute("isExpanded","true"),d.title=gStrCollapseAllText,"true"==d.getAttribute("isIcon")||"Icon"==d.getAttribute("data-ctl"))pega.util.Event.isSafari&&!pega.u.d.isCollapsed&&pega.util.Dom.setAttribute?pega.util.Dom.setAttribute(d,"buttonclass","iconCollapseAll"):
d.setAttribute("buttonClass","iconCollapseAll"),d.className="iconCollapseAll"}catch(h){}else try{if(this.doExpandCollapse("collapse",c,b,a),d.setAttribute("isExpanded","false"),d.title=gStrExpandAllText,"true"==d.getAttribute("isIcon")||"Icon"==d.getAttribute("data-ctl"))d.setAttribute("buttonClass","iconExpandAll"),d.className="iconExpandAll",pega.u.d.isCollapsed=1}catch(h){}},doExpandCollapse:function(a,b,c,d){d=void 0==d?window.event:d;var e=pega.util.Dom.getElementsById("CTRL_TA",document);if("expand"==
a){if(null!=b)if(null!=b.length)for(a=0;a<b.length;a++)this.expandDivNode=b[a],"none"==pega.util.Dom.getStyle(this.expandDivNode,"display")&&this.expandIt(this.expandDivNode,d);else this.expandDivNode=b,"none"==pega.util.Dom.getStyle(this.expandDivNode,"display")&&this.expandIt(this.expandDivNode,d);this.handleDeferLoading(c);this.toggleAllTextAreas(e,"E")}else{if(null!=b)if(null!=b.length)for(a=0;a<b.length;a++)this.expandDivNode=b[a],"none"!=pega.util.Dom.getStyle(this.expandDivNode,"display")&&
this.expandIt(this.expandDivNode,d);else this.expandDivNode=b,"none"!=pega.util.Dom.getStyle(this.expandDivNode,"display")&&this.expandIt(this.expandDivNode,d);this.toggleAllTextAreas(e,"C")}},toggleAllTextAreas:function(a,b){var c=!1;if(null!=a){for(var d=a.length,e=0;e<d;e++){if(pega.control.TextArea)var f=pega.control.TextArea.toggle(pega.util.Dom.getLastChild(a[e]),b,!1),c=c?c:f;else{var h=pega.util.Dom.getElementsById("COMPRESSED",a[e])[0],g=pega.util.Dom.getElementsById("EXPAND",a[e])[0],k=
pega.util.Dom.getElementsById("ARROW",a[e])[0];h&&g&&k&&("C"===b&&"none"==h.style.display||"E"===b&&"none"==g.style.display)&&(k.click(),c=!0)}c=c?c:f}c&&pega.u.d.resizeHarness()}},expandAllStyles:function(a){var b;if("DIV"==a.tagName&&"EXPAND-PLUSMINUS"==a.id)b=a;else for(b=a.parentNode;null!=b&&"TABLE"!=b.tagName&&("DIV"!=b.tagName||"EXPAND-OUTERFRAME"!=b.id);)b=b.parentNode;if(null!=b){for(var c=pega.ctx.dom.getElementsByTagName("TD",b),d=pega.ctx.dom.getElementsByTagName("SPAN",b),e=0;e<c.length;e++){var f=
c[e];f!=a&&null!=f.className&&""!=f.className&&0!=f.className.indexOf("data")&&0!=f.className.indexOf("buttonTd")&&-1==f.className.indexOf("Expanded")&&(f.className+="Expanded")}for(e=0;e<d.length;e++)c=d[e],c!=a&&"BUTTON"!=c.parentNode.tagName&&"BUTTON"!=c.parentNode.parentNode.tagName&&null!=c.className&&""!=c.className&&-1==c.className.indexOf("header-")&&-1==c.className.indexOf("Expanded")&&-1==c.className.indexOf("cke_")&&(-1<c.className.indexOf("Icon")?c.className+="Expanded":c.className+=" Expanded");
"subGroupHead"==b.className&&(b.className+="Expanded")}},collapseAllStyles:function(a){var b;if("DIV"==a.tagName&&"EXPAND-PLUSMINUS"==a.id)b=a;else for(b=a.parentNode;null!=b&&"TABLE"!=b.tagName&&("DIV"!=b.tagName||"EXPAND-OUTERFRAME"!=b.id);)b=b.parentNode;if(null!=b){for(var c=b.className,d=pega.ctx.dom.getElementsByTagName("TD",b),e=pega.ctx.dom.getElementsByTagName("SPAN",b),f=d.length,h=e.length,g=0;g<f;g++){var k=d[g],l=k.className;k!=a&&null!=l&&(k.className=k.className.replace(/Expanded/,
""))}for(g=0;g<h;g++)d=e[g],f=d.parentNode,k=d.className,d!=a&&"BUTTON"!=f.tagName&&-1==d.className.indexOf("header-")&&"BUTTON"!=f.parentNode.tagName&&-1==d.className.indexOf("cke_")&&null!=k&&(d.className=d.className.replace(/Expanded/,"").trim());"subGroupHeadExpanded"==c&&(b.className=b.className.replace(/Expanded/,""))}},makePrinterFriendly:function(){var a,b,c,d;a=pega.util.Dom.getElementsById("EXPAND-INNERDIV",document);if(null!=a)if(null!=a.length)for(d=0;d<a.length;d++)b=a.item(d),"DetailsSection"==
b.Name&&"none"==b.style.display&&pega.u.d.expandAllAndGetIt(b),"none"==b.style.display&&pega.u.d.expandIt(b);else b=a,"none"==b.style.display&&pega.u.d.expandIt(b);a=pega.util.Dom.getElementsById("ARROW",document);if(null!=a)if(1!=a.length)for(d=0;d<a.length;d++)b=a.item(d),c=b.src.toUpperCase(),0<=c.indexOf("RPSTEPCOMPRESSED")&&b.click();else b=a,c=b.src.toUpperCase(),0<=c.indexOf("RPSTEPCOMPRESSED")&&b.click()},expandAllAndGetIt:function(a){pega.u.d.expandIt(a);pega.ctx.dom.getElementById("EXPAND-ALL-INDICATOR").value=
"true";pega.ctx.dom.getElementById("pyActionArea")&&(a=SafeURL_createFromEncryptedURL(document.main.action))&&(a.put("pyActivity","Show-Harness"),document.main.action=a.toURL());pega.control.PlaceHolder.removePlaceHolderValues(document.main);pega.u.d.fixBaseThreadTxnId();document.main.action=document.main.submit()},checkContainersExpanded:function(){var a=!1,b=pega.util.Dom.getElementsById("EXPAND-INNERDIV",document);if(null!=pega.ctx.dom.getElementById("expandIcon")){var c=pega.util.Dom.getElementsById("expandIcon",
document),c=1<c.length?c[1]:c[0];if(b){if(null!=b.length)for(var d=0;d<b.length;d++)this.expandDivNode=b[d],"none"==this.expandDivNode.style.display&&(a=!0);else this.expandDivNode=b,"none"==this.expandDivNode.style.display&&(a=!0);a?(c.setAttribute("isExpanded","false"),c.setAttribute("title",gStrExpandAllText),c.setAttribute("buttonClass","iconExpandAll"),c.setAttribute("className","iconExpandAll")):(c.setAttribute("isExpanded","true"),c.setAttribute("title",gStrCollapseAllText),c.setAttribute("buttonClass",
"iconCollapseAll"),c.setAttribute("className","iconCollapseAll"),c.setAttribute("class","iconCollapseAll"))}else"undefined"!=typeof c&&"Icon"!=c.getAttribute("data-ctl")&&(c.style.display="none")}}};pega.lang.augmentObject(pega.ui.Doc.prototype,expandC);
var docFocus={focusElement:{},gFocusElement:null,gFocusTimeStamp:null,initFocusOnFirstInput:function(){var a=document.getElementById("pyActionArea");a?pega.u.d.focusFirstElement("pyActionArea",a.parentNode,!0):pega.u.d.focusFirstElement(void 0,void 0,!0)},focusToFirstInvalidField:function(a){a=void 0!==a?a:document;var b=void 0,d,b=a.querySelectorAll("span.iconError.dynamic-icon-error");d=a.querySelectorAll("span.inputError.dynamic-icon-error");"ERRORTEXT"===pega.u.d.fieldErrorType?(b=d,d="inputError dynamic-icon-error"):
d="iconError dynamic-icon-error";"undefined"!=typeof LayoutGroupModule&&LayoutGroupModule.goToNextError(a);for(a=0;a<b.length;a++)if(b[a].getAttribute("class")===d&&""==b[a].parentElement.style.display){var c=b[a].parentNode.nextSibling;c&&3==c.nodeType&&(c=c.nextSibling);for(var e=b[a];e&&"combo-box"!==e.getAttribute("class");){if(c)for(var f=0;f<c.length;f++)if(c[f]&&("INPUT"==c[f].tagName||"TEXTAREA"==c[f].tagName||"SELECT"==c[f].tagName)&&"none"!=c[f].style.display&&"hidden"!=c[f].style.visibility&&
"hidden"!=c[f].type){setTimeout(function(){c[f].focus()},0);return}(e=e.parentElement)&&(c=e.getElementsByTagName("*"))}}},focusFirstElement:function(a,b,d){if("false"==pega.u.d.pyIsWindowStealFocusInIEAllowed)return!1;if(!(pega.cl&&pega.cl.isTouchAble()&&pega.u.d.isMobile())){if((a=this.getFirstInputElement(a,b))&&!(d&&a.getAttribute("validationType")&&-1<a.getAttribute("validationType").indexOf("required"))){pega.util.Event.isIE&&9<=pega.util.Event.isIE&&window.parent&&window.focus();try{if(-1<
a.className.indexOf("PEGACKEDITOR"))CKEDITOR.instances[a.id].on("instanceReady",function(){this.focus()});else if(a.type&&"radio"==a.type)pega.u.d.focusRadioElement(a),pega.u.d.focusRadioElement(a);else{var c=document.getElementById("ERRORTABLE"),e=document.getElementsByClassName("custom_errorlist_ul");if(e&&0<e.length||null!==c&&"none"!==c.style.display){var f=document.getElementById("pyFlowActionHTML"),h=document.getElementById("HARNESS_CONTENT");null!==f&&("undefined"!==typeof LayoutGroupModule&&
LayoutGroupModule.goToNextError(document),setTimeout(function(){if(pega.ctx.dom.querySelector(".iconErrorDiv")){var a=pega.ctx.dom.querySelector(".iconErrorDiv").parentElement,b=a?a.querySelector("input"):"";a&&b&&b.focus()}},0));null!==h&&h.querySelector("input").focus();return}pega&&pega.control&&pega.control.menu&&(a=pega.control.menu.getFocusableMenuItem(a));a.focus();a.focus()}if(pega.util.Event.isIE&&("text"==a.type||"textarea"==a.type))if(a.setSelectionRange)a.setSelectionRange(0,0);else if(a.createTextRange){var g=
a.createTextRange();g.collapse(!0);g.moveEnd("character",0);g.moveStart("character",0);g.select()}pega.control&&pega.control.eventController&&pega.control.eventController.fireEventHandler(a,"focus");return!0}catch(k){}}return!1}},focusNextElement:function(a,b,d){if("false"==pega.u.d.pyIsWindowStealFocusInIEAllowed)return!1;var c=pega.util.Dom.getElementsById("pyActionArea",b),e=null;c&&(e=c[0]);if(null!=e)pega.u.d.initFocusOnFirstInput();else{var e=!1,f;if((c=pega.u.d.gFocusElement)&&!(c instanceof
HTMLElement&&document.body.contains(c))){var h=c.name||c.getAttribute("name");if(h)c=document.body.contains(b)?pega.util.Dom.getElementsByName(h,b):pega.util.Dom.getElementsByName(h);else if($(c).data("layout-id"))c=$("[data-layout-id\x3d'"+$(c).data("layout-id")+"']");else if($(c).closest(".header").data("layout-id"))c=$("[data-layout-id\x3d'"+$(c).closest(".header").data("layout-id")+"']");else if($(c).closest("[id $\x3d 'ANCHOR']").data("layout-id"))c=$("[data-layout-id\x3d'"+$(c).closest("[id $\x3d 'ANCHOR']").data("layout-id")+
"']");else if(h=c.id,c.tagName&&"label"==c.tagName.toLowerCase()&&(c=c.getAttribute("for"))&&(h=c),h)c=pega.util.Dom.getElementsById(h),null==c&&(e=!0);else return;null==c&&(e=!0);if(e){if(""!=a&&(f=document.getElementsByName(a)[0]),null!=f){if("radio"==f.type){f=document.getElementsByName(a);d=f.length;for(b=0;b<d;b++)if(1==f[b].checked){f[b].focus&&f[b].focus();break}return}c=f;a=document.body;b.contains(f)&&(a=b);b=a.querySelectorAll("input,select,textarea,button,a");for(a=0;a<b.length;a++)if(b.item(a)==
f){a++;break}for(;a<b.length;a++)if(e=b.item(a),"hidden"!=e.type&&"none"!=e.style.display&&"hidden"!=e.style.visibility&&("A"!=b[a].nodeName.toUpperCase()||0!=b[a].className.indexOf("cke_"))){c=e;break}}}else if(b=c,(c=c[0])&&("hidden"==c.type||"none"==c.style.display))for(a=0;a<b.length;a++)if(b[a]&&"hidden"!=b[a].type&&"none"!=b[a].style.display&&"hidden"!=b[a].style.visibility){c=b[a];break}try{c!=f&&pega.u.d.focusDomElement(c,d)}catch(g){}}pega.u.d.gFocusElement!=document.activeElement&&(pega.u.d.gFocusElement=
null)}},getNextFocusableElement:function(a,b){b=$($(b||document).find('a[href], button, input[type!\x3d"hidden"], select, textarea, img[tabindex]').filter(":visible").toArray());return b.eq((b.index(a)+1)%b.length)[0]},focusDomElement:function(a,b){try{var d=!1;try{d=pega.u.d.disableFocusInIE?pega.u.d.disableFocusInIE:!1}catch(c){d=!1}d||!pega.util.Event.isIE||11!==pega.util.Event.isIE&&10!==pega.util.Event.isIE&&9!==pega.util.Event.isIE||document.body.focus();if(a.type&&"radio"==a.type)pega.u.d.focusRadioElement(a);
else if(a.type&&"textarea"==a.type&&0<=a.id.indexOf("PEGACKEDITOR"))CKEDITOR.instances[a.id].on("instanceReady",function(a){this.focus()});else setTimeout(function(){"function"===typeof a.focus&&a.focus()},0)}catch(c){return}void 0!=b&&0<=b&&pega.u.d.setCaretPosition(a,b);if(document.activeElement!=a){try{a.type&&"radio"==a.type?pega.u.d.focusRadioElement(a):a.focus()}catch(c){return}void 0!=b&&0<=b&&pega.u.d.setCaretPosition(a,b)}},focusRadioElement:function(a){try{for(var b=document.getElementsByName(a.name),
d=b.length,c=!1,e=0;e<d;e++)if(1==b[e].checked){b[e].focus&&(b[e].focus(),c=!0);break}c||a.focus()}catch(f){a.focus()}},attachFocusToElements:function(a){if("undefined"!=typeof bClientValidation&&!bClientValidation){if(null==a||"load"==a.type)a=document;for(var b=["input","select","textarea","button","a"],d=b.length,c=0;c<d;c++){var e=a.getElementsByTagName(b[c]);pega.u.d.attachFocusHandler(e)}}},attachFocusHandler:function(a){for(var b=a.length,d=0;d<b;d++){var c=a[d];"hidden"!=c.type&&1!=c.disabled&&
"none"!=c.style.display&&pega.util.Event.addListener(c,"focus",pega.u.d.setFocusElement)}},setFocusElement:function(a){a||(a=window.event);pega.u.d.focusElement=pega.util.Event.getTarget(a)},skipToContent:function(a){var b;pega.u.d.focusInsideIframe&&(b=this.getFrameContentDiv(a));b||(b=$("[data-skip-target\x3d'"+a+"']")[0]);if(!b){var d=document.getElementById("FormFactoriFrame");d&&(d=d.contentDocument||d.contentWindow.document)&&(b=d.querySelector("[data-skip-target\x3d'"+a+"']"))}if("search"==
a)try{var c,e;if(b)for(var f=b.getElementsByTagName("INPUT"),h=f.length,d=0;d<h;d++){var g=f[d];null!=g&&"hidden"!=g.type&&"none"!=g.style.display&&0<g.offsetHeight&&!g.disabled&&!g.readOnly&&(c=g)}else c=document.querySelector("input[name$\x3d'pySearchText']");if(!c)if(null!=b.getAttribute("tabindex"))c=b;else return;(e=c.getAttribute("data-keyup"))&&c.removeAttribute("data-keyup");c.focus();e&&setTimeout(function(){c.setAttribute("data-keyup",e)},500);return}catch(k){e&&(c.setAttribute("data-keyup",
e),console.log(k))}if(b){"navigation"==a&&(0<b.className.indexOf("screen-layout-region-main-sidebar1")||0<b.className.indexOf("screen-layout-region-main-sidebar2"))&&(a=$(b).find("div[data-skip-target\x3d'navigation']"),b=0<a.length?a[0]:b);b.setAttribute("tabindex","-1");try{b.focus()}catch(k){console.log(k)}}},getFrameContentDiv:function(a){var b=$("#workarea").attr("data-mode");if("Tabbed"==b){var d;$(".dc-main .static-dc-tab").each(function(){if("block"==$(this).css("display"))return d=$(this),
!1});b=d?d:$(".dc-main .iframe-wrapper")}else{if("SingleView"==b){var c;$(".dc-main \x3e *").each(function(){if("none"!=$(this).css("display"))return c=$(this),!1});b=$(c[0]);"iframe"==b.prop("tagName").toLowerCase()?(b=b[0].contentWindow,a=b.$("[data-skip-target\x3d'"+a+"']")[0]):a=b.find("[data-skip-target\x3d'"+a+"']")[0];return a}b=$("#moduleGroupDiv").children(".iframe-wrapper")}var e=b.filter(function(){return"block"==$(this).css("display")}).find("iframe")[0];e?(b=e.contentWindow,a=b.$("[data-skip-target\x3d'"+
a+"']")[0]):a=b.find("[data-skip-target\x3d'"+a+"']")[0];return a},isMobile:function(){var a=navigator.userAgent;return a.match(/Android/i)||a.match(/BlackBerry/i)||a.match(/iPhone|iPad|iPod/i)||a.match(/Opera Mini/i)||a.match(/IEMobile/i)||0<navigator.userAgent.toLowerCase().indexOf("windows phone")?!0:!1},attachFocusHandlerForSkipLinksWrapper:function(){$(".skip-links-wrapper").focusin(function(a){$(this).removeClass("skip-links-hide").addClass("skip-links-show")}).focusout(function(a){$(this).removeClass("skip-links-show").addClass("skip-links-hide")})}};
pega.lang.augmentObject(pega.ui.Doc.prototype,docFocus);pega.u.d.attachOnload(pega.u.d.attachFocusHandlerForSkipLinksWrapper,!1);
var jsUtils={boolArraySearch:function(a,b){for(var d=0;d<b.length;d++)if(b[d]==a.valueOf())return!0;return!1},checkIfNumber:function(a){return this.boolArraySearch(a,[0,1,2,3,4,5,6,7,8,9])?!0:!1},checkIfLetter:function(a){a=a.charCodeAt(0);return 65<=a&&90>=a?!0:97<=a&&122>=a?!0:!1},checkJavaIdentifierStart:function(a){return this.checkIfNumber(a)?!1:this.checkIfLetter(a)?!0:!1},checkJavaIdentifier:function(a){return this.checkIfNumber(a)?!0:this.checkIfLetter(a)?!0:!1},validateSubScript:function(a){if(""==
a||!this.checkJavaIdentifierStart(a.charAt(0)))return!1;for(var b=1;b<a.length;b++){var d=a.charAt(b);if(!this.checkJavaIdentifier(d))return!1}if(null!=this.subArr)for(b=0;b<this.subArr.length;b++)if(this.subArr[b]==a)return!1;return!0},trim:function(a){a=a.split(" ");for(var b="",d=0;d<a.length;d++)if(null!=a[d]||""!=a[d]||" "!=a[d])b+=a[d];return b},recurseJSON:function(a,b,d,f){d=d?d:"";f=f?f:"";for(var c in a)if("string"==typeof a[c]||"boolean"==typeof a[c]||"number"==typeof a[c])d+=(""==d?"":
"\x26")+(0==(f+b[c]).indexOf(".")?"$PpyWorkPage":"$P")+(f+b[c]).replace(/\./g,"$p")+"\x3d"+a[c];else if("object"==typeof a[c])if(pega.lang.isArray(a[c]))for(var e=0;e<a[c].length;e++)d="object"==typeof a[c][e]?pega.u.d.recurseJSON(a[c][e],b[c].p,d,f+b[c].h+"$l"+(e+1)):d+((""==d?"":"\x26")+(0==(f+b[c]).indexOf(".")?"$PpyWorkPage":"$P")+(f+b[c]).replace(/\./g,"$p")+("$l"+(e+1))+"\x3d"+a[c][e]);else for(e in a[c])d="object"==typeof a[c][e]?pega.u.d.recurseJSON(a[c][e],b[c]?b[c]:c,d,f+(b[c]?b[c]:c)+("$l"+
e)):d+((""==d?"":"\x26")+(0==(f+b[c]).indexOf(".")?"$PpyWorkPage":"$P")+(f+b[c]).replace(/\./g,"$p")+("$l"+(e+1))+"\x3d"+a[c][e]);return d.replace(/\((\d*?)\)/i,"$l$1")},jsonToQuery:function(a,b){return pega.u.d.recurseJSON(a,b)}};pega.lang.augmentObject(pega.ui.Doc.prototype,jsUtils);
var smartInfo={gSmartInfoPopUpHarness:null,getRepeatPage:function(a,b){var e="",c;if(a){var d=this.getRepeatObject(a,!0);c=this.getRepeatRow(a)}else d=this.getRepeatObject(pega.util.Event.getTarget(b),!0),c=this.getRepeatRow(pega.util.Event.getTarget(b));if(window.Grids){if(null==d&&""!=c){var f=Grids.getActiveGrid(b);f&&(f.bTreegrid||f.bTree)&&(d=f.getRightRow(c))}if(f=window.Grids.getElementsGrid(d))var g=f.getPLPGProperty()}if(null==d)return e;d.getAttribute("PL_PROP")?void 0!=c&&""!=c&&(e=f?g+
"("+c+")":d.getAttribute("PL_PROP")+"("+c+")"):d.getAttribute("PG_PROP")&&void 0!=c&&""!=c&&(e=f?g+"("+c+")":d.getAttribute("PG_PROP")+"("+c+")");if("undefined"!=typeof Grids&&Grids&&(b||window.event)){if((c=Grids.getActiveGrid(b))&&!c.bTreegrid&&!c.bTree)return e;if(c&&(a=a?a:pega.util.Event.getTarget(b),d="",a&&(pega.util.Dom.isAncestor(c.rightBodyTbl,a)?d=c.rightBodyTbl:pega.util.Dom.isAncestor(c.leftBodyUL,a)&&(d=c.leftBodyUL),d&&(c.selectPage(b,d),c.getLeftRow()))))return pega.ui.property.toReference(c.getLeftRow().id)}return e},
loadSmartInfo:function(a){pega.util.Event.removeListener(document,"keydown",pega.u.d.hideSmartInfoHarness);pega.util.Event.removeListener(document.getElementsByTagName("BODY")[0],"mousewheel",pega.u.d.hideSmartInfoHarness);pega.util.Event.addListener(document,"keydown",pega.u.d.hideSmartInfoHarness,pega.u.d,!0);pega.util.Event.addListener(document.getElementsByTagName("BODY")[0],"mousewheel",pega.u.d.hideSmartInfoHarness,pega.u.d,!0);a="load"==a.type?pega.util.Dom.getElementsById("SI",document):pega.util.Dom.getElementsById("SI",
a);if(null!=a)if(0<a.length)for(var b=0;b<a.length;b++)pega.util.Event.removeListener(a[b],"mouseover",pega.u.d.showSmartInfoHarness),pega.util.Event.removeListener(a[b],"mouseout",pega.u.d.hideSmartInfoHarness),pega.util.Event.addListener(a[b],"mouseover",pega.u.d.showSmartInfoHarness,pega.u.d,!0),pega.util.Event.addListener(a[b],"mouseout",pega.u.d.hideSmartInfoHarness,pega.u.d,!0);else pega.util.Event.removeListener(a[b],"mouseover",pega.u.d.showSmartInfoHarness),pega.util.Event.removeListener(a[b],
"mouseout",pega.u.d.hideSmartInfoHarness),pega.util.Event.addListener(a,"mouseover",pega.u.d.showSmartInfoHarness,pega.u.d,!0),pega.util.Event.addListener(a,"mouseout",pega.u.d.hideSmartInfoHarness,pega.u.d,!0)},showSmartInfoHarness:function(a){a=void 0==a?window.event:a;null==this.gSmartInfoPopUpHarness&&(this.gSmartInfoPopUpHarness=pega.ui&&pega.ui.smartinfo?pega.ui.smartinfo:new SmartInfo);for(var b=pega.util.Event.getTarget(a);"SI"!=b.id;)if(b=b.parentNode,null==b)return;"SI"==b.id&&pega.u.d.showSmartInfoPopupHarness(b,
a)},showSmartInfoPopupHarness:function(a,b){b=void 0==b?window.event:b;var e=a.getAttribute("si_sectionname"),c=a.getAttribute("si_usingpage"),d=SafeURL_createFromURL(pega.u.d.url);d.put("pyActivity","ReloadSection");var f=pega.u.d.getRepeatPage(null,b),f=f&&""!=f&&"."!=f.charAt(0)?f:this.getBaseRef(null,b)+f;"undefined"!=typeof e&&null!=e&&""!=e&&(d.put("StreamName",e),d.put("StreamClass","Rule-HTML-Section"),""!=c?d.put("BaseReference",c):d.put("BaseReference",f),pega.ui.onlyOnce&&(e=SafeURL_createFromURL(pega.ui.onlyOnce.getAsPostString()),
d.copy(e)),e=a.getAttribute("si_headertext"),e="\x3cspan class\x3d'smartInfostrHeaderStyle '\x3e"+e+"\x3c/span\x3e",c=a.getAttribute("si_clickable"),c="true"==c||"-1"==c?!0:!1,null!=this.gSmartInfoPopUpHarness&&this.gSmartInfoPopUpHarness.showInfoAdvanced(a,e,d.toQueryString(),!0,!0,c,"","",!1,b))},hideSmartInfoHarness:function(){null!=this.gSmartInfoPopUpHarness?this.gSmartInfoPopUpHarness.hideInfo():null!=window.frames.actionIFrame&&null!=window.frames.actionIFrame.gSmartInfoPopUpHarness&&window.frames.actionIFrame.gSmartInfoPopUpHarness.hideInfo()},
removeSmartInfoListeners:function(a){if(a&&(a=pega.util.Dom.getElementsById("SI",a),null!=a&&0<a.length))for(var b=0;b<a.length;b++)pega.util.Event.removeListener(a[b],"mouseover",pega.u.d.showSmartInfoHarness),pega.util.Event.removeListener(a[b],"mouseout",pega.u.d.hideSmartInfoHarness)}};pega.lang.augmentObject(pega.ui.Doc.prototype,smartInfo);
var accessk={processAccessKeysOnClient:!1,attachAccessKeys:function(b){if(pega.u.d.processAccessKeysOnClient){if("undefined"==typeof b||"number"==typeof b)b=document;var c=b.getElementsByTagName("BUTTON"),k=b.getElementsByTagName("A"),g=b.getElementsByTagName("LABEL"),m=pega.util.Dom.getElementsById("EXPAND",b,"TEXTAREA");b=[];for(var l={},e=g.length,a,d,f=0;f<e&&!pega.u.d.isReadOnly();f++){a=g[f];var n=a.getAttributeNode("for");a.getAttributeNode("inAnchor")?(d=pega.u.d.findParentAnchor(a),null!=
d&&(b.push(a),l[n]=a)):n&&""!=n.value&&(b.push(a),l[n]=a)}d=m?m.length:0;g=pega.u.d.getAccessKey;n=pega.u.d.setAccessKey;for(f=0;f<d;f++)if(e=m[f],"EXPAND"==e.id&&(a=e.DisplayedProperty,null!=a&&l[a])){var h=g(l[a]);""!=h&&(e.accessKey=h,e.accessKey=h)}e=c.length;m=pega.util.Dom.setInnerText;l=pega.util.Dom.getInnerText;for(f=0;f<e;f++)a=c[f],a.getAttribute("isIcon")||(d=pega.env.ua.ie?a.innerText:l(a),-1!=d.search("\x26")&&(h=g(a,d),""!=h?n(a,h):-1!=d.search("\x26\x26")&&m(a,d.replace(/&&/g,"\x26"))));
c=k.length;for(f=0;f<c;f++)e=k[f],d=e.id,"TABANCHOR"!=d&&"ACCORANCHOR"!=d&&(d=pega.env.ua.ie?e.innerText:l(e),-1!=d.search("\x26")&&(a=g(e,d),""!=a?n(e,a):-1!=d.search("\x26\x26")&&m(e,d.replace(/&&/g,"\x26"))));e=b.length;k=pega.u.d.findParentAnchor;c=pega.u.d.repaintText;for(f=0;f<e;f++)a=b[f],d=pega.env.ua.ie?a.innerText:l(a),-1!=d.search("\x26")&&(h=g(a,d),""!=h?a.getAttributeNode("inAnchor")?(d=k(a),null!=d&&""!=h&&(d.accessKey=h,d.accessKey=h,c(a,h))):a.getAttributeNode("for")&&n(a,h):-1!=d.search("\x26\x26")&&
m(a,d.replace(/&&/g,"\x26")))}},setAccessKey:function(b,c){b.accessKey=c;b.accessKey=c;pega.u.d.repaintText(b,c)},getAccessKey:function(b,c){c=c||pega.util.Dom.getInnerText(b);b=/(([^&]|^)&(?!(&|\s|(lt;)|(nbsp;)|(gt;))))+?/;b.test(c)?(b=b.exec(c),c=c.charAt(b.index+b[0].length)):c="";return c},repaintText:function(b,c){for(var k=pega.util.Dom.getInnerText(b),g,m="\x26"+c,l=!0,e=0;l;){var a=k.indexOf(m,e);-1!=a?g=a:l=!1;"\x26"==k.charAt(g-1)?e=g+1:l=!1}m=k.substring(0,g);k=k.substring(g+2);b.innerHTML=
(m+"\x3cU\x3e"+c+"\x3c/U\x3e"+k).replace(/(&&)|(&(?!(lt;)|(nbsp;)|(gt;)))/g,"\x26amp;")},removeDuplicateLabelFor:function(b,c){if(c&&""!=c&&(c=pega.util.Dom.getElementsById(c,document))&&1<c.length)try{pega.util.Event.isIE?b.removeAttribute("htmlFor"):b.removeAttribute("for")}catch(k){}}};pega.lang.augmentObject(pega.ui.Doc.prototype,accessk);
var errorp={displayFormErrors:function(a){null!=a&&""!=a&&""!=pega.u.d.removeEmptyLines(a)?1==pega.u.d.bModalDialogOpen?pega.u.d.displayErrorsOnModal(a):"FLOAT"==pega.u.d.formErrorType&&null!=pega.ctx.dom.getElementById("FormErrorMarker_Div")?pega.u.d.FloatDivInit(a):pega.u.d.defaultErrorDivInit(a):null!=pega.ctx.dom.getElementById("ERRORTABLE")&&(pega.ctx.dom.getElementById("ERRORTABLE").style.display="none",pega.ctx.dom.getElementById("ERRORTABLE").setAttribute("aria-hidden","true"))},canErrorDivAbsolute:function(){return 0<
pega.ctx.dom.$("#HARNESS_BUTTONS").length&&"body"===pega.ctx.dom.$("#FormErrorMarker_Div").parent().prop("tagName").toLowerCase()?!0:!1},toggleHarnessPadding:function(a){a?pega.ctx.dom.$("#HARNESS_CONTENT").parent().parent().css("padding-top",a+"px"):pega.ctx.dom.$("#HARNESS_CONTENT").parent().parent().css("padding-top","0px")},removeEmptyLines:function(a){if(null!=a)return a.replace(/^(\s|\n|\r)*((.|\n|\r)*?)(\s|\n|\r)*$/g,"$2")},defaultErrorDivInit:function(a){if(!(pega.ui&&pega.ui.smartinfo&&pega.ui.smartinfo.targetElememnt&&
(pega.ui.smartinfo.targetElememnt.__SmartInfoVisible||pega.ui.smartinfo.targetElememnt._inSmartInfo))){var b=document.createElement("DIV");b.innerHTML=a;var c=document.createElement("DIV");c.innerHTML=a;var d=[],f=pega.ctx.dom.querySelectorAll("[data-harness-id\x3d'"+pega.ctx.pzHarnessID+"']");0!=f.length?f.forEach(function(a){d=d.concat(pega.ctx.dom.querySelectorAll("#ERRORTABLE",a))}):d=pega.ctx.dom.querySelectorAll("#ERRORTABLE");if(d&&0<d.length)for(c=0;c<d.length;c++){if(pega.util.Dom.setStyle(d[c],
"display","block"),d[c].setAttribute("aria-hidden","false"),(f=pega.util.Dom.getElementsById("ERRORMESSAGES_ALL",d[c]))&&0<f.length){var e=pega.util.Dom.getElementsById("ERRORMESSAGES_ALL",b);f[0].innerHTML=e&&0<e.length?e[0].innerHTML:a}}else if(null!=pega.ctx.dom.getElementById("PEGA_HARNESS")){if(a=pega.ctx.dom.$("#HARNESS_CONTENT").hasClass("harness-content-workarea-view")?"HARNESS_CONTENT":"PEGA_HARNESS",pega.ctx.dom.getElementById(a).insertBefore(b,pega.ctx.dom.getElementById(a).firstChild),
"FLOAT"!=pega.u.d.formErrorType&&pega.ctx.dom.getElementById(a).appendChild(c),d=pega.util.Dom.getElementsById("ERRORTABLE",document))for(c=0;c<d.length;c++)pega.util.Dom.setStyle(d[c],"display","block"),d[c].setAttribute("aria-hidden","false")}else pega.ctx.dom.getElementById("FormErrorMarker_Div")?(a=pega.ctx.dom.getElementById("FormErrorMarker_Div"),a.insertBefore(b,a.firstChild),a.style.display="block",pega.ctx.dom.getElementById("ERRORTABLE").style.display="block",pega.ctx.dom.getElementById("ERRORTABLE").setAttribute("aria-hidden",
"false")):null!=pega.ctx.dom.getElementsByTagName("DIV")[0]&&(pega.ctx.dom.getElementsByTagName("DIV")[0].insertBefore(b,pega.ctx.dom.getElementsByTagName("DIV")[0].firstChild),pega.ctx.dom.getElementsByTagName("DIV")[0].style.display="block",pega.ctx.dom.getElementById("ERRORTABLE").style.display="block",pega.ctx.dom.getElementById("ERRORTABLE").setAttribute("aria-hidden","false"));if(!(pega.ui&&pega.ui.smartinfo&&pega.ui.smartinfo.targetElememnt&&(pega.ui.smartinfo.targetElememnt.__SmartInfoVisible||
pega.ui.smartinfo.targetElememnt._inSmartInfo))&&(b=pega.ctx.dom.getElementById("ERRORTABLE"))&&"alert presentation"===b.getAttribute("role"))try{this.focusFirstFieldInForm()}catch(g){}}},focusFirstFieldInForm:function(){var a=document.getElementById("pyFlowActionHTML"),b=document.getElementById("HARNESS_CONTENT"),c=document.getElementById("_popOversContainer");if(null!==a&&null!==b&&null===c){var d=a.querySelector("input");null!==d&&d.focus()}null!==b&&null===a&&(a=b.querySelector("input"),null!==
a&&a.focus());null!==c&&(c=c.querySelector("input"),null!==c&&c.focus())},updateErrorSection:function(a){if(!pega.ctx.dom.getElementById("PegaRULESErrorFlag")||""!=this.pyCustomError){var b;if(bActionIframe){if(b=pega.util.Dom.getElementsById("RULE_KEY",document))if(b=this.getErrorSection(b))this.copyErrorSection(a,b);else if(b=pega.util.Dom.getElementsById("RULE_KEY",parent.document))this.getErrorSection(b),(b=this.getErrorSection(b))&&this.copyErrorSection(a,b)}else if(b=pega.ctx.dom.getElementsByClassName("sectionDivStyle  "))this.getErrorSection(b),
(b=this.getErrorSection(b))&&this.copyErrorSection(a,b)}},getErrorSection:function(a){if(a)for(var b=0;b<a.length;b++)if(a[b].getAttribute("node_name")==this.pyCustomError&&"MAIN_RULE"==a[b].getAttribute("node_type")&&"pyCustomError"!=a[b].parentNode.id)return a[b];return null},copyErrorSection:function(a,b){(a=pega.util.Dom.getElementsById("pyCustomError",a))&&0<a.length&&(a=a[a.length-1],this.loadDOMObject(b,a.innerHTML))},showhideErrorBtn:function(){"hide"==this.errorBtn.getAttribute("errorStatus")?
(this.errorDiv.show(),this.errorBtn.setAttribute("errorStatus","show")):(this.errorDiv.hide(),this.errorBtn.setAttribute("errorStatus","hide"))},showhideErrorFloat:function(){if(!event||"keyPress"!==event.type||13===event.keyCode){pega.u.d.toggleHarnessPadding();if(bActionIframe){var a=pega.util.Dom.getElementsById("ERRORTABLE",parent.document);a&&(a[0].style.visibility="visible",a[0].style.display="none",a[0].setAttribute("aria-hidden","true"))}else{if(a=pega.util.Dom.getElementsById("ERRORTABLE",
pega.ctx.dom.getContextRoot()))a[0].style.visibility="visible",a[0].style.display="none",a[0].setAttribute("aria-hidden","true"),a[1]&&(a[1].style.display="none",a[1].setAttribute("aria-hidden","true"));this.overlay.hide()}if(a=pega.ctx.dom.getElementById("ErrorTableSpacer"))a.parentNode.removeChild(a),pega.ctx.dom.getElementById("FormErrorMarker_Div").innerHTML=""}},FloatDivInit:function(a){var b=document.createElement("DIV");b.innerHTML=a;var c=pega.u.d.canErrorDivAbsolute(),d,f;bActionIframe?(d=
pega.ctx.dom.getElementById("FormErrorMarker_Div",parent),f=parent.document):(d=pega.ctx.dom.getElementById("FormErrorMarker_Div"),f=document);this.overlay=new pega.widget.Overlay(d,{fixedtopleft:"true",visible:!0,width:"97%"});this.overlay.cfg.setProperty("fixedtopleft",!0);this.overlay.render();var e=pega.util.Dom.getElementsById("ERRORTABLE",document);if(e){d.innerHTML=pega.util.Dom.getOuterHTML(e[0]);d.style.display="block";e=pega.util.Dom.getElementsById("ERRORTABLE",f);e[0].style.display="block";
e[0].setAttribute("aria-hidden","false");var g=pega.util.Dom.getElementsById("ERRORMESSAGES_ALL",e[0]);g&&0<g.length&&(b=pega.util.Dom.getElementsById("ERRORMESSAGES_ALL",b),g[0].innerHTML=b&&0<b.length?b[0].innerHTML:a);e[1]&&!c&&(e[1].style.display="none",e[1].setAttribute("aria-hidden","true"),e[1].style.visibility="hidden");null!=e[2]&&(e[2].style.display="none",e[2].setAttribute("aria-hidden","true"));this.closeBtn=pega.ctx.dom.getElementById("errorClose",f);null!=this.closeBtn&&(pega.util.Event.addListener(this.closeBtn,
"click",pega.u.d.showhideErrorFloat,this,!0),pega.util.Event.addListener(this.closeBtn,"keypress",pega.u.d.showhideErrorFloat,this,!0));c&&(pega.ctx.dom.$(d).css("position","absolute"),pega.u.d.toggleHarnessPadding(d.offsetHeight))}else(e=pega.util.Dom.getElementsById("ERRORTABLE",b))?(d.innerHTML=pega.util.Dom.getOuterHTML(e[0]),this.closeBtn=pega.ctx.dom.getElementById("errorClose",f),null!=this.closeBtn&&(pega.util.Event.addListener(this.closeBtn,"click",pega.u.d.showhideErrorFloat,this,!0),pega.util.Event.addListener(this.closeBtn,
"keypress",pega.u.d.showhideErrorFloat,this,!0)),a=pega.ctx.dom.getElementById("HARNESS_CONTENT",f),null==a||c||((g=pega.ctx.dom.getElementById("ErrorTableSpacer",f))&&g.parentNode.removeChild(g),e[0].id="ErrorTableSpacer",g=pega.ctx.dom.querySelectorAll("div.harnessBodyNoHead",a),1==g.length?g[0].insertBefore(e[0],g[0].firstChild):a.insertBefore(e[0],a.firstChild),e[0].style.visibility="hidden",e[0].style.display="block",e[0].setAttribute("aria-hidden","true")),d.style.display="block",e=pega.util.Dom.getElementsById("ERRORTABLE",
f),e[0].style.display="block",e[0].setAttribute("aria-hidden","false"),c&&(pega.ctx.dom.$(d).css("position","absolute"),pega.u.d.toggleHarnessPadding(d.offsetHeight))):(d.style.display="none",(g=pega.ctx.dom.getElementById("ErrorTableSpacer",f))&&g.parentNode&&g.parentNode.removeChild(g));(c=pega.ctx.dom.getElementById("ERRORTABLE"))&&c.style&&"block"===c.style.display&&"alert presentation"===c.getAttribute("role")&&this.focusFirstFieldInForm();this.overlay.show()}};
pega.lang.augmentObject(pega.ui.Doc.prototype,errorp);
var enableDisableAnypicker=function(d,c){d.classList.contains("anypicker")&&(c&&d.classList.contains("anypicker-disabled")?d.className=d.className.replace(" anypicker-disabled",""):c||d.classList.contains("anypicker-disabled")||(d.className+=" anypicker-disabled"))},enableD={elementsDisabled:null,disableAllOtherButtons:function(d,c){c||(c=pega.u.d.getDocumentElement());var e=c.getElementsByTagName("BUTTON");c=c.getElementsByTagName("A");for(var b=e.length,f=c.length,a=0;a<b;a++){var g=e.item(a);if(g!=
d&&1!=g.disabled){g.disabled=!0;g.setAttribute("busyButton","true");var h=pega.util.Dom.getFirstChild(g);null!=h&&"IMG"==h.tagName&&pega.util.Dom.setStyle(g,"opacity","0.5");"true"==g.getAttribute("isIcon")&&(g.className+="_disabled")}}for(a=0;a<f;a++)e=c.item(a),e!=d&&(b=e,"pd(event);"!==b.getAttribute("onclick")&&(b.onclick_func=e.getAttribute("onclick"),b.setAttribute("onclick","pd(event);")),b.href_new=e.href,b.href="#",b.className_old=e.className,b.className=e.className+" link_disabled",b.setAttribute("busyButton",
"true"))},enableAllButtons:function(d){d||(d=pega.u.d.getDocumentElement());var c=d.getElementsByTagName("BUTTON");d=d.getElementsByTagName("A");for(var e=c.length,b=d.length,f=0;f<e;f++){var a=c.item(f);if(1==a.disabled&&"true"==a.getAttribute("busyButton")){a.disabled=!1;var g=pega.util.Dom.getFirstChild(a);null!=g&&"IMG"==g.tagName&&"0.5"==a.style.opacity&&pega.util.Dom.setStyle(a,"opacity","1.0");"true"==a.getAttribute("isIcon")&&(a.className=a.className.replace("_disabled",""))}}for(f=0;f<b;f++)c=
d.item(f),"true"==c.getAttribute("busyButton")&&(c.onclick_func&&"pd(event);"===c.getAttribute("onclick")&&c.setAttribute("onclick",c.onclick_func),c.href_new&&("#"!=c.href&&c.href!==window.location.href+"#"?c.setAttribute("href",c.href):c.setAttribute("href",c.href_new)),c.className_old&&(c.className=c.className_old),c.className&&(c.className=c.className.replace(" link_disabled","")))},enableDisable:function(d,c,e,b,f){var a=d.getAttribute("DISABLE_WHEN"),g=d.index;1==f&&(g=this.getRepeatRow(d));
g||1==f||(g=-1);if(g==c)if(c=["button","A"],this.evaluate(a,[b],[e]))for(e=0;e<c.length;e++){if(b=d.getElementsByTagName(c[e])[0],null!=b){b.disabled=!0;this.elementsDisabled[this.elementsDisabled.length]=d;if("true"==b.getAttribute("isIcon")||"Icon"==b.getAttribute("data-ctl"))b.className&&-1==b.className.indexOf("_disabled")&&(b.className=b.className.replace(/(^|\s)cursordefault(\s|$)/,""),""!=b.className&&null!=b.className&&(b.className+="_disabled")),a=b.title,b.getAttribute("tempTitle")&&(b.title=
b.getAttribute("tempTitle")),b.setAttribute("tempTitle",a),"-1"==b.className.search(/(^|\s)cursordefault(\s|$)/)&&(b.className=null==b.className||""==b.className?"cursordefault":"cursordefault "+b.className),b.getAttribute("IsSprite")&&(a=b.style.backgroundPosition.split(" "),f=b.style.height.replace("px",""),b.style.backgroundPosition=a[0]+" -"+2*f+"px");"A"==b.tagName&&(null!=b.getAttribute("fromicon")?(b.setAttribute("href_original",b.getAttribute("href")),b.setAttribute("href","#")):(b.href_original=
b.href,b.href="#",b.onclick_func=b.onclick,b.onclick=null));"A"!=b.tagName&&"BUTTON"!=b.tagName||pega.util.Dom.addClass(b,"disabledStyle")}}else for(e=0;e<c.length;e++)if(b=d.getElementsByTagName(c[e])[0],null!=b){b.disabled=!1;if("true"==b.isIcon||"Icon"==b.getAttribute("data-ctl"))b.className=b.className.replace("_disabled",""),a=b.title,b.getAttribute("tempTitle")&&(b.title=b.getAttribute("tempTitle")),b.setAttribute("tempTitle",a),"-1"!=b.className.search(/(^|\s)cursordefault(\s|$)/)&&b.getAttribute("data-click")&&
(b.className=b.className.replace(/(^|\s)cursordefault(\s|$)/,"")),b.getAttribute("IsSprite")&&(a=b.style.backgroundPosition.split(" "),b.style.backgroundPosition=a[0]+" top");"A"==b.tagName&&(null!=b.onclick_func&&null==b.onclick?(b.href=b.href_original,b.href_original="#",b.onclick=b.onclick_func):null!=b.getAttribute("fromicon")&&null!=b.getAttribute("href_original")&&""!=b.getAttribute("href_original")&&(b.setAttribute("href",b.getAttribute("href_original")),b.setAttribute("href_original","")));
"A"!=b.tagName&&"BUTTON"!=b.tagName||pega.util.Dom.removeClass(b,"disabledStyle")}},disableElements:function(d,c,e){d=this.getHarnessElements(d,c,e);for(c=0;c<d.length;c++)"complex"==d[c].type?d[c].element.disable?d[c].element.disable():d[c].disabled="true":(d[c].disabled="true","true"==d[c].getAttribute("isIcon")&&(d[c].className+="_disabled"),d[c].onclick&&(d[c].onclick_cpy=d[c].onclick,d[c].onclick=null),"A"==d[c].tagName&&(d[c].href="#"))},enableElements:function(d,c,e){d=this.getHarnessElements(d,
c,e);for(c=0;c<d.length;c++)"complex"==d[c].type?d[c].element.enable?d[c].element.enable():d[c].disabled=!1:(d[c].disabled=!1,"true"==d[c].getAttribute("isIcon")&&(d[c].className=d[c].className.replace("_disabled","")),d[c].onclick_cpy&&(d[c].onclick=d[c].onclick_cpy))},highlightElements:function(d,c,e,b){d=this.getHarnessElements(d,c,e);for(c=0;c<d.length;c++)"complex"==d[c].type?d[c].element.highlight?d[c].element.highlight(b):this.addClass(d[c],b):this.addClass(d[c],b)},unhighlightElements:function(d,
c,e,b){d=this.getHarnessElements(d,c,e);for(c=0;c<d.length;c++)"complex"==d[c].type?d[c].element.unhighlight?d[c].element.unhighlight():this.removeClass(d[c],b):this.removeClass(d[c],b)},highlightElement:function(d,c){d=pega.u.property.toHandle(d,strPrimaryPage);d=pega.util.Dom.getElementsByName(d);var e=!1;if(d)for(var b=0;b<d.length;b++)this.addClass(d[b],c),"TEXTAREA"==d[b].tagName&&(e=d[b].parentNode.getElementsByTagName("TEXTAREA"))&&2==e.length&&this.addClass(e[0],c),e=!0;return e},disableElement:function(d){d=
pega.u.property.toHandle(d,strPrimaryPage);d=pega.util.Dom.getElementsByName(d);var c=!1;if(d)for(var e=0;e<d.length;e++)c=d[e].disabled=!0;return c},controlDisabler:function(d){var c="button A img input select textarea i".split(" ");enableDisableAnypicker(d,!1);for(var e=0;e<c.length;e++){var b=d.getElementsByTagName(c[e]);if("button"!=c[e]&&"A"!=c[e]&&"img"!=c[e]&&"i"!=c[e])for(var f=0;f<b.length;f++){var a=b[f];if(1==a.disabled)return;a.disabled=!0;if(-1<(a.className?a.className.indexOf("multiselect-list"):
-1)){var g=a.parentElement?a.parentElement.className:"";""!=g&&-1==g.indexOf("multiselect-disabled")&&(a.parentElement.className+=" multiselect-disabled",a.style.display="none")}}else if(null!=b[0]){a=b[0];if("disabled"==a.getAttribute("disabled"))break;a.setAttribute("disabled","disabled");if("true"==a.getAttribute("isIcon")||"Icon"==a.getAttribute("data-ctl"))a.className&&-1==a.className.indexOf("_disabled")&&(a.className=a.className.replace(/(^|\s)cursordefault(\s|$)/,""),""!=a.className&&null!=
a.className&&(a.className+="_disabled")),b=a.title,a.getAttribute("tempTitle")&&(a.title=a.getAttribute("tempTitle")),a.setAttribute("tempTitle",b),a.getAttribute("tabindex")&&a.removeAttribute("tabindex"),a.setAttribute("aria-disabled","true"),"-1"==a.className.search(/(^|\s)cursordefault(\s|$)/)&&(a.className=null==a.className||""==a.className?"cursordefault":"cursordefault "+a.className),a.getAttribute("IsSprite")&&(b=a.style.backgroundPosition.split(" "),f=a.style.height.replace("px",""),a.style.backgroundPosition=
b[0]+" -"+2*f+"px");"A"==a.tagName&&(a.setAttribute("tabIndex","-1"),a.setAttribute("aria-disabled","true"),null!=a.getAttribute("fromicon")?(a.setAttribute("href_original",a.getAttribute("href")),a.setAttribute("href","#")):(a.setAttribute("href_original",a.getAttribute("href")),a.setAttribute("href","#"),a.onclick_func=a.onclick,a.onclick=null));if("A"==a.tagName||"BUTTON"==a.tagName)pega.util.Dom.addClass(a,"disabledStyle"),a.setAttribute("tabIndex","-1");"img"==a.tagName.toLowerCase()&&'["DatePicker"]'==
a.getAttribute("data-ctl")&&(""!=a.className&&null!=a.className&&(a.className+="_disabled"),a.previousSibling&&"function"===typeof a.previousSibling.hasAttribute&&a.previousSibling.hasAttribute("data-ctl")&&a.previousSibling.classList.contains("rdOnlySpn")&&a.previousSibling.removeAttribute("data-ctl"))}}},controlEnabler:function(d){var c,e="button A img input select textarea i".split(" ");enableDisableAnypicker(d,!0);for(var b=0;b<e.length;b++)if(c=d.getElementsByTagName(e[b]),"button"!=e[b]&&"A"!=
e[b]&&"img"!=e[b]&&"i"!=e[b])for(var f=0;f<c.length;f++){var a=c[f];if(0==a.disabled)return;a.disabled=!1;if(-1<(a.className?a.className.indexOf("multiselect-list"):-1)){var g=a.parentElement?a.parentElement.className:"";""!=g&&-1<g.indexOf("multiselect-disabled")&&(a.parentElement.className=a.parentElement.className.replace(" multiselect-disabled",""),a.style.display="block")}}else if(null!=c[0]){a=c[0];if(null==a.getAttribute("disabled"))break;a.removeAttribute("disabled");if("true"==a.isIcon||
"Icon"==a.getAttribute("data-ctl"))a.className=a.className.replace("_disabled",""),f=a.title,(c=a.getAttribute("data-focus")||a.getAttribute("data-click")||a.getAttribute("data-hover")||a.getAttribute("data-rightclick")||a.getAttribute("data-dbclick")||a.getAttribute("data-keyup"))&&a.setAttribute("tabindex","0"),a.getAttribute("tempTitle")&&(a.title=a.getAttribute("tempTitle")),a.setAttribute("tempTitle",f),"-1"!=a.className.search(/(^|\s)cursordefault(\s|$)/)&&a.getAttribute("data-click")&&(a.className=
a.className.replace(/(^|\s)cursordefault(\s|$)/,"")),a.getAttribute("IsSprite")&&(c=a.style.backgroundPosition.split(" "),a.style.backgroundPosition=c[0]+" top"),a.hasAttribute("aria-disabled")&&a.removeAttribute("aria-disabled");"A"==a.tagName&&("-1"==a.getAttribute("tabindex")&&a.removeAttribute("tabindex"),a.hasAttribute("aria-disabled")&&a.removeAttribute("aria-disabled"),null!=a.onclick_func&&null==a.onclick?(a.setAttribute("href",a.getAttribute("href_original")),a.setAttribute("href_original",
"#"),a.onclick=a.onclick_func):null!=a.getAttribute("fromicon")&&null!=a.getAttribute("href_original")&&""!=a.getAttribute("href_original")&&(a.setAttribute("href",a.getAttribute("href_original")),a.setAttribute("href_original","")));if("A"==a.tagName||"BUTTON"==a.tagName)pega.util.Dom.removeClass(a,"disabledStyle"),"-1"==a.getAttribute("tabindex")&&a.removeAttribute("tabindex");"img"==a.tagName.toLowerCase()&&'["DatePicker"]'==a.getAttribute("data-ctl")&&(a.className=a.className.replace("_disabled",
""));a.previousSibling&&"function"===typeof a.previousSibling.hasAttribute&&!a.previousSibling.hasAttribute("data-ctl")&&a.previousSibling.classList.contains("rdOnlySpn")&&a.previousSibling.setAttribute("data-ctl",'["DatePicker"]')}}};pega.lang.augmentObject(pega.ui.Doc.prototype,enableD);
var lazyLoad={lazyLoadManager:new pega.ui.LoadManager({queuePopulator:function(a,e){var b=pega.ctx.dom.getElementById("lazyLoadInfo");if(b){for(var d=b.innerHTML,d=d.split("~#LLDELIM#~"),h=d.length-1,f,g={},c=0;c<h;c++){f=d[c].split(",");var l=f.length,k=null,m;if(!(""==f[0]||isNaN(f[0])||f[0]in g||0!=pega.ctx.dom.$("div[data-lazyloaddivid\x3d"+f[0]+"][class\x3d'lazyload-layout']").length)){g[f[0]]=1;for(var p=!1,n=0;n<l;n++)0<f[n].indexOf("\x3d")&&(m=f[n].split("\x3d"),2==m.length&&(k||(k=new SafeURL),
p||"isADP"!=m[0]||"1"!=m[1]?k.put(m[0],m[1]):p=!0));p&&e?e.push({reloadElement:f[0],layoutId:f[1],qParamsSafeURL:k,harnessId:pega.ctx.pzHarnessID}):a.enqueue({reloadElement:f[0],layoutId:f[1],qParamsSafeURL:k,harnessId:pega.ctx.pzHarnessID})}}b.parentNode.removeChild(b)}}}),parseLazyLoadSpan:function(a){var e="\x3cspan style\x3d'display:none' id\x3d'lazyLoadInfo'\x3e",b,d,h="";b=a.indexOf(e,0);-1==b&&(e='\x3cSPAN style\x3d"DISPLAY: none" id\x3dlazyLoadInfo\x3e',b=a.indexOf(e,0));-1==b&&(e='\x3cSPAN id\x3dlazyLoadInfo style\x3d"DISPLAY: none"\x3e',
b=a.indexOf(e,0));for(;-1<b;){d=a.indexOf("\x3c/span\x3e",b);0>d&&(d=a.indexOf("\x3c/SPAN\x3e",b));if(0>d)break;h+=a.substring(b+e.length,d);b=a.indexOf(e,d)}h&&(a=document.createElement("SPAN"),a.style.display="none",a.id="lazyLoadInfo",a.innerHTML=h,document.body.appendChild(a))},handleDeferLoading:function(a){var e=!1;if(null!=a&&null!=a.length)for(var b=0;b<a.length;b++)if(a[b].getAttribute("data-defer")){e=!0;break}if(e){document.getElementById("pyActionArea")&&(a=SafeURL_createFromEncryptedURL(document.main.action))&&
(a.put("pyActivity","Show-Harness"),a.put("HarnessMode",pega.ui.HarnessContextMap.getCurrentHarnessContext().getProperty("strHarnessMode")),document.main.action=a.toURL());pega.control.PlaceHolder.removePlaceHolderValues(document.main);try{var d=document.createElement("input");d.type="hidden";d.name="EXPAND_ALL";d.value="true";document.main.appendChild(d)}catch(h){}pega.u.d.fixBaseThreadTxnId();document.main.submit()}},loadContainer:function(a,e,b){e=void 0===e?window.event:e;"function"===typeof this.expandIt&&
this.expandIt(a,e);a.onclick=function(a){a=a||window.event;expandHeader(this,a)};a.onkeydown=function(a){a=a||window.event;13===a.keyCode&&expandHeader(this,a)};this.loadLayout(a,e,b)},loadLayout:function(a,e,b,d,h){var f=pega.ctx.dom.getContextRoot();for(null==a&&(a=pega.util.Event.getTarget(e));"EXPAND-OUTERFRAME"!=a.id&&"tab"!==a.getAttribute("data-role")&&"tab"!==a.getAttribute("role");)if(a=a.parentNode,a==f)return;var f=h?!1:!0,g=a.getAttribute("PARAM_NAME");d||(d=$(pega.util.Event.getTarget(e)).closest("[id\x3d'EXPAND-PLUSMINUS']").siblings("[id\x3d'EXPAND-INNERDIV']"))&&
null!=d&&1!=d.length&&(d=pega.ctx.dom.querySelector("#EXPAND-INNERDIV",a));d.length&&(d=d[0]);e=this.getReadOnlyValue("",d);if(null==b||"harness"==b)b=new SafeURL("Rule-HTML-Harness.GetContainerHTML"),b.put("pzPrimaryPageName",strPrimaryPage),b.put("ClassName",strHarnessClass),b.put("StreamName",strHarnessPurpose),b.put("PrimaryPage",strPrimaryPage);else{var c=pega.u.d.getSectionDiv(d);if(!c)return;var l=this.getBaseRef(d);b=SafeURL_createFromURL(pega.ctx.url);var k=a.getAttribute("INDEX");b.put("pyActivity",
"ReloadSection");b.put("StreamName",c.getAttribute("node_name"));b.put("StreamClass",c.getAttribute("objclass"));b.put("bClientValidation",bClientValidation);b.put("BaseReference",l);b.put("pzKeepPageMessages","true");l=pega.ctx.strHarnessPurpose||"";b.put("strPHarnessClass",pega.ctx.strHarnessClass||"");b.put("strPHarnessPurpose",l);(c=c.getAttribute("expandRL"))&&b.put("expandRL",c);k&&b.put("index",k);b.put("Increment","true");k=d.firstElementChild?d.firstElementChild.hasAttribute("data-template"):
d.hasAttribute("data-template");b.put("UITemplatingStatus",k?"Y":"N")}b.put("ReadOnly",e);(h=h?h:d.getAttribute("data-deferinvoke"))?(b.put("pyCallStreamMethod",h),b.put("pyLayoutMethodName",h)):b.put("RenderSingle",g);this.setBusyIndicator(a);this.asyncRequest("POST",b,{success:this.handleLoadSuccess,failure:this.handleLoadFail,scope:this,argument:[d,a,g,f]},"")},handleLoadSuccess:function(a){var e=a.responseText,b=a.argument[0],d=a.argument[1],h=a.argument[2],f=3<a.argument.length?a.argument[3]:
!1;if(a.argument[8]&&a.argument[8].nullify){a.argument[8].nullify();var g=pega.u.d.harnessElements;if(g)for(var c=0;c<g.length;c++)if(g[c].element===a.argument[8]){g.splice(c,1);break}}g=document.createElement("DIV");pega.util.Event.isIE?g.innerHTML=b.outerHTML:(c=b.cloneNode(!0),g.appendChild(c));g=f?pega.util.Dom.getElementsById("EXPAND-INNERDIV",g):g;if(!pega.u.d.checkExceptions(e,b)){g&&(f&&0<g.length?(g[0].innerHTML=e,g=g[0]):g.innerHTML=e);var l=pega.util.Dom.getElementsById("EXPAND-OUTERFRAME",
g),k=l,c="";if(b.getAttribute("data-deferinvoke"))$(d).find(".header-left[data-defer\x3d'true']").removeAttr("data-defer"),(h=$(g).children(".rdlWrapperDiv").get(0))?(f=$(g).children("script").get(0),d=!1,f&&(pega.u.d.loadDOMObject(b,f.outerHTML),d=!0),d?pega.u.d.loadDOMObject(b,h.outerHTML,null,{domAction:"append",domElement:b}):pega.u.d.loadDOMObject(b,h.outerHTML)):this.loadDOMObject(b,$(g).children().first().prop("outerHTML")),b.removeAttribute("data-deferinvoke");else if(l){for(c=0;c<l.length&&
(k=l[c],l[c].getAttribute("PARAM_NAME")!=h);c++);f?(c=pega.util.Dom.getElementsById("EXPAND-INNERDIV",k))&&0<c.length&&(c=c[0]):(c=(h="TABLE"==k.tagName.toUpperCase()?pega.util.Dom.getChildren(k.rows[0].cells[0]):pega.util.Dom.getChildren(k))&&2==h.length?h[1]:h[0],pega.util.Dom.hasClass(b,"expandInnerDivStyle")&&pega.util.Dom.hasClass(c,"expandInnerDivStyle")||(f=null,8<=a.argument.length&&(f=a.argument[7]),f&&f.gridDiv?(f.bRefreshOnUpdate&&2==h.length&&(b=b.parentNode),"DIV"==c.tagName.toUpperCase()&&
pega.util.Dom.hasClass(c,"layout-noheader")||(c=c.parentNode)):c=c.parentNode));a.argument[8]&&"harness"==a.argument[8].editConfig&&this.cleanUpHarnessElements(null,[b]);this.loadDOMObject(b,c.innerHTML)}else this.loadDOMObject(b,"\x26nbsp;");c&&(c.innerHTML=e,this.handleFormErrors(c));if("reloadRepeat"==a.argument[5]){try{"paginator-element"===a.argument[4].focus?this.getFocusOnPaginatorElement(b,a.argument[4]["grid-action-class"]):this.getFocusOnNewRow(a.argument[4][0],a.argument[4][1],b)}catch(m){}pega.u.d.inCall=
!1;pega.u.d.changeInEventsArray&&pega.u.d.changeInEventsArray.fire();pega.u.d.gBusyInd.hide()}(a=pega.util.Dom.getElementsById("PegaOnlyOnce",g))&&a[0]&&this.handleOnlyOnce(a[0])}pega.u.d.gBusyInd.hide()},handleLoadFail:function(a){pega.u.d.gBusyInd.hide();pega.u.d.inCall=!1;pega.u.d.changeInEventsArray&&pega.u.d.changeInEventsArray.fire()},doLazyLoad:function(){setTimeout(function(){pega.u.d.lazyLoadManager.startLoading()},10)}};pega.lang.augmentObject(pega.ui.Doc.prototype,lazyLoad);lazyLoad=null;
var busyI={gBusyInd:null,busyIndInterval:2E3,setBusyIndicator:function(a,c,b){null==pega.u.d.gBusyInd?pega.u.d.gBusyInd=null!==a?new pega.ui.busyIndicator(busyIndText,!0,a,pega.u.d.busyIndInterval):document.frames&&"actionIFrame"==document.frames.name?new parent.pega.ui.busyIndicator(busyIndText,!0,parent.document.getElementById("PEGA_HARNESS"),pega.u.d.busyIndInterval):new pega.ui.busyIndicator(busyIndText,!0,document.getElementById("PEGA_HARNESS"),pega.u.d.busyIndInterval):a?pega.u.d.gBusyInd.setTargetElement(a):
pega.u.d.gBusyInd.setTargetElement(document.getElementById("PEGA_HARNESS"));pega.u.d.gBusyInd.show(c,b);return pega.u.d.gBusyInd},setBusyIndicatorWithDelay:function(a,c){if(pega.u.d.gBusyInd){var b=pega.u.d.gBusyInd.busyIndInterval;pega.u.d.gBusyInd.busyIndInterval=c}else b=pega.u.d.busyIndInterval,pega.u.d.busyIndInterval=c;pega.u.d.setBusyIndicator(a,!1,!0);pega.u.d.gBusyInd.busyIndInterval=b},makeButtonBusy:function(a,c){if(pega.util.Event.isIE){if(a&&a.style){if(c)if("HTMLPROPERTY"==a.getAttribute("PEGA_VERSION")){var b=
this.findParentTable(a),d=b.parentNode;d&&(d.removeChild(b),d.innerHTML="\x3ctable border\x3d'0' cellspacing\x3d'0' cellpadding\x3d'0' style\x3d'width: 100%; text-align: center;'\x3e\x3ctr\x3e\x3ctd nowrap\x3e\x3cspan class\x3d'buttonTextWorking'\x3e"+c+"\x3c/span\x3e\x3cspan class\x3d'buttonIconWorking'\x3e\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x3c/span\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}else a.innerHTML="\x3cspan class\x3d'buttonTextWorking'\x3e"+c+"\x3c/span\x3e\x3cspan class\x3d'buttonIconWorking'\x3e\x3c/span\x3e";
if("BUTTON"==a.tagName||"INPUT"==a.tagName&&"button"==a.type)a.disabled=!0}}else if(a&&a.style&&c)if("HTMLPROPERTY"==a.getAttribute("PEGA_VERSION")){if(b=this.findParentTable(a),b.style.display="none",d=b.parentNode)a=document.createElement("Table"),a.border=0,a.style.display=pega.util.Event.isSafari?"-webkit-inline-box":"-moz-inline-box",a.innerHTML="\x3ctr\x3e\x3ctd nowrap\x3e\x3cspan class\x3d'buttonTextWorking'\x3e"+c+"\x3c/span\x3e\x3cspan class\x3d'buttonIconWorking'\x3e\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x3c/span\x3e\x3c/td\x3e\x3c/tr\x3e",
d.appendChild(a)}else a.innerHTML="\x3cspan class\x3d'buttonTextWorking'\x3e"+c+"\x3c/span\x3e\x3cspan class\x3d'buttonIconWorking'\x3e\x3c/span\x3e"},setBusyState:function(a,c,b,d,e){d=void 0==d?window.event:d;pega.mobile&&pega.mobile.sdk&&pega.mobile.sdk.ui&&(pega.mobile.sdk.ui._isDocInBusyState=!0);b||(b=pega.u.d.getDocumentElement());pega.u.d.isAccessible?(d&&pega.u.d.makeButtonBusy(a,c),this.disableAllOtherButtons(null,b)):(this.disableAllOtherButtons(null,b),d&&(pega.util.Event.getTarget(d),
window.setTimeout(function(){pega.u.d.makeButtonBusy(a,c)},0)));window.setTimeout("pega.u.d.setBusyStyle()",10);e||"actionIFrame"!=window.name||this.setBusyState(a,null,parent.document,d,!0)},setBusyStyle:function(){try{this.addClass(document.body,"busyBody"),pega.u.d.cpm&&sendEvent("pega_ui_busyIndicator",{EventType:"Busy"})}catch(a){}},resetBusyState:function(){pega.mobile&&pega.mobile.sdk&&pega.mobile.sdk.ui&&(pega.mobile.sdk.ui._isDocInBusyState=!1);this.enableAllButtons(document);this.removeClass(document.body,
"busyBody");if("actionIFrame"==window.name){var a=parent.document;this.enableAllButtons(a);this.removeClass(a.body,"busyBody")}pega.u.d.cpm&&sendEvent("pega_ui_busyIndicator",{EventType:"NotBusy"})}};pega.lang.augmentObject(pega.ui.Doc.prototype,busyI);busyI=null;
var tabSupport={tabsLen:[],tabViewIndex:0,modalTabElementsWidth:0,modalTabContentWidth:0,showTargetTab:!1,TAB_ELE_WIDTH_ADJUSTMENT:100,initializeTabs:function(){var a=pega.util.Dom.getElementsById("PEGA_TABBED");if(null!=a&&null!=a){var c=document.getElementById("PEGA_LU_L");c&&!pega.util.Event.isIE&&(c=pega.util.Dom.getElementsById("PEGA_TABBED",c,"DIV"))&&0<c.length&&(c=c[0],c=c.getElementsByClassName("tabContent","DIV")?c.getElementsByClassName("tabContent","DIV")[0]:null)&&(c.style.width=c.scrollWidth+
"px");for(var c=a.length,b=0;b<c;b++,pega.u.d.tabViewIndex++){var d=pega.util.Dom.hasClass(a[b],"with-fixed-header");d&&pega.util.Dom.addClass(document.body,"with-fixed-header");pega.u.d.tabsLen.push(pega.u.d.tabViewIndex);a[b].id="PEGA_TABBED"+pega.u.d.tabViewIndex;pega.u.d.tabViewMap||(pega.u.d.tabViewMap={});pega.u.d.modalTabViewMap||(pega.u.d.modalTabViewMap={});var f;f=d?"-1":pega.u.d.markSectionTabErrors(a[b]);var e=new pega.ui.TabView(a[b]);pega.u.d.setTabsContentAndContainerID(e,a[b].getAttribute("defaultTab"));
pega.u.d.tabViewMap["PEGA_TABBED"+pega.u.d.tabViewIndex]=e;var g=a[b].getAttribute("defaultTab");String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var g=g.trim(),h=a[b].getAttribute("activeWhenTab");h&&""!=h&&(g=h);pega.u.d.bModalDialogOpen&&(pega.u.d.modalTabViewMap["PEGA_TABBED"+pega.u.d.tabViewIndex]=e);h=0;if("-1"==f){var k;k=d?$(".dc-header ul.tab-ul li"):a[b].getElementsByTagName("li");d=[];for(f=0;f<k.length;f++)"ol"!=k[f].parentNode.tagName.toLowerCase()&&
d.push(k[f]);pega.u.d.bModalDialogOpen&&(pega.u.d.modalTabElementsWidth=pega.u.d.TAB_ELE_WIDTH_ADJUSTMENT);k=!0;for(f=0;f<d.length;f++){var l=d[f];l.id=="Tab"+g&&k&&(h=f,k=!1);pega.u.d.bModalDialogOpen&&0<=l.id.indexOf("Tab")&&(l=parseInt(d[f].scrollWidth),0==l&&(l=pega.u.d.TAB_ELE_WIDTH_ADJUSTMENT),pega.u.d.modalTabElementsWidth+=l)}}else h=f;g=e.get("tabs");if(0<g.length){k="";for(d=0;d<g.length;d++){f=g[d].get("element");(k=f.querySelector("img"))&&pega.u.d.setSVGIcon(g,d,k);if(k=e.getTabLabelIconAndTooltip(f).label)g[d].label=
k;k=f.getAttribute("isADynamicContainer");"true"==k&&(e.isDCTabView=!0);"true"!=k&&""!=f.id&&(pega.util.Event.addListener(f,"keydown",pega.u.d.tabAccessibilityHandler),pega.util.Event.addListener(f,"keyup",pega.u.d.tabAccessibilityHandler));pega.env.ua.ie&&10>pega.env.ua.ie&&$(a[b]).hasClass("rotatedTabs")&&(-1<$(f).parent("ul").attr("class").indexOf("-r")||-1<$(f).parent("ul").attr("class").indexOf("-l"))&&$(f).parent("ul").scroll(function(){this.scrollLeft=0})}pega.u.d.setAriaAttributes(e,!1);g=
g[g.length-1];d=g.get("element");pega.util.Dom.hasClass(d,"rightborder")&&(g.set("disabled",!0),d.style.cursor="default");g={tabGrpDiv:a[b],tabGrp:e,secType:"tabbed"};pega.u.d.harnessInit&&(g.focusElement=pega.u.d.initFocusOnFirstInput);e.setHarnessHeaderIconsHeightWidth();e.on("activeTabChange",pega.u.d.setActiveTabIndex,g);e.on("activeTabChange",pega.u.d.fixTabs,g);e.on("activeTabChange",pega.u.d.onActivate);e.on("tabRemoved",pega.u.d.tabRemoved);e.on("tabAdded",pega.u.d.tabAdded);try{e.set("activeIndex",
h)}catch(m){e.set("activeIndex",0)}}}a=document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop;document.getElementById("PegaRULESErrorFlag")||window.scrollTo(0,a);pega.u.d.fixTabsClosure&&(pega.u.d.fixTabsClosure=null);pega.u.d.fixTabsClosure=function(){for(var a in pega.u.d.tabViewMap){var b=pega.u.d.tabViewMap[a];pega.u.d.fixTabs(null,{tabGrpDiv:b.get("element"),tabGrp:b,secType:"tabbed"})}};pega.u.d.registerResize(pega.u.d.fixTabsClosure)}},initTabs:function(){if(!pega.util.Dom.hasClass(document.body,
"forPrinting")){var a=pega.util.Dom.getElementsById("TabGroup",document);if(null!=a)for(var c=a.length,b=0;b<c;b++){pega.u.d.drawTab(a[b].getAttribute("defaultTab"),a[b]);var d=pega.util.Dom.getElementsById("tabTable",a[b]);d&&(d=d[0],pega.util.Event.addListener(d,"keydown",pega.u.d.harnessTabAccessibilityHandler),pega.util.Event.addListener(d,"keyup",pega.u.d.harnessTabAccessibilityHandler))}}},tabRemoved:function(a){var c=a.tabs;a=c.length;c=(c=0<a?c[0]:null)?c.get("element"):null;1==a&&c&&pega.util.Dom.hasClass(c,
"rightborder")&&(c.style.visibility="hidden")},tabContentAccessibilityHandler:function(a,c){for(var b=pega.ui.accessibility.AccessKeyMap,d="Top",f=c.get("element"),e=f.parentElement;e&&0>e.id.indexOf("PEGA_TABBED");)e=e.parentElement;null!=e&&(d=e.getAttribute("data-pos"));""==d&&$("body").hasClass("screen-layout-body")&&(e=$(".dc-main").children().eq(0)[0])&&0<=e.id.indexOf("PEGA_TABBED")&&(d=e.getAttribute("data-pos"));switch(a.type){case "keyup":a[b.CLOSE_TAB.modifier1]&&!a[b.CLOSE_TAB.modifier2]&&
b.CLOSE_TAB.keyCode==a.keyCode&&c.attribs&&"yes"==c.attribs.close?pega.u.d.doClose.call(pega.u.d,a):a[b.PREVIOUS_TAB_CONTENT.modifier1]&&b.PREVIOUS_TAB_CONTENT.keyCode==a.keyCode?(pega.util.Event.preventDefault(a),pega.util.Event.stopPropagation(a),a=$(f).prev(),0!=a.length?(a[0].focus(),a[0].click()):0==a.length&&("Top"==d?$(f).parent().children().eq(-2)[0].click():$(f).parent().children().eq(-1)[0].click())):a[b.NEXT_TAB_CONTENT.modifier1]&&b.NEXT_TAB_CONTENT.keyCode==a.keyCode&&(pega.util.Event.preventDefault(a),
pega.util.Event.stopPropagation(a),d=$(f).next(),0<d.length&&""!=d[0].id?(d[0].focus(),d[0].click()):(f=$(f).parent().children().eq(0)[0],f.focus(),f.click()))}},registerTabContentAccessibilityHandler:function(a){pega.util.Event.addListener(document.body,"keyup",pega.u.d.tabContentAccessibilityHandler,a)},tabAccessibilityHandler:function(a){for(var c=pega.ui.accessibility.AccessKeyMap,b=pega.util.Event.getTarget(a),d="",f=!1;null!=b&&"LI"!=b.tagName;)b=b.parentElement;if(b){for(var e=b.parentElement;e&&
0>e.id.indexOf("PEGA_TABBED");)e=e.parentElement;null!=e&&(d=e.getAttribute("data-pos"),f=0<e.className.indexOf("stretchedTabs"));""==d&&$("body").hasClass("screen-layout-body")&&(e=$(".dc-main").children().eq(0)[0])&&0<=e.id.indexOf("PEGA_TABBED")&&(d=e.getAttribute("data-pos"));e=function(a){var b;a&&(a.match("tab-li-t-ns-selected")?b="tab-li-t-ns-selected":a.match("tab-li-b-ns-selected")?b="tab-li-b-ns-selected":a.match("tab-li-l-ns-v-selected")?b="tab-li-l-ns-v-selected":a.match("tab-li-l-ns-h-selected")?
b="tab-li-l-ns-h-selected":a.match("tab-li-r-ns-v-selected")?b="tab-li-r-ns-v-selected":a.match("tab-li-r-ns-h-selected")&&(b="tab-li-r-ns-h-selected"));return b};switch(a.type){case "keydown":c.PREVIOUS_TAB_HORIZONTAL.keyCode==a.keyCode||c.PREVIOUS_TAB_VERTICAL.keyCode==a.keyCode?(c=e(b.className),$(b).removeClass("selected "+c),e=b.previousSibling||b.previousElementSibling,null!=e?$(e).addClass("  selected "+c+" ").focus():"Top"!=d||f?$(b).parent().children().eq(-1).addClass(" selected "+c+" ").focus():
$(b).parent().children().eq(-2).addClass(" selected "+c+" ").focus(),pega.util.Event.stopPropagation(a),pega.util.Event.preventDefault(a)):c.NEXT_TAB_HORIZONTAL.keyCode==a.keyCode||c.NEXT_TAB_VERTICAL.keyCode==a.keyCode?(c=e(b.className),$(b).removeClass("selected "+c),d=b.nextSibling||b.nextElementSibling,null!=d&&""!=d.id?$(d).addClass(" selected "+c+" ").focus():$(b).parent().children().eq(0).addClass(" selected "+c+" ").focus(),pega.util.Event.stopPropagation(a),pega.util.Event.preventDefault(a)):
c.CLOSE_TAB_BY_ACTIONKEY.keyCode==a.keyCode&&(b=pega.util.Event.getTarget(a),"iconCloseSmall"==b.className&&(pega.util.Event.stopPropagation(a),pega.util.Event.preventDefault(a)),pega.util.Event.stopPropagation(a),pega.util.Event.preventDefault(a));break;case "keyup":c.PREVIOUS_TAB_HORIZONTAL.keyCode==a.keyCode||c.PREVIOUS_TAB_VERTICAL.keyCode==a.keyCode||c.NEXT_TAB_HORIZONTAL.keyCode==a.keyCode||c.NEXT_TAB_VERTICAL.keyCode==a.keyCode||c.SPACE.keyCode==a.keyCode?(pega.util.Event.stopPropagation(a),
pega.util.Event.preventDefault(a),b.click()):c.CLOSE_TAB_BY_ACTIONKEY.keyCode==a.keyCode&&(b=pega.util.Event.getTarget(a),"iconCloseSmall"==b.className&&b.click&&(b.click(),pega.util.Event.stopPropagation(a),pega.util.Event.preventDefault(a)))}}},onActivate:function(a){if(a.prevValue==a.newValue){var c=!0;a.newValue&&a.newValue.activationSyncRequired&&(c=!1,delete a.newValue.activationSyncRequired);if(c)return}var b="false",c=null;if(pega.web&&pega.web.api&&a.prevValue){var d=pega.web.api.doAction(a.prevValue.GadgetName,
"getUIDoc");d&&(b=d.isFormDirty(!1));c={prevContentID:a.prevValue.elementName,prevRecordkey:a.prevValue.key,prevFormDirty:b}}if(a.newValue&&a.newValue.skipNextActivationSync)delete a.newValue.skipNextActivationSync;else if((a.newValue.tabGroupName||a.newValue.docGroupName||a.newValue.elementName||a.newValue.removedTabName||a.newValue.removedTabsTabGroup||a.newValue.removedDocumentName||a.newValue.removedDocumentsDocumentGroup)&&a.newValue&&(!a.newValue.tabview||0!=a.newValue.tabview.isDCTabView)){b=
"false";pega.web&&pega.web.api&&a.prevValue&&(d=pega.web.api.doAction(a.newValue.GadgetName,"getUIDoc"))&&a.newValue.key==d.documentKey&&(b="true");b={dynamicContainerID:a.newValue.tabGroupName||a.newValue.docGroupName,tabIndex:a.newValue.tabview.getTabIndex(a.newValue)+1,label:a.newValue.label,key:a.newValue.key,iconPath:a.newValue.iconPath,isDocumentKey:b,recentAction:a.prevValue.recentAction};b.dynamicContainerID||!a.newValue.docGroupName&&!a.newValue.tabGroupName||(b.dynamicContainerID=a.newValue.docGroupName||
a.newValue.tabGroupName);a.newValue.actionDef&&"undefined"!=a.newValue.actionDef&&a.newValue.actionDef.className&&"undefined"!=a.newValue.actionDef.className&&(b.className=a.newValue.actionDef.className);var f={dynamicContainerID:a.newValue.removedTabsTabGroup||a.newValue.removedDocumentsDocumentGroup,tabIndex:a.newValue.removedTabIndex||a.newValue.removedDocumentIndex};a.newValue.removedTabName=a.newValue.removedTabsTabGroup=a.newValue.removedTabIndex=a.newValue.removedDocumentName=a.newValue.removedDocumentIndex=
a.newValue.removedDocumentsDocumentGroup=null;d=d||pega.u.d;d.sendReqToUpdateElementModal(b,"ACTIVE",f,c,a,"true")}},setSVGIcon:function(a,c,b){var d=b.src;if(".svg"===d.slice(-4)){a[c].svgPath=d;var f=new XMLHttpRequest;f.open("get",d,!0);f.onreadystatechange=function(){if(4===f.readyState){var a=f.responseXML.documentElement,a=document.importNode(a,!0);a.style.display="inline";a.style.verticalAlign="middle";b.parentNode.appendChild(a);b.parentNode.removeChild(b)}};f.send()}},setAriaAttributes:function(a,
c){if(!c||a._isSectionAccordion){for(var b,d,f=a.get("tabs"),e=f.length,g=0;g<e;g++){var h=f[g];d=h.get("element");h=h.get("contentEl");(b=d.getAttribute("id"))&&h.setAttribute("aria-labelledby",b);h.setAttribute("role","tabpanel");pega.u.d.isAccessible||pega.util.Dom.addClass(h,"tabpanelnofocus");c?(d=d.getElementsByTagName("a")[0],d.setAttribute("aria-selected","false"),d.setAttribute("aria-expanded","false"),h.setAttribute("tabIndex","0")):(d.setAttribute("aria-selected","false"),d.setAttribute("tabIndex",
"-1"),h.setAttribute("tabIndex","-1"),b=pega.util.Dom.getElementsByClassName("iconCloseSmall","span",d),0!=b.length&&b[0].setAttribute("tabindex","-1"));h.setAttribute("aria-hidden","true")}if(h=a.get("activeTab"))d=h.get("element"),h=h.get("contentEl"),c?(d=d.getElementsByTagName("a")[0],d.setAttribute("aria-expanded","true"),d.setAttribute("aria-selected","true")):(d.setAttribute("aria-selected","true"),b=pega.util.Dom.getElementsByClassName("iconCloseSmall","span",d),0!=b.length&&b[0].setAttribute("tabindex",
"0")),d.setAttribute("tabIndex","0"),h.setAttribute("tabIndex","0"),h.setAttribute("aria-hidden","false"),a=f[f.length-1].get("element"),pega.util.Dom.hasClass(a,"rightborder")&&a.removeAttribute("aria-selected")}},getNextOperableLi:function(a,c){var b=function(a){var b=null;for(a&&(b=a.nextElementSibling||a.nextSibling);b&&""!=b.id;)a=b,b=a.nextElementSibling||a.nextSibling;return a},d=function(a){for(;a&&(a.previousElementSibling||a.previousSibling);)a=a.previousElementSibling||a.previousSibling;
return a},f=null;switch(a){case -1:(f=c.previousElementSibling||c.previousSibling)||(f=b(c));break;case 1:if(f=c.nextElementSibling||c.nextSibling,!f||f&&""==f.id)f=d(c)}return f},fireCapturedDCModelUpdate:function(){var a=pega.desktop.support.getDesktopWindow();if(a&&a.pega.u.d.isDCModelCapturing&&a.pega.u.d.capturedDCDataModal&&0<a.pega.u.d.capturedDCDataModal.length){var c=a.pega.u.d.lastActiveTabChangeEvent,b=!0;c&&pega.web&&pega.web.api&&(c=pega.web.api.doAction(c.newValue.GadgetName,"getUIDoc"))&&
(b=!1,c.fireCapturedDCModelUpdate());b&&(b=new SafeURL("@baseclass.pzUpdateCapturedDCModel"),b.put("CapturedModel",JSON.stringify(a.pega.u.d.capturedDCDataModal)),b.put("pzKeepPageMessages","true"),pega.u.d.asyncRequest("POST",b,null,null),delete a.pega.u.d.capturedDCDataModal);delete a.pega.u.d.isDCModelCapturing;delete a.pega.u.d.lastActiveTabChangeEvent}},enableDCModelCapturing:function(){var a=pega.desktop.support.getDesktopWindow();a&&(a.pega.u.d.isDCModelCapturing=!0)},sendReqToUpdateElementModal:function(a,
c,b,d,f,e){e&&pega.ctxmgr.setRootDocumentContext();var g=new SafeURL("@baseclass.pzUpdateClipboardModels"),h=pega.ui.HarnessContextMgr;g.put("elementAction",c);b&&(b.contentID||b.tabIndex)&&b.dynamicContainerID&&g.put("elementAction","CLOSE");if(pega.ui.hasAjaxContainer&&!e&&void 0!==a.mdcTarget){e=pega.redux.Utils.getAjaxContainerState(a.mdcTarget);for(var k=e.activeDocs,k=k[k.length-1],l,m=0;m<e.mdcDocs.length;++m)if(parseInt(e.mdcDocs[m].recordId.split("_")[1])===k){l=m;break}"CLOSE"==c?(a.isMDC&&
(g.put("isMDC",a.isMDC),g.put("mdcTarget",a.mdcTarget)),e.docToClose&&g.put("tabIndex",e.docToClose.tabIndex),g.put("newTabIndex",l+1)):g.put("tabIndex",l+1);0<e.activeDocs.length&&g.put("mdcRecordId",a.mdcTarget+"_"+k);"openSection"===a.action&&g.put("action","openSection");"CLOSE"==c&&"openSection"===a.action&&(g.put("mdcRecordId",a.mdcRecordId),g.put("mdcTarget",a.mdcTarget));"ACTIVE"==c&&"openSection"===a.action&&(g.put("mdcRecordId",a.mdcTarget+"_"+k),g.put("mdcTarget",a.mdcTarget));(c=a.parentThreadName||
pega.u.MDCUtil.getParentThreadName())&&g.put("parentThreadName",c)}(c=pega.ctx.isAssociateReqThread&&!pega.ctx.isMDC&&!a.isMDC)?g.put("pxReqURI",pega.u.d.getPortalReqURI()):g.put("pxReqURI",pega.ctx.pxReqURI);d&&(d.prevContentID&&g.put("prevContentID",d.prevContentID),d.prevRecordkey&&g.put("prevRecordkey",d.prevRecordkey),d.prevFormDirty?g.put("prevFormDirty",d.prevFormDirty):g.put("prevFormDirty","false"));if("ACTIVE"==g.get("elementAction")||"OPEN"==g.get("elementAction"))a.key&&g.put("key",a.key),
a.isMDC&&(g.put("isMDC",a.isMDC),g.put("mdcTarget",a.mdcTarget)),a.dynamicContainerID&&g.put("dynamicContainerID",a.dynamicContainerID),a.contentID&&g.put("contentID",a.contentID),a.tabIndex&&g.put("tabIndex",a.tabIndex),0<=a.threadID&&g.put("threadID",a.threadID),a.className&&g.put("className",a.className),a.primaryHarnessPageName&&g.put("pzPrimaryHarnessPageName",a.primaryHarnessPageName),a.pyStreamName&&g.put("pyStreamName",a.pyStreamName),a.label&&g.put("label",a.label),a.iconPath&&g.put("iconPath",
a.iconPath),a.parameters&&g.put("parameters",JSON.stringify(a.parameters)),a.isDocumentKey&&g.put("isDocumentKey",a.isDocumentKey);"CLOSE"==g.get("elementAction")&&(a.dynamicContainerID&&g.put("dynamicContainerID",a.dynamicContainerID),a.isDocumentKey&&g.put("isDocumentKey",a.isDocumentKey),a.key&&g.put("key",a.key),a.contentID&&g.put("newContentID",a.contentID),a.tabIndex&&g.put("newTabIndex",a.tabIndex),0<=a.threadID&&g.put("threadID",a.threadID),a.className&&g.put("className",a.className),a.primaryHarnessPageName&&
g.put("pzPrimaryHarnessPageName",a.primaryHarnessPageName),a.pyStreamName&&g.put("pyStreamName",a.pyStreamName),a.label&&g.put("label",a.label),a.iconPath&&g.put("iconPath",a.iconPath),b&&(b.contentID&&g.put("contentID",b.contentID),b.tabIndex&&g.put("tabIndex",b.tabIndex),b.key&&g.put("closedTabKey",b.key),void 0!=b.isActiveHost&&g.put("isActiveHost",b.isActiveHost)),g.put("prevFormDirty","false"));(d=pega.ui.HarnessContextMgr.get("portalName"))&&""!=d&&g.put("portalName",d);g.put("pzKeepPageMessages",
"true");if((d=pega.desktop.support.getDesktopWindow())&&!0===d.pega.u.d.isDCModelCapturing)d.pega.u.d.capturedDCDataModal=d.pega.u.d.capturedDCDataModal||new d.Array,delete g.hashtable.pyActivity,d.pega.u.d.capturedDCDataModal.push(JSON.parse(JSON.stringify(g.hashtable))),d.pega.u.d.lastActiveTabChangeEvent=f;else try{b&&b.fromClosingDocumentAfterF5&&0<pega.util.Event.isIE?$.ajax({type:"POST",url:g.toURL(),async:!1}):(d||(d=window),b={success:function(){pega.u.d.evaluateClientConditions("TCL")}},
c?"ClearAllRecentItems"==a.recentAction?d.pega.u.d.asyncRequest("POST",g,b,null,{bAsync:!1}):d.pega.u.d.asyncRequest("POST",g,b,null):"ClearAllRecentItems"==a.recentAction?pega.u.d.asyncRequest("POST",g,b,null,{bAsync:!1}):(pega.ctx.isMDC&&(pega.ctx.activeCSRFToken=h.getRootDocumentContext().activeCSRFToken),pega.u.d.asyncRequest("POST",g,b,null)))}catch(n){alert("Error while updating the Data Modal.")}},tabAdded:function(a){var c=a.tabs;a=c.length;c=(c=1<a?c[1]:null)?c.get("element"):null;2==a&&
c&&pega.util.Dom.hasClass(c,"rightborder")&&(c.style.visibility="visible")},fixLastTab:function(a,c){var b=a.parentNode.childNodes[0];if(b){var b=b.childNodes[0],d=parseFloat(pega.util.Dom.getStyle(b,"borderTopWidth")),f=parseFloat(pega.util.Dom.getStyle(b,"borderBottomWidth")),e=parseFloat(pega.util.Dom.getStyle(a,"borderBottomWidth"));if(b=b&&0<b.clientHeight?b.clientHeight+d+f-e:null)a.style.height=b+"px"}a.style.paddingTop="0px";!pega.util.Event.isIE&&(a=c.getElementsByClassName("tabContent",
"DIV")?c.getElementsByClassName("tabContent","DIV")[0]:null)&&(a.style.marginTop="0px")},setTabsContentAndContainerID:function(a,c){if(a){a=a.get("tabs");for(var b=a.length,d=0;d<b;d++){var f=a[d];if(f){c==d+1&&(f.skipNextActivationSync=!0);var e=f.get("element");f.elementName=e.getAttribute("elementName");f.docGroupName=e.getAttribute("tabGroupName");f.tabGroupName=e.getAttribute("tabGroupName")}}}},fixTabs:function(a,c){a=pega.util.Dom.hasClass;if(c&&"tabbed"==c.secType){var b=c.tabGrp.get("tabs"),
b=b[b.length-1].get("element");a(c.tabGrpDiv,"stretchedTabs")&&0<c.tabGrpDiv.offsetHeight&&pega.u.d.fixStretch(b.parentNode,a(c.tabGrpDiv,"verticalTabs"),a(c.tabGrpDiv,"rotatedTabs"));a(b,"tab-li-l-s-v")||a(b,"tab-li-l-ns-v")?0<c.tabGrpDiv.offsetHeight&&pega.u.d.fixRotate(b.parentNode,"LEFT",a(c.tabGrpDiv,"stretchedTabs")):a(b,"tab-li-r-s-v")||a(b,"tab-li-r-ns-v")?0<c.tabGrpDiv.offsetHeight&&pega.u.d.fixRotate(b.parentNode,"RIGHT",a(c.tabGrpDiv,"stretchedTabs")):!a(c.tabGrpDiv,"verticalTabs")&&a(c.tabGrpDiv,
"stretchedTabs")&&0<c.tabGrpDiv.offsetHeight&&pega.u.d.fixHeights(b.parentNode);pega.u.d.inStandardsMode&&(b=pega.util.Dom.hasClass(c.tabGrpDiv,"with-fixed-header"),a(c.tabGrpDiv,"verticalTabs")&&!b&&c.tabGrpDiv.parentNode&&"workarea"!=c.tabGrpDiv.parentNode.id&&0<c.tabGrpDiv.offsetHeight&&(c=pega.util.Dom.getFirstChild(c.tabGrpDiv),c.style.height="",pega.util.Dom.setStyle(c,"height",c.scrollHeight+"px")))}},fixTabsWidth:function(a){for(var c=pega.util.Dom.hasClass,b=a.parentNode,d=a.parentNode;"DIV"!=
d.nodeName.toUpperCase();)d=d.parentNode;if(c(d,"rotatedTabs")){for(var f=pega.util.Dom.getChildren(b),e=f?f.length:0,g=0;g<e;g++){var h=f[g],k=pega.util.Dom.getFirstChild(h),l=pega.util.Dom.getFirstChild(k),m=pega.util.Dom.getFirstChild(l);pega.util.Dom.getFirstChild(m).style.width="auto";m.style.width="auto";l.style.width="auto";k.style.width="auto";h.style.width="auto"}f="LEFT";if(c(a,"tab-li-r-s-v")||c(a,"tab-li-r-ns-v"))f="RIGHT";pega.u.d.fixRotate(b,f,c(d,"stretchedTabs"))}},fixHeights:function(a){for(var c=
(a=pega.util.Dom.getChildren(a))?a.length:0,b=0,d=!1,f=0;f<c;f++){var e=a[f],e=e.offsetHeight;b<e&&(0!=b&&(d=!0),b=e)}if(d)for(f=0;f<c;f++)e=a[f],pega.util.Dom.getFirstChild(e).style.height=b+"px"},get_distribution:function(a,c){var b=[],d=Math.floor(c/a),f;for(f=0;f<a;f++)b[f]=d;var e=b.length,d=c-=d*a;if(0!=c){var g=0;for(f=0;f<e/2&&0<c;f++)b[g]++,g+=2,c--;if(d>a/2)for(f=1;f<e&&0<c;f+=2,c--)b[f]++}return b},fixStretch:function(a,c,b){if(c)if(b){if(c=!1,"true"==a.getAttribute("hasDeferTabs")&&(c=
!0),!c){a.style.display="none";var d=a.parentNode.offsetHeight,f=(c=pega.util.Dom.getChildren(a))?c.length:0;b=pega.u.d.get_distribution(f,d);for(e=0;e<f;e++)c[e].style.width=b[e]+"px";a.style.height=d+"px";a.style.display="block"}}else for(f=(c=pega.util.Dom.getChildren(a))?c.length:0,b=pega.u.d.get_distribution(f,100),e=0;e<f;e++)c[e].style.height=b[e]+"%";else{var f=(c=pega.util.Dom.getChildren(a))?c.length:0;b=pega.u.d.get_distribution(f,100);var e;a=pega.u.d.inStandardsMode?f:pega.env.ua.ie?
f-1:f;for(e=0;e<a;e++)c[e].style.width=b[e]+"%"}},fixRotate:function(a,c,b){var d=pega.util.Dom.getChildren(a),f=d?d.length:0,e=0,g=0,h=0,k=0;if(d&&0<f){if(pega.env.ua.ie&&(!pega.u.d.inStandardsMode||8>pega.env.ua.ie))for(var l=0;l<f;l++){var m=d[l],n=pega.util.Dom.getFirstChild(m),p=pega.util.Dom.getFirstChild(n);pega.u.d.fixTransparentBG(n);pega.u.d.fixTransparentBG(p);n=m.offsetWidth;p=m.offsetHeight;b||1==m.widthSet||(m.style.width=p+"px",m.widthSet=!0);e<n&&(e=n);g<p&&(g=p);h+=n;k+=p}else{for(l=
0;l<f;l++)m=d[l],pega.env.ua.ie&&(n=pega.util.Dom.getFirstChild(m),p=pega.util.Dom.getFirstChild(n),pega.u.d.fixTransparentBG(n),pega.u.d.fixTransparentBG(p)),pega.env.ua.ie&&9==pega.env.ua.ie&&(n=pega.util.Dom.getFirstChild(m),(b=window.getComputedStyle(n,null).backgroundColor)&&"transparent"==b&&(n.style.backgroundColor=pega.u.d.getcomputedBGColor(n))),n=m.offsetWidth,p=m.offsetHeight,e<n&&(e=n),g<p&&(g=p);if("LEFT"==c)if(pega.env.ua.ie&&10>pega.env.ua.ie)for(l=0;l<f;l++)m=d[l],n=m.offsetWidth,
p=m.offsetHeight,m.style.top=k+"px",h+=n,k+=p;else for(l=f-1;0<=l;l--)m=d[l],n=m.offsetWidth,p=m.offsetHeight,m.style.bottom=h-g+"px",h+=n,k+=p;else for(l=0;l<f;l++)m=d[l],n=m.offsetWidth,p=m.offsetHeight,m.style.top=pega.env.ua.ie&&10>pega.env.ua.ie?k+"px":h+"px",h+=n,k+=p}pega.env.ua.ie&&(!pega.u.d.inStandardsMode||8>=pega.env.ua.ie)?a.style.height=k+"px":(a.style.width=(pega.env.ua.ie&&9>=pega.env.ua.ie?e:g)+"px",a.style.height=(pega.env.ua.ie&&9>=pega.env.ua.ie?k:h)+"px")}},getFileExtension:function(a){a=
/^.+\.([^.]+)$/.exec(a);return null==a?"":a[1]},fixTransparentBG:function(a){var c=pega.u.d.getFileExtension(pega.util.Dom.getStyle(a,"background-image")).substring(0,3);c&&"png"==c.toLowerCase()&&(a.style.backgroundColor=pega.u.d.getcomputedBGColor(a))},getcomputedBGColor:function(a){var c="transparent";if(a)for(;void 0==c||"transparent"==c.toLowerCase()||""==trim(c.toLowerCase());){c=pega.util.Dom.getStyle(a,"background-color");if("body"==a.nodeName.toLowerCase())break;a=a.parentNode}if(void 0==
c||"transparent"==c.toLowerCase()||""==trim(c.toLowerCase()))c="#ffffff";return c},setActiveTabIndex:function(a,c){"undefined"!=typeof bRecordEvent&&bRecordEvent&&event&&"click"==event.type&&pega.u.d.Timer.setUserStart();pega.ui.statetracking.setBusy("setActiveTabIndex");if(!pega.util.Event.isIE){var b="TABANCHOR";"accordion"==c.secType&&(b="ACCORANCHOR");var d=pega.util.Dom.getElementsById(b,a.newValue.get("element"));if(null!=d){var f=document.activeElement;d[0].removeAttribute("href");f.focus()}a.prevValue&&
(b=pega.util.Dom.getElementsById(b,a.prevValue.get("element")),null!=b&&b[0].setAttribute("href","#"+a.prevValue.get("id")))}parseInt(c.tabGrp.getTabIndex(a.newValue));b=pega.util.Dom.getElementsByName("EXPANDED"+c.tabGrpDiv.getAttribute("tabGroupId"),c.tabGrpDiv);d=a.newValue.get("id").substring(3);null!=b&&(b[0].value=d);b=a.newValue.get("element");(d=b.getAttribute("sectionBodyId"))&&""!=d&&(d=pega.util.Dom.getElementsByName("EXPANDED"+d,c.tabGrpDiv),null!=d&&(d[0].value="true"));"undefined"!=
typeof tabClickCallback&&tabClickCallback(a);if(a.newValue.ThreadName)try{var e=document.querySelector("div[pegathread\x3d'"+a.newValue.ThreadName+"'] iframe");e.contentWindow.pega&&e.contentWindow.pega.ui.EventsEmitter.publishSync("onTabSwitch")}catch(g){}"true"==b.getAttribute("refreshOnClick")&&a.prevValue&&a.prevValue.get("id")!=a.newValue.get("id")?(e={tab:a.newValue,tabGrpDiv:c.tabGrpDiv,tabLi:b,secType:c.secType},pega.u.d.loadTabContents(e)):"true"==b.getAttribute("isLoadDeferred")&&(e={tab:a.newValue,
tabGrpDiv:c.tabGrpDiv,tabLi:b,secType:c.secType},pega.u.d.loadTabContents(e),b.setAttribute("isLoadDeferred",!1));pega.u.d.bModalDialogOpen&&pega.u.d.useOldModalDialog&&a.prevValue&&a.newValue.get("element")!=a.prevValue.get("element")&&(e=document.getElementById("modaldialog_bd"),b=document.getElementById("modaldialog"),e&&b&&(e.style.height="auto",e.style.overflow="",b.style.height="",pega.u.d.modalTabContentWidth=a.newValue.get("contentEl").scrollWidth));"tabbed"==c.secType&&(pega.u.d.harnessInit?
pega.u.d.HeavyOperations.registerOnceOnInit("resizeHarness"):c.tabGrp.isDCTabView||pega.u.d.resizeHarness());c.focusElement&&(--pega.u.d.focusCount,0==pega.u.d.focusCount&&c.focusElement.call());if($("body").hasClass("screen-layout-body")&&"tabbed"==c.secType&&(a=c.tabGrpDiv.getAttribute("data-pos"),11==pega.util.Event.isIE&&("Left"==a||"Right"==a)&&(a=$(".dc-main"))&&a[0])){a=a[0];e=$(c.tabGrpDiv).find("[pegagadget]");b=!1;for(d=0;d<e.length;d++)if("block"==e[d].style.display){b=!0;break}b&&(""==
a.style.zoom?a.style.zoom=1:a.style.zoom="")}pega.u.d.setAriaAttributes(c.tabGrp,"accordion"==c.secType);pega.ui.statetracking.setDone()},loadTabContents:function(a){var c=pega.ui.HarnessContextMgr,b=a.tab,d=a.tabGrpDiv,f=this.getReadOnlyValue("",a.tabLi),e,g="";if("true"==a.tabLi.getAttribute("isHarness"))e=new SafeURL("Rule-HTML-Harness.GetContainerHTML"),e.put("pzPrimaryPageName",strPrimaryPage),e.put("ClassName",strHarnessClass),e.put("StreamName",strHarnessPurpose),e.put("ReadOnly",f),g=a.tabLi.getAttribute("sectionBodyId"),
e.put("RenderSingle","EXPANDED"+g),e.put("PrimaryPage",strPrimaryPage);else{for(;("RULE_KEY"!=d.id||"MAIN_RULE"!=d.getAttribute("node_type"))&&(d=d.parentNode,null!=d););e=SafeURL_createFromURL(pega.u.d.url);e.put("pyActivity","ReloadSection");e.put("StreamName",d.getAttribute("node_name"));"tabbed"===a.secType&&pega.ctx.isUITemplatized&&e.put("UITemplatingStatus","Y");(g=a.tabLi.getAttribute("sectionBodyId"))&&""!=g||(g=a.tabGrpDiv.getAttribute("sectionBodyId"));e.put("RenderSingle","EXPANDED"+g);
var h=a.tabLi.getAttribute("TabbedRepeatId");if(h&&""!=h){e.put("RenderSingleTR",h);var k=d.getAttribute("expandRL");k&&e.put("expandRL",k);(k=d.getAttribute("INDEX"))&&e.put("index",k)}e.put("StreamClass",d.getAttribute("objclass"));e.put("ReadOnly",f);d=this.getBaseRef(d);e.put("BaseReference",d);"undefined"!=typeof bClientValidation&&e.put("bClientValidation",bClientValidation);e.put("FieldError",c.get("fieldErrorType"));e.put("FormError",c.get("formErrorType"));e.put("pyCustomError",c.get("pyCustomError"));
"true"==a.tabLi.getAttribute("isLoadDeferred")&&"true"==pega.ctx.KeepPageMessages&&e.put("pzKeepPageMessages","true")}c=g;h&&""!=h&&(c=h);h=pega.util.Dom.getElementsById("INNERDIV-"+c,a.tabGrpDiv);"accordion"==a.secType?this.setBusyIndicator(a.tabGrpDiv):this.setBusyIndicator(h[0]);this.asyncRequest("POST",e,{success:function(c){var d=c.responseText,f=c.argument[0];c=c.argument[1];if(!pega.u.d.checkExceptions(d,f)){var e=document.createElement("DIV"),g=f.cloneNode(!0);e.appendChild(g);if(e=pega.util.Dom.getElementsById("INNERDIV-"+
c,e))e[0].innerHTML=d,e=e[0];(d=pega.util.Dom.getElementsById("INNERDIV-"+c,e))||(d=pega.util.Dom.getElementsById("INNERDIV-"+c));d&&(d=d[0]);d=d.innerHTML;d={onlyOnceEle:pega.util.Dom.getElementsById("PegaOnlyOnce",e),domObj:f,newHTML:d};pega.u.d.handleDOMLoad(d);pega.u.d.inStandardsMode||(f.style.height="auto");this.harnessType&&"layout"==this.harnessType&&this.portal.layoutObj.resize();if(b.anim&&"accordion"==a.secType){b.anim.stop(!0);var h=function(){0!=b.AnimHeight?this.get("contentEl").style.overflow=
"auto":this.get("contentEl").style.overflow="visible";this.anim.onComplete.unsubscribe(h)},f=pega.u.d.getHeight(f),d=b.anim.attributes.height.to;b.anim.onComplete.subscribe(h,b,b);b.anim.attributes.height=0==b.AnimHeight?{from:d,to:f}:{from:d,to:b.AnimHeight};b.get("contentEl").style.overflow="hidden";b.anim.animate()}}pega.u.d.gBusyInd.hide()},failure:function(a){pega.u.d.gBusyInd.hide()},argument:[h[0],c]})},markTabErrors:function(){var a=pega.util.Dom.getElementsById("TabGroup",document);if(null!=
a)for(var c=a.length,b=pega.util.Dom.getElementsById,d=0;d<c;d++){var f=a[d];if(null!=f){var e=b("tabContainer",f);if(null==e)return;e&&(e=e[0]);f=b("tabContents",f);if(null==f)return;if(f)for(var f=f[0],f=f.childNodes,g=f.length,h=0,k=0;h<g;h++){var l=f[h];if(1==l.nodeType)var k=l.id.replace("Content",""),m=b("PegaRULESErrorFlag",l);if(m)for(var l=k,n=e.getElementsByTagName("span"),p=n.length,t=0;t<p;t++){var q=n[t];if(q.getAttribute("index")==l){var r=pega.util.Dom.getPreviousSibling(q)?b("PegaRULESErrorFlag",
pega.util.Dom.getPreviousSibling(q)):!1;if(r)r[0].parentNode.style.display="block";else{var r=document.createElement("div"),x=e?e.getAttribute("data-taberror"):pega.u.d.fieldValuesList.get("TabErrorTooltip");r.style.display="block";r.className="iconErrorTabsDiv";r.innerHTML="\x3cspan class\x3d'iconErrorTabs' title\x3d'"+x+"' id\x3d'PegaRULESErrorFlag'/\x3e";q.parentNode.insertBefore(r,q);t++;p++}}}else for(l=k,n=e.getElementsByTagName("span"),p=n.length,t=0;t<p;t++)if(q=n[t],q.getAttribute("index")==
l&&(r=pega.util.Dom.getPreviousSibling(q)?b("PegaRULESErrorFlag",pega.util.Dom.getPreviousSibling(q)):!1))r[0].parentNode.style.display="none"}}}this.markAccordionErrors()},markSectionTabErrors:function(a){var c=a?a.getAttribute("data-taberror"):pega.u.d.fieldValuesList.get("TabErrorTooltip"),b,d,f=-1,e=a.getAttribute("data-pos");if(a&&e){"Bottom"==e||"Top"==a.getAttribute("data-pos")?b=pega.util.Dom.getChildren(a):(pega.util.Dom.hasClass(a,"with-fixed-header")?(b=pega.util.Dom.getChildren(a)[0],
b=pega.util.Dom.getChildren(b)[0],b=pega.util.Dom.getChildren(b)[0],pega.util.Dom.getChildren(b),b="Left"==e?$(".dc-left .contents .tab-ul")[0]:$(".dc-right .contents .tab-ul")[0],d=pega.util.Dom.getFirstChild(a)):(b=pega.util.Dom.getChildren(a)[0],b=pega.util.Dom.getChildren(b)[0],b=pega.util.Dom.getChildren(b)[0],d=pega.util.Dom.getChildren(b),b=pega.util.Dom.getChildren(d[0])[0],d=pega.util.Dom.getChildren(d[1])[0]),b="Right"==e?[d,b]:[b,d]);d=b.length;for(var g,h=0;h<d;h++)if(1==b[h].nodeType)for(var k=
pega.util.Dom.getChildren(b[h]),l=0;l<k.length;l++)if(("DIV"==k[l].tagName||"TABLE"==k[l].tagName)&&pega.util.Dom.getElementsById("PegaRULESErrorFlag",k[l])){if("Top"==e)if(pega.util.Dom.hasClass(a,"stretchedTabs")||pega.util.Dom.hasClass(a,"repeatTabbed"))g=b[0].getElementsByTagName("li")[l];else try{g=pega.util.Dom.getLastChild(b[h-1]).getElementsByTagName("li")[l]}catch(t){return 0}else g="Left"==e||"Right"==e?b[0].getElementsByTagName("li")[l]:b[b.length-1].getElementsByTagName("li")[l];var m=
g.getAttribute("aria-label"),n=pega.u.d.fieldValuesList.get("TabHasErrors"),m=n?n.replace(/\{1\}/g,m):m;g.setAttribute("aria-label",m);m=document.createElement("div");m.style.display="block";m.className="iconErrorTabsDiv";m.innerHTML="\x3cspan class\x3d'iconErrorTabs' title\x3d'"+c+"' id\x3d'PegaRULESErrorFlag'/\x3e";var n=g.getElementsByTagName("tr")[2],p;n||(n=g.getElementsByTagName("tr")[0]);n?p=n.getElementsByTagName("td")[0]:(n=g.getElementsByTagName("SPAN")[0],p=n.getElementsByTagName("span")[0]);
if(p&&0<p.getElementsByTagName("*").length)p.insertBefore(m,p.getElementsByTagName("*")[0]);else if(p&&p.appendChild)p.appendChild(m);else try{n.insertBefore(m,n.firstChild)}catch(t){}"-1"==f&&(f=l)}}return f},tabErrorHandler:function(){var a=function(c){var e=b(c);c=e.getAttribute("class");if((!c||!c.match(/^\s*static-dc-tab\s+ | \s+static-dc-tab\s+/))&&(c=d(e))&&e&&c){var f=e.getAttribute("aria-labelledby"),h=e.querySelectorAll("div[class *\x3d 'iconErrorDiv']"),e=e.querySelectorAll("div[class *\x3d 'iconErrorDiv'][style *\x3d 'display: none;']");
if(h.length==e.length&&(e=c.getAttribute("data-pos"))){if(!pega.util.Dom.hasClass(c,"repeatTabbed")){h=c.querySelector("ul[role\x3d'tablist'] li[role\x3d'tab'][id\x3d'"+f+"']");if("bottom"==e.toLowerCase()||"right"==e.toLowerCase())h=c.querySelectorAll("ul[role\x3d'tablist'] li[role\x3d'tab'][id\x3d'"+f+"']"),h=h[h.length-1];if(f=h)f.setAttribute("aria-label",f.getAttribute("title")),(f=f.getElementsByClassName("iconErrorTabsDiv"))&&0<f.length&&(f[0].style.display="none")}a(c.parentNode)}}},c=function(a){var e=
b(a);a=e.getAttribute("class");if((!a||!a.match(/^\s*static-dc-tab\s+ | \s+static-dc-tab\s+/))&&(a=d(e))&&e){e=e.getAttribute("aria-labelledby");if(a){var f=a.getAttribute("data-pos");if(f&&!pega.util.Dom.hasClass(a,"repeatTabbed")){var h=a.querySelector("ul[role\x3d'tablist'] li[role\x3d'tab'][id\x3d'"+e+"']");if("bottom"==f.toLowerCase()||"right"==f.toLowerCase())h=a.querySelectorAll("ul[role\x3d'tablist'] li[role\x3d'tab'][id\x3d'"+e+"']"),h=h[h.length-1];e=a?a.getAttribute("data-taberror"):pega.u.d.fieldValuesList.get("TabErrorTooltip");
if(h){var f=h.getAttribute("aria-label"),k=pega.u.d.fieldValuesList.get("TabHasErrors"),f=k?k.replace(/\{1\}/g,f):f;h.querySelector("span#PegaRULESTabErrorFlag")?"block"!=h.querySelector("span#PegaRULESTabErrorFlag").parentNode.style.display&&(h.setAttribute("aria-label",f),h.querySelector("span#PegaRULESTabErrorFlag").parentNode.style.display="block"):(h.setAttribute("aria-label",f),f=document.createElement("div"),f.style.display="block",f.className="iconErrorTabsDiv",f.innerHTML="\x3cspan class\x3d'iconErrorTabs' title\x3d'"+
e+"' id\x3d'PegaRULESTabErrorFlag'/\x3e",e=h.querySelector("span#TABSPAN"),e.children[0].insertBefore(f,e.children[0].children[0]))}}}c(a.parentNode)}},b=function(a){for(var b=a.getAttribute("role")||"";"tabpanel"!=b&&"body"!=a.tagName.toLowerCase();)a=a.parentNode,b=a.getAttribute("role")||"";return a},d=function(a){for(var b=a.getAttribute("id")||"",c=a.getAttribute("data-pos");!b.match(/^PEGA_TABBED/)&&!c&&"body"!=a.tagName.toLowerCase();)a=a.parentNode,b=a.getAttribute("id")||"",c=a.getAttribute("data-pos")||
"";return b.match(/^PEGA_TABBED/)?a:null};return{processError:function(b,d){try{var e;a:{if(b){var f=document.querySelectorAll("div[id^\x3d'PEGA_TABBED'] div[role\x3d'tabpanel'] "+b.tagName+"[name\x3d'"+b.name+"']");if(f&&0<f.length)for(var k=0;k<f.length;k++)if(f[k]==b){e=!0;break a}}e=!1}e&&("add"==d?c(b):"clear"==d&&a(b))}catch(l){window.console&&console.error("Exception while setting error marker on tabheader.")}}}}(),handleErrorsInTabgroupLayout:function(a,c){pega.u.d.tabErrorHandler.processError(a,
c)},selectTab:function(a){"function"==typeof ISnsPopupHide&&ISnsPopupHide();a=void 0===a?window.event:a;var c=pega.util.Event.getTarget(a),b=pega.u.d.findParent(c,"TabGroup"),c=c.getAttribute("index");null!=c&&null!=b&&pega.u.d.drawTab(c,b);"function"==typeof pega.u.d.getPopOver&&pega.u.d.getPopOver().close();pega.util.Event.stopEvent(a)},drawTab:function(a,c){var b=pega.util.Dom.getElementsById("tabTable",c);if(b){for(var b=b[0],d=b.rows[0].cells,f=d.length,e=!1,g=null,h=1,k=0;k<f;k++){var l=d[k].getAttribute("index");
if(l&&""!=l)if(l=parseInt(l),l==a){g=l;a=h;e=!0;break}else null==g&&(g=l);"coverTabRE"==d[k].id&&h++}e||(a=1);pega.u.d.drawTabHeader(a,b);pega.u.d.drawTabContent(g,c);pega.u.d.setHarnessTabAriaAttributes(c)}},setHarnessTabAriaAttributes:function(a){var c=pega.util.Dom,b=pega.util.Dom.getElementsById("tabTable",a);b&&(b=b[0],c.getElementsBy(function(a){return"tab"==a.getAttribute("role")&&c.hasClass(a,"coverTabMiddle_on")},"td",b,function(a){a.setAttribute("aria-selected","false");a.setAttribute("tabIndex",
"-1")}),c.getElementsBy(function(a){return"tab"==a.getAttribute("role")&&c.hasClass(a,"coverTabMiddle")},"td",b,function(a){a.setAttribute("aria-selected","true");a.setAttribute("tabIndex","0");try{a.focus()}catch(f){}}));if(a=pega.util.Dom.getElementsById("tabContents",a))a=a[0],c.getElementsByClassName("containerBody","table",a,function(a){a.setAttribute("role","tabpanel");a.setAttribute("aria-selected","none"==a.style.display?"false":"true");a.setAttribute("tabIndex","none"==a.style.display?"-1":
"0");a.setAttribute("aria-hidden","none"==a.style.display?"true":"false")})},harnessTabAccessibilityHandler:function(a){var c=pega.util.Dom,b=pega.util.Event.getTarget(a);if(b){var d;if(d=c.hasClass(b,"coverTabMiddle")||c.hasClass(b,"coverTabMiddle_on")?b:c.getAncestorBy(b,function(a){return"tab"==a.getAttribute("role")&&(c.hasClass(a,"coverTabMiddle")||c.hasClass(a,"coverTabMiddle_on"))}))switch(d=d.parentNode,a.type){case "keydown":if("37"==a.keyCode||"38"==a.keyCode)(a=c.getPreviousSiblingBy(b,
function(a){return"tab"==a.getAttribute("role")&&(c.hasClass(a,"coverTabMiddle")||c.hasClass(a,"coverTabMiddle_on"))}))||(a=c.getLastChildBy(d,function(a){return"tab"==a.getAttribute("role")&&(c.hasClass(a,"coverTabMiddle")||c.hasClass(a,"coverTabMiddle_on"))})),a&&a.focus();else if("39"==a.keyCode||"40"==a.keyCode)(a=c.getNextSiblingBy(b,function(a){return"tab"==a.getAttribute("role")&&(c.hasClass(a,"coverTabMiddle")||c.hasClass(a,"coverTabMiddle_on"))}))||(a=c.getFirstChildBy(d,function(a){return"tab"==
a.getAttribute("role")&&(c.hasClass(a,"coverTabMiddle")||c.hasClass(a,"coverTabMiddle_on"))})),a&&a.focus();break;case "keyup":"37"!=a.keyCode&&"38"!=a.keyCode&&"39"!=a.keyCode&&"40"!=a.keyCode||b.click()}}},correctStyles:function(a){a=a.getElementsByTagName("TD");3==a.length&&(a[0].className="coverTabLeftSolo",a[2].className="coverTabRightSolo");for(var c=a.length,b=0;b<c;b++)0<b&&"coverTabMiddle"!=a[b-1].className?"coverTabMiddle"==a[b].className&&(a[b-1].className=1==b?"coverTabLeftSolo":"coverTabOverlapRight"):
b+1==a.length-1&&(a[b+1].className="coverTabRightSolo"),b==a.length-1&&"coverTabMiddle_on"==a[b-1].className&&(a[b].className="coverTabRight_on")},drawTabContent:function(a,c){var b,d;b=pega.util.Dom.getElementsById("tabContents",c);if(null!=b){b&&(b=b[0]);b=pega.util.Dom.getChildren(b);var f="Content"+a,e=null;"undefined"!=typeof pega.ui.textarea&&(e=pega.ui.textarea.resizeAllExpandedTextAreas);for(var g,h=b.length,k=0;k<h;k++)g=b[k],g.id==f?(d=g,"block"!=g.style.display&&""!=g.style.display&&(g.style.display=
""),"undefined"!=typeof harnessTabCallback&&harnessTabCallback(a,d),null!=e&&e(!0)):g.style.display="none";pega.u.d.setSelectedTab(a,c);"undefined"!=typeof d&&pega.u.d.checkForDeferLoading(c,a,d);pega.u.d.resizeHarness()}},checkForDeferLoading:function(a,c,b){if(null!=b.childNodes){for(var d=b.childNodes.length,f,e,g=0;g<d;g++)if(e=b.childNodes[g],"TAB-INDICATOR"==e.id){e.value="true";f=e.name;break}for(g=0;g<d;g++)if(e=b.childNodes[g],"DEFER_LOAD"==e.id){pega.u.d.loadTabbedContainer(a,c,f,e);break}}},
loadTabbedContainer:function(a,c,b,d){var f="Content"+c,e=new SafeURL("Rule-HTML-Harness.GetContainerHTML");e.put("pzPrimaryPageName",strPrimaryPage);e.put("ClassName",strHarnessClass);e.put("StreamName",strHarnessPurpose);var g=this.getReadOnlyValue("",d);e.put("ReadOnly",g);b&&e.put("RenderSingle",b);e.put("PrimaryPage",strPrimaryPage);this.setBusyIndicator();this.asyncRequest("POST",e,{success:function(b){for(var e=a.childNodes.length,g,h=0;h<e;h++)if(g=a.childNodes[h],"TAB-INDICATOR"==g.id&&g.value!=
c){pega.u.d.gBusyInd.hide();return}e=b.responseText;pega.u.d.checkExceptions(e,d)||(g=document.createDocumentFragment(),b=document.createElement("DIV"),b.style.display="none",g.appendChild(b),b.innerHTML=e,e=pega.util.Dom.getElementsById(f,b),g=pega.util.Dom.getElementsById(f,a),e&&g&&pega.u.d.loadDOMObject(g[0],"\x3ctable cellspacing\x3d'0' cellpadding\x3d'0' style\x3d'width:100%'\x3e"+e[0].innerHTML+"\x3c/table\x3e"),(b=pega.util.Dom.getElementsById("PegaOnlyOnce",b))&&b[0]&&pega.u.d.handleOnlyOnce(b[0]),
pega.u.d.drawTabContent(c,a));pega.u.d.gBusyInd.hide()},failure:function(a){pega.u.d.gBusyInd.hide()}})},setSelectedTab:function(a,c){for(var b=c.childNodes.length,d,f=0;f<b;f++)if(d=c.childNodes[f],"TAB-INDICATOR"==d.id){d.value=a;break}},drawTabHeader:function(a,c){var b="true"==c.getAttribute("jsrcompliant")?!0:!1,d=b?"wpsTableHead":"coverTabLeftSolo",f=b?"wpsPortletTitle":"coverTabLeft_on",e=b?"wpsTableHead":"coverTabRightSolo",g=b?"wpsPortletTitle":"coverTabRight_on",h=b?"wpsTableHead":"coverTabMiddle",
k=b?"wpsPortletTitle":"coverTabMiddle_on",l=b?"wpsTableHead":"coverTabOverlapLeft",m=b?"wpsTableHead":"coverTabOverlapRight",n=b?"wpsTableHead":"coverTabOverlapLeftOnRight",p=b?"wpsTableHead":"coverTabOverlapRightOnLeft",t=b?"wpsPortletHead":"tabbedHeaderLabelStyle",b=b?"wpsPortletHead":"tabbedHeaderLabelStyle_on",q=pega.util.Dom.getElementsById("coverTabRE",c),q=q?q.length:0,r=c.rows[0].cells,x=r.length;if(1>=x)c.style.display="none";else{c.style.display="none";for(var w=1,y=0;y<x;y++){var z=a==
w,u=a==w+1,A=a>w+1,B=w==q,v=r[y];"coverTabLE"==r[y].id?v.className=z?d:f:"coverTabRE"==v.id?(v.className=B?z?e:g:z?l:u?m:A?p:n,w++):(u=(u=pega.util.Dom.getElementsById("coverTabLabel",v))?u[0]:null,z?(v.className=h,u&&(u.className=t)):(v.className=k,u&&(u.className=b)))}c.style.display="block"}},setTargetTab:function(a){for(var c=this.findParentDiv(a);c&&"yui-content tabContent"!=c.className;){if(c.getAttribute("section_index"))var b=c.getAttribute("section_index");c=this.findParentDiv(c)}for(;a.parentNode;)if(a=
a.parentNode,a.id&&-1!=a.id.indexOf("PEGA_TABBED")){a=pega.util.Dom.getElementsById("TABANCHOR");for(c=0;c<a.length;c++){var d=a[c].parentNode.getAttribute("section_index");b==d&&pega.util.Event.fireEvent(a[c],"click")}break}},setShowTargetTab:function(a){this.showTargetTab=a}};pega.lang.augmentObject(pega.ui.Doc.prototype,tabSupport);
void 0==pega.u.d.KeepMessages&&(pega.u.d.KeepMessages="false");void 0==pega.u.d.SubmitInProgress&&(pega.u.d.SubmitInProgress=!1);
var docSubmit={gCallbackArgs:null,reloadForm:function(a,b,g,c){""==!a&&(pega&&pega.ui&&pega.ui.statetracking&&pega.ui.statetracking.setNavigationBusy(a),null!=b&&null!=b.style&&(null!=g&&(b.innerHTML="\x3cspan class\x3d'buttonTextWorking'\x3e"+g+"\x3c/span\x3e\x3cspan class\x3d'buttonIconWorking'\x3e\x3c/span\x3e"),b.disabled=!0),b=document.getElementById("HarnessPurpose").value,window.location.href=document.forms[0].action+"\x26"+a+"\x26Purpose\x3d"+b)},processAction:function(a,b,g,c,e,l,k,m,d,n,
h,f,t,p,q){var u=pega.ui.HarnessContextMgr,z;p&&p.loadBehaviour&&(z=p.loadBehaviour);var r=!0;d&&d instanceof SafeURL&&d.get("modelessDialog")&&(r=!1,pega.u.d.bIsModelessDialog=!0);var x=pega.ctx.RDL.masterDetailsParams&&pega.ctx.RDL.masterDetailsParams.isShowDetailsOpen,w=x&&pega.ctx.RDL.masterDetailsParams&&pega.ctx.RDL.masterDetailsParams.__RDLThreadSetup,A=d&&d instanceof SafeURL&&!d.get("BaseReference");pega.u.d.fieldValuesList.get("CannotPerformWhenOffline");var v=pega.ctx.dom.querySelector(".RDLShowDetails.open");
"masterdetail"!=l&&v&&!pega.u.d.ServerProxy.isBrowserClient()&&pega.ui.rdlMasterDetails.getActiveRDLMetaInfo().isOnlineWOBound&&(v=pega.ui.rdlMasterDetails.getWorkProcessingThread(),pega.u.d.ServerProxy.setDestination(pega.u.d.ServerProxy.DESTINATION.REMOTE),v&&(pega.u.d.switchThread(v),pega.ui.ClientCache.init(v)));if(x&&A){var x=pega.ui.rdlMasterDetails.getActiveRow().getAttribute("base_ref"),A=pega.u.ChangeTrackerMap.getTrackerByThread(pega.u.d.baseThreadName),v=pega.ui.rdlMasterDetails.getActiveRow(),
y=pega.ui.rdlMasterDetails.getEnclosingRL(v),v=(v=pega.ui.rdlMasterDetails.getRDLClassFamily(y))&&"WORK"==v.toUpperCase()?!0:!1,y=pega.ui.rdlMasterDetails.isRDLCaseOfflinable(y);pega.u.d.ServerProxy.isDestinationLocal()?(w=!1,pega.offline&&pega.offline.NetworkStatus.getServerAvailabilityStatus()&&(w=!0),w||y||!v?(p=this.augmentOptionsForRDLDetails(p),d=v?this.augmentUrlObjForRDLDetails(d):d,t=this.augmentCallbackForRDLDetails(t)):pega.ui&&pega.ui.DCUtil&&pega.ui.DCUtil.cancelTransition&&pega.ui.DCUtil.cancelTransition(),
v||(p.contextParams={packagedContext:pega.ui.DataRepeaterUtils.getPackagedPageName(),runtimeContext:x})):pega.u.d.ServerProxy.isDestinationRemote()&&pega.u.d.ServerProxy.isHybridClient()&&pega.ui.ParametrizedDPUtils.isParametrizedDataPageInstance(x,A)?(d=this.augmentUrlObjForRDLDetails_Online(d),p=this.augmentOptionsForRDLDetails(p),t=this.augmentCallbackForRDLDetails_HCOnline(t)):w||(d=this.augmentUrlObjForRDLDetails_Online(d),p=this.augmentOptionsForRDLDetails_Online(p),t=this.augmentCallbackForRDLDetails_Online(t))}if(pega.u.d.bModalDialogOpen&&
l&&"overlay"!=l&&r&&k&&pega.util.Dom.isAncestor(pega.u.d.modalDialog.innerElement,pega.util.Event.getTarget(k)))alert(NoModalInModal);else if(1!=u.get("bWarnBeforeChangingWindow")||showDialogForWindowChange())if((k=void 0==k?window.event:k)&&null!=k&&(r=pega.util.Event.getTarget(k),"click"==k.type&&r&&"checkbox"==r.type||pega.util.Event.preventDefault(k)),r=new SafeURL,pega.ctx.isUITemplatized&&(w="Y",d instanceof SafeURL&&d.get("UITemplatingStatus")&&(w=d.get("UITemplatingStatus")),r.put("UITemplatingStatus",
w)),r.put("NewTaskStatus",a),r.put("TaskIndex",b),r.put("StreamType",g),r.put("FieldError",u.get("fieldErrorType")?u.get("fieldErrorType"):""),r.put("FormError",u.get("formErrorType")?u.get("formErrorType"):""),r.put("pyCustomError",u.get("pyCustomError")?u.get("pyCustomError"):""),r.put("bExcludeLegacyJS",u.get("bExcludeLegacyJS")?u.get("bExcludeLegacyJS"):""),m&&r.put("ModalSection",m),f?r.put("modalStyle",f):r.put("modalStyle",""),e&&r.put("PrevTaskStatus",e),c&&r.put("PrevTaskIndex",c),"overlay"==
l&&r.put("FlowActionTarget",l),d&&d instanceof SafeURL&&r.copy(d),z&&(null==p&&"undefined"==typeof p&&(p={}),p.loadBehaviour=z),l){if(null==q||"undefined"==typeof q)q=!1;null==p||null!=p.isCenterOverlay&&"undefined"!=typeof p.isCenterOverlay||(p.isCenterOverlay=!1);this.processActionModal(r,n,k,h,t,p,q)}else this.processActionDefault(r,k)},augmentOptionsForRDLDetails:function(a){a?a.doNotRefresh=!0:a={doNotRefresh:!0};return a},augmentOptionsForRDLDetails_Online:function(a){a||(a={});a.doNotRefresh=
!1;return a},augmentUrlObjForRDLDetails:function(a){if(pega.ui&&pega.ui.DataRepeaterUtils){var b=pega.ui.DataRepeaterUtils.getPackagedPageName();a.put("BaseReference",b)}return a},augmentUrlObjForRDLDetails_Online:function(a){a||(a=new SafeURL);if(pega.ctx.RDL.masterDetailsParams&&pega.ctx.RDL.masterDetailsParams.__RDLWOThreadInitialized){var b=pega.ui.rdlMasterDetails.getActiveRow().getAttribute("base_ref");a.put("rowPage",b);a.put("RDLDetails","true")}return a},augmentCallbackForRDLDetails:function(a){return a?
a:{submit:function(){var a=pega.ui.DataRepeaterUtils.getPackagedPageName(),g=!1,c=pega.ui.rdlMasterDetails.getActiveRow(),e=c.getAttribute("base_ref"),l=pega.ui.rdlMasterDetails.getEnclosingRL(c);l&&l.getAttribute("data-repeat-source");var k=c?c.querySelector("#RULE_KEY"):null,g=(l=pega.ui.rdlMasterDetails.getRDLClassFamily(l))&&"WORK"==l.toUpperCase()?!0:!1,l=pega.ui.ClientCache.find(e);if(g){pega.ui.DataRepeaterUtils.mergePage(e,a);var m={},d=pega.ui.ClientCache.find(a);m.pyWorkPage=JSON.parse(d.getJSON());
var n=pega.ui.rdlMasterDetails.isRDLCaseOfflinable(pega.ui.rdlMasterDetails.getEnclosingRL(c)),h=pega.ui.rdlMasterDetails.isElementInShowDetails(pega.u.d.submitModalDlgParam.associatedElement);n&&h&&pega.offline.clientstorehelper.saveWorkObject(d.get("pzInsKey").getValue(),d.getJSON(),function(){pega.ui.debug&&console.info(d.get("pzInsKey").getValue()+" updated in the client store")},function(){pega.ui.debug&&console.info(d.get("pzInsKey").getValue()+" couldn't be updated in the client store")});
var h=l.getReference(),f=h.substring(0,h.indexOf("."));pega.ui.DataRepeaterUtils.saveDataPage(f,{success:function(){pega.ui.debug&&console.info("Success: "+f+" persisted")},failure:function(){pega.ui.debug&&console.info("Failure: "+f+" persist attempt failed")}});d.get("pyID")&&(m.pyID=d.get("pyID").getValue());m.pyWorkPage.pyTemporaryObject="false";try{m.pxCreateDateTime=d.get("pxCreateDateTime").getValue(),m.pxUpdateDateTime=d.get("pxUpdateDateTime").getValue()}catch(p){}d.get("pxInsName")&&(m.pxInsName=
d.get("pxInsName").getValue());d.get("pzInsKey")&&(m.pzInsKey=d.get("pzInsKey").getValue());d.get("pxObjClass")&&(m.pyWorkPage.pxObjClass=d.get("pxObjClass").getValue());var h={action:"saveItem",insHandle:m.pzInsKey},t=pega.ui.ClientCache.find("pxRequestor.pzIsPegaServerAvailable");if(!n&&t&&"false"==t.getValue()){k=pega.u.d.fieldValuesList.get("CannotPerformWhenOffline");alert(k);pega.ui&&pega.ui.DCUtil&&pega.ui.DCUtil.cancelTransition&&pega.ui.DCUtil.cancelTransition();return}pega.offline.clientstorehelper.recordAction(pega.offline.clientstorehelper.TYPES.WORKITEM,
m.pxInsName,h,m,function(){},function(){})}pega.ui.rdlMasterDetails.invokePostMasterDetailEdit(l);pega.clientTools.putParamValue("bRDLShowDetails",!0);pega.u.d.reloadSection(k,"","",!1,!1,"",!1,null,null,null,function(){if(g){var b=pega.ui.ClientCache.find(a),d=pega.ui.ClientCache.find(e);b&&b.adoptJSON(d.getJSON())}pega.clientTools.putParamValue("bRDLShowDetails",!1);pega.ui.rdlMasterDetails.showDetails({target:c,refreshShowDetails:!0})},{contextParams:{packagedContext:a,runtimeContext:e}})},cancel:function(){}}},
augmentCallbackForRDLDetails_Online:function(a){return{submit:function(a){var b=a.responseText;if(-1!=b.indexOf("COMMIT")&&-1!=b.indexOf("RDLROWMARKUP_BEGIN")&&-1!=b.indexOf("RDLROWMARKUP_END")){b=b.replace(/>\s+</g,"\x3e\x3c");a=b.match(/RDLROWMARKUP_BEGIN\|\|([\s\S]*)\|\|RDLROWMARKUP_END/);for(var b=b.split("||"),c,e=0;e<b.length;e++)if("WOJSON"==b[e]){c=b[e+1];break}if(a&&a[1]){a=a[1];var b=pega.ui.rdlMasterDetails.getActiveRDLMetaInfo(),l=b.rowNode,b={target:l,refreshShowDetails:!0,isOnlineWOBound:b.isOnlineWOBound},
e=document.createElement("div");e.innerHTML=a;a=pega.util.Dom.getFirstChild(e).innerHTML;pega.u.d.loadDOMObject(l,a,function(a){return function(){pega.u.d.loadHTMLEleCallback(l);pega.u.d.gBusyInd.hide();pega.ui.rdlMasterDetails.showDetails(a);c&&pega.u.d.upmergeRowPage(c)}}(b))}}},cancel:function(){}}},augmentCallbackForRDLDetails_HCOnline:function(a){return{submit:function(a){var b=pega.ui.DataRepeaterUtils.getPackagedPageName(),c=!1,e=pega.ui.rdlMasterDetails.getActiveRow(),l=e.getAttribute("base_ref");
(c=pega.ui.rdlMasterDetails.getEnclosingRL(e))&&c.getAttribute("data-repeat-source");e=e?e.querySelector("#RULE_KEY"):null;c=(c=pega.ui.rdlMasterDetails.getRDLClassFamily(c))&&"WORK"==c.toUpperCase()?!0:!1;a=a.responseText;a=a.replace(/>\s+</g,"\x3e\x3c");a=a.split("||");for(var k,m=0;m<a.length;m++)if("WOJSON"==a[m]){k=a[m+1];break}var d=pega.u.d.ServerProxy.isDestinationLocal(),n=pega.u.d.getThreadName();a=pega.u.d.baseThreadName;d||(pega.u.d.ServerProxy.setDestination(pega.u.d.ServerProxy.DESTINATION.LOCAL),
pega.u.d.switchThread(a));a=pega.ui.ClientCache.find(l);c&&(c=pega.ui.ClientCache.createPage(b),c.adoptJSON(k),pega.ui.DataRepeaterUtils.mergePage(l,b),c.adoptJSON(a.getJSON()));pega.ui.rdlMasterDetails.invokePostMasterDetailEdit(a);var b=pega.ui.rdlMasterDetails.getActiveRDLMetaInfo(),h=b.rowNode,f=b.isOnlineWOBound;pega.u.d.reloadSection(e,"","",!1,!1,"",!1,null,null,null,function(){var a={target:h,refreshShowDetails:!0,isOnlineWOBound:f};d||(pega.u.d.ServerProxy.setDestination(pega.u.d.ServerProxy.DESTINATION.REMOTE),
pega.u.d.switchThread(n));pega.ui.rdlMasterDetails.showDetails(a)})},cancel:function(){}}},upmergeRowPage:function(a){var b=pega.u.d.baseThreadName,g=pega.u.d.getThreadName();pega&&pega.ui&&pega.ui.DCUtil&&pega.ui.DCUtil.isActionFromNonOsco&&(b="NONOSCOThread");pega.u.d.switchThread(b);pega.ui.ClientCache.createPage("tempShowStreamWorkPage").adoptJSON(a);a=pega.ui.rdlMasterDetails.getActiveRow().getAttribute("base_ref");pega.ui.DataRepeaterUtils.mergePage(a,"tempShowStreamWorkPage");pega.u.d.switchThread(g)},
takeAction:function(a,b,g,c,e,l,k){var m=pega.util.Dom.getElementsById("pzFlowActionUITypeRef",document,"span");if(m)var d=m.length;var n=!1;if(m)for(var h=0;h<d;h++){var f=m[h];f&&f.getAttribute("uiref")==c&&f.getAttribute("uitype")==e&&!n&&(n=!0,$(document).find('[name\x3d"TaskStatus"]').val(a),$(document).find('[name\x3d"TaskIndex"]').val(b),doFormSubmit("pyActivity\x3dFinishAssignment",l,"Submitting...",k))}n||(c=new SafeURL,c.put("IgnoreSectionSubmit",!0),processAction(a,b,g,"","","",k,null,
c))},processActionDefault:function(a,b){var g=pega.ui.HarnessContextMgr,c=a.get("NewTaskStatus"),e=a.get("TaskIndex"),l=a.get("StreamType"),k=a.get("PrevTaskIndex"),m=a.get("PrevTaskStatus");if("undefined"!=typeof actionSection){if("ActionSection_ScreenFlow"==actionSection){alert(LocalNotInScreen);return}a.put("ActionSection",actionSection)}var d=a.toQueryString(),n=SafeURL_createFromURL(pega.u.d.url);if("function"==typeof handleResubmit)if(b=!0,a="\x26pyActivity\x3dProcessAction\x26"+d,"undefined"!=
typeof streamClass&&(a+="\x26StreamClass\x3d"+streamClass),"undefined"!=typeof bSubmitAction&&(b=bSubmitAction),b){if("undefined"!=typeof actionSection&&"Action_Buttons_Frame"==actionSection){if(bClientValidation&&"function"==typeof validation_validate&&!validation_validate()){alert(form_submitCantProceed);return}a+="\x26bHarnessClientVal\x3d"+bClientValidation}handleResubmit(e,a)}else n.copy(SafeURL_createFromURL(a),!1),window.frameElement.src=n.toURL();else if(d=window.frames.actionIFrame,"undefined"!=
d&&null!=d)d.processAction(c,e,l,k,m,!1,b);else if(k=pega.ctx.dom.getElementById("pyFlowActionHTML"),m=!0,"undefined"!=typeof actionSection&&""!=actionSection&&(m=pega.ctx.dom.getContextRoot(),k=pega.u.d.getSectionByName(actionSection,"",m),pega.ctx.isMDC&&(k=pega.u.d.getSectionByName(actionSection,"",m)),m="undefined"!=typeof bSubmitAction?bSubmitAction:!1),pega.ctx.isMDC&&""==actionSection&&(k=pega.ctx.dom.querySelector("div[id\x3dpyFlowActionHTML]")),k)if(a.put("TaskStatus",c),a.put("HarnessMode",
g.get("strHarnessMode")),g=this.getReadOnlyValue(b),a.put("ReadOnly",g),""!=e&&"undefined"==typeof actionSection)this.reloadForm(a.toQueryString(),"","",b);else{e=k;for(g=!1;"RULE_KEY"!=e.id||"MAIN_RULE"!=e.getAttribute("node_type");)if(e=e.parentNode,null==e){g=!0;break}if(1==g)this.reloadForm(a.toQueryString(),"","",b);else{g=e.getAttribute("node_name");e=e.getAttribute("objclass");a.put("StreamClass",e);a.put("ActionSection",g);a.put("NO_HTML",!0);e=a.get("IgnoreSectionSubmit");if(!e&&m&&"undefined"!=
typeof actionSection&&""!=actionSection){if(bClientValidation&&"function"==typeof validation_validate&&!validation_validate()){alert(form_submitCantProceed);return}a.put("bHarnessClientVal",bClientValidation)}if("NO_UI"==l&&(e||m)&&"undefined"!=typeof actionSection){a.put("pyActivity","ProcessAction");a.put("Submit_NOUI",!0);try{if(pega&&pega.ctx&&pega.ctx.isMDC){var h=pega.u.d.getFormElement(),f=SafeURL_createFromEncryptedURL(h.action);f.copy(SafeURL_createFromEncryptedURL(a.toQueryString()),!0);
postSubmitData=pega.u.d.getQueryString(h);pega.ui.MDCUtil.microDCRenderer(f,postSubmitData,!0)}else f=SafeURL_createFromEncryptedURL(document.main.action),f.copy(SafeURL_createFromEncryptedURL(a.toQueryString()),!0),document.main.action=f.toURL(),pega.control.PlaceHolder.removePlaceHolderValues(document.main),pega.u.d.fixBaseThreadTxnId(),pega.u.d.disableMDCFieldSets(document.main),pega.ctx.bIsDCSPA?doFormSubmit(f,b,strSaveText,b):document.main.submit()}catch(t){}}else this.reloadSection(k,"ProcessAction",
a.toQueryString(),!1,m,"",void 0,b)}}else alert(NotInAction)},shouldSubmitProceed:function(a,b){if(0==this.processOnBeforeSubmit(!1,b))return!1;if("undefined"!=typeof bClientValidation&&bClientValidation&&"function"==typeof validation_validate&&!validation_validate(b))if("undefined"!=typeof customClientErrorHandler){b=customClientErrorHandler();var g=document.getElementById("_popOversContainer"),c=document.getElementById("modalOverlay");if(b)return a&&(pega.util.Event.stopEvent(a),c&&"none"!==c.style.display&&
docFocus.focusToFirstInvalidField(c),g&&docFocus.focusToFirstInvalidField(g)),this.resetReadOnlyValues(),!1}else return alert(form_submitCantProceed),a&&(pega.util.Event.stopEvent(a),c&&"none"!==c.style.display&&docFocus.focusToFirstInvalidField(c),g&&docFocus.focusToFirstInvalidField(g)),this.resetReadOnlyValues(),!1;return!0},submitWhenFail:function(a,b,g,c,e,l,k,m){var d=pega.ui.HarnessContextMgr;if(1!=d.get("bWarnBeforeChangingWindow")||showDialogForWindowChange()){var n=pega.u.d.getFormElement(),
h;pega.ctx.isMDC&&n&&(h=!0);if(0<document.forms.length||h){pega.u.d.setBusyIndicator();pega.u.d.hideBusyIndicatorForMDCRefresh=!0;var f=document.forms.length;h&&(f=1);var t=$("#pzHarnessID").attr("value");pega&&pega.ui&&pega.ui.HarnessContextMgr&&pega.ui.HarnessContextMgr.get("isMDC")&&(h=pega.ui.HarnessContextMgr.get("mdcName"),t=document.querySelector("div[data-mdc-id\x3d'"+h+"']").getAttribute("data-harness-id"));for(h=0;h<f;h++)if("main"==n.getAttribute("name")){f=SafeURL_createFromEncryptedURL(n.action);
f.put("pyActivity","ReloadHarness");d.get("bIsDCSPA")||pega.u.template&&pega.u.template.utility&&f.put("PagesToRemove",pega.u.template.utility.getHarnessCleanUpPages(t));pega.u.d.checkAndUpdateTargetParam(f);"true"==d.get("KeepPageMessages")&&f.put("pzKeepPageMessages","true");if(c){if(f.put("PreDataTransform",c),e)try{var p=JSON.parse(e);g=h="";p&&(h=p.sp,g=p.dp,h&&f.put("StaticDataTransformParams",encodeURIComponent(h)),g&&f.put("DynamicDataTransformParams",encodeURIComponent(g)))}catch(u){f.put("DataTransformParams",
encodeURIComponent(e))}}else f.put("PreDataTransform","");if(a){f.put("PreActivity",a);if(b&&b)try{var q=JSON.parse(b);e=a="";q&&(a=q.sp,e=q.dp,a&&f.put("StaticActivityParams",encodeURIComponent(a)),e&&f.put("DynamicActivityParams",encodeURIComponent(e)))}catch(u){f.put("ActivityParams",encodeURIComponent(b))}f.get("pyActivity")==f.get("PreActivity")&&f.put("PreActivity","")}else f.put("PreActivity","");k&&f.put("ActDTPage",k);(b=d.get("strHarnessMode"))&&f.put("HarnessMode",b);0==f.get("pzPrimaryPageName")&&
f.put("pzPrimaryPageName",d.get("primaryPageName"));d.get("bIsDCSPA")&&f.put("pyIsSPA","true");!pega.offline&&pega.mobile.isMultiWebViewOfflinePegaMobileClient&&f.put("isRemoteCase","true");pega.ui.statetracking.setNavigationBusy("/abc?"+f.toUnencodedQueryString());b=pega.u.d.getHarnessElements(!1,!1,!0);k=b.length;for(h=0;h<k;h++){if((q=b[h].element)&&1==q.isRichTextEditor&&0==q.preSubmitFunction(q))return!1;q&&null!=q.id&&"L2L"==q.id.substring(0,3)&&null!=q.ID_SOURCE&&null!=q.ID_TARGET&&"function"==
typeof q.doBeforeSubmit&&q.doBeforeSubmit(q);q&&q._select&&pega.util.Dom.get(q._select)&&"select-multiple"==pega.util.Dom.get(q._select).getAttribute("msid")&&q.doBeforeSubmit(q)}n.action=f.toURL();pega.control.PlaceHolder.removePlaceHolderValues(n);pega.u.d.removeReadOnlyFormatValues(n);pega.u.d.processCheckboxHiddenElements(n);pega.u.d.processCustomTimezonedDateTimeElements(n);pega.u.d.fixBaseThreadTxnId();if(l){if(l=document.createElement("FORM"),l.name="TempForm",l.method="POST",pega.ctx.dom.querySelector("#PEGA_HARNESS")){pega.ctx.dom.querySelector("#PEGA_HARNESS").appendChild(l);
if(n=SafeURL_createFromEncryptedURL(n.action))m=pega.u.d.getHiddenEltsAsSafeURL(document,!0),n.copy(m),l.action=n.toURL();d.set("gDirtyOverride",!1);d.get("isMDC")?(d=pega.u.d.getQueryString(l),pega.ui.MDCUtil.microDCRenderer(n,d,!0)):d.get("bIsDCSPA")?(n.put("isURLReady","true"),n.put("skipHistoryUpdation","true"),pega.u.d.UIActionRouter.singlePageRenderer(n)):l.submit()}}else d.set("gDirtyOverride",!1),null==main.getAttribute("submitting")&&(pega.offline?doFormSubmit(f,m,strSaveText,m):d.get("isMDC")?
(d=pega.u.d.getQueryString(n),pega.ui.MDCUtil.microDCRenderer(f,d,!0)):d.get("bIsDCSPA")?(f.put("isURLReady","true"),f.put("skipHistoryUpdation","true"),doFormSubmit(f,m,strSaveText,m)):(main.setAttribute("submitting","true"),pega.u.d.disableMDCFieldSets(n),document.main.submit()));break}else if("actionForm"==n.name){f=new SafeURL;pega.u.template&&pega.u.template.utility&&f.put("PagesToRemove",pega.u.template.utility.getHarnessCleanUpPages(t));pega.control.PlaceHolder.removePlaceHolderValues(document.actionForm);
c&&(f.put("PreDataTransform",c),e&&f.put("DataTransformParams",e));a&&(f.put("preActivity",a),b&&f.copy(SafeURL_createFromEncryptedURL(b),!0));g&&f.copy(SafeURL_createFromEncryptedURL(g),!0);reSubmit(f.toQueryString());break}if(!1===pega.ctx.SubmitInProgress||document.main&&document.main.target&&"_self"!=document.main.target)pega.u.d.gBusyInd.hide(),pega.ui&&pega.ui.DCUtil&&pega.ui.DCUtil.cancelTransition&&pega.ui.DCUtil.cancelTransition()}}},submitSection:function(a,b){if(!b||!b.parentDiv||pega.u.d.shouldSubmitProceed(a,
b.parentDiv)){pega.util.Event.stopPropagation(a);pega.util.Event.preventDefault(a);a=b.parentDiv;var g=b.onAfterSubmit,c=b.onAfterCancel,e=b.bShowAsModal,l=b.streamName,k=b.specialButtons,m=b.includedStreamName,d=b.sectionOnly,n=b.sectionParams,h="",f=a.getElementsByTagName("BUTTON");if(f&&0<f.length)for(var t=f.length,h=0;h<t;h++)f[h].disabled=!0;f=SafeURL_createFromURL(pega.u.d.url);f.put("pyActivity","SubmitSection");f.put("FormError",pega.u.d.formErrorType);f.put("FieldError",pega.u.d.fieldErrorType);
f.put("pyCustomError",pega.u.d.pyCustomError);!1===d?f.put("WithSubmitButton","true"):f.put("WithSubmitButton","false");d&&f.put("sectionOnly",d);f.put("StreamName",l);m&&f.put("includedStreamName",m);if(n)for(var p in n)f.put(p,n[p]);f.put("UsingPage","true");(p=b.pageName)&&""!=p&&f.put("reloadPage",p);if(k){for(var t=k.length,q="",u="",h=0;h<t;h++)(u=k[h].caption)&&""!=u&&(q+=u+",");f.put("specialButtons",q)}(h=pega.util.Dom.getElementsById("RULE_KEY",a))&&0<h.length?(h=h[0],h=pega.u.d.getQueryString(h),
pega.u.d.asyncRequest("POST",f,{success:function(a){var b=a.argument[0],c=a.argument[1],d=a.argument[2],e=a.argument[3],f=a.argument[4],g=a.argument[5],k=a.responseText,h=a.argument[6],l=a.argument[7],m=a.argument[8],n=a.argument[9],p=a.argument[10];a=a.argument[11];if("SUCCESS"==k)l&&(b.style.display="none",e&&(pega.util.Event.isIE&&pega.u.d.modalDialog.cfg.setProperty("height","0"),pega.u.d.removeModalBtnListeners(b),pega.u.d.hideModalWindow())),c&&c(h),pega.u.d.resizeHarness(),pega.u.d.gBusyInd.hide();
else if(h=document.createElement("DIV"),h.innerHTML=k,pega.u.d.gCallbackArgs={parentDiv:b,onAfterSubmit:c,onAfterCancel:d,bShowAsModal:e,streamName:f,pageName:g,specialButtons:m,includedStreamName:n,sectionOnly:p,sectionParams:a},c=function(){var a=pega.u.d.gCallbackArgs;pega.u.d.loadHTMLEleCallback(a.domObj);a.bShowAsModal&&pega.u.d.focusFirstElement(pega.u.d.modalDialog.innerElement.id);var b={parentDiv:a.parentDiv,onAfterSubmit:a.onAfterSubmit,onAfterCancel:a.onAfterCancel,bShowAsModal:a.bShowAsModal,
streamName:a.streamName,pageName:a.pageName,specialButtons:a.specialButtons,label:"",bClose:!0,includedStreamName:a.includedStreamName,sectionOnly:a.sectionOnly,sectionParams:a.sectionParams};pega.u.d.attachModalBtnListeners({submitClickApi:pega.u.d.submitSection,cancelClickApi:pega.u.d.cancelSection},b);e&&pega.u.d.attachCloseBtnListeners({closeBtnApi:pega.u.d.cancelSection},b);if(a.specialButtons)for(var c,d=a.specialButtons.length,f=0;f<d;f++)b=a.specialButtons[f],(c=pega.util.Dom.getElementsById("Modal"+
b.caption,a.parentDiv))&&0<c.length&&(c=c[0],1==b.disable?c.disabled=!0:(c.disabled=!1,b={parentDiv:a.parentDiv,onAfterSubmit:a.onAfterSubmit,onAfterCancel:a.onAfterCancel,bShowAsModal:a.bShowAsModal,streamName:a.streamName,pageName:a.pageName,specialButtons:a.specialButtons,label:b.caption,bClose:b.close,includedStreamName:a.includedStreamName,sectionOnly:a.sectionOnly,sectionParams:a.sectionParams},pega.util.Event.addListener(c,"click",pega.u.d.submitSection,b,this)));pega.u.d.gBusyInd.hide();pega.ui&&
pega.ui.DCUtil&&pega.ui.DCUtil.continueTransition&&pega.ui.DCUtil.continueTransition();pega.u.d.gCallbackArgs=null},(d=pega.util.Dom.getElementsById("PegaOnlyOnce",h))&&d[0]&&(pega.u.d.handleOnlyOnce(d[0]),d[0].parentNode.removeChild(d[0])),e){pega.util.Event.isIE&&pega.u.d.modalDialog.cfg.setProperty("height","0");pega.u.d.gCallbackArgs.domObj=pega.u.d.modalDialog.body;pega.u.d.setBusyIndicator(pega.u.d.modalDialog.body);if((b=pega.util.Dom.getElementsById("ERRORTABLE",h))&&b[0])for(d=b.length,f=
0;f<d;f++)b[f].parentNode.removeChild(b[f]);pega.u.d.loadDOMObject(pega.u.d.modalDialog.body,h.innerHTML,c);h.innerHTML=k;pega.util.Dom.getElementsById("PegaRULESErrorFlag",document);this.handleFormErrors(h)}else pega.u.d.gCallbackArgs.domObj=b,pega.u.d.setBusyIndicator(b),pega.u.d.loadDOMObject(b,h.innerHTML,c)},failure:function(a){},scope:this,argument:[a,g,c,e,l,p,b.label,b.bClose,k,m,d,n]},h)):alert("section content not found to submit.")}},cancelSection:function(a,b){pega.util.Event.stopPropagation(a);
pega.util.Event.preventDefault(a);a=b.onAfterCancel;var g=b.bShowAsModal;b.parentDiv.style.display="none";g&&(pega.util.Event.isIE&&pega.u.d.modalDialog.cfg.setProperty("height","0"),pega.u.d.hideModalWindow());a&&a();pega.u.d.resizeHarness()},resetReadOnlyValues:function(a){a=null==a||"undefined"===typeof a?pega.u.d.getHarnessElements(!0,!1,!1):a.getElementsByTagName("INPUT");var b=0;a&&(b=a.length);for(var g=0;g<b;g++){var c=a[g];if((c&&"text"==c.type&&"done"===c.getAttribute("data-formatting")||
"yes"===c.getAttribute("data-formatting"))&&!(c.name&&"function"==typeof window.getErrorDB&&window.getErrorDB().isHavingError&&window.getErrorDB().isHavingError(c.name))){var e=c.getAttribute("data-value"),l=c.getAttribute("data-display-value");null!=e&&"undefined"!=typeof e&&""!=e&&c.value&&e==c.value&&l&&""!=l&&(c.value=l,c.setAttribute("data-formatting","done"),c.removeAttribute("data-display-value"))}}},processOnBeforeSubmit:function(a,b,g){for(var c=pega.u.d.getSectionIds(b),e=0;e<this.onSubmits.length;e++){var l=
this.onSubmits[e],k=this.contextObjects[e];if(b&&k&&k.sectionId&&""!=k.sectionId)for(var m=0;m<c.length;m++){if(k.sectionId==c[m]&&0==l(k))return!1}else if(0==l(k))return!1}1==a&&(this.onSubmits=[],this.contextObjects=[],this.gSubmitIdx=-1);c=pega.u.d.getHarnessElements(!1,!1,!0);a=c.length;for(e=0;e<a;e++){var d=c[e].element;if(d&&1==d.isRichTextEditor&&(!b||$(b).has(d.txtAreaEl).length)&&0==d.preSubmitFunction(d))return!1}c=pega.u.d.getHarnessElements(!0,!1,!1);a=c.length;for(e=0;e<a;e++)if((d=
c[e])&&"checkbox"==d.type){if(l=pega.util.Dom.getPreviousSiblingBy(d,function(a){return"hidden"==a.type&&a.getAttribute("name")==d.getAttribute("name")?!0:!1}))l.value=d.checked?"true":"false"}else if(("undefined"==typeof b||null==b||""==b)&&d&&"text"==d.type)try{var n=d.getAttribute("data-value")||d.value,h=d.getAttribute("data-custom-timezone");"yes"===d.getAttribute("data-formatting")||"done"===d.getAttribute("data-formatting")?"undefined"!=typeof n&&null!=n&&("done"===d.getAttribute("data-formatting")&&
d.setAttribute("data-display-value",d.value),d.value=h?pega.u.d.CalendarUtil.convertDateTimeBtwnTimezones(n,h,pega.u.d.TimeZone):n):h&&d.value&&(d.value=pega.u.d.CalendarUtil.convertDateTimeBtwnTimezones(d.value,h,pega.u.d.TimeZone))}catch(f){}g&&(b=g);"undefined"!=typeof b&&$(b).find('input[type\x3d"text"][data-formatting]').each(function(){try{var a=this.getAttribute("data-value")||this.value,b=this.getAttribute("data-custom-timezone");"yes"!==this.getAttribute("data-formatting")&&"done"!==this.getAttribute("data-formatting")||
"undefined"==typeof a||null==a||("done"===this.getAttribute("data-formatting")&&this.setAttribute("data-display-value",this.value),b&&!pega.u.d.ServerProxy.isDestinationLocal()?this.value=pega.u.d.CalendarUtil.convertDateTimeBtwnTimezones(a,b,pega.u.d.TimeZone):this.value=a)}catch(p){}});return!0},submitForm:function(){return!1},reSubmit:function(a){var b="";a&&(b=SafeURL_createFromEncryptedURL(a).get("pyActivity"));b?pega.u.d.submitWhenFail(b,a):pega.u.d.submitWhenFail()},submit:function(a,b,g,c){var e=
pega.ui.HarnessContextMap;e.get("SubmitInProgress")||(a=pega.u.d.submitWrapper(a,b,g,c),b=pega.u.d.getFormElement(),a&&b&&""==b.target&&!pega.offline&&e.set("SubmitInProgress",!0))},submitWrapper:function(a,b,g,c){var e=pega.ui.HarnessContextMap;pega.desktop.support.restartTimeoutWarningTimer();if(pega.u&&pega.u.NavigateTopHandler){pega.u.NavigateTopHandler.formSubmit=!0;var l=pega.u.d.getDocumentElement();l&&(l.querySelector("#pyFormPost").value="TRUE")}if(pega.u.d.bModalDialogOpen&&(l=pega.util.Dom.getElementsById("RULE_KEY",
pega.u.d.modalDialog.innerElement,"div"))&&l[0]&&("pyModalFlowTemplate"==l[0].getAttribute("node_name")||l[0].getAttribute("node_name")==pega.u.d.flowModalTemplateName))return pega.u.d.launchFlow.submitModalAssignment(c);if(1==e.get("bWarnBeforeChangingWindow")&&!showDialogForWindowChange())return!1;var k="string"==typeof a?SafeURL_createFromURL(a):a;0==k.get("pzPrimaryPageName")&&k.put("pzPrimaryPageName",e.get("primaryPageName"));pega.mobile.isMultiWebViewPegaMobileClient&&(a=SafeURL_createFromURL(window.location.href).get("isRemoteCase"),
"true"===a&&k.put("isRemoteCase",a));a=k.toQueryString();c=void 0==c?window.event:c;if("undefined"!=typeof doFormSubmitCallback&&!doFormSubmitCallback(a,b,g))return pega.util.Event.stopEvent(c),!1;var m=!0;if(""==!a&&(e.get("bClientValidforReviewAction")||!k.get("HarnessPurpose")||"Review"!=k.get("HarnessPurpose")))if("GoToPreviousTask"!=k.get("pyActivity")||"true"!=k.get("previousAssignment")&&"true"!=k.get("previousEntryPoint")&&!k.get("skipValidations")){var d;pega.ctx.isMDC&&(d=pega.u.d.getDocumentElement());
if(!pega.u.d.areInputsValid(c,d))return this.resetReadOnlyValues(),!1}else m=!1;if(0==this.processOnBeforeSubmit())return!1;d=function(a,b,c,d,g){e=pega.ui.HarnessContextMap;pega.u.d.ServerProxy.isDestinationLocal()&&(a=pega.u.d.getDocumentElement(),$(a).find('input[data-ctl\x3d"[\\"DatePicker\\"]"]').each(function(){var a=this.value;if(a)try{this.parentNode&&this.parentNode.tagName&&"span"==this.parentNode.tagName.toLowerCase()&&-1==a.indexOf("GMT")&&(this.value=pega.DateTimeUtil.convertDateTimeToGMT(a,
this.parentNode))}catch(C){this.value=a}}));a=pega.u.d.getFormElement();0<document.forms.length&&(pega.u.d.setBusyState(b,c,null,d),pega.u.d.ServerProxy.isHybridClient()?pega.u.d.setBusyIndicatorWithDelay(document.body,300):pega.util.Event.isIE&&document.frames&&"actionIFrame"==document.frames.name?pega.u.d.setBusyIndicator(document.body):pega.u.d.setBusyIndicator());a&&"actionForm"==a.name&&(k.put("HarnessMode",e.get("strHarnessMode")),k.put("TaskIndex",e.get("strTaskIndex")),k.put("HarnessPurpose",
window.parent.document.getElementById("HarnessPurpose").value),bActionIframe||(a.target="_parent"));var f=a;b=document.forms.length;if(1<b&&!pega.ctx.isMDC)for(var h=0;h<b;h++)if(c=document.forms[h],"main"==c.name||"actionForm"==c.name){f=c;break}var l=f?SafeURL_createFromEncryptedURL(f.action):"";k&&""!==l&&(k.get("switchtoPOST")?(b=SafeURL_createFromURL(pega.ctx.url),b.put("pyActivity","@baseclass.pzTransformAndRun"),l.copy(SafeURL_createFromEncryptedURL(b.toQueryString()),!0)):l.copy(k));if(f){pega.u.d.convertToRunActivityAction(l);
f.action=l.toURL();e.set("gDirtyOverride",!1);try{if(g){var n=$(f).find("#postAutomationMeta")[0].getAttribute("data-automation-primaryPage"),p;for(p in g){var q=pega.u.property.toHandle(n+"."+p);$(f).find('[name \x3d "'+q+'"]').val(g[p])}}}catch(B){console.log("Failure in updating the DOM with automation data")}pega.control&&pega.control.PlaceHolder&&pega.control.PlaceHolder.removePlaceHolderValues(f);pega.u.d.fixBaseThreadTxnId();pega.ui.statetracking.setPALInteraction(l.toURL());var t={online:function(a,
b){var c=a.get("pyActivity");if(e.get("isMDC")){pega.u.d.hideBusyIndicatorForMDCRefresh=!0;var g=pega.redux.Utils.getAjaxContainerState();g&&"undefined"!==typeof g.parentKey&&a.put("parentKey",g.parentKey);pega.ui.MDCUtil.microDCRenderer(a,b,!0)}else e.get("bIsDCSPA")?(a.put("isURLReady","true"),pega.u.d.UIActionRouter.singlePageRenderer(a,b)):(b=function(){if(k.get("switchtoPOST")){var a=k.keys();for(h in a){var b=a[h];if("pyActivity"!==b){var e=k.get(b);"undefined"===typeof e&&(e="");var g=document.createElement("input");
g.setAttribute("name",b);g.setAttribute("value",e);g.setAttribute("type","hidden");f.appendChild(g)}}}pega.ui.statetracking.setFormsubmitBusy();c&&"finishassignment"==c.toLowerCase()?pega.u.d.harnessOnBeforeUnload(d,f):f.submit()},pega.ui.hasAjaxContainer?(a={closeAllDocsCallback:b,pzPrimaryPageName:a.get("pzPrimaryPageName"),forceClose:!0,isOuterDocClose:!0},pega.redux.store.dispatch(pega.redux.actions(pega.redux.actionTypes.CLOSEALL,a))):b())},remote:function(a,b){a.put("isRemoteCase","true");a.put("UITemplatingStatus",
"Y");var c={};pega.u.d.ServerProxy.setDestination(pega.u.d.ServerProxy.DESTINATION.REMOTE);c.success=function(a){a=a.responseText;var b=document.createElement("div");b.innerHTML=a;pega.u.d.initChangeTracker(b);pega.ui.updatePegaServerAvailability(1);(a=pega.util.Dom.getElementsById("PEGA_HARNESS",b,"div")[0])?pega.ui.DCUtil.replace(a.parentNode):console.log("Harness not found");e.set("isFromNonOsco",!0);pega.u.d.gBusyInd&&pega.u.d.gBusyInd.hide()};c.failure=function(){pega.u.d.gBusyInd&&pega.u.d.gBusyInd.hide();
pega.ui&&pega.ui.DCUtil&&pega.ui.DCUtil.cancelTransition&&pega.ui.DCUtil.cancelTransition();console.log("Failure in submit remote handler.")};var d=pega.ui.ClientCache.find("pxRequestor.pzIsPegaServerAvailable");!d||d&&"false"==d.getValue()?(a=pega.u.d.fieldValuesList.get("CannotPerformWhenOffline"),alert(a),pega.u.d.resetBusyState(),pega.u.d.gBusyInd&&pega.u.d.gBusyInd.hide(),pega.ui&&pega.ui.DCUtil&&pega.ui.DCUtil.cancelTransition&&pega.ui.DCUtil.cancelTransition()):pega.ui.HarnessContextMgr.get("isMDC")?
pega.ui.MDCUtil.microDCRenderer(a,b,!0):pega.u.d.asyncRequest("POST",a,c,b)},offline:function(a,b){var c=a.get("pyActivity"),d=a.get("Action");switch(c.toLowerCase()){case "finishassignment":pega.process.engine.finishAssignment(b,function(){},function(){});break;case "add":pega.process.engine.addNewWork(b,function(){},function(){});break;case "open":switch(d.toLowerCase()){case "review":pega.process.engine.cancel(b,function(){},function(){})}break;case "pzrunactionwrapper":"GoToPreviousTask"==a.get("pzActivity")?
(a=JSON.parse(b),a.TaskName=k.get("TaskName"),a.flowName=k.get("flowName"),b=JSON.stringify(a),pega.process.engine.goToPreviousAssignment(b,function(){},function(){})):console.info("Unknown offline action: "+c);break;case "dosave":pega.process.engine.doSave(b,function(){},function(){});break;case "saveandcontinue":pega.process.engine.saveAndContinue(b,function(){},function(){});break;default:console.info("Unknown offline action: "+c)}},scope:this};g=function(){var a;e.get("isMDC")?a=pega.u.d.getQueryString(f,
!1,!1,!0):e.get("bIsDCSPA")&&pega.ctx.hasFile()&&pega.u.d.ServerProxy.isBrowserClient()?a=new FormData(f):(a=pega.u.d.getQueryString(f,!1,!1,!0),!m&&pega.u.d.ServerProxy.isDestinationLocal()&&(a=new SafeURL));pega.u.d.ServerProxy.doAction(l,a,t);e.set("gDirtyOverride",null)};pega.ui&&pega.ui.DCUtil&&pega.ui.DCUtil.startTransition?pega.ui.DCUtil.startTransition(!0,g):g()}};l=document.querySelector("div[data-mdc-id]")?!0:!1;if(!e.get("isMDC")&&l&&!pega.u.d.isDirtyDialogOpen&&"true"!=pega.u.d.ignoreDirty&&
pega.u.d.isFormDirty(!0,!1,null,!0))return!1;var l=("string"==typeof a?SafeURL_createFromURL(a):a).get("pyActivity"),n;if(pega.ui.roboticAutomation&&pega.ui.roboticAutomation.isAutomationConfigured("submit",document)){n=document;var h;c&&c.target&&(h=pega.ui.HarnessContextMgr.getContextByTarget(c.target));h&&(h=h.recordId)&&(h=document.querySelector("[data-mdc-recordid\x3d'"+h+"']"))&&(n=h);(h=pega.ui.roboticAutomation.isAutomationConfigured("submit",n))&&l&&"finishassignment"==l.toLowerCase()&&"false"==
pega.ui.roboticAutomation.skipAutomation(n)?pega.ui.roboticAutomation.runAutomation("submitAssignment",n,d,[a,b,g,c]):(h&&"true"==h.getAttribute("skipAutomation")&&h.setAttribute("skipAutomation","false"),d(a,b,g,c))}else d(a,b,g,c);return!0},getPropValuesFromDOM:function(a,b){$.each(a,function(g,c){c=pega.u.property.toHandle(b+"."+g);(c=pega.u.d.getCorrectPropertyElemFromDOM(c,pega.ui.ChangeTrackerMap.getTracker()))&&0<c.length&&"CV"!=c[0].id&&(c=pega.u.d.getGroupElementValue(c),a[g]=c)});return a},
offlineSubmitCallback:function(){var a=document.getElementsByClassName("screen-layout"),b="",g="";a&&0<a.length&&(a=a[0],(a=a.getAttribute("data-portalharnessinsname"))&&-1<a.indexOf("!")&&(a=a.split("!"),b=a[0],g=a[1]));""!=b&&""!=g?pega.desktop.showHarness(g,b,g,"","","","","","","","","","true"):pega.desktop.showHarness(window.strHarnessPurpose,window.strHarnessClass,window.strHarnessPurpose,"","","","","","","","","","true")},removeReadOnlyFormatValues:function(a){if(null!=a&&"undefined"!==typeof a){a=
a.getElementsByTagName("INPUT");for(var b=a.length,g=0;g<b;g++){var c=a[g];if(c&&"text"==c.type)try{if("yes"===c.getAttribute("data-formatting")||"done"===c.getAttribute("data-formatting")){var e=c.getAttribute("data-value");"undefined"!=typeof e&&null!=e&&(c.getAttribute("data-display-value")||c.setAttribute("data-display-value",c.value),c.value=e)}}catch(l){}}}},addReadOnlyFormatValues:function(a){if(null!=a&&"undefined"!==typeof a){a=a.getElementsByTagName("INPUT");for(var b=a.length,g=0;g<b;g++){var c=
a[g];if(c&&"text"==c.type)try{if("yes"===c.getAttribute("data-formatting")||"done"===c.getAttribute("data-formatting")){var e=c.getAttribute("data-display-value");"undefined"!=typeof e&&null!=e&&(c.value=e,c.removeAttribute("data-display-value"))}}catch(l){}}}},processCheckboxHiddenElements:function(a){if(null!=a&&"undefined"!==typeof a){a=a.getElementsByTagName("INPUT");for(var b=a.length,g=0;g<b;g++){var c=a[g];if(c&&"checkbox"==c.type&&c.disabled){var e=pega.util.Dom.getPreviousSiblingBy(c,function(a){return"hidden"==
a.type&&a.getAttribute("name")==c.getAttribute("name")?!0:!1});e&&(e.value=c.checked?"true":"false")}}}},processCustomTimezonedDateTimeElements:function(a){if(null!=a&&"undefined"!==typeof a){a=a.querySelectorAll("input[data-custom-timezone]");for(var b=0;b<a.length;b++){var g=a[b];if("text"==g.type){var c=g.hasAttribute("data-formatting")?g.getAttribute("data-value"):g.value;g.value=pega.u.d.CalendarUtil.convertDateTimeBtwnTimezones(c,g.getAttribute("data-custom-timezone"),pega.u.d.TimeZone)}}}}};
pega.lang.augmentObject(pega.ui.Doc.prototype,docSubmit);
var dirtyHandling={ignoreDirtyState:!1,gDirtyOverride:null,notifyDirtyCallBack:null,dirtyTimeInterval:5E3,dirtyTimer:null,registerNotifyDirty:function(b){"function"===typeof b&&(this.notifyDirtyCallBack=b)},startDirtyCheckTimer:function(){null==this.dirtyTimer&&(this.dirtyTimer=setInterval(this.notifyDirty,this.dirtyTimeInterval))},notifyDirty:function(){pega.u.d.isFormDirty(!1)&&clearInterval(pega.u.d.dirtyTimer)},removeDirtyCallback:function(){clearInterval(this.dirtyTimer);this.notifyDirtyCallBack=
null},clearDirtyState:function(){var b=this.harnessElements;if(!pega.u.d.bRuleformHasErrors){if(b)for(var a=0;a<b.length;a++){var d=b[a].element;d&&d.dirty&&(b[a].element.dirty=!1)}pega.ctx.ignoreDirtyState=!0}},isInAjaxContainer:function(b,a){if(a&&0!=a.length)if(a.length)for(var d=0;d<a.length;d++){if(a[d].contains(b))return!0}else return a.contains(b)},isContainerDirty:function(b,a){var d,f;a&&(d=a.noFramed,f=a.win);try{var h=pega.util.Dom.getElementsByAttribute("type","text","INPUT",b),e=pega.util.Dom.getElementsByAttribute("type",
"number","INPUT",b),g=pega.util.Dom.getElementsByAttribute("type","checkbox","INPUT",b),l=pega.util.Dom.getElementsByAttribute("type","radio","INPUT",b),m=b.getElementsByTagName("TEXTAREA"),q=b.getElementsByTagName("SELECT"),k=pega.ctx.isMDC?document.querySelector("div[data-mdc-id\x3d'"+pega.ctx.mdcName+"']"):document.querySelectorAll("div[data-mdc-id]");for(a=0;a<h.length;a++){var c=h[a];if((c.getAttribute("data-ctl")||"").includes("MultiSelect")&&"none"!=c.style.display){var n=c.parentElement.querySelector("input[type\x3d'hidden'][name\x3d'selected-placeholder']"),
w=n&&n.getAttribute("data-initialvalue")||"";if(n&&n.value!=w)return this.isInAjaxContainer(c,k)&&(pega.u.d.isMDCDirty=!0),!0}if("none"!=c.style.display&&c.value!=c.defaultValue&&""!=c.name)return this.isInAjaxContainer(c,k)&&(pega.u.d.isMDCDirty=!0),!0}for(a=0;a<e.length;a++)if(c=e[a],"none"!=c.style.display&&c.value!=c.defaultValue&&""!=c.name)return this.isInAjaxContainer(c,k)&&(pega.u.d.isMDCDirty=!0),!0;for(a=0;a<g.length;a++)if(c=g[a],c.checked!=c.defaultChecked&&""!=c.name)return this.isInAjaxContainer(c,
k)&&(pega.u.d.isMDCDirty=!0),!0;for(a=0;a<l.length;a++)if(c=l[a],c.checked!=c.defaultChecked&&""!=c.name)return this.isInAjaxContainer(c,k)&&(pega.u.d.isMDCDirty=!0),!0;for(a=0;a<m.length;a++)if(c=m[a],"none"!=c.style.display&&c.value!=c.defaultValue&&""!=c.name)return this.isInAjaxContainer(c,k)&&(pega.u.d.isMDCDirty=!0),!0;for(a=0;a<q.length;a++){var c=q[a],x=(c.getAttribute("data-for")||"").includes("DatePicker");if("ActionOptions"!==c.id&&"ISnsSelect"!==c.id&&(""!==c.name||x)){for(var r=c.options,
y=r.length,h=!1,e=0;e<y;e++){var t=r[e];if(t.defaultSelected&&(h=!0,!t.selected&&!t.isDisabled))return this.isInAjaxContainer(c,k)&&(pega.u.d.isMDCDirty=!0),!0}if(!h&&!r[0].selected)return this.isInAjaxContainer(c,k)&&(pega.u.d.isMDCDirty=!0),!0}}var u=pega.ctx.isMDC?pega.u.d.getSectionIds(b):[],v=!d&&f?f.pega.u.d.getHarnessElements(!1,!1,!0,u):pega.u.d.getHarnessElements(!1,!1,!0,u),z=v.length;for(a=0;a<z;a++){var p=v[a].element;if("undefined"!=typeof p.isDirty&&p.isDirty())return p.gridDiv&&this.isInAjaxContainer(p.gridDiv,
k)&&(pega.u.d.isMDCDirty=!0),!0}}catch(A){}return!1},isFormDirty:function(b,a,d,f,h){pega.u.d.discardActionCallback=h;var e=pega.ui.HarnessContextMgr;if(pega.u.d.explorerFormIsDirty(f)&&(!pega.u.d.myDesktop||pega.u.d.myDesktop.gPortalWarnDirty)||pega.u.d.explorerFormIsBusy()){var g=pega.u.d.fieldValuesList.get("DISCARD_YOUR_UNSAVED_CHANGES");if(pega.u.d.isMDCDirty&&b){pega.ui.statetracking.resetBusyTotalizer();if(!pega.u.d.bUseNativeDirtyConfirm){if(pega.u.d.isDirtyDialogOpen)return pega.u.d.hideModalWindow(),
!1;pega.u.d.isDirtyDialogOpen||pega.u.d.showCustomDirtyModal();return!0}(g=confirm(g))||pega.ui&&pega.ui.DCUtil&&pega.ui.DCUtil.cancelTransition&&pega.ui.DCUtil.cancelTransition();pega.u.d.isMDCDirty=!1;return!g}if(0<arguments.length){if(b){if(!pega.u.d.bUseNativeDirtyConfirm){if(pega.ctx.bIsDCSPA&&pega.u.d.isDirtyDialogOpen)return pega.u.d.hideModalWindow(),!1;pega.u.d.isDirtyDialogOpen||pega.u.d.showCustomDirtyModal();return!0}if(!d||!a||pega.u.d.bUseNativeDirtyConfirm||!$("#dirty-confirm-div")[0]||
pega.u.d.bModalDialogOpen&&document.getElementById("modaldialog_con_dirty")&&0==document.getElementById("modaldialog_con_dirty").offsetHeight){if(pega.u.NavigateTopHandler&&d&&"beforeunload"===d.type)return(d||window.event).returnValue=g;pega.ui.statetracking.resetBusyTotalizer();(g=confirm(g))?pega&&1!=pega.ctx.bIsDCSPA&&e.set("gDirtyOverride",!1):pega.ui&&pega.ui.DCUtil&&pega.ui.DCUtil.cancelTransition&&pega.ui.DCUtil.cancelTransition();return!g}if(d&&(e=pega.util.Event.getTarget(d))&&"SPAN"==e.tagName&&
"close"==e.id)try{pega.d.sendEvent("DesktopMouseClick",d,"SYNC")}catch(l){}try{pega.u.d.isDirtyDialogOpen||pega.u.d.queueDirtyModalAction(d)}catch(l){pega.u.d.isDirtyDialogOpen||pega.u.d.showCustomDirtyModal()}}return!0}pega.u.d.dirtyCloseApproved=confirm(g);pega.u.d.dirtyCloseApproved&&e.set("gDirtyOverride",!1);return!pega.u.d.dirtyCloseApproved}pega.u.d.isDirtyDialogOpen&&delete pega.u.d.isDirtyDialogOpen;return!1},queueDirtyModalAction:function(b){pega.c.actionSequencer.isQueueEmpty()?pega.c.actionSequencer.schedule(b,
pega.c.UIElement,[["runScript",["pega.u.d.showCustomDirtyModal()"]]]):window.setTimeout(function(){pega.u.d.queueDirtyModalAction(b)},1)},showCustomDirtyModal:function(){pega.u.d.submitModalDlgParam=null;pega.u.d.isDirtyDialogOpen=!0;pega.u.d.processActionModal_Pre_Success();pega.u.d.processActionModal_Success({responseText:document.getElementById("dirty-confirm-div").innerHTML.replace("modaldialog_hd_dirty","modaldialog_hd")});pega.u.d.resizeModalDialog();var b=this;setTimeout(function(){try{b.resetBusyState()}catch(a){}},
0)},explorerFormIsDirty:function(b){var a=pega.ui.HarnessContextMgr.get("gDirtyOverride");return null!=a?a:pega.u.d.doExplorerFormIsDirty(window,b)},doExplorerFormIsDirty:function(b,a){if(pega.u.d.gIsLoading)return!1;if(!(a||pega.u.NavigateTopHandler&&!pega.u.d.handleDirtyForFramelessPortals||1!=pega.ctx.gSectionReloaded||pega.ctx.ignoreDirtyState))return!0;if(pega.ctx.isMDC){var d=pega.ctx.gSectionReloaded,f=pega.ctx.ignoreDirtyState;if((!pega.u.NavigateTopHandler||pega.u.d.handleDirtyForFramelessPortals)&&
1==d&&!f)return pega.u.d.isMDCDirty=!0}else for(var h=pega.u.d.getAllMDCContainers(),e=0;e<h.length;++e)for(var g=h[e].getAttribute("data-mdc-id"),g=pega.u.d.getMicroDCDocs(g),l=0;l<g.length;l++)if(d=g[l].getAttribute("data-harness-id"))if(f=pega.ui.HarnessContextMgr.getHarnessContext(d),d=f.getProperty("gSectionReloaded"),f=f.getProperty("ignoreDirtyState"),(!pega.u.NavigateTopHandler||pega.u.d.handleDirtyForFramelessPortals)&&1==d&&!f)return pega.u.d.isMDCDirty=!0;if("actionIFrame"==b.name&&null!=
b.pega&&null!=b.pega.u&&null!=b.pega.u.d&&1==b.pega.ctx.gSectionReloaded||pega.ui.hasAjaxContainer&&pega.u.d.doExplorerFormFieldsChanged(b,a))return!0;try{var m=b.document.InputEnabled;if(null!=m&&"false"==m&&0==b.frames.length||0==b.document.forms.length&&!pega.u.d.bIsDCSPA)return!1;if(pega.u.d.doExplorerFormFieldsChanged(b,a))return!0;if(0<b.frames.length)for(e=0;e<b.frames.length;e++){if(b.frames[e].window.gToolbarManagerAPI)return b.frames[e].window.gToolbarManagerAPI.isDirty;if(pega.u.d.doExplorerFormIsDirty(b.frames[e],
a))return!0}}catch(q){}return!1},doExplorerFormFieldsChanged:function(b,a){var d=[],f="undefined"!==typeof pega.u.NavigateTopHandler&&"object"===typeof pega.u.NavigateTopHandler;a?(a=document.querySelectorAll("fieldset.mdc-fieldset"),Array.prototype.push.apply(d,a)):pega.ctx.isMDC?(a=document.querySelector("div[data-mdc-recordid\x3d'"+pega.ctx.recordId+"']"),d.push(a)):(f&&(b={},b.document=document.getElementsByClassName("screen-layout-region-main-middle"),b.document=b.document&&b.document[0]),d.push(b.document));
b={noFramed:f,win:b};for(f=0;f<d.length;f++)if(pega.u.d.isContainerDirty(d[f],b))return!0;return!1},discardHandler:function(){pega.u.d.discardActionCallback?(pega.u.d.hideModalWindow(),pega.u.d.discardActionCallback(),pega.u.d.discardActionCallback=void 0):pega.control.Actions.prototype.doClose(null,null,null,!0)}};pega.lang.augmentObject(pega.ui.Doc.prototype,dirtyHandling);dirtyHandling=null;