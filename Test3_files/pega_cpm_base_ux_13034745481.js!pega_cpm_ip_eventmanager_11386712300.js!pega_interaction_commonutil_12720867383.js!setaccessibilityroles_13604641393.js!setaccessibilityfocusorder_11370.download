function setActiveMenuOnLoad(){var A=$(".menu-format-primary-navigation > li");if(A.length>0){A.first().addClass("menu-item-active")}else{setTimeout(setActiveMenuOnLoad,300)}}$(document).ready(function(){$(window).scroll(function(){var A=$(window).scrollTop();if(A>0){$("body").addClass("scrolling")}else{$("body").removeClass("scrolling")}});setActiveMenuOnLoad()});function setWorkAreaFullWidth(){var B=$(".dc-wrapper");var C=$(".chat-wrapper");var A=$(".inbound-wrapper");var D=$(".social-wrapper");if(B.length&&C.length){$(B[0]).css("width","100%");$(C[0]).css("display","none");$(A[0]).css("display","none");$(D[0]).css("display","none");$("#workarea").height($("body").height()-$("header").height());pega.u.d.resizeHarness()}};
pega.ui.EventsEmitter.subscribe("onACSwitch",CSOnMdcSwitch,null,null,null,!0);pega.ui.EventsEmitter.subscribe("postMDCRender",CSOnMdcPost,null,null,null,!0);pega.ui.EventsEmitter.subscribe("preMDCRender",CSOnMdcPre,null,null,null,!0);
function hideActionAreaInner(){scrollWorkAreaToTop();for(var a=pega.redux.Utils.getAjaxContainerState().mdcDocs,b=0;b<a.length;++b){var c=a[b].recordId;"true"!==a[b].isStatic?document.querySelector("div[data-mdc-recordid\x3d"+c+"]").setAttribute("class","hide"):document.querySelector("div[data-mdc-recordid\x3d"+c+"]").setAttribute("class","show")}$("div").find(".wrap-up-visibility").css("display","block")}
function refreshKMView(){var a=pega.ctxmgr.getContextByProperty("strPyID",pega.redux.Utils.getAjaxContainerState().parentKey);pega.ctxmgr.setContext(a);(a=pega.u.d.getSectionByName("CSKMArticlesDisplayWrapper","",document.body))&&pega.u.d.reloadSection(a,"","",!1,!0,"",!1);(a=pega.u.d.getSectionByName("SuggestedArticleCountForIntentTask","",document.body))&&pega.u.d.reloadSection(a,"","",!1,!0,"",!1);(a=pega.u.d.getSectionByName("CSKMHeader","",document.body))&&pega.u.d.reloadSection(a,"","",!1,!0,
"",!1);pega.ctxmgr.resetContext()}
function CSOnMdcPre(){scrollWorkAreaToTop();var a=pega.ctxmgr.getContextByProperty("strPyID",pega.redux.Utils.getAjaxContainerState().parentKey);pega.ctxmgr.setContext(a);(a=pega.u.d.getSectionByName("CPMInteractionTasksWrapper","",document.body))&&pega.u.d.reloadSection(a,"","",!1,!0,"",!1);(a=pega.u.d.getSectionByName("InteractionWrapUp","",document.body))&&pega.u.d.reloadSection(a,"","",!1,!0,"",!1);(a=pega.u.d.getSectionByName("CSSuggestionsWrapper","",document.body))&&pega.u.d.reloadSection(a,
"","",!1,!0,"",!1);(a=pega.u.d.getSectionByName("CSKMArticlesDisplayWrapper","",document.body))&&pega.u.d.reloadSection(a,"","",!1,!0,"",!1);(a=pega.u.d.getSectionByName("SuggestedArticleCountForIntentTask","",document.body))&&pega.u.d.reloadSection(a,"","",!1,!0,"",!1);(a=pega.u.d.getSectionByName("CSKMHeader","",document.body))&&pega.u.d.reloadSection(a,"","",!1,!0,"",!1);(a=pega.u.d.getSectionByName("CPMcompositesHeader","",document.body))&&pega.u.d.reloadSection(a,"","",!1,!0,"",!1);var a=pega.u.d.getSectionByName("pyCaseActionArea",
"",document.body),b=pega.u.d.getSectionByName("CPMCompositesContainer","",document.body),c=pega.redux.Utils.getAjaxContainerState().activeDocs.length,c=pega.redux.Utils.getAjaxContainerState().activeDocs[c-1];0<c&&!a.contains(b)?($("div").find(".wrap-up-visibility").css("display","none"),0<c&&(a=pega.redux.Utils.getAjaxContainerState().mdcDocs[0].recordId,document.querySelector("div[data-mdc-recordid\x3d"+a+"]").setAttribute("class","hide"))):$("div").find(".wrap-up-visibility").css("display","block");
pega.ctxmgr.resetContext()}
function CSOnMdcPost(){scrollWorkAreaToTop();var a=new SafeURL("System-User-Recents.CSRecentContextSwitch");null!==pega.ctx.strPyID&&a.put("pyRecordID",pega.ctx.strPyID);null!==pega.ctx.recordId&&void 0!==pega.ctx.recordId&&a.put("pyDomID",pega.ctx.recordId);null!==pega.ctx.strHarnessClass&&void 0!==pega.ctx.strHarnessClass&&a.put("pyClassName",pega.ctx.strHarnessClass);null!==pega.ctx.strKey&&void 0!=pega.ctx.strKey&&a.put("pyRecordKey",pega.ctx.strKey);if(null!==pega.ctx.strHarnessPurpose&&void 0!==
pega.ctx.strHarnessPurpose&&(a.put("HarnessPurpose",pega.ctx.strHarnessPurpose),"New"==pega.ctx.strHarnessPurpose)){var b=pega.redux.Utils.getAjaxContainerState().mdcDocs.length;a.put("pyRecordKey",pega.redux.Utils.getAjaxContainerState().mdcDocs[b-1].recordKey)}null!==pega.redux.Utils.getAjaxContainerState().parentKey&&void 0!==pega.redux.Utils.getAjaxContainerState().parentKey&&a.put("pyParentKey",pega.redux.Utils.getAjaxContainerState().parentKey);null!==pega.ctx.strPyLabel&&void 0!=pega.ctx.strPyLabel&&
a.put("pyLabel",pega.ctx.strPyLabel);a.put("MdcAction","MDCPost");pega.u.d.asyncRequest("GET",SafeURL_createFromURL(a.toURL()),{success:function(a){a=pega.ctxmgr.getContextByProperty("strPyID",pega.redux.Utils.getAjaxContainerState().parentKey);pega.ctxmgr.setContext(a);(a=pega.u.d.getSectionByName("CSKMArticlesDisplayWrapper","",document.body))&&pega.u.d.reloadSection(a,"","",!1,!0,"",!1);(a=pega.u.d.getSectionByName("SuggestedArticleCountForIntentTask","",document.body))&&pega.u.d.reloadSection(a,
"","",!1,!0,"",!1);(a=pega.u.d.getSectionByName("CSKMHeader","",document.body))&&pega.u.d.reloadSection(a,"","",!1,!0,"",!1);(a=pega.u.d.getSectionByName("CPMcompositesHeader","",document.body))&&pega.u.d.reloadSection(a,"","",!1,!0,"",!1);pega.u.d.getSectionByName("ShowCustomerWrapper","",document.body)&&pega.u.d.reloadSection(pega.u.d.getSectionByName("ShowCustomerWrapper","",""));a=pega.redux.Utils.getAjaxContainerState().mdcDocs;0<a.length&&document.querySelector("div[data-mdc-recordid\x3d"+a[0].recordId+
"]").setAttribute("class","hide")},failure:function(){var a=pega.u.d.getSectionByName("SuggestedArticleCountForIntentTask","",document.body);a&&pega.u.d.reloadSection(a,"","",!1,!0,"",!1);console.log("Unable to update the list for record "+pega.ctx.strPyID)}},"");pega.ctxmgr.resetContext();void 0!==pega.chat&&void 0!==pega.chat.ChatComponentEventHandler&&pega.chat.ChatComponentEventHandler.publishChatEvents("UpdateServiceCaseID",{id:pega.ctx.strPyID,type:"SERVICE CASE IN-PROGRESS"});"function"==typeof autoMapDetectedEntities&&
autoMapDetectedEntities()}
function CSOnMdcSwitch(){scrollWorkAreaToTop();var a=new SafeURL("System-User-Recents.CSRecentContextSwitch");null!==pega.ctx.strPyID&&a.put("pyRecordID",pega.ctx.strPyID);null!==pega.ctx.recordId&&void 0!==pega.ctx.recordId&&a.put("pyDomID",pega.ctx.recordId);null!==pega.ctx.strHarnessClass&&void 0!==pega.ctx.strHarnessClass&&a.put("pyClassName",pega.ctx.strHarnessClass);null!==pega.ctx.strKey&&void 0!=pega.ctx.strKey&&a.put("pyRecordKey",pega.ctx.strKey);if(null!==pega.ctx.strHarnessPurpose&&void 0!==
pega.ctx.strHarnessPurpose&&(a.put("HarnessPurpose",pega.ctx.strHarnessPurpose),"New"==pega.ctx.strHarnessPurpose)){var b=pega.redux.Utils.getAjaxContainerState().mdcDocs.length;a.put("pyRecordKey",pega.redux.Utils.getAjaxContainerState().mdcDocs[b-1].recordKey)}null!==pega.redux.Utils.getAjaxContainerState().parentKey&&void 0!==pega.redux.Utils.getAjaxContainerState().parentKey&&a.put("pyParentKey",pega.redux.Utils.getAjaxContainerState().parentKey);null!==pega.ctx.strPyLabel&&void 0!=pega.ctx.strPyLabel&&
a.put("pyLabel",pega.ctx.strPyLabel);a.put("MdcAction","MDCSwitch");pega.u.d.asyncRequest("GET",SafeURL_createFromURL(a.toURL()),{success:function(a){a=pega.ctxmgr.getContextByProperty("strPyID",pega.redux.Utils.getAjaxContainerState().parentKey);pega.ctxmgr.setContext(a);(a=pega.u.d.getSectionByName("CPMInteractionTasksWrapper","",document.body))&&pega.u.d.reloadSection(a,"","",!1,!0,"",!1);var b=pega.u.d.getSectionByName("InteractionWrapUp","",document.body);b&&pega.u.d.reloadSection(b,"","",!1,
!0,"",!1);(a=pega.u.d.getSectionByName("CSKMArticlesDisplayWrapper","",document.body))&&pega.u.d.reloadSection(a,"","",!1,!0,"",!1);(a=pega.u.d.getSectionByName("SuggestedArticleCountForIntentTask","",document.body))&&pega.u.d.reloadSection(a,"","",!1,!0,"",!1);(a=pega.u.d.getSectionByName("CSKMHeader","",document.body))&&pega.u.d.reloadSection(a,"","",!1,!0,"",!1);(a=pega.u.d.getSectionByName("CPMcompositesHeader","",document.body))&&pega.u.d.reloadSection(a,"","",!1,!0,"",!1);a=pega.u.d.getSectionByName("pyCaseActionArea",
"",document.body);var c=pega.u.d.getSectionByName("CPMCompositesContainer","",document.body),b=pega.redux.Utils.getAjaxContainerState().activeDocs.length,f=pega.redux.Utils.getAjaxContainerState().activeDocs[b-1];1==b&&((b=pega.u.d.getSectionByName("CPMCoachingTipDialogWrapper","",document.body))&&pega.u.d.reloadSection(b,"","",!1,!0,"",!1),(b=pega.u.d.getSectionByName("CAWrapUp","",document.body))||a.contains(c)||(c?$("div").find(".wrap-up-visibility").css("display","none"):$("div").find(".wrap-up-visibility").css("display",
"block")),(b=pega.u.d.getSectionByName("CAWrapUp","",document.body))||a.contains(c)||$("div").find(".wrap-up-visibility").css("display","block"));0<f&&!a.contains(c)?($("div").find(".wrap-up-visibility").css("display","none"),0<f&&(a=pega.redux.Utils.getAjaxContainerState().mdcDocs[0].recordId,document.querySelector("div[data-mdc-recordid\x3d"+a+"]").setAttribute("class","hide"))):"Declined"==$(".cpmsearch-visibility input#OfferAccepted").val()&&$("div").find(".wrap-up-visibility").css("display",
"block")},failure:function(){console.log("Unable to update the list for record "+pega.ctx.strPyID)}},"");pega.ctxmgr.resetContext();void 0!==pega.chat&&void 0!==pega.chat.ChatComponentEventHandler&&pega.chat.ChatComponentEventHandler.publishChatEvents("UpdateServiceCaseID",{id:pega.ctx.strPyID,type:"SERVICE CASE ENDED"});"function"==typeof autoMapDetectedEntities&&autoMapDetectedEntities()}
function CSCloseRecent(a){""!=a&&(a=pega.ctxmgr.getContextByProperty("recordId",a),pega.ctxmgr.setContext(a),pega.ctx.gDirtyOverride=!1,pega.u.d.doClose(),pega.ctxmgr.resetContext(),a=pega.u.d.getSectionByName("pyCaseActionArea","",document.body),pega.u.d.getSectionByName("CAWrapUp","",document.body)?pega.ctx.gDirtyOverride=!0:a.contains(compositesNode)||(pega.ctx.gDirtyOverride=!1))}
function switchToThisServiceCase(a){a&&a.target&&($(".task-selected").removeClass("task-selected"),$(a.target).closest(".service-case-wrapper").find(".service-case-task").addClass("task-selected"))}
function checkIfVerficationIsEvaluated(a){"fail"==a&&$(".VerificationFail button")[0].blur();a=new SafeURL("@baseclass.czShowProperyResponse");a.put("pzPrimaryPageName","pyWorkPage");a.put("ShowProperty","Verified");pega.util.Connect.initHeader("Content-Type","application/x-www-form-urlencoded");pega.u.d.asyncRequest("POST",a,{success:function(a){Verified1=a.responseText;"true"!=Verified1&&"false"!=Verified1||doFormSubmit("pyActivity\x3dFinishAssignment")},failure:function(){},scope:this},null)}
if(!pega)var pega={};pega.cpm||(pega.cpm={});pega.cpm.IP||(pega.cpm.IP={});pega.cpm.IP.NonNativeCase||(pega.cpm.IP.NonNativeCase={});pega.cpm.IP.closeChatInteraction=function(a){a&&window.parent.oPegaChatAgentConnection.leaveChat(a)};pega.cpm.IP.doClientClose=function(a){"undefined"!=typeof a&&oChatTabEventHandler._endChatInteraction(a);"undefined"!=typeof parent.channelIDObj&&"undefined"!=typeof parent.channelIDObj[a]&&(parent.oPegaChatAgentConnection.leaveChat(parent.channelIDObj[a]),delete parent.channelIDObj[a])};
pega.cpm.IP.submitAssignmentInInteractionThread=function(a){var b=$(window.parent.document).find("iframe");for(i=0;i<b.length;i++)if($(b[i].parentNode).attr("pegathread")==a){b[i].contentWindow.doFormSubmit("pyActivity\x3dFinishAssignment",this,"Submitting",null);break}delete b};pega.cpm.toggleAppGuide=function(){var a=pega.ui.composer.getCurrentComposerWindow();a.pega.ui.guide.toggle();if(a=a.document.querySelector(".pz-guide-panel"))a.style.height=null};
pega.cpm.IP.close=function(a){for(var b=$(window.parent.document).find("iframe"),c=0;c<b.length;c++){var d=$(b[c].parentNode).attr("pegathread");if(-1!=a.indexOf(d)){a=b[c].contentWindow.document.getElementsByClassName("CloseLayout")[0].getElementsByTagName("a")[0];pega.control.actionSequencer.fireTopPriorityEvent(a,"click");break}}delete b};pega.cpm.IP.NonNativeCase.cancel=function(a){a.caseKey==pega.cpm.IP.NonNativeCase.caseKey&&pega.cpm.IP.close(caseKey)};
pega.cpm.IP.NonNativeCase.close=function(a){a.caseKey==pega.cpm.IP.NonNativeCase.caseKey&&pega.cpm.IP.close(caseKey)};pega.cpm.IP.NonNativeCase.resizeIframe=function(a,b){try{for(var c=$(window.parent.document).find("iframe"),d,e=0;e<c.length;e++)if($(c[e].parentNode).attr("pegathread")==a){d=window.document.getElementsByTagName("iframe")[0];break}b&&800>=b?d.style.height=b+"px":b&&800<b?(d.style.overflow="auto",d.style.height="800px"):d.style.height="430px"}catch(f){}};
function queueIntentTask(a,b,c,d,e,f,g){var h=(new Date).getTime();gSelectedTasksStack.push({TaskName:a,TaskClass:b,TaskFlow:c,label:d,RemoteCaseType:e,UniqueTaskId:h,IsNonNativeCase:f});a=pega.util.Event.getTarget(g);$(a).parents().eq(4).attr("UniqueTaskId",h)}function removeIntentTask(a){a=pega.util.Event.getTarget(a);a=$(a).parents().eq(4).attr("UniqueTaskId");for(i=0;i<gSelectedTasksStack.length;i++)if(gSelectedTasksStack[i].UniqueTaskId==a){gSelectedTasksStack.splice(i,1);break}}
function launchTasksSelected(a){gSelectedTaskListSize=gSelectedTasksStack.length;if(0!=gSelectedTaskListSize&&0<gSelectedTaskListSize){copySelectedTasksStack=gSelectedTasksStack.slice();var b=copySelectedTasksStack.shift(),c=b.TaskClass,d=b.TaskFlow,e="";""!=b.RemoteCaseType&&(e+="\x26RemoteCaseType\x3d"+b.RemoteCaseType);""!=b.IsNonNativeCase&&(e+="\x26IsNonNativeCase\x3d"+b.IsNonNativeCase);queueselectedtasks(gSelectedTasksStack,a,function(){window.createNewWork(c,"",d,e,"","","",{target:"microdc"})})}}
function queueselectedtasks(a,b,c){var d="",e;for(e in a){var f=a[e];f&&(d+=f.TaskName+":"+f.TaskClass+":"+f.TaskFlow+":"+f.label,d+=";;")}a=new SafeURL("PegaCA-Work-Interaction.CSQueueTasks");a.put("QueuedTasks",d);a.put("InteractionID",b);pega.u.d.asyncRequest("POST",SafeURL_createFromURL(a.toURL()),{success:function(a){c()},failure:function(){}},"")}function initializeTasks(){gSelectedTasksStack=[];copySelectedTasksStack=[]}
function initializeTasksMenu(){gSelectedTasksStack=[];copySelectedTasksStack=[]}function launchResearchItem(){var a,b=arguments[0],c=arguments[1];a="\x26CPMDataSource\x3d"+arguments[2];for(var d=3;d<arguments.length;d++)a=a+"\x26Parameter"+(d-2)+"\x3d"+arguments[d];pega.desktop.createNewWork(b,"",c,a,"","","","")}
function CPMGetDetailsOfDataSource(a,b){var c=new SafeURL("CPMGetDetailsOfDataSource"),c=SafeURL_createFromURL(c.toURL());c.put("DataSource",a);pega.u.d.asyncRequest("GET",c,{success:function(c){c=c.responseText.split(";");launchResearchItem(c[0],c[1],a,b)},failure:function(){},scope:this},"")}
function cpm_skipToContent(a){var b=$("#moduleGroupDiv").children(".iframe-wrapper").filter(function(){return"block"==$(this).css("display")}).find("iframe")[0];if(b){b=b.contentWindow;a="[data-skip-target\x3d'"+a+"']";if(b)var c=b.$(a)[0];if(c){c.setAttribute("tabindex","-1");try{var d=$($(c).find('a[href], button, input[type!\x3d"hidden"], select, textarea, img[tabindex]').filter(":visible").toArray()).eq(0),e=d=0<d.length?d[0]:null;if(null!=e){var f=e.getAttribute("data-keyup");f&&e.removeAttribute("data-keyup");
setTimeout(function(){e.focus()},500);f&&setTimeout(function(){e.setAttribute("data-keyup",f)},500)}else pega.u.d.getNextFocusableElement(null,c).focus()}catch(g){}}}}function pega_cpm_IP_skipToMainContent(a){var b=$(window.parent.document).find("iframe");for(i=0;i<b.length;i++)if($(b[i].parentNode).attr("pegathread")==a){b[i].contentWindow.cpm_skipToMainContent();break}delete b}
function switchPortal(a,b,c){var d="Re-display the Desktop using the '"+trim(a)+"' layout?";if(confirm(d)){d=new SafeURL("@baseclass.CPMSwitchPortal");pega.u.d.asyncRequest("GET",SafeURL_createFromURL(d.toURL()),"");"true"===c?(c=new SafeURL("Data-Portal.ShowSelectedPortal"),c.put("pxReqURI",requestHomeURI+"/!STANDARD")):(c=new SafeURL("Data-Portal.ShowSelectedPortal"),c.put("pxReqURI",requestURI));c.put("portal",a);c.put("developer",b);pega.u.d.convertToRunActivityAction(c);for(b=window.parent;b!=
b.parent;)try{b=b.parent}catch(e){}gCurrentPortal=a;desktopsharedscript_setURL(b,c.toURL())}}function desktopsharedscript_setURL(a,b){a.navigate?a.navigate(b):a.location=b}function showKM(){$("body").addClass("km-expanded");$(".int-ui-right-pane-wrapper").removeClass("collapsed").find(":focusable").first().focus();$(".int-ui-right-pane-wrapper").attr("data-expanded","true");$(".cs-home-right-pane").find(":focusable").first().focus();$(window).trigger("resize")}
function hideKM(a){$(".int-ui-right-pane\x3ediv.item-2").scrollTop();$("body").removeClass("km-expanded");$("body").hasClass("scroll-chat-to-bottom")&&($("body").removeClass("scroll-chat-to-bottom"),scrollRightPaneToBottom("Chat"));null==a||"true"!=a&&1!=a||1!=$(".int-ui-right-pane-header").children().length||($(".int-ui-right-pane-wrapper").addClass("collapsed"),$(".km-floating-button").focus());$(window).trigger("resize")}
function TriggerCompositeRefresh(a){var b=$(window.parent.document).find("iframe");for(i=0;i<b.length;i++)if($(b[i].parentNode).attr("pegathread"),$(b[i].parentNode).attr("pegathread")==a){b[i].contentWindow.document.getElementById("CompositeRefreshTrigger").click();break}delete b}function removeInternalContent(){$(".internalKC").remove()}function showInternalContent(){$(".internalKC").show()}function openArticleReference(){$(".clickableKC").attr("onClick","articleLink(event);")}
function articleLink(a){handleClientEvent("SERVER","CSKMFetchLatestKCPforKC","ContentID\x3d"+a.target.id,"-1",a)}function switchCompositeFocus(){$("[node_name\x3d'CPMCompositesContainer'] .layout.count-3:nth-child(1)").trigger("click")}function launchServiceCase(){$(".case-type-link").attr("onClick","showServiceCase(event);")}function showServiceCase(a){a=$(".case-type-link").attr("casetypemeta");a=JSON.parse(a).id;createTaskFromArticle(a,"","pyStartCase","","","","")}
function entitydropdowneventhandler(a){var b=$('[data-mdc-id\x3d"acprimary"] div.show');if(0<b.length){var c=$(a.target).closest(".int-ui-right-pane-content");c&&0!==c.length||(c=$(a.target).closest(".ai-found-entities"));pega.cs.formfiller.invokeformfiller({scope:b,event:a,container:c,mapCallback:trainEmailNLP});a.preventDefault();a.stopPropagation()}}
function entitydropdowneventhandlerForSelection(a){var b=window.getSelection();if(b&&b.focusNode&&b.focusNode.data&&0<b.focusNode.data.trim().length){var c=b.focusNode.data.substring(b.anchorOffset,b.focusOffset),d=b.focusNode.parentElement.className;if(0<c.length||d.includes("entity")){var d=$('[data-mdc-id\x3d"acprimary"] div.show'),e=$(d).find(".duplicatecasesinfo"),c=0>=c.length?b.focusNode.data:b.toString();0<d.length&&1>e.length&&(a.preventDefault(),a.stopPropagation(),(b=$(a.target).closest(".int-ui-right-pane-content"))&&
0!==b.length||(b=$(a.target).closest(".ai-found-entities")),pega.cs.formfiller.invokeformfiller({scope:d,event:a,container:b,textSelected:c,mapCallback:trainEmailNLP}))}}}function trainEmailNLP(a){pega.api.ui.actions.runDataTransform({name:"SetMappedEntities",parameters:[{name:"SelectedProperty",value:a.propertyMappedToField,isProperty:!1},{name:"SelectedText",value:a.selectedText,isProperty:!1}],event:a.event})}pega.namespace("pega.cs.smartemail");
pega.cs.smartemail=function(){return{toggleCollapse:function(a){a.target.closest(".floating-email-composer").classList.toggle("collapsed")},toggleMaximize:function(a){a=a.target.closest(".floating-email-composer");a.classList.toggle("maximized");a.classList.contains("maximized")&&a.classList.remove("collapsed")}}}();function closeInteraction(){console.log("Event received for closing interaction");pega.u.d.doClose()}
function clearDirtyFlag(){pega.ctxmgr.setRootDocumentContext();pega.ctx.gDirtyOverride=!1}function publishReloadKMEvent(a,b,c){var d;""!=c&&(d=1<c.split(" ").length?c.split(" ")[1]:c.split(" ")[0]);pega.desktop.support.getDesktopWindow().knowledge.publishKMEvent(a,b,d)}
function unsubscribeCSPubSubEvents(a){var b=a+"_cases",c=pega.desktop.support.getDesktopWindow().CSPubSub;if(null!=c.subscribers[b]&&null!=c.subscribers[b]["CLEANUP CASES"]){for(var d=c.subscribers[b]["CLEANUP CASES"].split(","),e=0;e<d.length;e++)null!=c.subscribers[d[e]]&&c.unsubscribe(d[e],null);c.unsubscribe(b,null)}c.unsubscribe(a,null)};
!function(a){return"function"==typeof define&&define.amd?define(["jquery"],function(b){return a(b,window,document)}):"object"==typeof exports?module.exports=a(require("jquery"),window,document):a(jQuery,window,document)}(function(a,b,c){var d,e,f,g,k,l,m,t,q,r,u,n;k={paneClass:"nano-pane",sliderClass:"nano-slider",contentClass:"nano-content",enabledClass:"has-scrollbar",flashedClass:"flashed",activeClass:"active",iOSNativeScrolling:!1,preventPageScrolling:!1,disableResize:!1,alwaysVisible:!1,flashDelay:1500,
sliderMinHeight:20,sliderMaxHeight:null,documentContext:null,windowContext:null};d="Microsoft Internet Explorer"===b.navigator.appName&&/msie 7./i.test(b.navigator.appVersion)&&b.ActiveXObject;e=null;q=b.requestAnimationFrame;g=b.cancelAnimationFrame;u=c.createElement("div").style;n=function(){var a,b,c,d,e;c=["t","webkitT","MozT","msT","OT"];a=d=0;for(e=c.length;e>d;a=++d)if(b=c[a]+"ransform",b in u)return c[a].substr(0,c[a].length-1);return!1}();r=function(a){return!1===n?!1:""===n?a:n+a.charAt(0).toUpperCase()+
a.substr(1)}("transform");m=!1!==r;l=function(){var a,b,d;return a=c.createElement("div"),b=a.style,b.position="absolute",b.width="100px",b.height="100px",b.overflow="scroll",b.top="-9999px",c.body.appendChild(a),d=a.offsetWidth-a.clientWidth,c.body.removeChild(a),d};t=function(){var a,c,d;return c=b.navigator.userAgent,(a=/(?=.+Mac OS X)(?=.+Firefox)/.test(c))?(d=/Firefox\/\d{2}\./.exec(c),d&&(d=d[0].replace(/\D+/g,"")),a&&23<+d):!1};f=function(){function h(d,v){this.el=d;this.options=v;e||(e=l());
this.$el=a(this.el);this.doc=a(this.options.documentContext||c);this.win=a(this.options.windowContext||b);this.body=this.doc.find("body");this.$content=this.$el.children("."+this.options.contentClass);this.$content.attr("tabindex",this.options.tabIndex||0);this.content=this.$content[0];this.previousPosition=0;this.options.iOSNativeScrolling&&null!=this.el.style.WebkitOverflowScrolling?this.nativeScrolling():this.generate();this.createEvents();this.addEvents();this.reset()}return h.prototype.preventScrolling=
function(a,b){this.isActive&&("DOMMouseScroll"===a.type?("down"===b&&0<a.originalEvent.detail||"up"===b&&0>a.originalEvent.detail)&&a.preventDefault():"mousewheel"===a.type&&a.originalEvent&&a.originalEvent.wheelDelta&&("down"===b&&0>a.originalEvent.wheelDelta||"up"===b&&0<a.originalEvent.wheelDelta)&&a.preventDefault())},h.prototype.nativeScrolling=function(){this.$content.css({WebkitOverflowScrolling:"touch"});this.isActive=this.iOSNativeScrolling=!0},h.prototype.updateScrollValues=function(){var a;
a=this.content;this.maxScrollTop=a.scrollHeight-a.clientHeight;this.prevScrollTop=this.contentScrollTop||0;this.contentScrollTop=a.scrollTop;a=this.contentScrollTop>this.previousPosition?"down":this.contentScrollTop<this.previousPosition?"up":"same";this.previousPosition=this.contentScrollTop;"same"!==a&&this.$el.trigger("update",{position:this.contentScrollTop,maximum:this.maxScrollTop,direction:a});this.iOSNativeScrolling||(this.maxSliderTop=this.paneHeight-this.sliderHeight,this.sliderTop=0===
this.maxScrollTop?0:this.contentScrollTop*this.maxSliderTop/this.maxScrollTop)},h.prototype.setOnScrollStyles=function(){var a;m?(a={},a[r]="translate(0, "+this.sliderTop+"px)"):a={top:this.sliderTop};q?(g&&this.scrollRAF&&g(this.scrollRAF),this.scrollRAF=q(function(b){return function(){return b.scrollRAF=null,b.slider.css(a)}}(this))):this.slider.css(a)},h.prototype.createEvents=function(){this.events={down:function(a){return function(b){return a.isBeingDragged=!0,a.offsetY=b.pageY-a.slider.offset().top,
a.slider.is(b.target)||(a.offsetY=0),a.pane.addClass(a.options.activeClass),a.doc.bind("mousemove",a.events.drag).bind("mouseup",a.events.up),a.body.bind("mouseenter",a.events.enter),!1}}(this),drag:function(a){return function(b){return a.sliderY=b.pageY-a.$el.offset().top-a.paneTop-(a.offsetY||.5*a.sliderHeight),a.scroll(),a.contentScrollTop>=a.maxScrollTop&&a.prevScrollTop!==a.maxScrollTop?a.$el.trigger("scrollend"):0===a.contentScrollTop&&0!==a.prevScrollTop&&a.$el.trigger("scrolltop"),!1}}(this),
up:function(a){return function(b){return a.isBeingDragged=!1,a.pane.removeClass(a.options.activeClass),a.doc.unbind("mousemove",a.events.drag).unbind("mouseup",a.events.up),a.body.unbind("mouseenter",a.events.enter),!1}}(this),resize:function(a){return function(b){a.reset()}}(this),panedown:function(a){return function(b){return a.sliderY=(b.offsetY||b.originalEvent.layerY)-.5*a.sliderHeight,a.scroll(),a.events.down(b),!1}}(this),scroll:function(a){return function(b){a.updateScrollValues();a.isBeingDragged||
(a.iOSNativeScrolling||(a.sliderY=a.sliderTop,a.setOnScrollStyles()),null!=b&&(a.contentScrollTop>=a.maxScrollTop?(a.options.preventPageScrolling&&a.preventScrolling(b,"down"),a.prevScrollTop!==a.maxScrollTop&&a.$el.trigger("scrollend")):0===a.contentScrollTop&&(a.options.preventPageScrolling&&a.preventScrolling(b,"up"),0!==a.prevScrollTop&&a.$el.trigger("scrolltop"))))}}(this),wheel:function(a){return function(b){var c;if(null!=b)return c=b.delta||b.wheelDelta||b.originalEvent&&b.originalEvent.wheelDelta||
-b.detail||b.originalEvent&&-b.originalEvent.detail,c&&(a.sliderY+=-c/3),a.scroll(),!1}}(this),enter:function(a){return function(b){var c;if(a.isBeingDragged)return 1!==(b.buttons||b.which)?(c=a.events).up.apply(c,arguments):void 0}}(this)}},h.prototype.addEvents=function(){var a;this.removeEvents();a=this.events;this.options.disableResize||this.win.bind("resize",a.resize);this.iOSNativeScrolling||(this.slider.bind("mousedown",a.down),this.pane.bind("mousedown",a.panedown).bind("mousewheel DOMMouseScroll",
a.wheel));this.$content.bind("scroll mousewheel DOMMouseScroll touchmove",a.scroll)},h.prototype.removeEvents=function(){var a;a=this.events;this.win.unbind("resize",a.resize);this.iOSNativeScrolling||(this.slider.unbind(),this.pane.unbind());this.$content.unbind("scroll mousewheel DOMMouseScroll touchmove",a.scroll)},h.prototype.generate=function(){var a,c,d,h,f,g;return d=this.options,f=d.paneClass,g=d.sliderClass,(h=this.$el.children("."+f)).length||h.children("."+g).length||this.$el.append('\x3cdiv class\x3d"'+
f+'"\x3e\x3cdiv class\x3d"'+g+'" /\x3e\x3c/div\x3e'),this.pane=this.$el.children("."+f),this.slider=this.pane.find("."+g),0===e&&t()?(c=b.getComputedStyle(this.content,null).getPropertyValue("padding-right").replace(/[^0-9.]+/g,""),a={right:-14,paddingRight:+c+14}):e&&(a={right:-e},this.$el.addClass(d.enabledClass)),null!=a&&this.$content.css(a),this},h.prototype.restore=function(){this.stopped=!1;this.iOSNativeScrolling||this.pane.show();this.addEvents()},h.prototype.reset=function(){var a,b,c,f,
h,g,k,l,m,n,q,p;return this.iOSNativeScrolling?void(this.contentHeight=this.content.scrollHeight):(this.$el.find("."+this.options.paneClass).length||this.generate().stop(),this.stopped&&this.restore(),a=this.content,f=a.style,h=f.overflowY,d&&this.$content.css({height:this.$content.height()}),b=a.scrollHeight+e,n=parseInt(this.$el.css("max-height"),10),0<n&&(this.$el.height(""),this.$el.height(a.scrollHeight>n?n:a.scrollHeight)),k=this.pane.outerHeight(!1),m=parseInt(this.pane.css("top"),10),g=parseInt(this.pane.css("bottom"),
10),l=k+m+g,p=Math.round(l/b*k),p<this.options.sliderMinHeight?p=this.options.sliderMinHeight:null!=this.options.sliderMaxHeight&&p>this.options.sliderMaxHeight&&(p=this.options.sliderMaxHeight),"scroll"===h&&"scroll"!==f.overflowX&&(p+=e),this.maxSliderTop=l-p,this.contentHeight=b,this.paneHeight=k,this.paneOuterHeight=l,this.sliderHeight=p,this.paneTop=m,this.slider.height(p),this.events.scroll(),this.pane.show(),this.isActive=!0,a.scrollHeight===a.clientHeight||this.pane.outerHeight(!0)>=a.scrollHeight&&
"scroll"!==h?(this.pane.hide(),this.isActive=!1):this.el.clientHeight===a.scrollHeight&&"scroll"===h?this.slider.hide():this.slider.show(),this.pane.css({opacity:this.options.alwaysVisible?1:"",visibility:this.options.alwaysVisible?"visible":""}),c=this.$content.css("position"),("static"===c||"relative"===c)&&(q=parseInt(this.$content.css("right"),10),q&&this.$content.css({right:"",marginRight:q})),this)},h.prototype.scroll=function(){return this.isActive?(this.sliderY=Math.max(0,this.sliderY),this.sliderY=
Math.min(this.maxSliderTop,this.sliderY),this.$content.scrollTop(this.maxScrollTop*this.sliderY/this.maxSliderTop),this.iOSNativeScrolling||(this.updateScrollValues(),this.setOnScrollStyles()),this):void 0},h.prototype.scrollBottom=function(a){return this.isActive?(this.$content.scrollTop(this.contentHeight-this.$content.height()-a).trigger("mousewheel"),this.stop().restore(),this):void 0},h.prototype.scrollTop=function(a){return this.isActive?(this.$content.scrollTop(+a).trigger("mousewheel"),this.stop().restore(),
this):void 0},h.prototype.scrollTo=function(a){return this.isActive?(this.scrollTop(this.$el.find(a).get(0).offsetTop),this):void 0},h.prototype.stop=function(){return g&&this.scrollRAF&&(g(this.scrollRAF),this.scrollRAF=null),this.stopped=!0,this.removeEvents(),this.iOSNativeScrolling||this.pane.hide(),this},h.prototype.destroy=function(){return this.stopped||this.stop(),!this.iOSNativeScrolling&&this.pane.length&&this.pane.remove(),d&&this.$content.height(""),this.$content.removeAttr("tabindex"),
this.$el.hasClass(this.options.enabledClass)&&(this.$el.removeClass(this.options.enabledClass),this.$content.css({right:""})),this},h.prototype.flash=function(){return!this.iOSNativeScrolling&&this.isActive?(this.reset(),this.pane.addClass(this.options.flashedClass),setTimeout(function(a){return function(){a.pane.removeClass(a.options.flashedClass)}}(this),this.options.flashDelay),this):void 0},h}();a.fn.nanoScroller=function(b){return this.each(function(){var c,d;if((d=this.nanoscroller)||(c=a.extend({},
k,b),this.nanoscroller=d=new f(this,c)),b&&"object"==typeof b){if(a.extend(d.options,b),null!=b.scrollBottom)return d.scrollBottom(b.scrollBottom);if(null!=b.scrollTop)return d.scrollTop(b.scrollTop);if(b.scrollTo)return d.scrollTo(b.scrollTo);if("bottom"===b.scroll)return d.scrollBottom(0);if("top"===b.scroll)return d.scrollTop(0);if(b.scroll&&b.scroll instanceof a)return d.scrollTo(b.scroll);if(b.stop)return d.stop();if(b.destroy)return d.destroy();if(b.flash)return d.flash()}return d.reset()})};
a.fn.nanoScroller.Constructor=f});function debounce(a,b,c){var d;return function(){var e=this,f=arguments,g=c&&!d;clearTimeout(d);d=setTimeout(function(){d=null;c||a.apply(e,f)},b);g&&a.apply(e,f)}}
(function(a){a(document).ready(function(){function b(a,b){c.css({fontFamily:a.css("fontFamily"),fontSize:a.css("fontSize"),padding:a.css("padding"),paddingLeft:a.css("paddingLeft"),paddingRight:a.css("paddingRight"),paddingTop:a.css("paddingTop"),paddingBottom:a.css("paddingBottom"),width:a.css("width")});a.css("overflow","hidden");var d=a.val().replace(/\n/g,"\x3cbr/\x3e").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;").replace(/"/g,"\x26quot;");c.html(d+"\x3cbr /\x3e");d=c.css("height");c.html("");
0!=parseInt(d)&&(null!=b.maxHeight&&parseInt(d)<parseInt(b.maxHeight)||null==b.maxHeight?(b.animate.enabled?a.animate({height:d},{duration:b.animate.duration,complete:b.animate.complete,step:b.animate.step,queue:!1}):a.css("height",d),a.css("overflow-y","hidden")):a.css("overflow-y","scroll"))}a("body").append('\x3cdiv id\x3d"autoResizeTextareaCopy" style\x3d"box-sizing: border-box; -moz-box-sizing: border-box;  -ms-box-sizing: border-box; -webkit-box-sizing: border-box; visibility: hidden;"\x3e\x3c/div\x3e');
var c=a("#autoResizeTextareaCopy");a.fn.autoResize=function(c){var d=a(this);c=void 0==c?{}:c;c=a.extend(!0,{animate:{enabled:!1,duration:100,complete:null,step:null},maxHeight:null},c);d.change(function(){b(d,c)}).keydown(function(){b(d,c)}).keyup(function(){b(d,c)}).focus(function(){b(d,c)});d.on("input propertychange",function(){b(d,c)});startupOptions=c;startupOptions.animate.enabled=c.animate.enabled;b(d,startupOptions)}})})(jQuery);var overlapRuntimeToolBar=!0;
function resizeInteractionPortalDcHeight(){var a=0,b=$('[node_name\x3d"pzRuntimeToolsTopBar"]');0<b.length&&!overlapRuntimeToolBar&&(a=b.height());b=$("footer");a=$("body").height()-$("header").height()-(null!=b.height()?b.height():0)-a;0!=a&&$("#workarea").height(a);$(".cs-social-panel").height(a);$(".inbound-email-pane").height(a);adjustChatContentArea()}
function toggleKBSection(a){a=$(".CpmKmwrapper");var b=$(".cskm-toggle-button i.icons");a.slideToggle("slow",function(){b.toggleClass("cskm-toggle-button-blue");resizeInteractionPortalDcHeight();adjustChatContentArea()})}function toggleKMWidget(){$("body").toggleClass("KM-Expanded")}
function setWorkAreaFullWidth(){var a=$(".dc-wrapper"),b=$(".chat-wrapper"),c=$(".inbound-wrapper"),d=$(".social-wrapper"),e=$("footer"),f=$('[node_name\x3d"pzRuntimeToolsTopBar"]'),g=0;0<f.length&&!overlapRuntimeToolBar&&(g=f.height());a.length&&b.length&&($(a[0]).css("width","100%"),$(b[0]).css("display","none"),$(c[0]).css("display","none"),$(d[0]).css("display","none"),$("#workarea").height($("body").height()-$("header").height()-(null!=e.height()?e.height():0)-g),null!=pega.u.d.resizeHarness&&
pega.u.d.resizeHarness())}
function configureInboundCorrSection(a,b,c){var d=$(".dc-wrapper"),e=$(".chat-wrapper"),f=$(".inbound-wrapper"),g=$(".social-wrapper"),k=$('[node_name\x3d"pzRuntimeToolsTopBar"]'),l=0,m=$("footer");0<k.length&&!overlapRuntimeToolBar&&(l=k.height());d.length&&e.length&&($(d).css("flex",1).css("width","100%"),$(e[0]).css("display","none"),$(g[0]).css("display","none"),a&&b||c?$(f[0]).css({display:"flex",flex:"0 1 600px",width:"600px"}):$(f[0]).css("display","none"),console.log("runtime tool bar height "+l),
$("#workarea").height($("body").height()-$("header").height()-(null!=m.height()?m.height():0)-l),null!=pega.u.d.resizeHarness&&pega.u.d.resizeHarness())}
function configureChatSection(a,b){var c=$(".dc-wrapper"),d=$(".chat-wrapper"),e=$(".inbound-wrapper"),f=$(".social-wrapper"),g=$("footer"),k=$('[node_name\x3d"pzRuntimeToolsTopBar"]'),l=0;0<k.length&&overlapRuntimeToolBar&&(l=k.height());c.length&&d.length&&($(c).css("flex",1).css("width","100%"),$(e[0]).css("display","none"),$(f[0]).css("display","none"),"true"==a&&"true"==b?$(d[0]).css({display:"flex",flex:"0 1 350px"}):$(d[0]).css("display","none"),$("#workarea").height($("body").height()-$("header").height()-
(null!=g.height()?g.height():0)-l),null!=pega.u.d.resizeHarness&&pega.u.d.resizeHarness())}
function adjustSocialSection(a,b){var c=$(".dc-wrapper"),d=$(".chat-wrapper"),e=$(".inbound-wrapper"),f=$(".social-wrapper"),g=$("footer");c.length&&f.length&&($(c).css("flex",1).css("width","100%"),$(e[0]).css("display","none"),$(d[0]).css("display","none"),"true"==a&&"true"==b?$(f[0]).css({display:"flex",flex:"0 1 600px"}):$(f[0]).css("display","none"),$("#workarea").height($("body").height()-$("header").height()-(null!=g.height()?g.height():0)),null!=pega.u.d.resizeHarness&&pega.u.d.resizeHarness())}
function adjustChatContentArea(){var a=$(".chat-wrapper"),b=$("footer");if(a&&a.length){b=$("body").height()-$("header").height()-(null!=b.height()?b.height():0);a.height(b);var c=$(".chat-header-wrapper").outerHeight(),d=$(".chat-stack").children(),a=$(d[0]),d=$(d[1]),b=b-d.height()-c;a.css("height",b);$(".nano .nano-content").prepend($(".chat-bot-area").detach());$(".nano").height(b);$(".nano").nanoScroller()}}
function autoReziseChatTextArea(){$("textarea.cpm-chat-area").autoResize({animate:{enabled:!0,duration:"fast",complete:function(){adjustChatContentArea()}},maxHeight:"100px"})}function pushChatDialog(){var a=document.getElementsByClassName("cke_contents")[0];null!=a&&(a=a.getElementsByTagName("iframe")[0],a=(a.contentDocument||a.contentWindow.document).getElementsByTagName("body")[0],$(a).removeClass("placeholder"),a.focus(),"function"==typeof showTextLimit&&showTextLimit())}
function getMessageLength(a){a||(a="");return a.replace(/<\/?[^>]+(>|$)/g,"").replace(/(\&nbsp;)+/g,"").replace(/\u200B/g,"").trim().length}
function pushDialog(a,b){if("used"==b)b=document.querySelector("[name$\x3dTabChatEntry]"),b.value=a.replace(/[\s\n\r]+/g," ").replace(/&nbsp;/gi,""),b.focus();else{var c=document.getElementsByClassName("PEGACKEDITOR textAreaStyle");b=c.length;b=0<b?c[b-1]:c[0];null!=b&&(b=b.id,b=CKEDITOR.instances[b].element.$,a=a.replace(/[\s\n\r]+/g," ").replace(/&nbsp;/gi,""),$(b).trigger("insertTextOn",a))}"function"==typeof showTextLimit&&showTextLimit()}
function handleAdvancedSearch(a){if(a){a=$(a.target);var b=$(a).closest(".advanced-search-wrapper"),c=$(b).find(".item-2"),b=$(b).find(".item-3");a.val()?(c.css("display","none"),b.css("display","block")):(c.css("display","block"),b.css("display","none"))}}
function clearAdvancedSearchText(a){if(a){var b=$(a.target).closest(".advanced-search-wrapper");a=$(b).find("input[type\x3d'text']");var c=$(b).find(".item-2"),b=$(b).find(".item-3");a.val()?(a.val(""),c.css("display","none"),b.css("display","block")):(c.css("display","block"),b.css("display","none"))}}function closeOverlays(){$("#modalOverlay").trigger("click")}
(function(a){a||(a={});a.cpm||(a.cpm={});a.cpm.toasterpop||(a.cpm.toasterpop={});a.cpm.toasterpop.hideToasterPop=function(){0<$("#toasterpop").length&&$("#toasterpop").removeClass("alerting")};a.cpm.toasterpop.loadToasterPop=function(b,c){b=SafeURL_createFromURL(b);a.u.d.asyncRequest("POST",b,{success:function(a){$("#toasterpop").addClass("alerting").html(a.responseText);c&&c(!0)},failure:function(){alert("Request from server failed.");c&&c(!1)}},null)}})(pega);
function addHistory(a,b,c,d,e){e=new SafeURL(e+".CPMAddHistory");e=SafeURL_createFromURL(e.toURL());e.put("pzPrimaryPageName","pyWorkPage");e.put("strMessageKey",b);e.put("strCategory",a);e.put("strReasonFieldValue",c);e.put("strFieldValue",d);pega.u.d.asyncRequest("GET",e,{success:function(a){},failure:function(){},scope:this},"")}
function showHistory(a,b,c){c=new SafeURL(c+".CPMGetLocalizedTextForFieldValue");c=SafeURL_createFromURL(c.toURL());c.put("PropertyReference",a);c.put("StringToLocalize",b);pega.u.d.asyncRequest("GET",c,{success:function(a){alert(a.responseText)},failure:function(){},scope:this},"")}
function adjustDriver(){var a=$(".workarea-view-scroll-wrapper").height()-200,b=$('div[node_name\x3d"CPMInteractionTasks"]'),c=$('div[node_name\x3d"CPMInteractionTasks"]\x3ediv\x3ediv\x3ediv');$(b).addClass("nano has-scrollbar");a>=$(c).height()?$(b).css("height",$(c).height()):$(b).css("height",a);$('div[node_name\x3d"CPMInteractionTasks"]\x3ediv').addClass("nano-content content");$(b).nanoScroller();a=$('div[node_name\x3d"CPMInteractionTasks"]\x3ediv');$(a).attr("tabindex","-1")}
function toggleExpressHistory(a,b){a=$(a).is(":checked");$(".cpm-history-checkbox[data-is-express-history-enabled]").attr("data-is-express-history-enabled",a);b=new SafeURL(b+".CheckExpressHistoryStatus");b=SafeURL_createFromURL(b.toURL());b.put("PropertyReference",a);pega.u.d.asyncRequest("GET",b,{success:function(a){},failure:function(){},scope:this},"")}
function markFieldAsReviewed(a,b,c,d,e,f,g,k){if($(a).is("[readonly]"))return!1;$(a).prop("checked",!0);$(a).prop("readonly",!0);$(a).prop("title",k);addHistory(b,c,e,f,g);console.log("interaction clas name ",g);""!=d&&"function"==typeof pushDialog&&(void 0!==pega.chat&&void 0!==pega.chat.ChatComponentEventHandler?pega.chat.ChatComponentEventHandler.publishEvent("CHAT COMPOSER EVENT","PUSH DIALOG",{dialogText:d}):pushDialog(d));return!0}
function toggleCssClassForListItem(a,b,c,d,e){a=a.target;b=$(a).closest(b);b=$(b).find(c+"."+d);c=$(a).closest(c);b.is(c)&&"true"===e?b.removeClass(d):(b.is(c)||b.removeClass(d),$(c).addClass(d))}function toggleCssClass(a,b){$(a).toggleClass(b)}
function scrollRightPaneToBottom(a){a=a||"Chat";"Chat"===a?($("body").hasClass("km-expanded")&&$("body").addClass("km-expanded scroll-chat-to-bottom"),pega.cs.notificationmanager.isCurrentDCTabInFocus()&&(a=$(".int-ui-right-pane .int-ui-right-pane-chat-content\x3ediv").height(),$(".int-ui-right-pane .int-ui-right-pane-chat-content").animate({scrollTop:a},"slow"))):"KM"===a?(a=$(".int-ui-right-pane .int-ui-right-pane-km-content\x3ediv").height(),$(".int-ui-right-pane .int-ui-right-pane-km-content").animate({scrollTop:a},
"slow")):"Email"===a&&(a=$(".int-ui-right-pane .int-ui-right-pane-email-content\x3ediv").height(),$(".int-ui-right-pane .int-ui-right-pane-email-content").animate({scrollTop:a},"slow"))}function scrollWorkAreaToTop(){$(".workarea-view-content").animate({scrollTop:0},"slow")}function scrollToBottom(a,b,c){a=$(a);if(0<a.length){a=a[0];var d=a.scrollHeight;"true"==b?(null==c&&(c=1E3),$(a).animate({scrollTop:d},c)):$(a).scrollTop(d)}}function ShowSmartInfo(){$("#_popOversContainer").show()}
function HideSmartInfo(){$("#_popOversContainer").hide()}function attachCssFile(a,b){if(0==$("link[ref-id\x3d'"+a+"']").length){var c=document.createElement("link");$(c).attr({href:b+"/"+a+".css",rel:"stylesheet",type:"text/css","ref-id":a});$("head").append(c)}}function disableElement(a){a&&a.target&&$(a.target).prop("disabled",!0)}String.prototype.includes||(String.prototype.includes=function(a,b){"number"!==typeof b&&(b=0);return b+a.length>this.length?!1:-1!==this.indexOf(a,b)});pega.namespace("pega.cs.textchannel");
pega.cs.textchannel=function(){function a(a){a.ArticleAbstract=a.ArticleAbstract.replace(/(?:\\[rn])+/g,"");var c={section:"",event:event,dataTransform:{name:"",parameters:[]},activity:null,submitOnRefresh:!0};pega.cs.textchannel.pushArticleLink(a.ShareableURL,a.ArticleTitle,a.ArticleAbstract,b.leadInText,b.setLeadInText,b.setShareAbstract,b.event,a.pxInsName);"true"==a.IsInteractionSocial&&(c.section="SocialResponseTextArea",c.dataTransform.name="CopyArticleLinkIntoSocialArea",c.dataTransform.parameters=
[{name:"LinkURL",value:url},{name:"abstract",value:abstract}],pega.api.ui.actions.refreshSection(c));c.section="LoadSocialUIContext";c.dataTransform=null;pega.api.ui.actions.refreshSection(c);c.section="SocialResponseTextArea";c.submitOnRefresh=!1;pega.api.ui.actions.refreshSection(c)}var b={leadInText:"",setLeadInText:"",setShareAbstract:"",event:null};return{pushArticleLink:function(a,b,e,f,g,k,l,m){f="true"===g?f:"";e="true"===k?e:"";a='\x3ca class\x3d"articlelink" data-articleid\x3d"'+m+'"href\x3d'+
a+"\x3e"+b+"\x3c/a\x3e";pega.cs.textchannel.pushTextToRTEContent(""!==e?f+"\x3cbr\x3e"+e+"\x3cbr\x3e"+a:f+"\x3cbr\x3e"+a,l)},pushArticleText:function(a){var b=$(".KMContent").clone();b.find("img").remove();b.find(".internal").remove();b=b[0].innerHTML;b=b.replace(/\<\/p\>/gi,"\n");b=b.replace(/\<br\>/gi,"\n");pega.cs.textchannel.pushTextToRTEContent(b,a)},pushArticleTextKMReact:function(a,b){b=$("."+b).clone();b.find(".internal").remove();b=b[0].innerHTML;b=b.replace(/\<\/p\>/gi,"\n");b=b.replace(/\<br\>/gi,
"\n");pega.cs.textchannel.pushTextToRTEContent(b,a)},pushTextToRTEContent:function(a,b){(b=pega.cs.textchannel.getCKEditorTextArea(b))&&$(b).trigger("insertTextOn",[a])},getCKEditorInstance:function(a){var b=$(a.currentTarget.getElementsByClassName("cpm-textchannel-rte-component")).find("textarea").attr("id");b||(b=$(a.currentTarget.getElementsByClassName("PEGACKEDITOR textAreaStyle"))[0].id);if(b)return CKEDITOR.instances[b]},getCKEditorTextArea:function(a){if(a=pega.cs.textchannel.getCKEditorInstance(a))return a.element.$},
handleArtilclePushKMReact:function(c,d,e,f,g,k,l,m){"chat"!==m&&(b.leadInText=d,b.setLeadInText=f,b.setShareAbstract=g,b.event=c,null!==c.srcElement.innerText&&void 0!==c.srcElement.innerText&&c.srcElement.innerText.toLowerCase()===l.toLowerCase()&&pega.api.ui.actions.getDataPage({name:e,parameters:[],callback:a,event:c}),null!==c.srcElement.innerText&&void 0!==c.srcElement.innerText&&c.srcElement.innerText.toLowerCase()===k.toLowerCase()&&pega.cs.textchannel.pushArticleTextKMReact(c,"article-content-container"))},
getDOMContext:function(a){return a.currentTarget}}}();pega.namespace("pega.cs.managertools");
pega.cs.managertools=function(){var a,b;return{manageAutoRefreshForQueueMonitor:function(){a&&clearInterval(a);b&&clearInterval(b);var c={section:"MonitoringQueues",event:window.event,activity:{name:"FlushMonitorDataPage"}};a=setInterval(function(){0!=document.getElementsByClassName("monitoringQueuesObserverClass").length?pega.api.ui.actions.refreshSection(c):(a&&clearInterval(a),a=null)},3E4)},manageAutoRefreshForCsrMonitor:function(){a&&clearInterval(a);b&&clearInterval(b);var c={section:"MonitoringCsrs",
event:window.event,activity:{name:"FlushMonitorCSRDataPage"}};b=setInterval(function(){0!=document.getElementsByClassName("monitoringCsrsObserverClass").length?pega.api.ui.actions.refreshSection(c):(b&&clearInterval(b),b=null)},9E4)}}}();pega.namespace("pega.cs.commonutils");
pega.cs.commonutils=function(){return{setCookie:function(a,b,c){var d=new Date,e=new Date;if(null===c||0===c)c=1;e.setTime(d.getTime()+864E5*c);document.cookie=a+"\x3d"+escape(b)+";expires\x3d"+e.toGMTString()},readCookie:function(a){var b=""+document.cookie,c=b.indexOf(a);if(-1===c||""===a)return"";var d=b.indexOf(";",c);-1===d&&(d=b.length);return unescape(b.substring(c+a.length+1,d))},removeCookie:function(a){document.cookie=a+"\x3d;expires\x3dThu, 01 Jan 1970 00:00:01 GMT;"},downloadTranscript:function(a){"undefined"==
typeof a&&(a="PegaCA-Work-Interaction");a=new SafeURL(a+".DownloadCsrTranscript");pega.u.d.asyncRequest("POST",SafeURL_createFromURL(a.toURL()),{success:function(a){console.log("success");var b=document.createElement("a");b.setAttribute("href","data:text/plain;charset\x3dutf-8,"+encodeURIComponent(a.responseText));b.setAttribute("download","Transcript.txt");b.style.display="none";document.body.appendChild(b);b.click();document.body.removeChild(b)},failure:function(a){console.log("Failed get chatbot transcript")},
scope:this})}}}();pega.namespace("pega.cs.interactionguidance");
pega.cs.interactionguidance=function(){return{showGuidance:function(){var a=pega.ctx.strPyID,b=document.getElementById("interactionguidance"),c=pega.ctx.recordId;""===a||null==b||"undefined"!==typeof c&&c.includes("acprimary")||(b=new SafeURL("PegaCA-Work-Interaction.GetInteractionGuidanceMessage"),b.put("interactionId",a),pega.u.d.asyncRequest("POST",b,{success:function(a){if("NoInteractionGuidance"!=a.responseText){var b=$("#interactionguidance");$("#interactionguidance").show();b.addClass("alerting").html(a.responseText)}},
failure:function(){}},null))},hideGuidance:function(){0<$("#interactionguidance").length&&($("#interactionguidance").removeClass("alerting"),window.setTimeout(function(){$("#interactionguidance").hide()},600))}}}();
$(document).ready(function(){var a=document.querySelector("[name$\x3dInteractionType]");if(a){var b=new SafeURL("PegaCA-Work-Interaction.PopulateHarnessPage");b.put("channelType",a.value);pega.u.d.asyncRequest("POST",b,{success:function(a){},failure:function(){},scope:this},"")}window.setTimeout(pega.cs.interactionguidance.showGuidance,1E3);window.setTimeout(pega.cs.interactionguidance.hideGuidance,16E3)});
function setHarnessContainerRole(){$("#HARNESS_CONTENT").children().find("#harness-container").attr("role","presentation")}setHarnessContainerRole();
function delayCheckForBusyIndicatorAndSetFocusToTab(){setTimeout(checkForBusyIndicatorAndThenSetFocusToTab,3E3)}function checkForBusyIndicatorAndThenSetFocusToTab(){var a=0,b=setInterval(function(){a++;var c=pega.ui.statetracking.getState().busy,d=window.top.$(".dc-main").find("iframe:visible").contents().find("#pega_ui_load").is(":visible");c?4!==a||d?5===a&&(clearInterval(b),setFocusSelectedTab()):(clearInterval(b),setFocusSelectedTab()):(clearInterval(b),setFocusSelectedTab())},2E3)}
function setFocusSelectedTab(){var a=window.top.$('[role\x3d"tab"]:visible.selected');$(a[0]).focus()}
function focusColumnHeaderSortButton(a){var b=$(a.target)[0];$(b).hasClass("divCont")&&b.hasAttribute("role")&&"button"===$(b).attr("role")&&(a=$("#harness-container").find(".gridDefault:visible").find('th[role\x3d"columnheader"]').filter('[bsortable\x3d"true"]'),$.each(a,function(a,d){if($.contains(d,b))var c=$(b).find(".gridSortTitleDesc").attr("id"),g=$(d).closest(".gridDefault:visible").attr("id"),e=0,f=setInterval(function(){e++;var a=$("#"+c).closest('div.divCont[role\x3d"button"]');a.closest(".gridDefault:visible").attr("id")!==
g?(clearInterval(f),a.focus()):50===e&&clearInterval(f)},300)}))}$(document).on("click","th",function(a){focusColumnHeaderSortButton(a)});$(document).on("keydown ","th",function(a){13===a.which&&focusColumnHeaderSortButton(a)});
function setFocusFirstTabbableElmHome(){var a=$('[node_name\x3d"HomeTabMain"]').find(":focusable"),b=a.first();b.is(":header")?b.focusin(function(){this.style.border="2px solid black"}).focusout(function(){this.style.border=""}).focus():b.is('input[type\x3d"radio"]')?b.closest('[role\x3d"radiogroup"]').find(":checked").focus():b.is('div[role\x3d"img"]')?$(a).eq(1).is(":header")&&$(a).eq(1).focus():b.focus()}
function setCustomerHistorySearchFocusAndAriaAttributes(){var a=document.getElementById("6f2be778"),b=$("#cst-hst-search-error").is(":visible"),c=$(".dashboard-search-results").is(":visible");b?(a.setAttribute("aria-describedby","cst-hst-search-error"),a.focus()):c?$(".dashboard-search-results").find(".dl-accordion-btn").focus():$(".customer-search-icon").find('[role\x3d"button"]').focus()}function delaySetFocusWorkOwnerButton(){setTimeout(setFocusWorkOwnerButton,700)}
function setFocusWorkOwnerButton(){$(".work-owner-button").focus()};
var SSAUtilities=SSAUtilities||{};SSAUtilities.General=SSAUtilities.General||{};(function(b){b.addARIAAttribute=function(b,a,e){$(b).attr(a,e)}})(SSAUtilities.General);SSAUtilities.Tables=SSAUtilities.Tables||{};
(function(b){function c(a){a.find('[role\x3d"button"], button').attr("title","sortable")}b.removeTabindexFromNonSortableColumnHeaders=function(){$("th").each(function(a){a=$(this).attr("bsortable");void 0!==a&&"false"!==a||$(this).find("div.divCont").removeAttr("tabindex")})};b.tableUniqueFilterLabels=function(){$("th").each(function(){var a=$(this).find("button").text()||$(this).find(".cellIn").text();$(this).attr("aria-label",a);0<$(this).find(".filter").length?$(this).find(".filter").attr("title",
"Filter "+a).attr("aria-label","Filter"):$(this).find(".filtered").attr("title","Filter "+a).attr("aria-label","Filter")})};b.tableSortTitlePrep=function(){$("th").filter('[bsortable\x3d"true"]').each(function(){$(this).find('.divCont[tabindex\x3d"0"]').attr("role","button");$(this).find('.divCont[tabindex\x3d"0"]').removeAttr("aria-describedby");c($(this));$(this).find("#sort").removeAttr("tabindex").removeAttr("title");var a=$(this),b=1>=a.closest("table").find("th").length,d=a.find("#sort").attr("class");
b?d.includes("ASC")?a.find('[role\x3d"button"], button').attr("title","Sorted ascending"):d.includes("DESC")&&a.find('[role\x3d"button"], button').attr("title","Sorted descending"):(c(a),d.includes("ASC")?a.attr("aria-sort","ascending"):d.includes("DESC")&&a.attr("aria-sort","descending"));$(this).removeAttr("title");a=$(this);a.find('.gridSortTitleDesc[aria-live\x3d"assertive"]').attr("aria-hidden","true");a.find('.gridSortTitleAsc[aria-live\x3d"assertive"]').attr("aria-hidden","true")})};b.gridLayoutPresentationRole=
function(){$("div#PEGA_GRID_CONTENT").find("#gridLayoutTable").each(function(){$(this).attr("role","presentation").removeAttr("summary");$(this).find("table").each(function(){$(this).has("th").length&&1!==$(this).find('[role\x3d"columnheader"]').length||($(this).attr("role","presentation").removeAttr("summary"),1===$(this).find('[role\x3d"columnheader"]').length&&$(this).find('[role\x3d"columnheader"]').removeAttr("role"))})})};b.removeTabIndexAttributeFirstCellInFirstRow=function(){$("#gridBody_right tr:nth-child(2)").each(function(){var a=
$(this).find("td").first();a&&a.removeAttr("tabindex")})}})(SSAUtilities.Tables);
$(function(){function b(){var a=$("#PEGA_HARNESS:visible")[0];(new MutationObserver(c)).observe(a,{attributes:!0,childList:!0,subtree:!0})}function c(a,b){a.forEach(function(a){"gridDefault"===a.target.classList[1]&&(SSAUtilities.Tables.tableUniqueFilterLabels(),SSAUtilities.Tables.tableSortTitlePrep(),SSAUtilities.Tables.gridLayoutPresentationRole(),SSAUtilities.Tables.removeTabIndexAttributeFirstCellInFirstRow(),SSAUtilities.Tables.removeTabindexFromNonSortableColumnHeaders())})}SSAUtilities.Tables.tableUniqueFilterLabels();
SSAUtilities.Tables.tableSortTitlePrep();SSAUtilities.Tables.gridLayoutPresentationRole();SSAUtilities.Tables.removeTabIndexAttributeFirstCellInFirstRow();SSAUtilities.Tables.removeTabindexFromNonSortableColumnHeaders();window.MutationObserver?b():startMutationEvents()});
