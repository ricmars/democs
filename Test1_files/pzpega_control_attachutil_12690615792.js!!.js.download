(function(c){c.c=c.control?c.control:c.namespace("pega.control");if(!c.c.AttachUtil){var m=function(a){return!a||""===a.trim()},L=function(){var a=c.mobile.hybrid.getLaunchBox();return a&&a.DocumentViewer},q=function(){return/Android|webOS|iPhone|iPad|iPod|IEMobile|BlackBerry/i.test(navigator.userAgent)},H=-1<navigator.userAgent.indexOf("PegaMobile"),n=function(a){var b;a||(a=this.getRunScriptEvent());a&&(b=a.srcElement?a.srcElement:a.target);return b},D=function(a){var b=SafeURL_createFromURL(c.u.d.url);
b.put("pyActivity","pzAppStorageOkToAttachFile");return c.u.d.asyncRequest("GET",b,{success:function(b){a(b.responseText)}},null,null)},I=function(a,b,d,f){var e=d?a:window.location.protocol+"//"+window.location.host+a,h=function(a,b){return b?function(){console.debug("Attachment opened successfully"+a);a&&c.u.d.ServerProxy.setDestination(c.u.d.ServerProxy.DESTINATION.LOCAL)}:function(b){var d='Failed to open attachment "'+e+'"';b&&(d+=". Reason: "+b.description);console.error(d);a&&c.u.d.ServerProxy.setDestination(c.u.d.ServerProxy.DESTINATION.LOCAL)}};
c.mobile.sdk.plugins.documents.preview(e).then(function(){console.debug("Attachment downloaded and previewed with success");h(f,!0)()}).catch(function(){h(f)()})},T=function(a,b,d,f){a=d?a:window.location.protocol+"//"+window.location.host+a;var e=new c.ui.busyIndicator("",!0,null);(b=n(b))&&e.setTargetElement(b);e.show();b=function(a,b){return b?function(){console.debug("Attachment opened successfully"+a);e.hide();a&&c.u.d.ServerProxy.setDestination(c.u.d.ServerProxy.DESTINATION.LOCAL)}:function(b){console.error("Failed to open attachment: "+
b.description);e.hide();a&&c.u.d.ServerProxy.setDestination(c.u.d.ServerProxy.DESTINATION.LOCAL)}};f={onSuccess:b(f,!0),onProgress:function(){},onFailure:b(f)};c.mobile.hybrid.getLaunchBox().DocumentViewer.open(a,{},f)},C=function(a,b,d,f,e){function h(a){var d=c.u.d.fieldValuesList.get("pzDownload")+" "+e.fileType.toUpperCase();a.innerHTML+='\x3ca id\x3d"inlineDownload" tabindex\x3d0 role\x3d"link" title\x3d"'+d+'" class\x3d"attachment-inline-preview-header-links-download"\x3e\x3ci class\x3d"pi pi-download"\x3e\x3c/i\x3e \x3cspan\x3e'+
d+"\x3c/span\x3e\x3c/a\x3e";var v=function(a){null==b?alert(c.u.d.fieldValuesList.get("pzAttachDownloadURLBroken")):q()?$("html").hasClass("iOS")?window.openUrlInWindow(b,"Attachment","resizable\x3dyes,scrollbars\x3dyes,status\x3dyes"):n(b):n(b)};$(document).on("click","#inlineDownload",v);$(document).on("keypress","#inlineDownload",function(a){13!==a.which&&13!==a.keyCode||v(a)})}function k(a){var b=c.u.d.fieldValuesList.get("pzClose");a.innerHTML+='\x3ca id\x3d"inlineClose" tabindex\x3d0 role\x3d"link" title\x3d"'+
b+'" class\x3d"attachment-inline-preview-header-links-close"\x3e\x3ci class\x3d"pi pi-times"/\x3e\x3c/a\x3e';$(document).on("click","#inlineClose",function(){$("#ATTACHMENT-WRAPPER-DIV").remove()});$(document).on("keypress","#inlineClose",function(a){13!==a.which&&13!==a.keyCode||$("#ATTACHMENT-WRAPPER-DIV").remove()})}function t(b,c){b+="\x26viewInline\x3dtrue";if(J(c)){b=document.createElement("img");b.setAttribute("class","attachment-inline-preview-content-img attachment-inline-preview-content-img"+
l);b.setAttribute("style","display:none;");b.onerror=function(){w("image")};"false"!==G?b.onload=function(){E("image")}:(y(),b.setAttribute("style","display:block;"),b.setAttribute("width",M),b.setAttribute("height",N));b.src=a+"\x26viewInline\x3dtrue";if(q())$(document).on("click",".attachment-inline-preview-content-img"+l,function(){$(".attachment-inline-preview-content-img"+l).toggleClass("zoom-in-inline-img")});return b}if(F(c)){c=document.createElement("video");var d=e.fileType;"ogv"===d&&(d=
"ogg");"m4v"===d&&(d="mp4");"embed"!==B&&c.setAttribute("autoplay","");c.setAttribute("controls","");c.preload="auto";c.setAttribute("class","attachment-inline-preview-content-video attachment-inline-preview-content-video"+l);q()?y():c.setAttribute("style","display:none;");"false"!==G?c.onloadeddata=function(){E("video")}:(y(),c.setAttribute("style","display:block;width:"+M+"px;height:"+N+"px;"));c.onerror=function(){w("video")};var v=document.createElement("source");v.type="video/"+d;v.onerror=function(){w("video")};
v.src=b;c.appendChild(v);return c}}function g(a,b,d){a="true"===z?c.c.EVAUtil.modifyURLForExternalViewer(U,e,a):a+"\x26viewInline\x3dtrue";var r=document.createElement("iframe"),f=window.navigator.userAgent;0<f.indexOf("Trident/")||0<f.indexOf("Edge/")?u(r,!1,d):(r.style.position="absolute",r.style.left="-9999px",r.onload=function(){u(r,!0)});"false"===z?void 0!==a&&null!==a&&""!==a?0<f.indexOf("Trident/")?r.src=a+"\x26viewPDFInline\x3dtrue":(a=SafeURL_createFromURL(a+"\x26viewPDFInline\x3dtrue\x26fileName\x3d"+
b),r.src=a.toURL()):r.src="":r.src=a;return r}function u(a,b,c){var d=V("pdf"),e=d[0],d=d[1];y();b?(a.height=e,a.width=d):(c.style.height=e+"px",c.style.width=d+"px",a.style.height="100%",a.style.width="100%");p(e,d);b&&(a.style.position="inherit",a.style.left="0");x()}function E(a){var b=document.getElementsByClassName("image"===a?"attachment-inline-preview-content-img"+l:"attachment-inline-preview-content-video"+l)[0];q()&&"image"!==a&&(b.style.display="none");var c=V(a),d=c[0],c=c[1];y();var e;
"image"===a?(a=b.naturalHeight,e=b.naturalWidth):(a=b.videoHeight,e=b.videoWidth);if(0===parseInt(c))b.setAttribute("style","display:block;width: 100%; height: 100%");else{for(0===parseInt(d)&&(d=Math.round(a/e*c));a>d||e>c;)a>d?p(d,d/a*e):e>c&&p(c/e*a,c),a=Math.round($("#ATTACHMENT-PREVIEW-CONTENT"+l+" \x3e span").height()),e=Math.round($("#ATTACHMENT-PREVIEW-CONTENT"+l+" \x3e span").width());b.height=a;b.width=e;b.setAttribute("style","display:block;")}x()}function V(a){var b,c;"embed"!==B?(b=Math.round($("#ATTACHMENT-WRAPPER-DIV").height()-
$("#ATTACHMENT-PREVIEW-HEADER").height()-35),c=Math.round($("#ATTACHMENT-WRAPPER-DIV").width()-28),q()&&(c+=28)):(b=parseInt(N),c=parseInt(M),0===c&&(c=Math.round(document.getElementById(D).offsetWidth)),0===b&&"pdf"===a&&(b=Math.round(842/595*c)));return[b,c]}function p(a,b){$("#ATTACHMENT-PREVIEW-CONTENT"+l+" \x3e span").width(b);$("#ATTACHMENT-PREVIEW-CONTENT"+l+" \x3e span").height(a)}function x(){"embed"!==B&&("false"!==A?$("#inlineDownload").focus():$("#inlineClose").focus())}function w(a){y();
a="embed"!==B?"\x3cb style\x3d'color:#fff'\x3e"+c.u.d.fieldValuesList.get("pzAttachmentNotFound")+"\x3c/b\x3e":"\x3cimg src \x3d '"+K+"' width\x3d'44' height\x3d'44'\x3e";document.getElementById("INLINE-PREVIEW-MEDIA-WRAPPER"+l).innerHTML=a}function y(){document.getElementById("IMG_SHOW_THROBBER_BEFORE_LOAD"+l)&&document.getElementById("IMG_SHOW_THROBBER_BEFORE_LOAD"+l).remove()}function m(a,b){if(null!=e&&"false"===z){var d;d=e.fileType;d=void 0===d?!1:O(d)||"pdf"===d.toLowerCase();d||(b=!1)}if(b&&
null!=e){b=D;void 0===b||null===b||""===b?(b=document.getElementById("ATTACHMENT-WRAPPER-DIV"),null!=b&&$("#ATTACHMENT-WRAPPER-DIV").remove(),b=document.createElement("div"),b.id="ATTACHMENT-WRAPPER-DIV",b.setAttribute("class","attachment-inline-preview-wrapper"),document.body.appendChild(b)):b=document.getElementById(b);if("embed"!==B){b.innerHTML='\x3cdiv id\x3d"ATTACHMENT-PREVIEW-HEADER" class\x3d"attachment-inline-preview-header"\x3e\x3c/div\x3e';d=document.getElementById("ATTACHMENT-PREVIEW-HEADER");
d.innerHTML='\x3cdiv id\x3d"ATTACHMENT-PREVIEW-HEADER-INFO" class\x3d"attachment-inline-preview-header-info"\x3e\x3c/div\x3e';d.innerHTML+='\x3cdiv id\x3d"ATTACHMENT-PREVIEW-HEADER-DOWNLOAD-LINK" class\x3d"attachment-inline-preview-header-download-link"\x3e\x3c/div\x3e';d.innerHTML+='\x3cdiv id\x3d"ATTACHMENT-PREVIEW-HEADER-CLOSE-LINK" class\x3d"attachment-inline-preview-header-close-link"\x3e\x3c/div\x3e';if("false"!==C){d=document.getElementById("ATTACHMENT-PREVIEW-HEADER-INFO");d.innerHTML+='\x3cdiv id\x3d"ATTACHMENT-PREVIEW-HEADER-INFO-TITLE" class\x3d"attachment-inline-preview-header-info-title"\x3e\x3ch1\x3e'+
e.fileName+"\x3cspan\x3e."+e.fileType+"\x3c/span\x3e\x3c/h1\x3e\x3c/div\x3e";var f;f=e.fileType;f=f.toLowerCase();f=J(f)||"tif"===f||"tiff"===f?c.u.d.fieldValuesList.get("pzImage"):F(f)?c.u.d.fieldValuesList.get("pzVideo"):P(f)?c.u.d.fieldValuesList.get("pzMusic"):Q(f)?c.u.d.fieldValuesList.get("pzOfcDoc"):R(f)?c.u.d.fieldValuesList.get("pzOfcExcel"):S(f)?c.u.d.fieldValuesList.get("pzOfcPPT"):"pdf"===f?c.u.d.fieldValuesList.get("pzPDF"):f;d.innerHTML+='\x3cdiv id\x3d"ATTACHMENT-PREVIEW-HEADER-INFO-META" class\x3d"attachment-inline-preview-header-info-meta"\x3e'+
(f+" | "+e.uploadedOn+" "+e.uploadedBy)+"\x3c/div\x3e"}"false"!==A&&h(document.getElementById("ATTACHMENT-PREVIEW-HEADER-DOWNLOAD-LINK"));k(document.getElementById("ATTACHMENT-PREVIEW-HEADER-CLOSE-LINK"))}b.innerHTML=b.innerHTML+'\x3cdiv id\x3d"'+("ATTACHMENT-PREVIEW-CONTENT"+l)+'" class\x3d"attachment-inline-preview-content"\x3e\x3c/div\x3e';b=document.getElementById("ATTACHMENT-PREVIEW-CONTENT"+l);"embed"===B&&b.classList.add("attachment-inline-preview-content-embed");d=document.createElement("span");
f=document.createElement("img");f.src="webwb/pzLoadingBarAnimation.gif";f.id="IMG_SHOW_THROBBER_BEFORE_LOAD"+l;b.appendChild(f);"true"!==z||F(e.fileType)?(d.id="INLINE-PREVIEW-MEDIA-WRAPPER"+l,O(e.fileType)?(d.appendChild(t(a,e.fileType)),b.appendChild(d)):"pdf"===e.fileType.toLowerCase()?(d.appendChild(g(a,e.fileName,d)),b.appendChild(d)):n(a)):(d.appendChild(g(a,e.fileName,d)),b.appendChild(d))}else n(a)}function n(a){var b=c.desktop.support.getDesktopWindow(),b=(b?b:window).document.getElementById("ATTACHMENT-DATA");
null===b&&(b=document.getElementById("ATTACHMENT-DATA"));null===b&&(b=W());b.src=a}var z="false";if(f&&void 0!==e&&null!==e){var l=e.uniqueID,C=e.isHeaderRequired,A=e.isDownloadRequired,D=e.targetDiv,B=e.displayType,N=e.height,M=e.width,K=e.fallbackThumbnail,G=e.maintainAspectRatio;if("true"!==e.doNotUseEV&&c.c.EVAUtil)var U=c.c.EVAUtil.getExternalViewerDetails(e),z=U.useExternalViewer;else z="false";"false"===z&&X(e.fileType)&&(f=!1)}var W=function(){var a=document.createElement("iframe");a.id="ATTACHMENT-DATA";
a.style.display="none";document.body.appendChild(a);return a};try{L()?T(a,d):H?I(a,d):q()?f?m(a,f):$("html").hasClass("iOS")?window.openUrlInWindow(a,"Attachment","resizable\x3dyes,scrollbars\x3dyes,status\x3dyes"):m(a):document.addEventListener?m(a,f):window.open(a,"Attachment","resizable\x3dyes,scrollbars\x3dyes,status\x3dyes")}catch(v){console.error("Error displaying attachment: ",a,v),W().src=a}},O=function(a){return J(a)||F(a)||P(a)},J=function(a){a=a.toLowerCase();return"png"===a||"jpg"===a||
"jpeg"===a||"bmp"===a||"gif"===a||("tif"===a||"tiff"===a)&&K()},F=function(a){a=a.toLowerCase();return"mp4"===a||"m4v"===a?!0:K()?!1:"webm"===a||"ogg"===a||"ogv"===a},P=function(a){a=a.toLowerCase();return"mp3"===a||"wav"===a},Q=function(a){a=a.toLowerCase();return"doc"===a||"docx"===a},R=function(a){a=a.toLowerCase();return"xls"===a||"xlsx"===a},S=function(a){a=a.toLowerCase();return"ppt"===a||"pptx"===a},X=function(a){return Q(a)||R(a)||S(a)},K=function(){var a=/Chrome/.test(navigator.userAgent)&&
/Google Inc/.test(navigator.vendor),b=window.navigator.userAgent;return!a&&0>=b.indexOf("Firefox/")&&(0<b.indexOf("Safari/")||0<b.indexOf("Trident/")||0<b.indexOf("Edge/"))?!0:!1},A=function(a){void 0!==a&&null!==a&&(a.uniqueID=(new Date).getTime()+Math.floor(20*Math.random()))},Y=function(a){var b=c.ui.ClientCache.find("D_pzOfflineAttachmentList");if(b=b&&b.get("pxResults")?b.get("pxResults").iterator():void 0)for(;b.hasNext();){var d=b.next();if(a===d.get("pxLinkedRefTo").getValue())return"Signature-Attach"===
d.get("pyLabel").getValue()}return!1},Z=function(a,b,d,f,e,h,k,t){if(!L()&&!H||m(b)||m(e)){var g="",u="",E=g=!1,n="";if(k){if(null!=t)try{var p=t.fileType;null!=p&&""!==p.trim()&&(g=O(p.trim()),E="pdf"===p.trim().toLowerCase(),n=t.storageType)}catch(y){}!g&&!E||"External"===n?(g=new SafeURL(d+"."+f),g.put("linkInsHandle",a.trim())):(g=new SafeURL(d+"."+e),g.put("LinkedRefTo",b.trim()));u=new SafeURL(d+"."+f);u.put("linkInsHandle",a.trim());c.u.d.convertToRunActivityAction(u);c.u.d.convertToRunActivityAction(g);
u=u.toURL()}else q()?$("html").hasClass("iOS")?(g=new SafeURL("@baseclass.pzProcessURLInWindow"),g.put("pyPreActivity",d+"."+f)):(g=new SafeURL(d+"."+f),c.u.d.convertToRunActivityAction(g)):(g=new SafeURL(d+"."+f),c.u.d.convertToRunActivityAction(g)),g.put("linkInsHandle",a.trim());C(g.toURL(),u,h,k,t)}else{a=new SafeURL(d+"."+e);a.put("LinkedRefTo",b.trim());c.u.d.convertToRunActivityAction(a);a=a.toURL();var x,w;if(c.u.d.ServerProxy&&c.u.d.ServerProxy.isDestinationLocal())if(0>b.toUpperCase().indexOf("DATA-WORKATTACH-")){if(H&&
Y(b)){pms.plugins.clientstore.getItemUrl("signature",b.trim(),{decodeBase64:!0,fileExtension:"png"}).then(function(a){I({id:a},h,!0,w)}).catch(function(a){console.error("Can't preview signature attachment "+b+". Reason: "+a)});return}a=b.trim();x=!0}else{if(-1!==b.toUpperCase().indexOf("TMP-DATA-WORKATTACH-")){c.mobile.sdk.plugins.clientstore.getItem("DATA-WORKATTACH-FILE",b.trim()).then(function(a){x=!0;I({id:a.url},h,x,w)}).catch(function(){console.log("error")});return}if(c.offline.NetworkStatus.isDataNetworkAvailable())c.u.d.ServerProxy.setDestination(c.u.d.ServerProxy.DESTINATION.REMOTE),
w=!0;else{setTimeout(function(){var a=c.u.d.fieldValuesList.get("CannotPerformWhenOffline");alert(a);c&&c.control&&c.control.Actions&&c.control.Actions.prototype.hideSkeleton()},100);return}}H?I(a,h,x,w):T(a,h,x,w)}},aa=function(a,b){if("DATA-WORKATTACH-URL"===a)a=c.u.d.fieldValuesList.get("CannotOpenUrlOnMobileApp"),alert(a);else{var d=c.mobile.hybrid.getLaunchBox();d.PRPC.ClientStore.getItem(a,b).then(function(a){d.DocumentViewer.open(a.url,{onSuccess:function(){console.debug("Attachment opened successfully")},
onFailure:function(a){console.error("Failed to open attachment: "+a.description)}})},function(){console.error("Failed to fetch attachment URL from ClientStore.")})}},G=function(a){a=document.getElementById(a.thisId);if(null!=a){var b=a.getAttribute("validationTypeBackup");b&&(a.setAttribute("validationType",b),a.removeAttribute("validationTypeBackup"))}},ba=function(a){window.addEventListener?window.addEventListener("load",a,!1):window.attachEvent&&window.attachEvent("onload",a)};c.c.AttachUtil={MULTIPART_FORM_DATA:"multipart/form-data",
FORM_URL_ENCODED:"application/x-www-form-urlencoded",resetEncoding:function(a,b){a&&(a.encoding=b)},resetEncodingFileUpload:function(a){this.resetEncoding(a,this.MULTIPART_FORM_DATA)},resetEncodingForm:function(a){this.resetEncoding(a,this.FORM_URL_ENCODED)},setEncoding:function(a,b,d){a&&(b?a.encoding=d:ba(function(){a.encoding=d}))},setEncodingFileUpload:function(a,b){this.setEncoding(a,b,this.MULTIPART_FORM_DATA)},setEncodingForm:function(a,b){this.setEncoding(a,b,this.FORM_URL_ENCODED)},isMaxFileSizeExceeded:function(a,
b){if(window.File&&window.FileReader&&window.FileList&&null!=b){b=b.files;for(var d=0,c=b.length;d<c;++d)if(b[d].size>a)return!0}return!1},showMaxFileSizeViolation:function(a){c.u.d.reloadSection(null,"pyMaxFileSizeViolation","",!1,!1,null,null,a)},getSelectedFileName:function(a){var b="",d;if(null!=a)if(window.File&&window.FileReader&&window.FileList){a=a.files;for(var c=0,e=a.length;null!=a&&c<e;++c)d=a[c].name,m(d)&&(d=a[c].value),m(d)||(b+=d+":")}else d=a.getAttribute("value"),m(d)&&(d=a.value),
m(d)||(b=d);return b},deferValidationUntilSubmit:function(a){a={thisId:a};var b=document.getElementById(a.thisId);if(null!=b){var d=b.getAttribute("validationType");d&&(b.setAttribute("validationTypeBackup",d),b.removeAttribute("validationType"))}isRegisteredOnBeforeSubmit(G)||c.u.d.registerOnBeforeSubmit(G,a)},getRunScriptEvent:function(){var a=window.event;if(!a)for(var b=this.getRunScriptEvent.caller;b;){for(var d=0;d<b.arguments.length;++d)if((a=b.arguments[d])&&(a.srcElement||a.target))return a;
b=b.caller}},checkStorageAuthAndExecute:function(a,b,d){var f=function(e){if("true"===e)b();else{var f=c.u.d.performFlowACallback;m(d)&&(d="pzCheckContentStorageTarget");c.u.d.performFlowACallback=function(a,d,e){c.u.d.performFlowACallback=f;f(a,d,e);D(function(a){"true"===a&&b()})};e=n(a);c.u.d.processAction(d,"","","","","popup","","","",e)}};c.u.d.ServerProxy&&c.u.d.ServerProxy.isDestinationLocal()?f("true"):D(f)},checkWebStorageTokenAndExecute:function(a,b,d){this.checkStorageAuthAndExecute(a,
b,d)},checkTokenAndDownloadAttachment:function(a,b,d,f,e,h,k,t,g){var n=-1<navigator.userAgent.indexOf("PegaMobile");if(""===d&&c.mobile&&c.mobile.isPegaElectronContainer)g=c.u.d.fieldValuesList.get("OfflineApplicationGettingSynchronized"),alert(g),c&&c.control&&c.control.Actions&&c.control.Actions.prototype.hideSkeleton();else{var m=function(){A(t);Z(b,d,f,e,h,a,k,t)},q=-1<navigator.userAgent.indexOf("AmpWebControl")||-1<navigator.userAgent.indexOf("PegaElectronContainer")||n,p=null!=c.ui.ClientCache.find("pyWorkPage.pxObjClass")?
c.ui.ClientCache.find("pyWorkPage.pxObjClass").getValue():null;L()?null!=p?"false"!==c.offline.Utils.getOfflineSettingsForCase(p,"pyOfflineAttachmentsEnabled")&&q?(console.info("Opening attachment in offline."),g||(g="DATA-WORKATTACH-FILE"),aa(g.toUpperCase(),d)):this.checkStorageAuthAndExecute(a,m):this.checkStorageAuthAndExecute(a,m):n?(g||(g="DATA-WORKATTACH-FILE"),null!=p?this.previewPIMCAttachmentOffline(a,p,g,d,q,m):this.previewPIMCAttachmentOnline(a,d,h,f,b,e)):this.checkStorageAuthAndExecute(a,
m)}},checkTokenAndDisplayAttachment_pegaSocial_inline:function(a,b,d,c,e){c="false"===c||!1===c?!1:!0;this.checkStorageAuthAndExecute(a,function(){A(b);C(d,e,a,c,b)})},determineTypeOfAttachment:function(a){return J(a)?"image":F(a)?"video":P(a)?"audio":Q(a)?"doc":R(a)?"excel":S(a)?"ppt":"pdf"===a?"pdf":"NA"},displayEmbeddedAttachment:function(a,b,c){var d=$.Event("onload");d.target=document.getElementById(a.targetDiv);this.checkStorageAuthAndExecute(d,function(){A(a);C(c,b,null,!0,a)})},downloadEmbeddedAttachment:function(a,
b){var c=$.Event("onload");c.target=document.getElementById(a.targetDiv);this.checkStorageAuthAndExecute(c,function(){A(a);C(b,b,null,!1,a)})},previewPIMCAttachmentOnline:function(a,b,d,f,e,h){if(b.startsWith("DATA-WORKATTACH-URL"))a=SafeURL_createFromURL(c.u.d.url),a.put("pyActivity","pzFetchURLDetails"),a.put("linkkey",b),c.u.d.asyncRequest("GET",a,{success:function(a){a=a.responseText;a=-1===a.indexOf("://")?"http://"+a:a;c.mobile.sdk.application.openUrl(a).then(function(){console.debug("Successfully opened the url")}).catch(function(){console.error("Unable to open the url")})}},
null,null);else{b=new SafeURL(f+"."+h);b.put("linkInsHandle",e.trim());c.u.d.convertToRunActivityAction(b);b=b.toURL();b=window.location.protocol+"//"+window.location.host+b;var k=new c.ui.busyIndicator("",!0,null);(a=n(a))&&k.setTargetElement(a);k.show();c.mobile.sdk.plugins.documents.preview(b).then(function(){console.debug("Attachment downloaded and previewed with success");k.hide()}).catch(function(){console.error("Downloading and previewing attachment failed");k.hide()})}},previewPIMCAttachmentOffline:function(a,
b,d,f,e,h){b=c.offline.Utils.getOfflineSettingsForCase(b,"pyOfflineAttachmentsEnabled");if("DATA-WORKATTACH-URL"===(d?d.toUpperCase():d)){var k=c.u.d.fieldValuesList.get("CannotOpenUrlOnMobileApp");alert(k)}"false"!==b&&e?pms.plugins.clientstore.getItems([{type:d.toUpperCase(),handle:f}]).then(function(a){return 0<a.length&&a[0].url?a[0].url:pms.plugins.clientstore.getItemUrl("signature",f,{decodeBase64:!0,fileExtension:"jpg"})}).then(function(a){return pms.plugins.documents.preview({id:a})}).catch(function(a){console.error("Cannot preview attachment (type\x3d'"+
d.toUpperCase()+"', handle\x3d'"+f+"'). "+a)}):this.checkStorageAuthAndExecute(a,h)},shareAttachment:function(a,b,d,f,e,h){b=new SafeURL("Work-."+h);b.put("LinkedRefTo",f.trim());c.u.d.convertToRunActivityAction(b);b=b.toURL();f=window.location.protocol+"//"+window.location.host+b;var k=new c.ui.busyIndicator("",!0,null);(a=n(a))&&k.setTargetElement(a);k.show();c.mobile.sdk.plugins.documents.share(f).then(function(){console.debug("File shared with success");k.hide()}).catch(function(a){console.error("Sharing file failed.",
a);k.hide()})}}}})(pega);