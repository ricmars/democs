pega.ui.Doc.prototype.modalDialogInit=function(){pega.u.d.useOldModalDialog=!0;pega.u.d.isModalClosing=!1;pega.u.d.submitModalDlgParamStack=[];pega.u.d.inStandardsMode&&(pega.u.d.useOldModalDialog=!1);if(pega.u.d.useOldModalDialog){var a=document.getElementById("modaldialog");pega.u.d.modalDialog=new pega.widget.ResizePanel("modaldialog",{width:pega.u.d.MODALDIALOG_MIN_WIDTH+"px",visible:!1,modal:!0,fixedcenter:!0,draggable:!1,constraintoviewport:!0,monitorresize:!1,underlay:"none",close:!1});pega.u.d.registerResize(function(){pega.u.d.bModalDialogOpen&&
pega.u.d.sizeHarnessMask.call(pega.u.d.modalDialog)});pega.u.d.modalDialog.renderEvent.subscribe(pega.u.d.modalDialogRendered);pega.u.d.modalDialog.subscribe("resizeEvent",pega.u.d._resizeModalDialogComponents);pega.u.d.modalDialog.mask=document.getElementById("modalDialog_mask")}else a=document.getElementById("modalOverlay"),pega.u.d.modalDialog=new pega.ui.modalDialog,pega.u.d.registerResize(pega.u.d.setModalDimensions),$(window).resize(pega.u.d.setModalDimensions);pega.u.d.modalDialog.subscribe("hide",
function(){var a=pega.ui.HarnessContextMgr;pega.u.d.useOldModalDialog&&(pega.u.d.modalDialog.body=document.getElementById("modaldialog_bd"));pega.u.d.bModalDialogOpen=!1;pega.u.d.isModalClosing=!1;pega.u.d.bIsModelessDialog=!1;pega.u.d.modalTabElementsWidth=0;pega.u.d.modalTabContentWidth=0;pega.u.d.MODALDIALOG_MAX_WIDTH=0;pega.u.d.MODALDIALOG_MIN_HEIGHT=0;pega.u.d.MODALDIALOG_BUTTONS_HEIGHT=0;pega.u.d.resetSubmitModalDlgParam();pega.ctx.gridObj&&!pega.ctx.activeGrid&&(pega.ctx.activeGrid=pega.ctx.gridObj,
pega.ctx.gridObj=null);pega.ctx.activeGrid&&(delete pega.ctx.activeGrid.isOpenLocalAction,delete pega.ctx.activeGrid.__fromLocalAction,delete pega.ctx.activeGrid.bNoThreadProcess);pega.u.d.inCall&&pega.ctx.activeGrid&&pega.ctx.activeGrid.bPageGroup&&(0==pega.ctx.activeGrid.bGrid||pega.ctx.activeGrid.editConfig==pega.ctx.activeGrid.EDIT_ROW)&&(pega.u.d.inCall=!1,pega.u.d.changeInEventsArray&&pega.u.d.changeInEventsArray.fire());var c=pega.u.d.modalDialog.innerElement;pega.u.d.usesModalTemplate||pega.u.d.deleteModalHeader();
pega.u.d.usesModalTemplate=!1;pega.util.Event.isIE&&pega.u.d.modalDialog.cfg.setProperty("height","0");var d=pega.u.d.modalDialog.body;pega.util.Event.removeListener(c,"keydown",pega.u.d.restrictFocus);pega.util.Event.removeListener(c.ownerDocument,"keydown",pega.u.d.handleModaldlgKeyPress);pega.util.Event.removeListener(document.body,"beforeactivate",pega.u.d.checkAccessKeys);pega.u.d.removeModalBtnListeners(c);var f=document.getElementById("container_close");f&&(pega.util.Event.removeListener(f,
"click",pega.u.d.closeModalFlowAction),pega.util.Event.removeListener(f,"click",pega.u.d.hideModalWindow));pega&&pega.c&&pega.c.menu&&"function"==typeof pega.c.menu.doMenuBarCleanup&&"function"==typeof pega.c.menu.doShowMenuCleanup&&(pega.c.menu.doMenuBarCleanup(d),pega.c.menu.doShowMenuCleanup());pega.u.d.nullifyComplexElementsInModal();pega.u.d.setAutoCompList();pega.u.d.removeElemListeners(d);pega.ui.EventsEmitter.publishSync("BeforeModalHide",{targets:d});d.innerHTML="";pega.u.d.useOldModalDialog&&
(d.style.width="",d.style.height="",d.style.overflow="",c.style.width="",c.style.height="");pega.ctx.activeGrid||(pega.u.d.regHeavyOperations&&1==pega.u.d.regHeavyOperations?pega.u.d.HeavyOperations.registerOnceOnInit("resizeHarness"):pega.u.d.resizeHarness());null!=document.forms[0]&&("actionForm"==document.forms[0].name&&parent.pega.u.d.enableElements(!0,!0,!0),null!=a.get("formEncodingType")&&(document.forms[0].encoding=a.get("formEncodingType"),pega.ctx.modalHasFileEncoding=!1));pega.ctx.activeGrid=
null;pega.c&&pega.c.actionSequencer&&!pega.u.d.isAjaxInProgress()&&pega.c.actionSequencer.resume();document.getElementById("modaldialog_mask")&&pega.util.Event.removeListener(document,"keydown",pega.u.d.restrictFocus)});pega.u.d.modalDialog.subscribe("show",function(){pega.c&&pega.c.actionSequencer&&pega.c.actionSequencer.pause(!0);pega.u.d.useOldModalDialog&&pega.u.d.setModalDialogResizeHandle();pega.u.d.bModalDialogOpen=!0;pega.u.d.setModalDimensions();null!=document.forms[0]&&"actionForm"==document.forms[0].name&&
parent.pega.u.d.disableElements(!0,!0,!0);pega.u.d.usesModalTemplate||pega.u.d.addModalHeader();pega.util.Event.isIE&&pega.util.Event.addListener(document.body,"beforeactivate",pega.u.d.checkAccessKeys);var b=document.querySelector("#modalContent").querySelector("#container_close");if(b&&pega.cl&&pega.cl.isTouchAble())b.focus();else{var c=pega.u.d.getFirstFocusableElement(pega.u.d.modalDialog.innerElement.id);!c||c.getAttribute&&c.getAttribute("validationType")&&-1<c.getAttribute("validationType").indexOf("required")||
(c.focus(),pega.u.d.fixFocusInIE(c))}a&&(pega.c&&pega.c.TextArea&&pega.c.TextArea.AutosizeAll(a),pega.util.Event.addListener(a.ownerDocument,"keydown",pega.u.d.handleModaldlgKeyPress));document.getElementById("modaldialog_mask")&&(b=pega.u.d.getLastFocusableElement(pega.u.d.modalDialog.innerElement.id),pega.util.Event.addListener(document,"keydown",pega.u.d.restrictFocus,[c,b]))})};
pega.ui.Doc.prototype.fixFocusInIE=function(a){try{a.setSelectionRange&&pega.env&&pega.env.ua&&pega.env.ua.ie&&a.setSelectionRange(0,0)}catch(b){}};
pega.ui.Doc.prototype.resetSubmitModalDlgParam=function(){if(pega.u.d.submitModalDlgParam&&pega.u.d.submitModalDlgParam.associatedElement){var a=pega.u.d.getPopOver(pega.u.d.submitModalDlgParam.associatedElement);a&&(a=a.getContentContainerElement(),null!=a&&pega.util.Event.removeListener(a,"keydown",pega.u.d.focusOffOverlay),pega.u.d.resetVarInOverlay())}0<pega.u.d.submitModalDlgParamStack.length?(pega.u.d.submitModalDlgParam=pega.u.d.submitModalDlgParamStack.pop(),pega.u.d.insertButton=pega.u.d.submitModalDlgParam.associatedElement||
pega.u.d.submitModalDlgParam.reloadElement,null!=pega.ctx.activeGrid&&"undefined"!=typeof pega.ctx.activeGrid||null==pega.u.d.submitModalDlgParam.activeGrid||"undefined"==typeof pega.u.d.submitModalDlgParam.activeGrid||(pega.ctx.activeGrid=pega.u.d.submitModalDlgParam.activeGrid)):pega.u.d.submitModalDlgParam=null;pega.u.d.bCallModalClose&&(pega.u.d.modalBtnElem&&pega.util.Event.fireEvent(pega.u.d.modalBtnElem,"click"),pega.u.d.bCallModalClose=!1,pega.u.d.modalBtnElem=null)};
pega.ui.Doc.prototype.resetVarInOverlay=function(){pega.ctx.gridObj&&!pega.ctx.activeGrid&&(pega.ctx.activeGrid=pega.ctx.gridObj,pega.ctx.gridObj=null);pega.ctx.activeGrid&&(associatedElement=pega.u.d.submitModalDlgParam.associatedElement,1==pega.u.d.submitModalDlgParam.associatedElement.nodeType&&!pega.ctx.dom.getContextRoot().contains(pega.u.d.submitModalDlgParam.associatedElement)&&pega.u.d.submitModalDlgParam.associatedElement.id&&(associatedElement=pega.ctx.dom.getElementById(pega.u.d.submitModalDlgParam.associatedElement.id)),
pega.util.Dom.isAncestor(pega.ctx.activeGrid.gridDiv,associatedElement)||pega.ctx.activeGrid.gridDetailsDiv&&pega.util.Dom.isAncestor(pega.ctx.activeGrid.gridDetailsDiv,associatedElement))&&(delete pega.ctx.activeGrid.isOpenLocalAction,delete pega.ctx.activeGrid.__fromLocalAction,delete pega.ctx.activeGrid.bNoThreadProcess,pega.ctx.activeGrid=null)};
pega.ui.Doc.prototype.restrictFocus=function(a,b){if(b&&b instanceof Array&&!(2>b.length)){var c=document.getElementsByClassName("pageErrorList layout-noheader-errors");pega.u.d.isAccessible&&c[0]&&(b[0]=c[0]);c=pega.util.Event.getTarget(a);if(9==a.keyCode)if(a.shiftKey)if("container_close"==c.id){try{b[1].focus()}catch(d){}pega.util.Event.stopEvent(a)}else if(c&&"modaldialog_mask"==c.getAttribute("id")){try{b[1].focus()}catch(d){}pega.util.Event.stopEvent(a)}else if(!pega.util.Dom.isAncestor(pega.u.d.modalDialog.body,
c)&&!pega.u.d.isIframeInsideModal(b,c)){try{b[1].focus()}catch(d){}pega.util.Event.stopEvent(a)}else{if(c===b[0]){c=document.querySelector("#container_close[title]");if(null!=c)c.focus();else try{b[1].focus()}catch(d){}pega.util.Event.stopEvent(a)}}else if(c==b[1]){c=document.querySelector("#container_close[title]");if(null!=c)c.focus();else if(b[0]&&"TEXTAREA"==b[0].nodeName&&-1!=b[0].className.indexOf("PEGACKEDITOR")){if(CKEDITOR.instances[b[0].id].instanceReady)try{CKEDITOR.instances[b[0].id].focus()}catch(d){}}else try{b[0].focus()}catch(d){}pega.util.Event.stopEvent(a)}}};
pega.ui.Doc.prototype.isFocusableNode=function(a){var b=!0;switch(a.nodeName){case "BUTTON":case "INPUT":case "SELECT":case "TEXTAREA":case "A":break;default:b=!1}return(b||a.attributes.tabIndex&&-1!=a.tabIndex)&&1!=a.disabled&&0<a.offsetHeight&&(1!=a.readOnly||a.hasAttribute("data-editable"))&&"hidden"!=a.type&&"none"!=a.style.display&&"ModalHelpButton"!=a.id&&"container_close"!=a.id?!0:!1};
pega.ui.Doc.prototype.getFirstFocusableElement=function(a,b,c){if(void 0!=a&&null!=a&&(a=document.getElementById(a)))if(a.hasChildNodes()){c=c?a.querySelector("#"+c).contentWindow.document.getElementsByTagName("*"):a.getElementsByTagName("*");a=c.length;for(b=0;b<a;b++){var d=c[b];if("TEXTAREA"==d.nodeName&&-1!=d.className.indexOf("PEGACKEDITOR")){var f=d.getAttribute("data-config");if("false"==JSON.parse(f)[1].readOnly)return d}if(null!=d&&pega.u.d.isFocusableNode(d)&&("a"!=d.nodeName.toLowerCase()||
0!=d.className.indexOf("cke_"))){if("a"==d.nodeName.toLowerCase()&&"ACCORANCHOR"==d.id&&-1==d.tabIndex)return d.parentNode;if("OL"!=d.parentNode.parentNode.tagName&&"none"!=d.parentNode.parentNode.style.display)return d}}c=document.querySelector("#container_close[title]");if(null!=c)return c}else if("INPUT"==a.nodeName&&(null!=a.type&&"radio"==a.type&&a.checked||null!=a.type&&"radio"!=a.type))return a};
pega.ui.Doc.prototype.getLastFocusableElement=function(a,b,c){if(void 0!=a&&null!=a&&(a=document.getElementById(a)))if(a.hasChildNodes())for(c=c?a.querySelector("#"+c).contentWindow.document.getElementsByTagName("*"):a.getElementsByTagName("*"),a=c.length-1;0<=a;a--){if(b=c[a],null!=b&&("BUTTON"==b.nodeName.toUpperCase()||"INPUT"==b.nodeName||"SELECT"==b.nodeName||"TEXTAREA"==b.nodeName||"A"==b.nodeName||("TD"===b.nodeName||"TH"===b.nodeName||"DIV"===b.nodeName)&&b.attributes.tabIndex&&-1!=b.tabIndex)&&
"hidden"!=b.type&&"none"!=b.style.display&&0<b.offsetHeight&&!b.disabled)return b}else if("INPUT"==a.nodeName&&(null!=a.type&&"radio"==a.type&&a.checked||null!=a.type&&"radio"!=a.type))return a};
pega.ui.Doc.prototype.setBoundaryElementsFromIframe=function(a){var b=document.getElementById("modalContent"),c=b.querySelector("#"+a).contentWindow.document.body;pega.util.Event.removeListener(b,"keydown",pega.u.d.restrictFocus);pega.util.Event.removeListener(c,"keydown",pega.u.d.restrictFocus);var d=pega.u.d.getFirstFocusableElement("modalContent",void 0,a),f=pega.u.d.getLastFocusableElement("modalContent",void 0,a);pega.util.Event.addListener(b,"keydown",pega.u.d.restrictFocus,[d,f,{iframeID:a}]);
pega.util.Event.addListener(c,"keydown",pega.u.d.restrictFocus,[d,f,{iframeID:a}]);d&&pega.u.d.focusDomElement(d)};pega.ui.Doc.prototype.isIframeInsideModal=function(a,b){return 3<=a.length&&a[2].iframeID&&(a=document.getElementById(a[2].iframeID),pega.util.Dom.isAncestor(pega.u.d.modalDialog.body,a))?pega.util.Dom.isAncestor(a.contentWindow.document,b):!1};pega.ui.Doc.prototype.modalDialogRendered=function(){pega.u.d.bModalRendered=!0};
pega.ui.Doc.prototype.modalDialogLoaded=function(){return pega.u.d.useOldModalDialog?pega.u.d.modalDialog.cfg.getProperty("visible"):pega.u.d.modalDialog.bModalOpen};pega.ui.Doc.prototype.hideModalWindow=function(){pega.u.d.isDirtyDialogOpen&&($(".modal-overlay .modal-wrapper \x3e .modal-content").css({"max-height":"none","max-width":"none"}),delete pega.u.d.isDirtyDialogOpen);pega.ui.HarnessContextMgr.set("KeepMessages","false");pega.u.d.modalDialog.hide()};
pega.ui.Doc.prototype.unregisterModalListener=function(a){for(var b=this.modalCallback.length,c=0;c<b;c++)this.modalCallback[c]==a&&this.modalCallback.splice(c,1)};
pega.ui.Doc.prototype.displaySection=function(a,b,c,d,f,e,g,h,k,l){var p=!1;pega.u.d.usesModalTemplate=!0;var v=null;pega.u.d.useOldModalDialog&&(h=!1);if(h)try{var t=pega.util.Event.getEvent(),v=[t,t.clientX,t.clientY]}catch(n){}if(c)k=a;else{c=pega.u.d.modalDialog.innerElement;if("undefined"==typeof k||null==k||""==k)k="pyModalTemplate";p=!0}this.reload({reloadElement:c,bFormSubmit:!1,bSectionSubmit:!1,bDoNotSetAll:!0,strReloadType:"ShowSection",streamName:k,pageName:b,onAfterSubmit:f,onAfterCancel:e,
bShowAsModal:p,includedStreamName:a,sectionOnly:d,specialButtons:g,displayAtClick:v,sectionParams:l});return c};
pega.ui.Doc.prototype.overlayCallBack=function(){var a=pega.u.d.gCallbackArgs.overlayNode,b=pega.u.d.getPopOver(pega.u.d.insertButton);pega.u.d.submitModalDlgParam.associatedElement=pega.u.d.insertButton;b.open({content:{type:"domElement",element:a},bindings:{associatedElement:pega.u.d.insertButton},buttons:{ok:!1,cancel:!1},callbacks:{onContentDisplayed:[pega.u.d.focusOverlay,"",pega.u.d],onClose:[pega.u.d.closeOverlay,"",pega.u.d],onContentReady:[pega.u.d.handleOverlayContentReady,"",pega.u.d]},
position:{fieldAttach:"leftBottom",popOverAttach:"leftTop",size:{min:{y:20}}},visual:{animations:pega.u.d.submitModalDlgParam.animObj,displayLoader:!1,contentClass:"overlayPO",isMobileFullScreen:pega.u.d.submitModalDlgParam.isMobileFullScreen,isLocalAction:pega.u.d.submitModalDlgParam.isLocalAction},extraParams:{refresh:!0,setMaxHeightAndWidth:!0,modalStyle:pega.u.d.gCallbackArgs.modalStyle,bIsDisableClickaway:""+pega.u.d.gCallbackArgs.bIsDisableClickaway,bIsCenterOverlay:""+pega.u.d.gCallbackArgs.bIsCenterOverlay}});
pega.u.d.gBusyInd.hide();pega.u.d.gCallbackArgs=null};pega.ui.Doc.prototype.handleOverlayContentReady=function(a){if(pega.u.d.allowTransition()){var b=$("\x3cdiv\x3e\x3c/div\x3e").addClass("container-close").click(function(a){"undefined"!=typeof pega&&pega.u.d&&setUserStart();doOverlayAction("",a)});$(a).prepend(b)}};pega.ui.Doc.prototype.focusOffOverlay=function(a,b){pega.util.Event.getTarget(a)};
pega.ui.Doc.prototype.focusOverlay=function(a){if(!(pega.cl&&pega.cl.isTouchAble()&&pega.u.d.isMobile())){var b=pega.u.d.getFirstFocusableElement(a.id),c=pega.u.d.getLastFocusableElement(a.id);if(b){if(b&&"TEXTAREA"==b.nodeName&&-1!=b.className.indexOf("PEGACKEDITOR"))setTimeout(function(){if(CKEDITOR)for(var a in CKEDITOR.instances)if(b.id==CKEDITOR.instances[a].name){if(CKEDITOR.instances[a].loaded&&(0<pega.env.ua.gecko?CKEDITOR.instances[a]._.instanceReady:1))null!=window.chrome&&"undefined"!=
typeof window.chrome||pega.util.Event.isIE?window.setTimeout(function(){CKEDITOR.instances[a].focus()},200):CKEDITOR.instances[a].focus();else CKEDITOR.instances[a].on("instanceReady",function(){try{CKEDITOR.instances[a].focus()}catch(k){}});break}},70);else if(b){var d=!0;try{var f=pega.u.d.submitModalDlgParam.associatedElement;if(pega.u.d.submitModalDlgParam&&f){var e=f.type,g=pega.u.d.modalDialog&&pega.util.Dom.isAncestor(pega.u.d.modalDialog.body,f)?!0:!1;"string"!==typeof e||("button"!==e||g)&&
"a"!==e||(d=!1)}}catch(h){}d&&(null!=window.chrome&&"undefined"!=typeof window.chrome||0<=navigator.userAgent.indexOf("Firefox/"))?b.focus():window.setTimeout(function(){try{b.focus(),pega.u.d.fixFocusInIE(b)}catch(h){}},50)}(d=pega.util.Dom.getElementsById("pyFlowActionHTML",a,"DIV"))&&0<d.length?(d=d[0].getAttribute("FA_TITLE"),d=d.replace(/^\s+|\s+$/g,"")):d="";a.setAttribute("role","dialog");a.setAttribute("aria-label",d);pega.util.Event.addListener(a,"keydown",pega.u.d.focusOffOverlay,[b,c,a])}else a.setAttribute("role",
"tooltip");a=$(a).find("li:eq(0)")[0];$(":not(.dummyBtn):tabbable:first",a).length||(a=pega.util.Dom.getElementsByClassName("sectionDivStyle","div",a),0<a.length&&(a[0].setAttribute("tabindex",0),a[0].focus()))}};
pega.ui.Doc.prototype.modalDialogCallBack=function(){var a=pega.u.d.gCallbackArgs;pega.u.d.useOldModalDialog&&(a.modalDialogBody.parentNode.style.width="");if(a.modalDialogBody.parentNode.parentNode){var b=a.modalDialogBody.parentNode.parentNode.className.split(" ");a.modalDialogBody.parentNode.parentNode.className=a.modalStyle&&""!=a.modalStyle?b[0]+" "+a.modalStyle:b[0]}pega.u.d.useOldModalDialog||pega.u.d.setModalDimensions();pega.u.d.bResizeModalDlg=!1;pega.u.d.callResizeHarness=!1;pega.u.d.loadHTMLEleCallback(a.domObj);
pega.u.d.callResizeHarness=!0;var c="",d=b="";(a.bShowAsModal||a.bIsFlowActionModal||pega.u.d.bModalDialogOpen)&&pega.u.d.useOldModalDialog&&(0==pega.u.d.modalTabContentWidth&&(a.modalDialogBody.parentNode.style.width=parseInt(a.modalDialogBody.scrollWidth)+pega.u.d.SCROLL_ADJUSTMENT+"px"),pega.u.d.resizeModalDialog(),"undefined"!=typeof a.displayAtClick&&a.displayAtClick&&(b=a.displayAtClick));a.bIsFlowActionModal&&(pega.u.d.useOldModalDialog&&pega.u.d.positionModalDialog(a),pega.u.d.processModalCallbak("OPEN"),
c=pega.u.d.closeModalFlowAction);pega.u.d.useOldModalDialog&&(pega.u.d.bResizeModalDlg=!0);!1===a.sectionOnly&&(d={parentDiv:a.parentDiv,onAfterSubmit:a.onAfterSubmit,onAfterCancel:a.onAfterCancel,bShowAsModal:a.bShowAsModal,streamName:a.streamName,pageName:a.pageName,specialButtons:a.specialButtons,label:"",bClose:!0,includedStreamName:a.includedStreamName,sectionOnly:a.sectionOnly,sectionParams:a.sectionParams},pega.u.d.attachModalBtnListeners({submitClickApi:pega.u.d.submitSection,cancelClickApi:pega.u.d.cancelSection},
d),a.bShowAsModal&&(c=pega.u.d.cancelSection));(a.bShowAsModal||a.bIsFlowActionModal)&&pega.u.d.attachCloseBtnListeners({closeBtnApi:c},d);if(a.specialButtons)for(var d=d=c=null,f=a.specialButtons.length,e=0;e<f;e++)d=a.specialButtons[e],(c=pega.util.Dom.getElementsById("Modal"+d.caption,a.parentDiv))&&0<c.length&&(c=c[0],1==d.disable?c.disabled=!0:(c.disabled=!1,d={parentDiv:a.parentDiv,onAfterSubmit:a.onAfterSubmit,onAfterCancel:a.onAfterCancel,bShowAsModal:a.bShowAsModal,streamName:a.streamName,
pageName:a.pageName,specialButtons:a.specialButtons,label:d.caption,bClose:d.close,includedStreamName:a.includedStreamName,sectionOnly:a.sectionOnly,sectionParams:a.sectionParams},pega.util.Event.addListener(c,"click",pega.u.d.submitSection,d,this)));a.bShowAsModal&&b?(a=pega.u.d.modalDialog.innerElement,f=pega.u.d.getScrollObj(a),c=d="",e=0,f?(c=f[0],d=f[1],e=f[2]):(c=window.document.body,d=window,e=0),d==window&&b&&(b[2]+=c.scrollTop),f=pega.u.d.getCoordinates(a)[1]+parseInt(e)-pega.u.d.getCoordinates(c)[1],
e=c.offsetHeight,c!=d.document.body||pega.util.Event.isIE||(e=d.innerHeight),a=f+a.offsetHeight-parseInt(c.scrollTop)-parseInt(e),0<a?b?pega.u.d.modalDialog.cfg.setProperty("y",b[2]-a-10):pega.u.d.modalDialog.cfg.setProperty("y",pega.u.d.modalDialog.cfg.getProperty("y")-a-10):b&&pega.u.d.modalDialog.cfg.setProperty("y",b[2])):a.bShowAsModal&&pega.u.d.bModalDialogOpen&&pega.u.d.useOldModalDialog&&pega.u.d.positionModalDialog(a);pega.u.d.gBusyInd&&pega.u.d.gBusyInd.hide&&pega.u.d.gBusyInd.hide(null,
!0);pega.u.d.gCallbackArgs=null;"undefined"!=typeof LayoutGroupModule&&LayoutGroupModule.checkForErrors();setTimeout(function(){pega.u.d.focusOnModalDialogFirstElement()},0)};
pega.ui.Doc.prototype.positionModalDialog=function(a){if(pega.u.d.useOldModalDialog){if(a.bFixedCenter)pega.u.d.modalDialog.cfg.setProperty("fixedcenter",!0);else{var b=10;document.body.offsetWidth>a.modalDialogBody.offsetWidth&&(b=parseInt(document.body.offsetWidth-a.modalDialogBody.offsetWidth)/2+document.body.scrollLeft);pega.u.d.modalDialog.cfg.setProperty("x",b);var c,d=!1,f=b=null,e="actionIFrame"==window.frames.name;e?(c=window.parent.frameElement,null!=c&&"undefined"!=typeof c.PegaWebGadget&&
"undefined"!=typeof window.parent.parent.pega&&"undefined"!=typeof window.parent.parent.pega.u&&"undefined"!=typeof window.parent.parent.pega.u.d&&window.parent.parent.pega.u.d.isPortal()&&(d=!0,b=parent.pega.u.d.getPanelDiv(),f=parent.parent.document.body)):(c=window.frameElement,null!=c&&"undefined"!=typeof c.PegaWebGadget&&"undefined"!=typeof window.parent.pega&&"undefined"!=typeof window.parent.pega.u&&"undefined"!=typeof window.parent.pega.u.d&&window.parent.pega.u.d.isPortal()&&(d=!0,b=pega.u.d.getPanelDiv()));
d&&b?b.parentNode.offsetHeight<a.modalDialogBody.offsetHeight&&pega.u.d.modalDialog.cfg.setProperty("y",0):parent.document.body.offsetHeight<a.modalDialogBody.offsetHeight&&pega.u.d.modalDialog.cfg.setProperty("y",0);var g;pega.u.d.modalDialog.cfg.getProperty("y");g=a.top;d&&b?(c=e?pega.u.d.getOffSet(window.frameElement,window.parent.frameElement.contentWindow.document.body)+pega.u.d.getOffSet(c,f)-pega.u.d.getOffSet(b,f):pega.u.d.getOffSet(window.frameElement,b.parentNode),e?0<b.parentNode.scrollTop-
c?g-(b.parentNode.scrollTop-c)<a.modalDialogBody.offsetHeight/2&&(g=b.parentNode.scrollTop-c):g-(c-b.parentNode.scrollTop)<a.modalDialogBody.offsetHeight/2&&(g=0):(b.parentNode.scrollTop>c&&g-a.modalDialogBody.offsetHeight/2<b.parentNode.scrollTop-c&&(g=b.parentNode.scrollTop-c+(document.body.offsetHeight-(b.parentNode.scrollTop-c))/2),g>a.modalDialogBody.offsetHeight/2?g-=a.modalDialogBody.offsetHeight/2:(g=g-(a.modalDialogBody.offsetHeight/2-g)-a.modalDialogBody.offsetHeight/2,0>g&&(g=0)))):e&&
(c=pega.u.d.getOffSet(window.frameElement,window.parent.document.body),c>parent.document.body.scrollTop?parent.document.body.clientHeight-c>a.modalDialogBody.offsetHeight?g>a.modalDialogBody.offsetHeight/2&&(g-=a.modalDialogBody.offsetHeight/2):g=0:g=parent.document.body.clientHeight>a.modalDialogBody.offsetHeight?g-a.modalDialogBody.offsetHeight/2:parent.document.body.scrollTop-c);g+a.modalDialogBody.offsetHeight>document.body.offsetHeight&&(g=document.body.offsetHeight-a.modalDialogBody.offsetHeight);
0<=g&&pega.u.d.modalDialog.cfg.setProperty("y",g)}"auto"==a.modalDialogBody.style.overflow&&(a.modalDialogBody.scrollTop=0)}};
pega.ui.Doc.prototype.prePositionModalDialog=function(){if(!pega.u.d.useOldModalDialog)return[!0,0];try{var a="BackCompat"==parent.document.compatMode,b=!0,c=null,d=!1,f=null,e=null;"actionIFrame"==window.frames.name?(c=window.parent.frameElement,null!=c&&"undefined"!=typeof c.PegaWebGadget&&"undefined"!=typeof window.parent.parent.pega&&"undefined"!=typeof window.parent.parent.pega.u&&"undefined"!=typeof window.parent.parent.pega.u.d&&window.parent.parent.pega.u.d.isPortal()&&(d=!0,f=parent.pega.u.d.getPanelDiv(),
e=parent.parent.document.body)):(c=window.frameElement,null!=c&&"undefined"!=typeof c.PegaWebGadget&&"undefined"!=typeof window.parent.pega&&"undefined"!=typeof window.parent.pega.u&&"undefined"!=typeof window.parent.pega.u.d&&window.parent.pega.u.d.isPortal()&&(d=!0,f=pega.u.d.getPanelDiv()));if(d&&f)f.parentNode.offsetHeight<document.body.offsetHeight&&(b=!1);else if(window.frameElement&&"IFRAME"==window.frameElement.tagName.toUpperCase()&&parent.document.body){var g=a?parent.document.body.clientHeight:
parent.document.documentElement.clientHeight;g<document.body.clientHeight&&(b=!1)}var h=0;if(!b)if(pega.u.d.modalDialog.cfg.setProperty("fixedcenter",!1),d&&f){var k=0,k="actionIFrame"==window.frames.name?pega.u.d.getOffSet(window.frameElement,window.parent.frameElement.contentWindow.document.body)+pega.u.d.getOffSet(c,e)-pega.u.d.getOffSet(f,e):pega.u.d.getOffSet(window.frameElement,f.parentNode);f.parentNode.offsetHeight<document.body.offsetHeight&&(h=f.parentNode.offsetHeight/2-k+f.parentNode.scrollTop,
0<h&&pega.u.d.modalDialog.cfg.setProperty("y",h))}else{var g=a?parent.document.body.clientHeight:parent.document.documentElement.clientHeight,l=parent.document.body.scrollTop||parent.document.documentElement.scrollTop;g<document.body.clientHeight&&("actionIFrame"==window.frames.name||window.frameElement&&window.frameElement.parentNode&&window.frameElement.parentNode.attributes.PegaGadget&&window.frameElement.parentNode.attributes.PegaGadget.nodeValue?(k=0,k=pega.u.d.getOffSet(window.frameElement,
window.parent.document.body),h=l>k?l-k+g/3:(g-(k-l))/3):h=pega.u.d.MODALDIALOG_ADJUSTMENT+l,pega.u.d.modalDialog.cfg.setProperty("y",h))}return[b,h]}catch(p){}return[!0,0]};
pega.ui.Doc.prototype.handleShowSectionSuccess=function(a){var b=a.argument[0],c=a.argument[1],d=a.argument[2],f=a.argument[3],e=a.argument[4],g=a.argument[5],h=a.responseText,k=a.argument[7],l=a.argument[8],p=a.argument[9],v=a.argument[10];a=a.argument[11];pega.u.d.useOldModalDialog||(p=!1);var t=pega.util.Dom.getElementsByAttribute("node_type","MAIN_RULE","DIV",b);if(t)for(var n=t.length,r=0;r<n;r++){var w=t[r],u=t[r].getAttribute("uniqueID");(w.id=u&&""!=u)&&this.removeFromMemory(u)}var z=pega.u.d.modalDialog.body,
t=0,n=!0;!p&&pega.u.d.bModalDialogOpen&&pega.u.d.useOldModalDialog&&(n=pega.u.d.prePositionModalDialog(),t=n[1],n=n[0]);pega.u.d.gCallbackArgs={bShowAsModal:f,modalDialogBody:z,parentDiv:b,onAfterSubmit:c,onAfterCancel:d,streamName:e,pageName:k,specialButtons:l,displayAtClick:p,sectionOnly:g,includedStreamName:v,sectionParams:a,top:t,bFixedCenter:n};c=function(){if(f){b.style.display="block";pega.u.d.bModalRendered||pega.u.d.renderModal();p&&(pega.u.d.modalDialog.cfg.setProperty("fixedcenter",!1),
pega.u.d.modalDialog.cfg.setProperty("y",p[2]),pega.u.d.modalDialog.cfg.setProperty("x",p[1]));pega.u.d.modalDialog.setTransitions&&pega.u.d.submitModalDlgParam&&pega.u.d.modalDialog.setTransitions(pega.u.d.submitModalDlgParam.animObj,pega.u.d.submitModalDlgParam.isLocalAction,pega.u.d.submitModalDlgParam.isMobileFullScreen);pega.u.d.modalDialog.show();pega.util.Dom.getElementsById("PegaRULESErrorFlag",document)&&"true"!=pega.u.d.alwaysShowFormLevelErrors||pega.u.d.handleFormErrors(z);var a=pega.util.Dom.getElementsById("ERRORTABLE",
z);if(a&&(a.id="ERRORTABLEONMODAL",a[0]))for(var c=a.length,d=0;d<c;d++)a[d].parentNode.removeChild(a[d]);pega.u.d.modalDialogExtras()}pega.u.d.modalDialogCallBack.call()};f?(pega.u.d.gCallbackArgs.domObj=z,pega.u.d.loadDOMObject(z,h,c),h=pega.util.Dom.getElementsById("PegaOnlyOnce",z)):(pega.util.Dom.setStyle(b,"display","inline"),pega.u.d.gCallbackArgs.domObj=b,pega.u.d.loadDOMObject(b,h,c),h=pega.util.Dom.getElementsById("PegaOnlyOnce",b));h&&(h.id="PegaOnlyOnceOnModal",h[0]&&(pega.u.d.handleOnlyOnce(h[0]),
h[0].parentNode.removeChild(h[0])))};pega.ui.Doc.prototype.handleShowSectionFail=function(a){pega.u.d.gBusyInd.hide();alert("Failed to get the section stream.")};
pega.ui.Doc.prototype.renderModal=function(){pega.u.d.useOldModalDialog&&(pega.u.d.bModalDialogOpen=!0,pega.u.d.modalDialog.render(),pega.u.d.modalDialog.unsubscribe("beforeShow",pega.u.d.modalDialog.showMask),pega.u.d.modalDialog.subscribe("beforeShow",pega.u.d.showHarnessMask,pega.u.d.modalDialog,!0),pega.u.d.modalDialog.unsubscribe("hide",pega.u.d.modalDialog.hideMask),pega.u.d.modalDialog.subscribe("hide",pega.u.d.hideHarnessMask,pega.u.d.modalDialog,!0),pega.u.d.modalDialog.unsubscribe("beforeShow",
pega.u.d.modalDialog.bringToTop))};pega.ui.Doc.prototype.displaySectionInTemplate=function(a,b,c,d,f,e,g,h){this.displaySection(b,d,f,!1,e,g,null,h,a,c)};
pega.ui.Doc.prototype.closeModalFlowAction=function(a,b){pega.u.d.closeChildOverLay(a)||((b=pega.util.Dom.getElementsById("ModalButtonCancel",pega.u.d.modalDialog.innerElement))&&0<b.length?pega.util.Event.fireEvent(b[0],"click"):pega.u.d.submitModalDlgParam&&""!=pega.u.d.submitModalDlgParam.taskStatus?(b=pega.ctx.activeGrid,"undefined"!=typeof pega.u.d.submitModalDlgParam.activeGrid&&pega.u.d.submitModalDlgParam.activeGrid&&(b=pega.u.d.submitModalDlgParam.activeGrid),"undefined"!=typeof b&&b&&b.gridDiv&&
pega.util.Dom.isAncestor(b.gridDiv,pega.u.d.submitModalDlgParam.associatedElement)?b.cancelModal(a,"pyGridModalTemplate"):pega.u.d.performFlowAction("",a,"",pega.u.d.submitModalDlgParam.taskStatus)):pega.u.d.hideModalWindow())};pega.ui.Doc.prototype.findForm=function(a){for(var b=document.forms,c,d=0;d<b.length;d++){var f=document.forms[d];if(f.hasAttribute("id")&&f.id===a){c=f;break}}c||(c=document.forms[0]);return c};
pega.ui.Doc.prototype.performFlowAction=function(a,b,c,d,f,e,g,h){pega.u.d.useOldModalDialog&&(pega.u.d.modalDialog.body=document.getElementById("modaldialog_bd"));if(pega.u.d.overLaySubmit)pega.u.d.overLaySubmit=!1;else{var k=pega.u.d.modalDialog.innerElement;f&&(k=f,"undefined"==typeof pega.u.d.actionName&&(pega.u.d.actionName=""),""!=pega.u.d.actionName&&(a=pega.u.d.actionName,pega.u.d.actionName=""));if(!a||pega.u.d.shouldSubmitProceed(b,k)){(b=void 0==b?window.event:b)&&13==b.keyCode&&(pega.util.Event.stopPropagation(b),
pega.util.Event.preventDefault(b));pega.u.d.disableAllOtherButtons(null,k);var l=function(a,b,c,d,e,f,g,l,h){b=pega.ui.HarnessContextMgr;l=SafeURL_createFromURL(b.get("url"));var p="SubmitModalFlowAction";""==a&&pega.u.d.submitModalDlgParam&&pega.u.d.submitModalDlgParam.isAddingNewRow&&(p=pega.u.d.submitModalDlgParam.cancelModalActivity);var m=pega.ctx.RDL.masterDetailsParams&&pega.ctx.RDL.masterDetailsParams.isShowDetailsOpen,n=m&&pega.ctx.RDL.masterDetailsParams&&pega.ctx.RDL.masterDetailsParams.__RDLWOThreadInitialized,
t=null;pega.ui.rdlMasterDetails&&(t=pega.ui.rdlMasterDetails.getActiveRDLMetaInfo());if(pega.u.d.ServerProxy.isDestinationRemote()&&a&&m&&n&&t){l.put("BaseThreadContext",pega.u.d.baseThreadName);var q=pega.u.ChangeTrackerMap.getTrackerByThread(pega.u.d.baseThreadName);q&&q.id&&l.put("BaseThreadAJAXTrackID",q.id);var r=t.rowPage;pega.u.d.ServerProxy.isDestinationRemote()&&pega.u.d.ServerProxy.isHybridClient()&&pega.ui.ParametrizedDPUtils.isParametrizedDataPageInstance(r,q)&&l.put("isRDLFromOSCO","true");
l.put("rowPage",t.rowPage);l.put("pzPrimaryPageName","pyWorkPage")}m&&(p="ShowStream",l.put("pyTargetStream","pzRDLWOProcessing"),""==a?l.put("releaseWOLock",!0):(l.put("RDLSectionContext",t.RDLSectionContext),l.put("StreamName",t.RDLSectionName),l.put("StreamClass","Rule-HTML-Section"),l.put("pyCallStreamMethod",t.rowMethodName),l.put("listSource",t.RDLSource),l.put("index",t.rowIndex),pega.u.d.ServerProxy.isHybridClient()&&l.put("isRemoteCase",pega.u.d.ServerProxy.isDestinationRemote())));m="";
if(pega.ui.RDL&&pega.u.d.submitModalDlgParam&&pega.u.d.submitModalDlgParam.isAddingNewRow&&"INSERTLAST"===pega.u.d.submitModalDlgParam.position&&""!=a){m=pega.ui.RDL.getAndUpdateAllRDLsForPartialRefresh(pega.u.d.submitModalDlgParam.datasource);t=[];for(q=0;q<m.length;q++){var v=pega.u.d.getSectionDiv(m[q].RDLNode),r=pega.u.d.getBaseRef(v)||pega.u.d.primaryPageName,v=v.getAttribute("node_name"),u=m[q].templatingStatus,w=m[q].RDLNode.getAttribute("data-rowmethodname")||"";t.push(r+","+v+","+w+","+u)}if(m=
t.join("||"))p="ShowStream",l.put("listSource",pega.u.d.submitModalDlgParam.datasource),l.put("pyTargetStream","pzGetRowMarkup")}l.put("pyActivity",p);l.put("actionName",a);(p=$(k).find("#RULE_KEY").attr("data-fullpath"))&&l.put("pxRemoveTemplate",p);l.put("KeepMessages",pega.u.d.KeepMessages);pega.ctx.activeGrid&&pega.ctx.activeGrid.bNoThreadProcess&&l.put("noThreadProcess",pega.ctx.activeGrid.bNoThreadProcess);pega.ctx.activeGrid&&pega.ctx.activeGrid.threadProcessing&&"modal"==pega.ctx.activeGrid.editConfig&&
!e&&(l.put("releaseWOLock",pega.ctx.activeGrid.threadProcessing),l.put("pzPrimaryPageName","pyWorkPage"));d&&l.put("ModalActionName",d);b.get("fieldErrorType")&&l.put("FieldError",b.get("fieldErrorType"));b.get("formErrorType")&&l.put("FormError",b.get("formErrorType"));b.get("pyCustomError")&&l.put("pyCustomError",b.get("pyCustomError"));if(pega.u.d.submitModalDlgParam){(d=pega.u.d.submitModalDlgParam.modalSection)&&l.put("modalSection",d);var y=pega.u.d.submitModalDlgParam.bIsOverlay;y||(y="false");
l.put("bIsOverlay",y)}(d=pega.util.Dom.getElementsById("pyFlowActionHTML",k,"DIV"))&&0<d.length&&(d=d[0],(p=d.getAttribute("PRIM_PAGE"))&&l.put("InterestPage",p));c?l.put("pyTempInterestPage",c):d&&(c=d.getAttribute("TEMP_BASE_REF"))&&l.put("pyTempInterestPage",c);c=pega.u.d.modalDialog.body;d=pega.ui.HarnessContextMap.getCurrentHarnessContext();e&&(c=k);"ACTION"!=d.getProperty("strHarnessMode")&&l.put("HarnessType","NEW");pega.ctx.isUITemplatized&&l.put("UITemplatingStatus","Y");try{if(h){var F=
$(k).find("#postAutomationMeta")[0].getAttribute("data-automation-primaryPage");for(H in h){var z=pega.u.property.toHandle(F+"."+H);$(k).find('[name \x3d "'+z+'"]').val(h[H])}}}catch(K){console.log("Failure in updating the DOM with automation data")}if((h=pega.util.Dom.getElementsById("RULE_KEY",c))&&0<h.length){if(h=h[0],queryString=pega.u.d.getQueryString(h,!1,!1,!0),n){h="";for(var H in queryString.hashtable)F=pega.ui.property.toReference(H),h+=F.substr(F.indexOf("."))+",";queryString.put("submittedProperties",
h.substr(0,h.lastIndexOf(",")))}}else queryString=pega.u.d.getQueryString(c,!1,!1,!0);m&&queryString.put("streamList",m);pega.u.d.setBusyIndicator(null,!1,f);f=e?{success:function(a){pega.u.d.performOverlayCallback(a,e,g)},failure:function(a){pega.u.d.gBusyInd.hide();pega.u.d.resetSubmitModalDlgParam()},scope:pega.u.d}:{success:pega.u.d.performFlowACallback,failure:function(a){pega.u.d.gBusyInd.hide();pega.u.d.hideModalWindow()},scope:pega.u.d};b.get("strHarnessPurpose")&&-1!==b.get("strHarnessPurpose").indexOf("pzPMCModalTemplate")&&
l.put("autoSaveRequired","true");pega.u.d.ServerProxy.doAction(l,""==a?"":queryString,{scope:pega.u.d,online:function(a,b,c){pega.u.d.asyncRequest("POST",a,c,b,void 0)},offline:function(){pega.ui.ProcessActionOffline.submitLocalAction(y,g,a,a,""==a?"":queryString);pega.u.d.resumeAjaxSequencer()}},f)};if(pega.ui.roboticAutomation){var p=pega.ui.roboticAutomation.isAutomationConfigured("submit",k);p&&""!=a&&"false"==pega.ui.roboticAutomation.skipAutomation(k)?pega.ui.roboticAutomation.runAutomation("submit",
k,l,[a,b,c,d,f,e,g,h]):(p&&"true"==p.getAttribute("skipAutomation")&&p.setAttribute("skipAutomation","false"),l(a,b,c,d,f,e,g,h))}else l(a,b,c,d,f,e,g,h)}}};pega.ui.Doc.prototype.performOverlayCallback=function(a,b,c){pega.u.d.performFlowACallback(a,b,c)};
pega.ui.Doc.prototype.performFlowACallback=function(a,b,c){var d;pega.u.d.submitModalDlgParam&&pega.u.d.submitModalDlgParam.associatedElement&&(d=pega.u.d.submitModalDlgParam.associatedElement);if("CANCEL"==a.responseText){var f=pega.u.d.submitModalDlgParamStack.length;if(pega.ctx.activeGrid&&0>=f){var e=pega.ctx.activeGrid;"undefined"!=typeof e.modalThreadContext&&e.baseThreadContext&&""!=e.modalThreadContext&&e.modalThreadContext!=e.baseThreadContext&&!e.bNoThreadProcess&&(pega.u.d.switchThread(e.baseThreadContext),
this.switchPrimaryPage(this.basePrimaryPageName),a=SafeURL_createFromURL(this.url),a.put("pyActivity","removeThead"),a.put("threadName",e.modalThreadContext),this.asyncRequest("POST",a));f=pega.ctx.activeGrid.getIndex(pega.ctx.activeGrid.activeRow);pega.ctx.activeGrid.selectPage(null,null,f)}if(pega.u.d.submitModalDlgParam&&pega.u.d.submitModalDlgParam.userCallbackObj&&"function"===typeof pega.u.d.submitModalDlgParam.userCallbackObj.cancel)var g=pega.u.d.submitModalDlgParam.userCallbackObj;if(b){if(pega.u.d.insertButton=
null,pega.u.d.resetSubmitModalDlgParam(),d)if("tabclickaway"==c){if(b=pega.u.d.getNextFocusableElement(d,document))try{pega.u.d.focusDomElement(b)}catch(w){return}}else try{"clickaway"!=c&&(pega.util.Event.isIE&&(pega.u.d.focusElement=d),pega.u.d.focusDomElement(d))}catch(w){return}}else pega.u.d.hideModalWindow(),pega.u.d.processModalCallbak("CLOSE"),pega.u.d.insertButton&&pega.u.d.focusDomElement(pega.u.d.insertButton),pega.u.d.insertButton=null;g&&"function"===typeof g.cancel&&(b=g.cancel,g.scope?
b.call(pega.u.d.submitModalDlgParam.userCallbackObj.scope):b())}else if(-1<a.responseText.indexOf("COMMIT||")&&-1==a.responseText.indexOf("\x3c!--COMMIT")){var f=a.responseText.split("||"),h=f[1].trim(),f=2<f.length&&f[2]&&0==f[2].indexOf("pxClientFrame:")?f[2].substring(14):"",e=SafeURL_createFromURL(pega.u.d.url);h?e.put("pzTransactionId",h):delete e.hashtable.pzTransactionId;pega.u.d.url=e.toURL();if(pega.u.d.baseThreadName===pega.u.d.getThreadName()||pega.ctx.isMDC){var k=!1;if(f){if(f==pega.ctx.baseFrameName||
pega.u.d.bIsDCSPA)k=!0}else k=!0;g=pega.ui.ChangeTrackerMap.getTracker();k&&g.trackedPropertiesList&&g.trackedPropertiesList.pxThread&&(g.trackedPropertiesList.pxThread.pxClientExchange=h);pega.u.d.bIsDCSPA&&g.threadName==pega.u.d.getThreadName()&&(g.trackedPropertiesList.pxThread=g.trackedPropertiesList.pxThread||{},g.trackedPropertiesList.pxThread.pxClientFrame=f,pega.ctx.baseFrameName=f)}document&&document.forms[0]&&(k=document.forms[0].action,k=SafeURL_createFromURL(k),h?k.put("pzTransactionId",
h):delete e.hashtable.pzTransactionId,document.forms[0].action=k.toURL());b?(f=pega.u.d.getPopOver(pega.u.d.insertButton),pega.u.d.overLaySubmit=!0,f.close(),d&&pega.u.d.focusDomElement(d)):pega.u.d.insertButton&&pega.u.d.focusDomElement(pega.u.d.insertButton);pega.u.d.submitModalDlgParam&&"undefined"!=typeof pega.u.d.submitModalDlgParam.bReload&&0==pega.u.d.submitModalDlgParam.bReload||(!b&&pega.u.d.submitModalDlgParam.associatedElement?pega.u.d.reloadSection(pega.u.d.submitModalDlgParam.associatedElement,
"","",!1,!1,"",!1):pega.u.d.reloadSection(pega.u.d.insertButton,"","",!1,!1,"",!1));pega.ctx.activeGrid&&(!pega.u.d.submitModalDlgParamStack||pega.u.d.submitModalDlgParamStack&&0>=pega.u.d.submitModalDlgParamStack.length)&&pega.ctx.activeGrid.focusOnNewEditableRow();pega.u.d.submitModalDlgParam&&pega.u.d.submitModalDlgParam.userCallbackObj&&(f=pega.u.d.submitModalDlgParam.userCallbackObj,"function"===typeof f?f():"function"===typeof f.submit&&(f.scope?f.submit.call(f.scope):(f=f.submit,(d=(d=pega.ui.rdlMasterDetails)&&
d.getActiveRDLMetaInfo())&&d.showDetailsNode||pega.u.d.submitModalDlgParam&&pega.u.d.submitModalDlgParam.isAddingNewRow&&"INSERTLAST"===pega.u.d.submitModalDlgParam.position?f(a):f())));b?pega.u.d.resetSubmitModalDlgParam():(pega.u.d.submitModalDlgParam&&"undefined"!=typeof pega.u.d.submitModalDlgParam.bReload&&0==pega.u.d.submitModalDlgParam.bReload||(pega.u.d.regHeavyOperations=!0),pega.u.d.hideModalWindow(),pega.u.d.regHeavyOperations&&delete pega.u.d.regHeavyOperations,pega.u.d.processModalCallbak("CLOSE"))}else{if(a.argument&&
a.argument[6]&&"undefined"!=typeof a.argument[7]&&a.argument[7]&&a.argument[7].editConfig&&("harness"==a.argument[7].editConfig||"expandPane"==a.argument[7].editConfig)){h=a.argument[7];if("harness"==a.argument[7].editConfig)var l=!0;"expandPane"==a.argument[7].editConfig&&(k=!0)}if(l||k){d=a.responseText;a=document.createElement("DIV");a.innerHTML=d;(g=pega.util.Dom.getElementsById("PegaOnlyOnce",a))&&g[0]&&(pega.u.d.handleOnlyOnce(g[0]),g[0].parentNode.removeChild(g[0]));if((g=pega.util.Dom.getElementsById("modaldialog_con",
a))&&g[0]){g=pega.util.Dom.getChildren(g[0]);c=g.length;for(var l=null,p=0;p<c;p++)(l=g[p])&&"pyFlowActionHTML"!=l.id&&$(l).remove()}k?((b=h.getRightRow())&&(e=pega.util.Dom.getNextSibling(b)),e&&(b=pega.util.Dom.getFirstChild(pega.util.Dom.getFirstChild(e)))&&pega.u.d.loadDOMObject(b,a.innerHTML)):pega.u.d.loadDOMObject(h.gridDetailsDiv,a.innerHTML);(k=pega.util.Dom.getElementsById("pyFlowActionHTML",h.gridDetailsDiv,"DIV"))&&0<k.length&&h&&h.editConfig==h.EDIT_HARNESS&&(e=h,k=k[0],e.modalThreadContext=
k.getAttribute("THREAD_NAME"),e.isLocked="true"==k.getAttribute("LOCKED"),e.isLocked&&(e.DONOT_SUBMIT="true"),pega.u.d.attachClickForGridButtons(e,h.gridDetailsDiv,e.templateName||"pyGridDetails"));a.innerHTML=d;(f=pega.util.Dom.getElementsById("PegaRULESErrorFlag",document))&&"true"!=pega.u.d.alwaysShowFormLevelErrors||this.handleFormErrors(a)}else{pega.util.Event.isIE&&!b&&pega.u.d.modalDialog.cfg.setProperty("height","0");d=a.responseText;-1<d.indexOf("\x3chtml\x3e")&&pega.ctx.activeGrid&&(e=pega.ctx.activeGrid,
"undefined"!=typeof e.modalThreadContext&&""!=e.modalThreadContext&&e.modalThreadContext!=e.baseThreadContext&&(pega.u.d.switchThread(e.baseThreadContext),this.switchPrimaryPage(this.basePrimaryPageName),a=SafeURL_createFromURL(this.url),a.put("pyActivity","removeThead"),a.put("threadName",e.modalThreadContext),this.asyncRequest("POST",a)));a=d.indexOf("\x3c!--COMMIT||");-1!=a&&(h=d.substring(a+12,d.lastIndexOf("||COMMIT--\x3e")),e=SafeURL_createFromURL(pega.u.d.url),e.put("pzTransactionId",h),pega.u.d.url=
e.toURL(),pega.u.d.baseThreadName===pega.u.d.getThreadName()&&pega.ui.ChangeTrackerMap.getTracker().trackedPropertiesList.pxThread&&(pega.ui.ChangeTrackerMap.getTracker().trackedPropertiesList.pxThread.pxClientExchange=h),document&&document.forms&&document.forms[0]&&(k=document.forms[0].action,k=SafeURL_createFromURL(k),k.put("pzTransactionId",h),document.forms[0].action=k.toURL()));a=document.createElement("DIV");a.innerHTML=d;(g=pega.util.Dom.getElementsById("PegaOnlyOnce",a))&&g[0]&&(pega.u.d.handleOnlyOnce(g[0]),
g[0].parentNode.removeChild(g[0]));if((g=pega.util.Dom.getElementsById("modaldialog_con",a))&&g[0])for(g=pega.util.Dom.getChildren(g[0]),c=g.length,l=null,p=0;p<c;p++)(l=g[p])&&"pyFlowActionHTML"!=l.id&&$(l).remove();var v=pega.u.d.modalDialog.body;b&&(h=pega.util.Dom.getElementsByAttribute("node_type","MAIN_RULE","DIV",b))&&0<h.length&&(v=h[0]);pega.u.d.cleanUpHarnessElements(null,[v]);pega.u.d.loadDOMObject(v,a.innerHTML);v&&docFocus&&setTimeout(function(){docFocus.focusToFirstInvalidField(v)},
0);(k=pega.util.Dom.getElementsById("pyFlowActionHTML",v,"DIV"))&&0<k.length&&pega.ctx.activeGrid&&(pega.u.d.submitModalDlgParam&&$.contains(pega.ctx.activeGrid.gridDiv,pega.u.d.submitModalDlgParam.reloadElement)||!pega.u.d.submitModalDlgParam&&pega.ctx.activeGrid.editConfig===pega.ctx.activeGrid.EDIT_MODAL)&&(e=pega.ctx.activeGrid,k=k[0],e.modalThreadContext=k.getAttribute("THREAD_NAME"),e.isLocked="true"==k.getAttribute("LOCKED"),e.isLocked&&(e.DONOT_SUBMIT="true"),b||((h=v.children[0])&&(f=h.getAttribute("node_name")),
f||(f="pyGridModalTemplate"),pega.u.d.attachClickForGridButtons(e,v,f)));!b&&pega.util.Event.isIE&&pega.u.d.modalDialog.cfg.setProperty("height","0");a.innerHTML=d;(f=pega.util.Dom.getElementsById("PegaRULESErrorFlag",document))&&"true"!=pega.u.d.alwaysShowFormLevelErrors||this.handleFormErrors(a);if(!b)pega.u.d.processModalCallbak("ERROR"),pega.u.d.attachCloseBtnListeners({closeBtnApi:pega.u.d.closeModalFlowAction},null),pega.u.d.submitModalDlgParam&&pega.u.d.modalDialogExtras(pega.u.d.submitModalDlgParam.ModalWindowSize);
else if(b&&(f=pega.u.d.getPopOver(pega.u.d.insertButton),b=f.getActivePopOverElement())){var f=b.getElementsByTagName("table"),t=!1,n=!1;for(d=0;d<f.length;d++)if("ERRORTABLE"===f[d].getAttribute("id")){t=!0;break}if(!t)for(f=b.getElementsByTagName("span"),d=0;d<f.length;d++)if("iconError dynamic-icon-error"===f[d].getAttribute("class")){n=!0;break}var r=pega.u.d.getFirstFocusableElement(b.id);window.setTimeout(function(){try{n||t||pega.u.d.focusDomElement(r)}catch(w){}},50)}}}"undefined"!=typeof LayoutGroupModule&&
LayoutGroupModule.checkForErrors();pega.u.d.gBusyInd.hide(null,!0)};
pega.ui.Doc.prototype.nullifyComplexElementsInModal=function(a){for(var b=pega.u.d.getHarnessElements(!1,!1,!0),c=b.length,d=0;d<c;d++){var f=b[d],e=f.element;e&&(1==e.isRichTextEditor&&void 0!=e.myEditor&&void 0!=e.myEditor.get&&pega.util.Dom.isAncestor(pega.u.d.modalDialog.innerElement,e.myEditor.get("element"))||1==e.isRichTextEditor&&void 0!=e.txtAreaEl&&pega.util.Dom.isAncestor(pega.u.d.modalDialog.innerElement,e.txtAreaEl)||(e.bFocusibleGrid||e.bGrid||e.bTree||e.bTreegrid)&&pega.util.Dom.isAncestor(pega.u.d.modalDialog.innerElement,
e.gridDiv))&&(!a||a&&$&&-1<$.inArray("RTE",a)&&e.isRichTextEditor)&&(e.nullify(),this.harnessElements.splice(d,1),f.element=null)}};pega.ui.Doc.prototype.processModalCallbak=function(a){for(var b=this.modalCallback.length,c=0;c<b;c++)(0,this.modalCallback[c])(a)};
pega.ui.Doc.prototype.focusOnModalDialogFirstElement=function(){var a=document.querySelector("#modalContent").querySelector("#container_close");if(a&&pega.cl&&pega.cl.isTouchAble())a.focus();else if((a=pega.u.d.getFirstFocusableElement("modalContent"))&&"TEXTAREA"==a.nodeName&&-1!=a.className.indexOf("PEGACKEDITOR"))for(var b in CKEDITOR.instances){if(a.id==CKEDITOR.instances[b].name){CKEDITOR.instances[b].on("instanceReady",function(){try{CKEDITOR.instances[b].focus()}catch(f){}});break}}else if(a)try{a.focus(),
pega.u.d.fixFocusInIE(a)}catch(f){}a=document.getElementById("modalContent");pega.util.Event.removeListener(a,"keydown",pega.u.d.restrictFocus);var c=pega.u.d.getFirstFocusableElement("modalContent"),d=pega.u.d.getLastFocusableElement("modalContent");pega.util.Event.addListener(a,"keydown",pega.u.d.restrictFocus,[c,d])};pega.ui.Doc.prototype.offlineModalSuccessCallback=function(a){var b="";a&&0<a.length&&(b=a[0].content);pega.u.d.processActionModal_Success({responseText:b})};
pega.ui.Doc.prototype.offlineModalFailCallback=function(a,b){console.log("Error "+a+" loading ClientStore item: "+b)};pega.ui.Doc.prototype.processActionNetworkStatusCallback=function(a,b,c,d,f,e,g){pega.u.d.modalDialog||pega.u.d.modalDialogInit();pega.u.d._processActionModalOnlineHandler(a,b,c,d,f,e,g)};
pega.ui.Doc.prototype.processActionModal=function(a,b,c,d,f,e,g){if(null==g||"undefined"==typeof g)g=!1;null==e||null!=e.isCenterOverlay&&"undefined"!=typeof e.isCenterOverlay||(e.isCenterOverlay=!1);pega.u.d.ServerProxy.isDestinationLocal()?pega.u.d.processActionNetworkStatusCallback(a,b,c,d,f,e,g):pega.u.d._processActionModalOnlineHandler(a,b,c,d,f,e,g)};
pega.ui.Doc.prototype._processActionModalOnlineHandler=function(a,b,c,d,f,e,g){var h=pega.ui.HarnessContextMgr;pega.u.d.ServerProxy.isHybridClient()&&(pega.u.d.url=pega.u.d.url.replace("/PRRestService/","/PRServlet/"));if("undefined"==typeof b||!b)if(b=pega.util.Event.getTarget(c),null!=window.chrome&&"undefined"!=typeof window.chrome&&"BUTTON"!=b.nodeName&&(-1<pega.util.Dom.hasClass(b,"pzbtn-rnd")||-1<pega.util.Dom.hasClass(b,"pzbtn-lft")||-1<pega.util.Dom.hasClass(b,"pzbtn-rgt")||-1<pega.util.Dom.hasClass(b,
"pzbtn-mid")))for(;"BUTTON"!=b.nodeName;)if(b=b.parentNode,null==b||"undefined"==typeof b){b=pega.util.Event.getTarget(c);break}var k=null;"undefined"!=typeof a.get("FlowActionTarget")&&"overlay"==a.get("FlowActionTarget")&&(k="overlay");if("overlay"!=k||!b||pega.util.Dom.inDocument(b)){pega.u.d.usesModalTemplate=!0;this.insertButton=b;var l=null;"function"!==typeof isTemplateGrid||isTemplateGrid(c)||(l="function"==typeof this.getRepeatObject?this.getRepeatObject(b,!0):null);l&&"bodyTbl_right"==l.id&&
(l=null);var p="function"==typeof this.getRepeatRow?this.getRepeatRow(b):null,v=a.get("NewTaskStatus"),t="",n="",r="false";null!=a.get("modalStyle")&&(t=a.get("modalStyle"));null!=a.get("modalWindowSize")&&(n=a.get("modalWindowSize"));var w="",u="";"undefined"==typeof a.get("BaseReference")?(1==a.get("bInvokedFromControl")&&(w=""),l&&(u=this.getBaseRef(l,c)),""==u&&(u=this.getBaseRef(b,c,null)),a.put("BaseReference",u)):w=a.get("BaseReference");1==a.get("bInvokedFromControl")&&""!=w&&"."==w.slice(0,
1)&&(u=l?this.getBaseRef(l,c):this.getBaseRef(b,c),a.put("BaseReference",u+w));"true"!=a.get("KeepMessages")&&!0!==a.get("KeepMessages")||h.set("KeepMessages","true");null!=document.forms[0]&&(h.set("formEncodingType",document.forms[0].encoding),document.forms[0].encoding="application/x-www-form-urlencoded");u=!0;for(!this.firstBaseRefElement||"TD"!=this.firstBaseRefElement.tagName.toUpperCase()||l&&p||(u=!1);("RULE_KEY"!=b.id||"MAIN_RULE"!=b.getAttribute("node_type"))&&"PEGA_HARNESS"!=b.id;)if(b=
b.parentNode,null==b){var z=!1;break}if(this.isSafeToReload(b)){l&&p&&(u||""==a.get("BaseReference"))&&"undefined"==typeof a.get("PageListProp")&&(u=l.getAttribute("PL_PROP")||l.getAttribute("PG_PROP"),a.put("PageListProp",u+"("+p+")"));a.put("isModalFlowAction","true");a.put("bIsModal","true");a.put("bIsOverlay",r);(p=a.get("pyActivity"))&&""!=p?a.put("pyActivity",p):a.put("pyActivity","ProcessAction");a.put("StreamClass","Rule-HTML-Section");pega.ctx.isUITemplatized&&(a.get("UITemplatingStatus")||
a.put("UITemplatingStatus","Y"),"Y"==a.get("UITemplatingStatus")&&a.put("UITemplatingScriptLoad","true"));var p=SafeURL_createFromURL(h.get("url")),y=a.get("ModalSection");!l&&null!=c&&"undefined"!=typeof Grids&&Grids&&("undefined"==typeof pega.ctx.activeGrid||!pega.ctx.activeGrid||!pega.util.Dom.isAncestor(pega.ctx.activeGrid.gridDiv,pega.util.Event.getTarget(c))||Grids.getActiveGrid(c)&&pega.util.Dom.isAncestor(Grids.getActiveGrid(c).gridDiv,pega.util.Event.getTarget(c)))&&(u=Grids.getActiveGrid(c))&&
(pega.ctx.activeGrid=u);var u=e&&e.doNotSubmit?null:this.getQueryString(b),m=null,B,C,G;e&&e.isShowDetails&&(G=e.isShowDetails);"undefined"!=typeof a.get("activeGridObj")&&"object"==typeof a.get("activeGridObj")&&(m=a.get("activeGridObj"),d&&pega.ctx.activeGrid&&"EDITITEM"==pega.ctx.activeGrid.action&&m.editConfig==m.EDIT_EXPANDPANE&&delete pega.ctx.activeGrid.__fromLocalAction,B=m.editConfig==m.EDIT_HARNESS&&!m.isOpenLocalAction&&!m.__fromLocalAction,C=(m.editConfig==m.EDIT_EXPANDPANE||"pyGridRowDetails"==
y)&&!m.isOpenLocalAction&&!m.__fromLocalAction);var x=!0;if(c){var q=pega.util.Event.getTarget(c);(q=jQuery(q).closest("a"))&&"pui_colmenu"==q.attr("id")&&(x=!1)}if("pyModalTemplateDataViewAddColumn"==y||"pyModalTemplateDataViewRenameColumn"==y)x=!1;"undefined"!=typeof pega.ctx.activeGrid&&pega.ctx.activeGrid&&(d||pega.util.Dom.isAncestor(pega.ctx.activeGrid.gridDiv,pega.util.Event.getTarget(c))||pega.util.Dom.isAncestor(pega.ctx.activeGrid.gridDiv,pega.util.Event.getTarget(c)))&&!B&&!C&&(m=pega.ctx.activeGrid,
B=m.editConfig==m.EDIT_HARNESS&&!m.isOpenLocalAction&&!m.__fromLocalAction,C=(m.editConfig==m.EDIT_EXPANDPANE||"pyGridRowDetails"==y)&&!m.isOpenLocalAction&&!m.__fromLocalAction,1==a.get("bInvokedFromControl")&&(q=Grids.getActiveGrid(c),"overlay"==k&&m!==q&&(m=q)),B||C||!x||(m.bCalledFromGrid=!0));"overlay"==k&&(a.put("ActionSection","pyOverlayTemplate"),r="true",a.put("bIsOverlay","true"),y="pyOverlayTemplate",a.remove("FlowActionTarget"));if(1==a.get("bInvokedFromControl")&&m){var q=!1,I=pega.util.Event.getTarget(c),
D=$(m.gridDiv),J=D.find(".gridActionTop");0<J.length&&(q=0<J.find(I).length);q||(D=D.find(".gridActionBottom"),0<D.length&&(q=0<D.find(I).length));q&&(m=null,"true"!=r&&(pega.ctx.activeGrid=null))}q=!1;m&&c&&(q=(q=(q=c.target||c)&&q.closest&&q.closest("[data-repeat-source]"))&&m.gridDiv.contains(q));if(m&&x&&!q){try{m.rightBodyTbl.contains(c.target)?m.selectPage(c,m.rightBodyTbl):m.selectPage(c,m.gridDiv)}catch(F){}if(!m.getActiveRowIndex())return delete m.__fromLocalAction,alert(pega.u.d.fieldValuesList.get("Please_select_a_row")),
!1;u=this.getQueryString(m.getLeftRow());if(null==y||""==y)y="pyGridModalTemplate";a.put("ActionSection",y);m.isGridAction=!0;m.modalAction=v;m.editFormat&&(t=m.editFormat);m.sectionName=this.getSectionDiv(m.gridDiv).getAttribute("NODE_NAME");m.usingPage=this.getBaseRef(m.gridDiv);m.baseThreadContext=this.getThreadName();m.modalThreadContext="";m.propRef=pega.ui.property.toReference(m.getLeftRow().id);if(1==a.get("bInvokedFromControl")){x="";for(q=this.insertButton.parentNode;q&&!q.getElementById;){if(("TR"==
q.tagName.toUpperCase()||"LI"==q.tagName.toUpperCase())&&q.id==m.getLeftRow().id){x=m.propRef;break}if("RULE_KEY"==q.id&&"MAIN_RULE"==q.getAttribute("node_type")&&q.getAttribute("BASE_REF")||"TD"==q.tagName.toUpperCase()&&q.getAttribute("BASE_REF")||"pyFlowActionHTML"==q.id){x="";x=l?this.getBaseRef(l,c):this.getBaseRef(b,c);x="."==x.slice(0,1)?m.propRef+x:x;break}q=q.parentNode}""!=w&&(x="."==w.slice(0,1)?x+w:w);a.put("rowPage",x)}else a.put("rowPage",m.propRef);a.put("GridAction","true");pega.u.d.ServerProxy.isDestinationRemote()&&
pega.offline&&a.put("isRemoteCase","true");a.put("pyActivity","pzPrepareAssignment");a.put("BaseThread",m.baseThreadContext);p.put("pyActivity","pzPerformGridAction");"expandPane"===m.editConfig&&p.put("gridExpandPane","true");p.put("ThreadName","");m.editConfig==m.EDIT_HARNESS&&p.put("EditConfig","harness");m.bReadOnlyShowDetails&&"pyGridRowDetails"==y?(p.put("EditConfig","ROexpandPane"),a.put("EditConfig","ROexpandPane")):"harness"==m.editConfig&&1==m.bRODetails&&"pyGridDetails"==y&&(p.put("EditConfig",
"ROEmbedPane"),a.put("EditConfig","ROEmbedPane"));m.isOpenLocalAction&&m.bNoThreadProcess&&p.put("noThreadProcess","true");p.put("rowPage",m.propRef);p.put("Location",a.toQueryString(!0));p.put("PagesToCopy",m.propRef.substring(0,m.propRef.indexOf(".")));"true"==a.get("KeepMessages")&&"true"==h.get("KeepMessages")&&p.put("pzKeepPageMessages","true");(h=pega.util.Dom.getElementsById(m.getLeftRow().id,m.rightBodyTbl))&&h[0]&&(h=h[0],u.copy(this.getQueryString(h)),"expandPane"==m.editConfig?(expandPaneNode=
pega.util.Dom.getNextSibling(h))&&"true"==expandPaneNode.getAttribute("expanded")&&u.copy(this.getQueryString(expandPaneNode)):m.editConfig==m.EDIT_HARNESS&&pega.util.Dom.getElementsById("pyFlowActionHTML",m.gridDetailsDiv)&&u.copy(this.getQueryString(m.gridDetailsDiv)))}else y?a.put("ActionSection",y):(a.put("ActionSection","pyModalTemplate"),y="pyModalTemplate");pega.u.d.ServerProxy.isDestinationRemote()&&pega.u.d.ServerProxy.isHybridClient()&&a.put("isRemoteCase",!0);if(G&&e.isOnlineWOBound&&pega.ctx.RDL.masterDetailsParams&&
pega.ctx.RDL.masterDetailsParams.__RDLThreadSetup){var x=e.fAObjClass,l=x.substring(0,x.indexOf(".")),A,h=new SafeURL;h.put("pyActivity","pzRDLWorkProcessing");h.put("StreamType",a.get("StreamType"));h.put("ModalSection",a.get("ModalSection"));h.put("StreamClass",a.get("StreamClass"));h.put("ActionSection",a.get("ActionSection"));h.put("NewTaskStatus",a.get("NewTaskStatus"));h.put("pxReqURI","rdlmasterdetails");delete a.hashtable.StreamType;delete a.hashtable.ModalSection;delete a.hashtable.StreamClass;
delete a.hashtable.ActionSection;delete a.hashtable.NewTaskStatus;a.put("rowPage",x);e.noThreadProcess&&a.put("noThreadProcess","true");e.bRODetails&&a.put("bRODetails","true");p.put("pyActivity","pzdoRDLAction");p.put("listAction","EDITDETAILS");p.put("PagesToCopy",l);p.put("ThreadSetup","true");pega.u.d.ServerProxy.isDestinationRemote()&&((l=pega.ui.ClientCache.find(x))&&l.get("pzInsKey")&&(A=l.get("pzInsKey").getValue()),A&&(delete a.hashtable.noThreadProcess,pega.u.d.ServerProxy.isHybridClient()&&
pega.ui.ParametrizedDPUtils.isParametrizedDataPageInstance(x)&&(p.put("WOInsKey",A),l.get("pxObjClass")&&p.put("WOObjClass",l.get("pxObjClass").getValue()),delete a.hashtable.BaseReference,delete a.hashtable.rowPage,delete p.hashtable.PagesToCopy)));p.put("Location",a.toQueryString());p.put("StaticLocation",h.toQueryString())}else void 0==p.get("ThreadName")&&p.copy(a,!0);pega.ctx.RDL.masterDetailsParams&&pega.ctx.RDL.masterDetailsParams.__RDLWOThreadInitialized&&(p.put("pzPrimaryPageName","pyWorkPage"),
(A=pega.ui.rdlMasterDetails.getActiveRDLMetaInfo().showDetailsNode)&&(A=$(A).find("#pyFlowActionHTML"))&&A.get(0)&&(p.put("rowPage",A.attr("temp_assign_ref")),p.put("BaseReference",A.attr("temp_assign_ref"))));d&&(e={animObj:{animIn:"anim-bottom",animOut:"anim-bottom"},isLocalAction:!0});if(B||C||G)G?(pega.u.d.submitModalDlgParam?(pega.u.d.submitModalDlgParam.modalSection=e.modalSection,pega.u.d.submitModalDlgParam.mTObjClass=e.mTObjClass,pega.u.d.submitModalDlgParam.fAObjClass=e.pxObjClass,pega.u.d.submitModalDlgParam.taskStatus=
e.taskStatus,pega.u.d.submitModalDlgParam.contextParams=e.contextParams,pega.u.d.submitModalDlgParam.isShowDetails=e.isShowDetails):pega.u.d.submitModalDlgParam={modalSection:e.modalSection,mTObjClass:e.mTObjClass,fAObjClass:e.pxObjClass,taskStatus:e.taskStatus,contextParams:e.contextParams,isShowDetails:e.isShowDetails},a={success:pega.u.d.showDetailsFlowAction_Success,failure:pega.u.d.processActionModal_Failure,scope:this},e.isOnlineWOBound&&pega.ctx.RDL.masterDetailsParams&&pega.ctx.RDL.masterDetailsParams.__RDLThreadSetup&&
(a.preRenderer=pega.u.d.showDetails_PreSuccess)):a={success:pega.u.d.processActionGridDetail_Success,failure:pega.u.d.processActionModal_Failure,scope:this};else{null!=pega.u.d.submitModalDlgParam&&(c=pega.u.d.getPopOverLevel(c.target),0==pega.u.d.submitModalDlgParamStack.length||c!=pega.u.d.submitModalDlgParamStack[pega.u.d.submitModalDlgParamStack.length-1].level)&&(pega.u.d.submitModalDlgParam.level=c,pega.u.d.submitModalDlgParamStack.push(pega.u.d.submitModalDlgParam));if(null==g||"undefined"==
typeof g)g=!1;null==e||null!=e.isCenterOverlay&&"undefined"!=typeof e.isCenterOverlay||(e.isCenterOverlay=!1);pega.u.d.submitModalDlgParam={taskStatus:v,modalSection:y,bReload:z,StreamType:a.get("StreamType"),flowActionTarget:k,ModalStyle:t,bIsOverlay:r,reloadElement:b,ModalWindowSize:n,associatedElement:this.insertButton,activeGrid:pega.ctx.activeGrid,userCallbackObj:f,animObj:e?e.animObj:void 0,isMobileFullScreen:e?e.isMobileFullScreen:"false",fAObjClass:e?e.fAObjClass:"",mTObjClass:e?e.mTObjClass:
"",bIsDisableClickaway:g,bIsCenterOverlay:e?e.isCenterOverlay:"",isLocalAction:e?e.isLocalAction:void 0};e&&(e.contextParams&&(pega.u.d.submitModalDlgParam.contextParams=e.contextParams),e.doNotRefresh&&(pega.u.d.submitModalDlgParam.bReload=void 0==pega.u.d.submitModalDlgParam.bReload?!e.doNotRefresh:pega.u.d.submitModalDlgParam.bReload),e.isAddingNewRow&&(pega.u.d.submitModalDlgParam.isAddingNewRow=e.isAddingNewRow,pega.u.d.submitModalDlgParam.cancelModalActivity=e.cancelModalActivity,pega.u.d.submitModalDlgParam.datasource=
e.datasource,pega.u.d.submitModalDlgParam.position=e.position));a={success:pega.u.d.processActionModal_Success,failure:pega.u.d.processActionModal_Failure,preRenderer:pega.u.d.processActionModal_Pre_Success,scope:this}}f=pega.ctx.RDL.masterDetailsParams&&pega.ctx.RDL.masterDetailsParams.isShowDetailsOpen;pega.u.d.ServerProxy.isDestinationRemote()&&f&&pega.u.d.submitModalDlgParam&&(pega.u.d.submitModalDlgParam.bReload=!e.doNotRefresh);a.argument=[m];m?this.setBusyIndicator(b,!1,!0):this.setBusyIndicator(b,
!1);b={scope:this,offline:function(a){pega.ui.ProcessActionOffline.initStreamDisplay(a&&a.hashtable?a.hashtable:{})},online:function(a,b,c){this.asyncRequest("POST",a,c,b)}};f=this.gFocusElement?this.gFocusElement:this.focusElement?this.focusElement:null;var E;e&&"firstuse"==e.loadBehaviour&&(E=pega.ui.ClientDataProvider.getMetadataStoreByType("LOCALACTION")[e.uniqueId]);e&&"firstuse"==e.loadBehaviour&&f&&f.getAttribute("data-fetched")&&E?(pega.ui.TemplateEngine.enableDataUpdate(),pega.ui.TemplateEngine.renderUI(E,
function(a,b){null!=a&&(E=a)},void 0),pega.u.d.processActionModal_Success({responseText:E}),pega.ui.TemplateEngine.disableDataUpdate()):(e&&"firstuse"==e.loadBehaviour&&(this.loadBehaviour="firstuse",this.uniqueId=e.uniqueId),this.ServerProxy.doAction(p,u,b,a))}else d&&pega.ctx.activeGrid&&"FLOWACTION"==pega.ctx.activeGrid.action&&pega.ctx.activeGrid.isOpenLocalAction&&(delete pega.ctx.activeGrid.isOpenLocalAction,delete pega.ctx.activeGrid.__fromLocalAction,delete pega.ctx.activeGrid.bNoThreadProcess)}};
pega.ui.Doc.prototype.showDetailsFlowAction_Success=function(a){a&&a.responseText&&pega.ui.rdlMasterDetails.showDetailsFlowAction_Success(a)};pega.ui.Doc.prototype.showDetails_PreSuccess=function(a){a&&a.responseText&&pega.ui.rdlMasterDetails.showDetails_PreSuccess(a)};pega.ui.Doc.prototype.processActionModal_Pre_Success=function(a){!pega.u.d.modalDialog||!pega.u.d.modalDialog.element||pega.u.d.submitModalDlgParam&&"true"===pega.u.d.submitModalDlgParam.bIsOverlay||pega.ctxmgr.registerContextSwitching(pega.u.d.modalDialog.element)};
pega.ui.Doc.prototype.processActionModal_Success=function(a){var b=a.responseText;if(b&&b.match("ENGINE_ERRORS"))a=document.createElement("div"),a.innerHTML=b.substr(b.indexOf("||")),pega.u.d.handleFormErrors(a),alert(localCorrectErrors),pega.u.d.gBusyInd.hide();else{var c=!(pega.u.d.submitModalDlgParam&&pega.u.d.submitModalDlgParam.StreamType&&"NO_UI"==pega.u.d.submitModalDlgParam.StreamType||"ERROR"==b),d=null,f="",e="";pega.u.d.submitModalDlgParam&&pega.u.d.submitModalDlgParam.ModalStyle&&(f=pega.u.d.submitModalDlgParam.ModalStyle);
pega.u.d.submitModalDlgParam&&pega.u.d.submitModalDlgParam.ModalWindowSize&&(e=pega.u.d.submitModalDlgParam.ModalWindowSize);var g="",h="";if(pega.u.d.submitModalDlgParam&&pega.u.d.submitModalDlgParam.flowActionTarget&&"overlay"==pega.u.d.submitModalDlgParam.flowActionTarget)d=document.createElement("DIV"),g=pega.u.d.submitModalDlgParam.bIsDisableClickaway?pega.u.d.submitModalDlgParam.bIsDisableClickaway:!1,h=pega.u.d.submitModalDlgParam.bIsCenterOverlay?pega.u.d.submitModalDlgParam.bIsCenterOverlay:
!1;else{var k=pega.u.d.modalDialog.body,l=0;pega.u.d.bModalRendered||pega.u.d.renderModal();if(pega.u.d.useOldModalDialog){a=pega.u.d.prePositionModalDialog();var l=a[1],p=!0,p=a[0]}else p=!0}var v=this;a=function(){pega.u.d.gCallbackArgs={modalDialogBody:k,returnNode:k,strResponse:b,domObj:k,bIsFlowActionModal:!0,top:l,bFixedCenter:p,overlayNode:d,modalStyle:f,bIsDisableClickaway:g,bIsCenterOverlay:h};var a=k;d?a=d:pega.u.d.modalDialogExtras(e);if(v.activeGrid&&v.activeGrid.bCalledFromGrid){v.activeGrid.bCalledFromGrid=
!1;var n=v.activeGrid,r=pega.util.Dom.getElementsById("pyFlowActionHTML",a,"DIV");if(r&&0<r.length){r=r[0];n.propRef=r.getAttribute("TEMP_ASSIGN_REF");n.editFormat&&""!=n.editFormat&&(pega.u.d.gCallbackArgs.modalStyle=n.editFormat);n.primaryPage=r.getAttribute("PRIM_PAGE");n.tempInterestPage=r.getAttribute("TEMP_BASE_REF");n.modalThreadContext=r.getAttribute("THREAD_NAME");n.isLocked="true"==r.getAttribute("LOCKED");n.isLocked&&(n.DONOT_SUBMIT="true");var r="pyGridModalTemplate",w=a.children[0];w&&
w.getAttribute("node_name")&&(r=w.getAttribute("node_name"));pega.u.d.attachClickForGridButtons(n,a,r);n.threadProcessing&&!n.bNoThreadProcess&&"PREV"!=n.getModalAction()&&"NEXT"!=n.getModalAction()&&"ADD"!=n.getModalAction()&&(v.switchThread(n.modalThreadContext),v.switchPrimaryPage("pyWorkPage"))}else{c&&pega.u.d.loadHTMLEleCallback(a);if("ERROR"==b)switch(n.primaryPage=n.propRef.substring(0,n.propRef.indexOf(".")),n.tempInterestPage="",n.getModalAction()){case "INSERTAFTER":case "INSERTBEFORE":case "ADDCHILD":case "APPENDLAST":case "ADDFIRSTCHILD":n.setModalAction("REMOVELAST");
break;default:n.setModalAction("ERROR")}else(a=b.split("||"))&&"NO_UI"==a[0]?(n.NO_UI=!0,n.setModalAction("SUBMIT"),n.primaryPage=a[1],n.tempInterestPage=a[2],n.modalThreadContext=a[3],v.url=v.url.replace(n.baseThreadContext,n.modalThreadContext),v.switchPrimaryPage("pyWorkPage")):(n.primaryPage=n.propRef.substring(0,n.propRef.indexOf(".")),n.tempInterestPage="",n.setModalAction("ERROR"));n.performModalAction();return}}n=pega.u.d.submitModalDlgParam&&pega.u.d.submitModalDlgParam.isShowDetails;d||
n||(pega.u.d.modalDialog.setTransitions&&pega.u.d.submitModalDlgParam&&pega.u.d.modalDialog.setTransitions(pega.u.d.submitModalDlgParam.animObj,pega.u.d.submitModalDlgParam.isLocalAction,pega.u.d.submitModalDlgParam.isMobileFullScreen),(n=pega.u.d.getPopOver(pega.u.d.insertButton))&&"closing"!=n.getState()&&(n=n.getContentContainerElement(),null!=n&&"hidden"!=n.style.visibility&&$(n).css("z-index","8")),pega.u.d.modalDialog.show());(n=pega.util.Dom.getElementsById("PegaOnlyOnce",a))&&n[0]&&(pega.u.d.handleOnlyOnce(n[0]),
n[0].parentNode.removeChild(n[0]));(n=pega.util.Dom.getElementsById("ERRORTABLE",a))&&(n=n[0]);if(d&&a&&a.getElementsByClassName&&(w=a.getElementsByClassName("skeleton"))&&0<w.length){for(var u="",r=0;r<w.length;r++)document.getElementById(w[r].id)||(u+=w[r].outerHTML);$("body").append(u)}if((a=pega.util.Dom.getElementsById("modaldialog_con",a))&&a[0])for(a=pega.util.Dom.getChildren(a[0]),w=a.length,r=0;r<w;r++)(u=a[r])&&"pyFlowActionHTML"!=u.id&&u.parentNode.removeChild(u);n&&(a=document.createElement("DIV"),
a.appendChild(n),pega.u.d.handleFormErrors(a));d?pega.u.d.overlayCallBack.call():pega.u.d.modalDialogCallBack.call()};c?d?(d.innerHTML=b,a.call()):pega.u.d.loadDOMObject(k,b,a):a.call();pega.u.d.inCall&&pega.ctx.activeGrid.resetInCall()}};
pega.ui.Doc.prototype.closeOverlay=function(a,b,c,d){b&&(b=$("#"+$(d).attr("id")+" .container-close"),b[0]?b[0].remove():!1,pega.u.d.localActionContainerOpened(!1));pega.u.d.performFlowAction("","","",pega.u.d.submitModalDlgParam?pega.u.d.submitModalDlgParam.taskStatus:"",c.popOverElement,void 0,a)};
pega.ui.Doc.prototype.processActionGridDetail_Success=function(a){var b=a.responseText,c=a.argument[0];if(b&&b.match("ENGINE_ERRORS"))a=document.createElement("div"),a.innerHTML=b.substr(b.indexOf("||")),pega.u.d.handleFormErrors(a),c&&c.expandCollapseAnchor&&c.changeExpandCollapseIconState(),alert(localCorrectErrors),pega.u.d.gBusyInd.hide();else{var d=!(pega.u.d.submitModalDlgParam&&pega.u.d.submitModalDlgParam.StreamType&&"NO_UI"==pega.u.d.submitModalDlgParam.StreamType||"ERROR"==b);a=c.editConfig;
if("harness"==a)var f=c.gridDetailsDiv;else if(a==c.EDIT_EXPANDPANE){var e=c.getRightRow(),g=pega.util.Dom.getElementsById("rowDetail"+e.id,c.rightBodyTbl,"DIV");if(g&&g[0])f=g[0];else{var h=e.rowIndex,g=e.cells.length;0==g&&"yui_modalrownew"==e.id?g=(g=pega.util.Dom.getPreviousSibling(e))?g.cells.length:1:1!=g||""!=e.id&&null!=e.id||(g=e.cells[0].colSpan);h=c.rightBodyTbl.insertRow(h+1);h.setAttribute("expanded","true");h=h.insertCell(-1);h.colSpan=g;g=document.createElement("DIV");g.id="rowDetail"+
e.id;h.appendChild(g);f=g}}if(b.trim()||c.bReadOnlyShowDetails){var k=this,e=function(){if(c){var a=c;a.refreshLayout=a.bFilteredGrid?!0:a.refreshLayout;var e=pega.util.Dom.getElementsById("pyFlowActionHTML",f,"DIV");if(e&&0<e.length){e=e[0];a.propRef=e.getAttribute("TEMP_ASSIGN_REF");a.primaryPage=e.getAttribute("PRIM_PAGE");a.tempInterestPage=e.getAttribute("TEMP_BASE_REF");a.modalThreadContext=e.getAttribute("THREAD_NAME");a.gridDetailsThreadContext=a.modalThreadContext;a.isLocked="true"==e.getAttribute("LOCKED");
a.isLocked&&(a.DONOT_SUBMIT="true");e=a.getFATemplateName();pega.u.d.attachClickForGridButtons(a,f,e);if((a.editConfig==a.EDIT_EXPANDPANE||a.editConfig==a.EDIT_HARNESS)&&a.threadProcessing){var g=0!=f.querySelectorAll("div[data-deferinvoke]").length;g&&a.setExecutionThread()}a.editConfig==a.EDIT_EXPANDPANE&&(a.threadProcessing?(a.gridDetailsDiv=f,pega.env.ua.ie?(pega.util.Event.addListener(f,"focusin",a.setExecutionThread,a,!0),pega.util.Event.addListener(f,"focusout",a.resetExecutionThread,a,!0)):
(a.wrapperSetET=function(b){a.setExecutionThread(b)},a.wrapperReSetET=function(b){a.resetExecutionThread(b)},f.addEventListener("focus",a.wrapperSetET,!0),f.addEventListener("click",a.wrapperSetET,!0),f.addEventListener("blur",a.wrapperReSetET,!0)),a.expDetailsHeight=f.offsetHeight):a.updateExpandedDtlsHeight())}else{d&&pega.u.d.loadHTMLEleCallback(f);if("ERROR"==b)switch(a.primaryPage=a.propRef.substring(0,a.propRef.indexOf(".")),a.tempInterestPage="",a.getModalAction()){case "INSERTAFTER":case "INSERTBEFORE":case "ADDCHILD":case "APPENDLAST":case "ADDFIRSTCHILD":a.setModalAction("REMOVELAST");
break;default:a.setModalAction("ERROR")}else(g=b.split("||"))&&"NO_UI"==g[0]?(a.NO_UI=!0,a.setModalAction("SUBMIT"),a.primaryPage=g[1],a.tempInterestPage=g[2],a.modalThreadContext=g[3],a.gridDetailsThreadContext=a.modalThreadContext):(a.primaryPage=a.propRef.substring(0,a.propRef.indexOf(".")),a.tempInterestPage="",a.setModalAction("ERROR"));a.performModalAction();return}a.editConfig==a.EDIT_EXPANDPANE&&(a.setHeadersWidth(),a.gridResized())}(e=pega.util.Dom.getElementsById("PegaOnlyOnce",f))&&e[0]&&
(pega.u.d.handleOnlyOnce(e[0]),e[0].parentNode.removeChild(e[0]));(e=pega.util.Dom.getElementsById("ERRORTABLE",f))&&(e=e[0]);var h=pega.util.Dom.getElementsById("modaldialog_con",f);if(h&&h[0])for(var h=pega.util.Dom.getChildren(h[0]),n=h.length,r=null,w=0;w<n;w++)(r=h[w])&&"pyFlowActionHTML"!=r.id&&$(r).remove();e&&(h=document.createElement("DIV"),h.appendChild(e),pega.u.d.handleFormErrors(h),h=null);pega.u.d.loadHTMLEleCallback(f);a.editConfig==a.EDIT_EXPANDPANE&&a.autoAdjustProgressiveGridHeight({expandPane:"true"});
pega.u.d.gBusyInd.hide();a.bSelectRowOnLoad||a.bDoNotFocusFADetails?(a.bSelectRowOnLoad=!1,a.threadProcessing&&!g&&a.resetExecutionThread()):pega.u.d.focusFirstElement("pyFlowActionHTML",f)||a.threadProcessing&&!g&&a.resetExecutionThread();a.bDoNotFocusFADetails&&a.focusOnNewEditableRow();k.inCall&&c.resetInCall()};d?("harness"==a&&this.cleanUpHarnessElements(null,[f]),pega.u.d.loadDOMObject(f,b,e),a=navigator.userAgent,-1!=a.indexOf("Safari")&&-1==a.indexOf("Chrome")&&(f.style.height="100%",f.style.height=
"")):(e.call(),this.inCall&&c.resetInCall())}else f.innerHTML=b}};
pega.ui.Doc.prototype.attachClickForGridButtons=function(a,b,c){var d=pega.util.Event,f=pega.util.Dom.getElementsById,e=function(e,h){var g=f(e,b,"BUTTON");g&&0<g.length&&(g="ModalReleaseLock"==e?g[0]:g[g.length-1],g.onclick=null,"ModalReleaseLock"==e?(d.removeListener(g,"click",h),d.addListener(g,"click",h,a,!0)):(d.removeListener(g,"click",h),d.addListener(g,"click",h,c,a,!0),pega.u.d.submitModalDlgParam&&c&&""!=c&&(pega.u.d.submitModalDlgParam.gridTemplateName=c)))};e("ModalPrevious",a.goToPrevious);
e("ModalNext",a.goToNext);e("ModalButtonSubmit",a.submitModal);e("ModalButtonCancel",a.cancelModal);e("ModalReleaseLock",function(){a.releaseLock(a.propRef,c)});e("IconAdd",a.addRow)};pega.ui.Doc.prototype.getOffSet=function(a,b){for(var c=0,d=!0;d;)if(c+=a.offsetTop,a=a.offsetParent,a==b||null==a)d=!1;return c};pega.ui.Doc.prototype.modalResizeCB=function(){pega.u.d.bModalDialogOpen&&pega.util.Dom.addClass("modalWrapper","resized")};
pega.ui.Doc.prototype.getComputedStyleModal=function(a,b){return a?(a=parseInt(a.currentStyle?a.currentStyle[b]:getComputedStyle(a,null)?getComputedStyle(a,null)[b]:0),isNaN(a)?0:a):0};
pega.ui.Doc.prototype.initModalElements=function(){pega.u.d.modalResizeObj&&(pega.u.d.modalResizeObj.set("animate",!1),pega.u.d.modalResizeObj.reset(),pega.u.d.modalResizeObj.set("animate",!0));var a=document.getElementById("modalWrapper");a.style.width="auto";a.style.height="auto";pega.util.Dom.removeClass("modalWrapper","resized")};
pega.ui.Doc.prototype.setModalDimensions=function(){if(pega.u.d.bModalDialogOpen){if(!pega.util.Dom.hasClass("modalWrapper","resized")){var a=document.getElementById("modalOverlay"),b=pega.u.d.allowTransition()?document.body.clientHeight:a.clientHeight,c=pega.u.d.allowTransition()?document.body.clientWidth:a.clientWidth,d=document.getElementById("modalContent"),f=document.getElementById("modalOverlay")||document.getElementById("modaldialog");if(f=$("#modaldialog_con",f).get(0)){for(;"DIV"!=f.parentNode.nodeName;)f=
f.parentNode;f=f.parentNode}else f=d;pega.u.d.submitModalDlgParam&&(!pega.u.d.submitModalDlgParam.isMobileFullScreen||"false"===pega.u.d.submitModalDlgParam.isMobileFullScreen)&&pega.mobile&&pega.mobile.sdk&&(f.style.maxHeight="none",f.style.maxWidth="none");var e=d.scrollHeight;e<b&&$("html.phone")[0]&&(b=e);var g=$("#modalContent #modaldialog_hd")[0],e=$("#modalContent .header")[0],e=(g=g?g:e?e:null)?g.offsetHeight:0,h=g?$(g).outerHeight(!0):0;h>e&&(e=h);pega.env.ua.ie&&g&&(g.style.maxWidth=0>=
c?"none":c+"px");g=0;if(window.pud_modalScrollBarWidth)g=window.pud_modalScrollBarWidth;else if(8==pega.env.ua.ie||document.documentMode&&8==document.documentMode||pega.env.ua.gecko)h=document.createElement("div"),h.className="scrollbar-measure",document.body.appendChild(h),g=h.offsetWidth-h.clientWidth,window.pud_modalScrollBarWidth=g,document.body.removeChild(h);b=b-g-pega.u.d.getComputedStyleModal(f,"borderTopWidth");b-=pega.u.d.getComputedStyleModal(f,"borderBottomWidth");b-=pega.u.d.getComputedStyleModal(f,
"paddingTop");b-=pega.u.d.getComputedStyleModal(f,"paddingBottom");b-=pega.u.d.getComputedStyleModal(a,"paddingTop");b-=pega.u.d.getComputedStyleModal(a,"paddingBottom");c-=pega.u.d.getComputedStyleModal(f,"paddingLeft");c-=pega.u.d.getComputedStyleModal(f,"paddingRight");c-=pega.u.d.getComputedStyleModal(f,"borderRightWidth");c-=pega.u.d.getComputedStyleModal(f,"borderLeftWidth");c-=pega.u.d.getComputedStyleModal(a,"paddingRight");c-=pega.u.d.getComputedStyleModal(a,"paddingLeft");pega.u.d.allowTransition()?
(a=$(d).find(".layout-noheader-modal_button_array")[0],$(a).is(":visible")&&(b-=a?$(a).outerHeight():0),b-=e):b-=d.offsetHeight-f.offsetHeight;a=$(f);b=0>=b?"none":b;c=0>=c?"none":c;a.css("min-height","");d=parseInt(a.css("min-height"));"none"!=b&&b<d&&a.css("min-height",b);d=Math.floor(a.outerHeight(!0)-a[0].offsetHeight);a.css("max-height",b-d);a.css("max-width",c);"pyDirtyCheckConfirm"!=f.children[0].getAttribute("node_name")&&pega.util.Dom.addClass(f,"modal-scroll-panel")}pega.Mashup&&pega.u.d.modalAlignInMultiIframe({})}};
pega.ui.Doc.prototype.sizeHarnessMask=function(){if(this.cfg.getProperty("modal")&&this.mask){var a=document.body,b=[],c=window.frameElement,d=a.scrollWidth;b.push("height: "+(a.offsetHeight>=a.scrollHeight?a.offsetHeight:a.scrollHeight)+"px;");c?b.push("width: "+d+"px;"):b.push("width: 100%;");this.mask.style.cssText+=";"+b.join("")}};pega.ui.Doc.prototype.setCursorAtEndofText=function(a){if(a.createTextRange){var b=a.createTextRange();b.moveStart("character",a.value.length);b.collapse();b.select()}};
pega.ui.Doc.prototype.checkAccessKeys=function(a){if(pega.u.d.bModalDialogOpen&&a.altKey&&!pega.util.Dom.isAncestor(pega.u.d.modalDialog.body.id,pega.util.Event.getTarget(a))&&(pega.util.Event.stopEvent(a),a.fromElement))try{a.fromElement.focus(),pega.u.d.setCursorAtEndofText(a.fromElement)}catch(b){}};
pega.ui.Doc.prototype.showHarnessMask=function(){pega.u.d.callResizeHarness=!1;if(this.cfg.getProperty("modal")&&this.mask){var a=document.body.style;if("undefined"==typeof window.bodyOverflow||""==window.bodyOverflow)window.bodyOverflow=a.overflow;if("undefined"==typeof window.bodyOverflowX||""==window.bodyOverflowX)window.bodyOverflowX=a.overflowX;if("undefined"==typeof window.bodyOverflowY||""==window.bodyOverflowY)window.bodyOverflowY=a.overflowY;6==pega.env.ua.ie&&pega.util.Dom.addClass(document.body,
"masked");pega.u.d.sizeHarnessMask.call(this);this.mask.style.display="block";this.showMaskEvent.fire()}pega.u.d.callResizeHarness=!0};
pega.ui.Doc.prototype.hideHarnessMask=function(){if(this.cfg.getProperty("modal")&&this.mask){this.mask.style.display="none";var a=document.body.style;a.overflow!=bodyOverflow&&(a.overflow=""===bodyOverflow?"":bodyOverflow,bodyOverflow="");a.overflowX!=bodyOverflowX&&(a.overflowX=""===bodyOverflowX?"":bodyOverflowX,bodyOverflowX="");a.overflowY!=bodyOverflowY&&(a.overflowY=""===bodyOverflowY?"":bodyOverflowY,bodyOverflowY="");this.hideMaskEvent.fire();6==pega.env.ua.ie&&pega.util.Dom.removeClass(document.body,
"masked")}};pega.ui.Doc.prototype.processActionModal_Failure=function(a){pega.u.d.gBusyInd.hide();if(pega.u.d.ServerProxy.isDestinationLocal()){var b=pega.u.d.submitModalDlgParam.taskStatus;pega.mobile.hybrid.callWhenLaunchboxLoaded(function(){var a=pega.mobile.hybrid.getLaunchBox();a.PRPC&&a.PRPC.ClientStore&&a.PRPC.ClientStore.getItems("localaction",b,pega.u.d.offlineModalSuccessCallback,pega.u.d.offlineModalFailCallback)})}};
pega.ui.Doc.prototype.setModalDialogHeight=function(a,b,c){var d=0;if(pega.u.d.useOldModalDialog){var f;modalDialogBodySHNonIe=0;pega.util.Event.isIE?f=pega.u.d.getDivScrollHeight(a,!1):(d=a.scrollTop,a.style.height="auto",f=modalDialogBodySHNonIe=pega.u.d.getDivScrollHeight(a,!1));pega.u.d.MODALDIALOG_MIN_HEIGHT<parseInt(f)&&(pega.u.d.MODALDIALOG_MIN_HEIGHT=parseInt(f));c=c.height;var e,g=!1,h=null,k=null,l="actionIFrame"==window.frames.name;l?(e=window.parent.frameElement,null!=e&&"undefined"!=
typeof e.PegaWebGadget&&"undefined"!=typeof window.parent.parent.pega&&"undefined"!=typeof window.parent.parent.pega.u&&"undefined"!=typeof window.parent.parent.pega.u.d&&window.parent.parent.pega.u.d.isPortal()&&(g=!0,h=parent.pega.u.d.getPanelDiv(),k=parent.parent.document.body)):(e=window.frameElement,null!=e&&"undefined"!=typeof e.PegaWebGadget&&"undefined"!=typeof window.parent.pega&&"undefined"!=typeof window.parent.pega.u&&"undefined"!=typeof window.parent.pega.u.d&&window.parent.pega.u.d.isPortal()&&
(g=!0,h=pega.u.d.getPanelDiv()));g&&h&&(e=l?pega.u.d.getOffSet(window.frameElement,window.parent.frameElement.contentWindow.document.body)+pega.u.d.getOffSet(e,k)-pega.u.d.getOffSet(h,k):pega.u.d.getOffSet(window.frameElement,h.parentNode),c=h.parentNode,h=c.scrollTop,g=c.offsetHeight,k=document.body.offsetHeight,c=0<c.scrollTop-e?g:g-(e-h),k-h-e<g-e&&(c=k-h-e));c>pega.u.d.MODALDIALOG_ADJUSTMENT&&(c-=pega.u.d.MODALDIALOG_ADJUSTMENT);h="";g=e=0;if(0==pega.u.d.MODALDIALOG_BUTTONS_HEIGHT&&(k=pega.util.Dom.getElementsById("EXPAND-OUTERFRAME",
document.getElementById("modaldialog_bd"),"TABLE"),null!=k&&0<k.length&&(k=k[0],k=k.nextSibling,null!=k))){for(;1!=k.nodeType&&(k=k.nextSibling,null!=k););null!=k&&(pega.u.d.MODALDIALOG_BUTTONS_HEIGHT=k.offsetHeight)}null!=document.getElementById("modaldialog_hd")&&(e=document.getElementById("modaldialog_hd").offsetHeight);null!=document.getElementById("modaldialog_ft")&&(g=document.getElementById("modaldialog_ft").offsetHeight);k=0;!1===pega.u.d.modalDialog.cfg.getProperty("fixedcenter")&&(k=(k=
this.modalDialog?this.modalDialog.element:null)?k.offsetTop:0);f+e+pega.u.d.MODALDIALOG_BUTTONS_HEIGHT+g+k>c&&!b?(a.style.height=c-e-pega.u.d.MODALDIALOG_BUTTONS_HEIGHT-k+"px",pega.u.d.MODALDIALOG_MIN_HEIGHT=c-e-pega.u.d.MODALDIALOG_BUTTONS_HEIGHT-k,document.getElementById("modaldialog").style.height=c+g+"px","auto"!=a.style.overflow&&(b=parseInt(window.getComputedStyle?window.getComputedStyle(a,null).borderLeftWidth||a.style.overflow:a.currentStyle?a.currentStyle.borderLeftWidth:a.style.borderLeftWidth||
0)+parseInt(window.getComputedStyle?window.getComputedStyle(a,null).borderRightWidth||a.style.overflow:a.currentStyle?a.currentStyle.borderRightWidth:a.style.borderRightWidth||0),b=isNaN(b)?0:b,document.getElementById("modaldialog").style.width=parseInt(a.scrollWidth)+pega.u.d.SCROLL_ADJUSTMENT+b+"px"),h+="overflow: auto;"):(h="",parseInt(f)>pega.u.d.MODALDIALOG_MIN_HEIGHT&&0!=pega.u.d.modalTabContentWidth?b=pega.u.d.MODALDIALOG_MIN_HEIGHT+pega.u.d.SCROLL_ADJUSTMENT:(b=pega.util.Event.isIE?f:modalDialogBodySHNonIe,
a.scrollWidth>a.offsetWidth&&(b+=pega.u.d.SCROLL_ADJUSTMENT)),h+="height: "+b+"px;",""!=a.style.overflow&&(pega.u.d.modalDialog.cfg.setProperty("height",""),h+="overflow:auto;"));a.style.cssText+=";"+h;d&&(a.scrollTop=d)}};
pega.ui.Doc.prototype.setModalDialogWidth=function(a,b,c){if(pega.u.d.useOldModalDialog){c=c.width;b=0;0!=pega.u.d.modalTabContentWidth&&(a.style.width=pega.u.d.MODALDIALOG_MAX_WIDTH+"px",b=pega.u.d.modalTabElementsWidth>pega.u.d.modalTabContentWidth?pega.u.d.modalTabElementsWidth:pega.u.d.modalTabContentWidth,a.scrollWidth>b&&a.scrollWidth-parseInt(a.style.width)>pega.u.d.SCROLL_ADJUSTMENT&&(b=a.scrollWidth),b>pega.u.d.MODALDIALOG_MAX_WIDTH?pega.u.d.MODALDIALOG_MAX_WIDTH=b:b=pega.u.d.MODALDIALOG_MAX_WIDTH);
document.getElementById("modaldialog_bd").style.overflowX="visible";c>pega.u.d.MODALDIALOG_ADJUSTMENT&&(c-=pega.u.d.MODALDIALOG_ADJUSTMENT);if(a.scrollWidth>c)pega.u.d.MODALDIALOG_MAX_WIDTH=c,a.style.width=c-2+"px",document.getElementById("modaldialog").style.width=c+"px";else if(0!=b){if(pega.u.d.bIsModelessDialog?(a.style.width="",c=document.getElementById("modaldialog_bd").scrollWidth,a.style.width=c>=b?c:b+pega.u.d.SCROLL_ADJUSTMENT-2+"px"):a.style.width="100%",""==document.getElementById("modaldialog").style.width||
b>parseInt(document.getElementById("modaldialog").style.width)&&800!=parseInt(document.getElementById("modaldialog").style.width)){if(c=document.getElementById("container_close")){var d=c.style;document.getElementById("container_close").style.visibility="hidden"}document.getElementById("modaldialog").style.width=b+pega.u.d.SCROLL_ADJUSTMENT+"px";pega.u.d.bIsModelessDialog||(document.getElementById("modaldialog").style.boxSizing="border-box");c&&(d.visibility="visible")}}else document.getElementById("modaldialog_bd").scrollWidth>
document.getElementById("modaldialog").offsetWidth&&document.getElementById("modaldialog_bd").scrollWidth>(8==pega.env.ua.ie?document.getElementById("modaldialog").offsetWidth:document.getElementById("modaldialog").scrollWidth)&&(document.getElementById("modaldialog").style.width=document.getElementById("modaldialog_bd").scrollWidth+2+"px");if(parseInt(a.scrollWidth)<pega.u.d.MODALDIALOG_MIN_WIDTH||0!=b&&b<pega.u.d.MODALDIALOG_MIN_WIDTH)document.getElementById("modaldialog_bd").style.width=pega.u.d.MODALDIALOG_MIN_WIDTH-
2+"px",document.getElementById("modaldialog").style.width=pega.u.d.MODALDIALOG_MIN_WIDTH+16+"px"}};pega.ui.Doc.prototype.setModalDialogResizeHandle=function(){var a=document.getElementById("modaldialog_ft"),b=document.getElementById("modaldialog_r");if(a&&b){var c=a.childNodes.length,d=!1;if(0!=c)for(var f=0;f<c;f++)if("modaldialog_r"==a.childNodes[f].id){d=!0;break}d||a.appendChild(b)}};
pega.ui.Doc.prototype.resizeModalDialog=function(){var a=!1;if(window.CKEDITOR)for(var b in window.CKEDITOR.instances)$("#cke_"+b).find(".cke_inner").hasClass("cke_maximized")&&0<$("#PEGA_HARNESS").find("#cke_"+b).length&&(a=!0);if(!(pega.u.d.useOldModalDialog&&pega.u.d.bModalDialogOpen&&a)){try{var c=document.getElementById("modalContent");pega.util.Event.removeListener(c,"keydown",pega.u.d.restrictFocus);var d=pega.u.d.getFirstFocusableElement("modalContent"),f=pega.u.d.getLastFocusableElement("modalContent");
pega.util.Event.addListener(c,"keydown",pega.u.d.restrictFocus,[d,f])}catch(e){}if(pega.u.d.useOldModalDialog){document.getElementById("modaldialog")&&(document.getElementById("modaldialog").style.height="auto");a=document.getElementById("modaldialog_bd");if(b=$("#modaldialog_con",document.getElementById("modaldialog")).get(0)){for(;"DIV"!=b.parentNode.nodeName;)b=b.parentNode;b=b.parentNode}else b=a;c=null;d=!1;try{null!=window.frameElement&&"undefined"!=typeof window.frameElement.PegaWebGadget&&
(c={height:""!=window.frameElement.style.height?window.frameElement.style.height:window.frameElement.height,width:""!=window.frameElement.style.width?window.frameElement.style.width:window.frameElement.width},0<c.height.indexOf("%")||c.width.indexOf("%")?d=!1:(c.height=parseInt(c.height),c.width=parseInt(c.width),d=!0))}catch(e){}d||(c={height:document.getElementById("HARNESS_BUTTONS")?pega.u.d.getDocumentHeight():pega.util.Event.isIE||pega.util.Event.isSafari?document.body.offsetHeight:document.body.clientHeight,
width:document.body.offsetWidth});d=!1;"undefined"!=typeof window.parent.frames.actionIFrame&&(pega.u.d.resizeActionIFrame(!1),d=!0);c.height&&pega.u.d.setModalDialogHeight(b,d,c);c.width&&pega.u.d.setModalDialogWidth(b,d,c);b&&(b.style.position="relative",pega.util.Event.isIE&&(b.style.overflow="auto"));!0===pega.u.d.modalDialog.cfg.getProperty("fixedcenter")&&pega.u.d.modalDialog.center();a.style.height="auto";pega.u.d._resizeModalDialogComponents()}}};
pega.ui.Doc.prototype._resizeModalDialogComponents=function(){var a,b=pega.u.d.modalTabViewMap;if(b)for(a in b)b[a].resizeTabsScroll()};
pega.ui.Doc.prototype.modalDialogExtras=function(a){if(pega.u.d.useOldModalDialog){var b=pega.u.d.modalDialog.header,c=pega.u.d.modalDialog.body,d=null;if(pega.u.d.usesModalTemplate){if((b=pega.util.Dom.getElementsById("EXPAND-OUTERFRAME",c))&&0<b.length){c=null;b[0].rows&&0<b[0].rows.length&&(b=b[0].rows[0])&&b.cells&&0<b.cells.length&&(c=b.cells[0]);if(null==c)return;if((c=pega.util.Dom.getChildren(c))&&2==c.length&&(d=c[0],"RULE_KEY"==d.id)){for(;"TD"!=d.tagName;)d=pega.util.Dom.getFirstChild(d);
d=pega.util.Dom.getNextSibling(d)}}}else d=b;d&&(pega.u.d.modalDialog.ddDragdrop&&pega.u.d.modalDialog.ddDragdrop.setHandleElId(d),pega.util.Dom.setStyle(d,"cursor","move"))}d=pega.u.d.getFirstFocusableElement(pega.u.d.modalDialog.innerElement.id);c=pega.u.d.getLastFocusableElement(pega.u.d.modalDialog.innerElement.id);pega.util.Event.addListener(pega.u.d.modalDialog.innerElement,"keydown",pega.u.d.restrictFocus,[d,c]);if(!pega.u.d.useOldModalDialog){pega.u.d.initModalElements();c=document.getElementById("modalContent");
if(d=document.getElementById("modaldialog_con")){for(;"DIV"!=d.parentNode.nodeName;)d=d.parentNode;d=d.parentNode}else d=c;b=c="auto";a&&(a=a.split(","),c=a[0],b=a[1]);pega.u.d.modalResizeObj&&(pega.u.d.modalResizeObj.destroy(),pega.u.d.modalResizeObj=null);pega.mobile.isHybrid||(pega.u.d.modalResizeObj=new pega.util.Resize(d,{proxy:!0,handles:"br",minHeight:100,minWidth:200,height:c,width:b,draggable:!1}),pega.u.d.modalResizeObj.on("resize",pega.u.d.modalResizeCB))}};
pega.ui.Doc.prototype.handleModaldlgKeyPress=function(a){if((!pega.u.d.submitModalDlgParam||"true"!==pega.u.d.submitModalDlgParam.bIsOverlay)&&pega.u.d.bModalDialogOpen){var b=pega.u.d.modalDialog.innerElement,c=pega.util.Event.getTarget(a),d=c.tagName.toUpperCase();switch(a.keyCode){case 13:var f=null;c.type&&(f=c.type.toUpperCase());null==f&&c.getAttribute("data-ctl")&&(f=c.getAttribute("data-ctl").toUpperCase());if("TEXTAREA"==d||"A"==d||"SELECT"==d||"BUTTON"==d||"BUTTON"==f||"SUBMIT"==f||"ICON"==
f||"ModalButtonSubmit"==c.id||"ModalButtonCancel"==c.id||"undefined"!=typeof c.AutoComplete||'["AutoCompleteAG"]'==c.getAttribute("data-ctl")){pega.util.Event.stopPropagation(a);break}if(""!=a.target.getAttribute("onClick")){pega.util.Event.stopPropagation(a);break}(b=pega.util.Dom.getElementsById("ModalButtonSubmit",b))&&0<b.length&&(pega.util.Event.fireEvent(b[0],"click"),pega.util.Event.stopPropagation(a),pega.util.Event.preventDefault(a));break;case 27:pega.u.d.handleModalCancel(a)}}};
pega.ui.Doc.prototype.handleModalCancel=function(a){if(null!=pega.u.d&&1==pega.u.d.bIsFlowInModal)pega.u.d.launchFlow.handleModalCancel();else{var b=pega.util.Dom.getElementsById("ModalButtonCancel",pega.u.d.modalDialog.innerElement);b&&0<b.length?pega.util.Event.fireEvent(b[0],"click"):doModalAction("",a)}};
pega.ui.Doc.prototype.attachModalBtnListeners=function(a,b){pega.u.d.removeModalBtnListeners(b.parentDiv);var c=pega.util.Dom.getElementsById("ModalButtonSubmit",b.parentDiv),d=pega.util.Dom.getElementsById("ModalButtonCancel",b.parentDiv);c&&0<c.length&&pega.util.Event.addListener(c[0],"click",a.submitClickApi,b,this);d&&0<d.length&&pega.util.Event.addListener(d[0],"click",a.cancelClickApi,b,this)};pega.ui.Doc.prototype.addMouseDownEvent=function(a){pega.util.Event.addListener(a,"mousedown",function(a){pega.u.d.handleModalCancel(a)})};
pega.ui.Doc.prototype.attachCloseBtnListeners=function(a,b){var c=document.querySelector("#modalContent").querySelector("#container_close");c&&(pega.util.Event.removeListener(c,"mousedown"),pega.util.Event.removeListener(c,"click",a.closeBtnApi),""!=a.closeBtnApi?(pega.util.Event.addListener(c,"click",a.closeBtnApi,b,this),null!=pega.u.d&&1==pega.u.d.bIsFlowInModal?pega.u.d.addMouseDownEvent(c):pega.util.Event.addListener(c,"mousedown",a.closeBtnApi,b,this)):(pega.util.Event.addListener(c,"click",
pega.u.d.hideModalWindow),pega.u.d.addMouseDownEvent(c)))};pega.ui.Doc.prototype.removeModalBtnListeners=function(a){var b=pega.util.Dom.getElementsById("ModalButtonSubmit",a);a=pega.util.Dom.getElementsById("ModalButtonCancel",a);b&&0<b.length&&pega.util.Event.removeListener(b[0],"click",pega.u.d.submitSection);a&&0<a.length&&pega.util.Event.removeListener(a[0],"click",pega.u.d.cancelSection)};
pega.ui.Doc.prototype.closeChildOverLay=function(a){var b=pega.u.d.getPopOver(pega.u.d.insertButton),c=$("#modalContent")[0],d=b.getAssociatedElement(),f=!1;c&&($(c).find(d).length||d&&d.name&&$(c).find($("[name\x3d'"+d.name+"']")).length)?(f=!0,(c=$("#SinfoCloseIcon")[0])&&c.removeAttribute("clickableSmartInfo")):c&&d&&d.name&&0==$("[name\x3d'"+d.name+"']").length&&(f=!0);pega.u.d.bCallModalClose=!1;if(b&&f){if("closing"===b.getState())return!1;f=b.getContentContainerElement();if(null!=f&&"hidden"!=
f.style.visibility)return pega.u.d.modalBtnElem=pega.util.Event.getTarget(a),pega.u.d.bCallModalClose=!0,b.close(),!0}return!1};pega.ui.Doc.prototype.doModalAction=function(a,b){if(!pega.u.d.closeChildOverLay(b)){var c="";a?(c=a.taskStatus,pega.u.d.performFlowAction(c,b)):(a="",pega.u.d.submitModalDlgParam&&""!=pega.u.d.submitModalDlgParam.taskStatus&&(a=pega.u.d.submitModalDlgParam.taskStatus),pega.u.d.performFlowAction(c,b,"",a))}};
pega.ui.Doc.prototype.doOverlayAction=function(a,b){var c=pega.u.d.getPopOver(pega.u.d.insertButton);a?(pega.u.d.actionName=a.taskStatus,pega.u.d.performFlowAction(a.taskStatus,b,"","",c.getContentContainerElement())):c.close()};
pega.ui.Doc.prototype.addModalHeader=function(){if(!document.getElementById("modaldialog_hd")){var a=document.createElement("div");a.setAttribute("id","modaldialog_hd");a.setAttribute("customHeader","true");pega.util.Dom.insertBefore(a,pega.u.d.modalDialog.body);pega.u.d.modalDialog.ddDragdrop&&(pega.u.d.modalDialog.ddDragdrop.setHandleElId(a),pega.util.Dom.setStyle(a,"cursor","move"),pega.u.d.modalDialog.cfg.setProperty("close",!0));pega.util.Dom.addClass("modaldialog_hd","hd");pega.u.d.modalDialog.header=
a}};pega.ui.Doc.prototype.getOfflineMetaDataForModal=function(a){if(void 0!=$(a)&&0<$(a).length)return a=$(a).attr("data-json"),JSON.parse(a)};pega.ui.Doc.prototype.isShowFAButtons=function(a){a=pega.u.d.getOfflineMetaDataForModal(a);if(void 0!=a)return a.pyShowFAButtons};pega.ui.Doc.prototype.getOfflineHeaderTitle=function(a){a=pega.u.d.getOfflineMetaDataForModal(a);if(void 0!=a)return a.modalHeaderTitle};
pega.ui.Doc.prototype.getSubmitCustomLabel=function(a){a=pega.u.d.getOfflineMetaDataForModal(a);if(void 0!=a)return a.pySubmitLabel};pega.ui.Doc.prototype.getCancelCustomLabel=function(a){a=pega.u.d.getOfflineMetaDataForModal(a);if(void 0!=a)return a.pyCancelLabel};
pega.ui.Doc.prototype.hideFooter=function(a){var b=pega.u.d.submitModalDlgParam.modalSection,c=document.getElementById("modalContent"),c=$(c).find(".layout-noheader-modal_button_array")[0];null!=pega.u.d.submitModalDlgParam&&"true"==pega.u.d.submitModalDlgParam.bIsOverlay?(c=pega.u.d.getPopOver(pega.u.d.insertButton),a=$(c.getActivePopOverElement()).find(a),a.closest("div[node_name\x3d'"+b+"']").find("table").first().siblings().css("display","none")):void 0!=c&&$(c).css("display","none")};
pega.ui.Doc.prototype.setSubmitButtonLabel=function(a,b){var c=pega.u.d.submitModalDlgParam.modalSection;if(null!=pega.u.d.submitModalDlgParam&&"true"==pega.u.d.submitModalDlgParam.bIsOverlay){var d=pega.u.d.getPopOver(pega.u.d.insertButton),d=$(d.getActivePopOverElement()).find(a),d=$(d.closest("div[node_name\x3d'"+c+"']").find("table").first().siblings().find("button")[0]),f=d.attr("onClick");void 0==f&&(f=d.attr("data-click"));void 0==f?console.log("Could not apply custom label to button."):(-1!=
f.search(/doOverlayAction\s*\(\s*(\'\'|\"\"|\\\'\\\'|\\\"\\\")/)&&(d=$($(a).closest("div[node_name\x3d'"+c+"']").find("table").first().siblings().find("button")[1])),d.html(b))}else $(a).closest("div[node_name\x3d'"+c+"']").find("table").first().siblings().find("button[id\x3d'ModalButtonSubmit']").html(b)};
pega.ui.Doc.prototype.setCancelButtonLabel=function(a,b){var c=pega.u.d.submitModalDlgParam.modalSection;if(null!=pega.u.d.submitModalDlgParam&&"true"==pega.u.d.submitModalDlgParam.bIsOverlay){var d=pega.u.d.getPopOver(pega.u.d.insertButton),d=$(d.getActivePopOverElement()).find(a),d=$(d.closest("div[node_name\x3d'"+c+"']").find("table").first().siblings().find("button")[0]),f=d.attr("onClick");void 0==f&&(f=d.attr("data-click"));void 0==f?console.log("Could not apply custom label to button."):(-1==
f.search(/doOverlayAction\s*\(\s*(\'\'|\"\"|\\\'\\\'|\\\"\\\")/)&&(d=$($(a).closest("div[node_name\x3d'"+c+"']").find("table").first().siblings().find("button")[1])),d.html(b))}else $(a).closest("div[node_name\x3d'"+c+"']").find("table").first().siblings().find("button[id\x3d'ModalButtonCancel']").html(b)};pega.ui.Doc.prototype.deleteModalHeader=function(){var a=document.getElementById("modaldialog_hd");a&&a.parentNode&&a.parentNode==pega.u.d.modalDialog.innerElement&&pega.u.d.modalDialog.innerElement.removeChild(a)};
pega.ui.Doc.prototype.setAutoCompList=function(){for(var a=pega.util.Dom.getElementsByClassName("autocomplete_main"),b=a.length,c=0;c<b;c++)a[c].getAttribute("AutoComplete")&&pega.u.d.autoCompList.put(a[c].getAttribute("AutoComplete")._id,a[c])};pega.ui.Doc.prototype.removeElemListeners=function(a){if(a){var b=[],c=0;for(b[0]=a;b.length>c;){a=b[c];a=a.childNodes;for(var d=a.length,f=0;f<d;f+=1)b[b.length]=a[f];c+=1}window.setTimeout(function(){pega.u.d.remListenersFromList(b,0)},0)}};
pega.ui.Doc.prototype.remListenersFromList=function(a,b){var c=b+10;c>a.length&&(c=a.length);for(;b<c;b++){var d=a[b];d&&(pega.util.Event.removeListener(d),1==d.nodeType&&d.getAttribute("AutoComplete")&&(d=pega.u.d.autoCompList.get(d.id))&&pega.util.Event.removeListener(d))}c<a.length&&window.setTimeout(function(){pega.u.d.remListenersFromList(a,c)},0)};pega.ui.Doc.prototype.isModalLoaded=function(){return pega.u.d.bModalDialogOpen};
pega.ui.Doc.prototype.allowTransition=function(){var a=$("html").hasClass("phone");return function(){return a&&pega.u.d.submitModalDlgParam&&pega.u.d.submitModalDlgParam.animObj}}();
pega.ui.Doc.prototype.localActionContainerOpened=function(){var a=0;return function(b){b?1==++a&&($(".screen-layout-region-main-middle").css("-webkit-overflow-scrolling","auto"),$("div#PEGA_HARNESS").css("-webkit-overflow-scrolling","auto")):0>=--a&&(a=0,$(".screen-layout-region-main-middle").css("-webkit-overflow-scrolling","touch"),$("div#PEGA_HARNESS").css("-webkit-overflow-scrolling","touch"))}}();
pega.ui.Doc.prototype.runTransitionTimeout=function(a,b,c){var d=$(a).css("transition-delay");a=$(a).css("transition-duration");a=-1<a.indexOf("ms")?parseFloat(a):1E3*parseFloat(a);d=-1<d.indexOf("ms")?parseFloat(d):1E3*parseFloat(d);setTimeout(function(){c.call(b)},a+d)};pega.ui.modalDialog=function(){this.init()};
pega.ui.modalDialog.prototype={bModalOpen:!1,header:null,footer:null,body:null,innerElement:null,resizeHandle:null,element:null,mask:null,animIn:"",animOut:"",isLocalAction:null,init:function(a){this.cfg=new pega.util.Config(this);a&&this.cfg.applyConfig(a,!0);this.innerElement=document.getElementById("modalWrapper");this.header=document.getElementById("modaldialog_hd");this.footer=document.getElementById("modalFooter");this.body=document.getElementById("modalContent");this.mask=this.element=document.getElementById("modalOverlay");
pega.lang.augmentProto(pega.ui.modalDialog,pega.util.EventProvider);this.showEvent=this.createEvent("show");this.showEvent.signature=pega.util.CustomEvent.LIST;this.hideEvent=this.createEvent("hide");this.hideEvent.signature=pega.util.CustomEvent.LIST;this.beforeShowEvent=this.createEvent("beforeShow");this.beforeShowEvent.signature=pega.util.CustomEvent.LIST;this.beforeHideEvent=this.createEvent("beforeHide");this.beforeHideEvent.signature=pega.util.CustomEvent.LIST;this.cfg.addProperty("visible",
{value:!1,handler:this.configVisible});this.cfg.addProperty("close",{value:!0,handler:this.configClose});this.cfg.addProperty("width",{value:"auto",handler:this.configWidth});this.cfg.addProperty("height",{value:"auto",handler:this.configHeight});this.cfg.addProperty("fixedCenter",{value:!0,handler:this.configFixedCenter});this.cfg.addProperty("x",{handler:this.configX});this.cfg.addProperty("y",{handler:this.configY});this.cfg.addProperty("xy",{handler:this.configXY})},configVisible:function(a,b,
c){a=$("html").hasClass("phone");b=b[0];c=$(this.innerElement);var d=this;pega.u.d.ServerProxy.isDestinationLocal();b?(this.beforeShowEvent.fire(),d.mask.style.display="block",b=[{element:this.innerElement},{element:this.mask,paramsObj:{effect:ANIM_SLIDE_FADE_OPEN,delay:0}}],c={clearProps:"transform"},a?pega.u.d.allowTransition()&&(pega.u.d.modalDialog._revealDismissAnimation(b,d.animObj,"reveal",function(){pega.u.d.portalName&&(d.mask.style.top="1px",d.mask.offsetHeight,d.mask.style.top="0px")},
c),pega.u.d.localActionContainerOpened(!0),$(".screen-layout-region-main-middle").css("overflow-y","visible"),$(".screen-layout-region-main-middle").css("overflow-x","visible"),$(".screen-layout-region-main-middle").css("overflow","visible")):pega.u.d.modalDialog._revealDismissAnimation(b,this.animObj,"reveal",void 0,c),8==pega.env.ua.ie&&window.isChartForIE8&&(this.mask.style.zIndex="11"),this.bModalOpen=!0,this.showEvent.fire()):(d.mask.style.display="none",d.bModalOpen=!1,d.hideEvent.fire(),c.removeClass("local-action"),
pega.u.d.localActionContainerOpened(!1),$(".screen-layout-region-main-middle").css("overflow-y","auto"),$(".screen-layout-region-main-middle").css("overflow-x","auto"),$(".screen-layout-region-main-middle").css("overflow","auto"))},configClose:function(a,b,c){a=b[0];b=document.getElementById("container_close");a?b?"none"==b.style.display&&(b.style.display=""):(b=document.createElement("button"),pega.util.Dom.addClass(b,"container-close"),b.setAttribute("type","button"),b.innerHTML="\x26#160;",this.header.appendChild(b),
pega.util.Event.addListener(b,"click",pega.u.d.modalDialog.hide,pega.u.d.modalDialog)):b&&(b.style.display="none")},configWidth:function(a,b,c){a=b[0];this.element.style.width="auto"==a?"auto":parseInt(a)+"px"},configHeight:function(a,b,c){},configFixedCenter:function(a,b,c){b[0]?this.element.style.removeProperty("position"):this.element.style.position="absolute"},configX:function(a,b,c){a=parseInt(b[0]);this.element.style.left=a+"px"},configY:function(a,b,c){a=parseInt(b[0]);this.element.style.top=
a+"px"},configXY:function(a,b,c){a=b[0];b=parseInt(a[0]);this.element.style.left=b+"px";a=parseInt(a[1]);this.element.style.top=a+"px"},render:function(){},setHeader:function(a){if(this.header)var b=this.header;else pega.u.d.addModalHeader(),b=this.header;if(a.nodeName)b.innerHTML="",b.appendChild(a);else{if(!document.getElementById("modaldialog_hd_title")){var c=document.createElement("span");c.id="modaldialog_hd_title";b.appendChild(c)}document.getElementById("modaldialog_hd_title").innerHTML=a}},
setHeaderLabel:function(a,b){$("#modaldialog_hd_title").text(b)},_getEffect:function(a){switch(a){case "anim-bottom":a="anim-offbottom";break;case "anim-top":a="anim-offtop";break;case "anim-right":a="anim-offright";break;case "anim-left":a="anim-offleft"}return a},_getNewAnimInEffectForOldEffect:function(a){if(-1!==a.indexOf("null"))return"none";var b="none";pega.u.d.modalDialog._getEffect&&(b=pega.u.d.modalDialog._getEffect(a),b===a&&b.endsWith("-open")||(b+="-open"));return b},_getNewAnimOutEffectForOldEffect:function(a,
b){if(-1!==a.indexOf("null"))return"none";"anim-in-animation"===a?b="reverse-"+b:(b=pega.u.d.modalDialog._getEffect(a),b===a&&b.endsWith("-close")||(b+="-close"));return b},setTransitions:function(a,b,c){this.isLocalAction=b;b={};a&&a.animIn&&a.animOut?-1==a.animIn.indexOf("null")&&-1==a.animOut.indexOf("null")&&($(this.innerElement).addClass("local-action"),b.mobile={reveal:{effect:pega.u.d.modalDialog._getNewAnimInEffectForOldEffect(a.animIn)},dismiss:{effect:pega.u.d.modalDialog._getNewAnimOutEffectForOldEffect(a.animOut)}},
c="true",pega.u.d.submitModalDlgParam.isMobileFullScreen=c):a&&pega.u.d.modalDialog._processAnimObj&&(b=pega.u.d.modalDialog._processAnimObj(a));"true"===c?this.innerElement.classList.contains("local-action")||this.innerElement.classList.add("local-action"):this.innerElement.classList.remove("local-action");this.animObj=b},_processAnimObj:function(a){try{if(a){if(a.desktop){if(a.desktop.reveal){var b=pega.u.d.modalDialog._getNewAnimInEffectForOldEffect(a.desktop.reveal.effect);a.desktop.reveal.effect=
b}"false"===a.desktop.isCustomDismiss&&(a.desktop.dismiss=JSON.parse(JSON.stringify(a.desktop.reveal)),a.desktop.dismiss.effect="reverse-"+a.desktop.dismiss.effect)}if("false"===a.isCustomMobileAnim)return a.mobile=JSON.parse(JSON.stringify(a.desktop)),a;if(a.mobile){if(a.mobile.reveal){var c=pega.u.d.modalDialog._getNewAnimInEffectForOldEffect(a.mobile.reveal.effect);a.mobile.reveal.effect=c}if("false"===a.mobile.isCustomDismiss)a.mobile.dismiss=JSON.parse(JSON.stringify(a.mobile.reveal)),a.mobile.dismiss.effect=
"reverse-"+a.mobile.dismiss.effect;else{var d=pega.u.d.modalDialog._getNewAnimOutEffectForOldEffect(a.mobile.dismiss.effect,a.mobile.reveal.effect);a.mobile.dismiss.effect=d}}}}catch(f){}return a},_hasAnimations:function(a,b){var c=$("html").hasClass("phone")?"mobile":"desktop";return(a=a&&a[c]&&a[c][b])&&-1===a.effect.indexOf("none")},_revealDismissAnimation:function(a,b,c,d,f){var e=$("html").hasClass("phone")?"mobile":"desktop";pega.u.d.modalDialog._hasAnimations(b,c)?(b={effect:b[e][c].effect,
ease:b[e][c].ease,duration:b[e][c].speed},c={onAnimEnd:d},f&&(b=Object.assign(b,f)),"none"!==b.effect?pega.ui.animations.animate(a,b,c):d&&d()):d&&d()},show:function(){pega.mobile&&pega.mobile.sdk&&pega.u.d.submitModalDlgParam&&pega.u.d.submitModalDlgParam.isMobileFullScreen&&window.dispatchEvent(new CustomEvent("mobile-modal-show",{detail:{fullScreen:"true"===pega.u.d.submitModalDlgParam.isMobileFullScreen}}));this.cfg.setProperty("close",this.cfg.getProperty("close"));this.cfg.setProperty("visible",
!0);var a=document.body.style;if("undefined"==typeof window.bodyOverflow||""==window.bodyOverflow)window.bodyOverflow=a.overflow;if("undefined"==typeof window.bodyOverflowX||""==window.bodyOverflowX)window.bodyOverflowX=a.overflowX;if("undefined"==typeof window.bodyOverflowY||""==window.bodyOverflowY)window.bodyOverflowY=a.overflowY;document.body.style.overflow="hidden";pega.mobile.nativenav&&(this.nativeNavHistId=pega.mobile.nativenav.addToHistory(this.hide,this))},hide:function(){pega.util.Event.isIE&&
pega.util.Event.removeListener(document.body,"beforeactivate",pega.u.d.checkAccessKeys);pega.u.d.modalResizeObj&&(pega.u.d.modalResizeObj.destroy(),pega.u.d.modalResizeObj=null);pega.mobile&&pega.mobile.sdk&&pega.u.d.submitModalDlgParam&&pega.u.d.submitModalDlgParam.isMobileFullScreen&&window.dispatchEvent(new CustomEvent("mobile-modal-hide",{detail:{fullScreen:"true"===pega.u.d.submitModalDlgParam.isMobileFullScreen}}));pega.u.d.modalDialog&&pega.u.d.modalDialog.element&&pega.ctxmgr.unregisterContextSwitching(pega.u.d.modalDialog.element);
this.cfg||(this.cfg=new pega.util.Config(this));var a=this,b=[{element:this.innerElement},{element:this.mask,paramsObj:{effect:ANIM_SLIDE_FADE_CLOSE,delay:0}}];pega.u.d.isModalClosing=!0;this.beforeHideEvent.fire();pega.u.d.modalDialog._revealDismissAnimation(b,this.animObj,"dismiss",function(){a.innerElement.style.removeProperty("opacity");a.innerElement.style.removeProperty("visibility");a.innerElement.style.removeProperty("transform");a.cfg.setProperty("visible",!1);a.mask.style.removeProperty("opacity");
a.mask.style.removeProperty("transform")},{clearProps:"transform"});b=document.body.style;"undefined"!=typeof bodyOverflow&&b.overflow!=bodyOverflow&&(b.overflow=""===bodyOverflow?"":bodyOverflow,bodyOverflow="");"undefined"!=typeof bodyOverflowX&&b.overflowX!=bodyOverflowX&&(b.overflowX=""===bodyOverflowX?"":bodyOverflowX,bodyOverflowX="");"undefined"!=typeof bodyOverflowY&&b.overflowY!=bodyOverflowY&&(b.overflowY=""===bodyOverflowY?"":bodyOverflowY,bodyOverflowY="");pega.mobile.nativenav&&pega.mobile.nativenav.removeFromHistory(this.nativeNavHistId)}};
pega.ui.Doc.prototype.modalAlignInMultiIframe=function(a){var b=a.windowScroll||0,c=a.offset||{top:0,left:0},d=a.windowHeight;a=document.getElementsByClassName("modal-align-cell")[0];var f=document.getElementsByClassName("modal-wrapper")[0];a&&(a.style.verticalAlign="baseline",a.style.paddingTop="50px");var f=f.offsetHeight,e=document.documentElement.clientHeight,b=b||0,g=50;f<d&&(g=parseInt((d-f)/2));e<d&&(g=parseInt((e-f)/2));b<c.top?d=g:(d=b-c.top+g,b-c.top+g>e-f&&(d=e-f));a.style.paddingTop="".concat(d,
"px")};
pega.namespace("pega.ui");
(function(){pega.ui.TabView=function(a,b){b=b||{};1!=arguments.length||pega.lang.isString(a)||a.nodeName||(b=a,a=b.element||null);if(!a&&!b.element){var d=document.createElement("div");this.CLASSNAME&&(d.className=this.CLASSNAME);a=d}this._left=0;this._menuButtonListWidth=null;this._currentMenuButtonWidth=0;this._tabContainerWidth=null;this.isDCTabView=!1;pega.ui.TabView.superclass.constructor.call(this,a,b);this._scrollContainer&&this._isHorizontal&&(this._hideScrollers=this._scrollContainer.getAttribute("data-hide-tab-scroll"),
this._initEvents(),this._setLastOffset())};pega.extend(pega.ui.TabView,pega.util.Element);var e=pega.ui.TabView.prototype,h=pega.util.Dom,f=pega.util.Event;e.setHarnessHeaderIconsHeightWidth=function(){var a,b;(b=this.get("element"))&&(a=h.hasClass(b,"subTabbed"));b=!1;this._harnessHeaderIcons&&(!this.isDCTabView||this.isDCTabView&&a)&&(b=!0);b&&((a=this._tabParent)&&0!=a.offsetHeight&&(this._harnessHeaderIcons.style.height=a.lastChild.offsetHeight+"px"),this._harnessHeaderIcons.style.width=this._harnessHeaderIcons.firstChild.offsetWidth+
"px")};e._initEvents=function(){this._menuButton&&(f.addListener(this._menuButton,"click",this.showTabsMenu,null,this),f.addListener(this._menuButton,"keydown",this.showTabsMenu,null,this),f.isIE&&(this._menuButton.parentNode.onselectstart=function(){return!1}),this.objMenuXML=pega.tools.XMLDocument.get(),this.onBeforeShowMenu=new pega.util.CustomEvent("onBeforeShowMenu",this));var a=this;this.on("activeTabChange",this.focusActiveTab,null,this);pega.u.d.registerResize(function(){!a.isDCTabView&&a._harnessHeaderIcons&&
a._harnessHeaderIcons.offsetWidth!=a._harnessHeaderIcons.firstChild.offsetWidth&&(a._harnessHeaderIcons.style.width=a._harnessHeaderIcons.firstChild.offsetWidth+"px");window.setTimeout(function(){a.isDCTabView||a.resizeTabsScroll()},5)});pega.ui.d.attachOnload(function(){a._toggleQuickMenu()},!1);f.addListener(window,"resize",function(){a.isDCTabView?a.resizeTabsScroll():a._toggleQuickMenu()},null,this)};e.resizeTabsScroll=function(){this._scrollContainer&&this._isHorizontal&&(this.isDCTabView||this._setLastOffset(),
this._resizeScrollContainer(),this.hideTabsMenu(),this._toggleQuickMenu())};pega.ui.TabView.selectTab=function(a){var b=pega.ui.TabView.activeTabView;b.set("activeTab",b.getTab(a))};pega.ui.TabView.activeTabView=null;e.hideTabsMenu=function(){pega.ui.TabView.activeTabView=this;this.currentlyOpenedMenus&&this.currentlyOpenedMenus._hideAll()};e.showTabsMenu=function(a){if("keydown"!=a.type||13==a.keyCode||32==a.keyCode){var b=pega.ui.TabView.activeTabView;b&&b.currentlyOpenedMenus&&b.currentlyOpenedMenus._hideAll();
pega.ui.TabView.activeTabView=this;this.currentlyOpenedMenus=new pega.ui.menubar.Manager;var b=Math.abs(this._left),d=b+this._tabParent.parentNode.offsetWidth,g=this.get("tabs"),c=this.get("activeIndex"),x="\x3cpagedata\x3e\n\x3cMenu\x3e",e="Top"==this._tabPos?g.length-1:g.length,h=4;f.isIE&&!pega.u.d.inStandardsMode||this._fixTabsDisplay("inline-block");for(var l=0;l<e;l++){var n=g[l],k={},t={},p=n.get("element"),A=p.offsetLeft,m=A+p.offsetWidth,q=this.getTabLabelIconAndTooltip(p,n),w=q.icon,y=n=
"",u="",p="",v=q.label||q.tooltip||"",q=q.tooltip||q.label||"";if(A<b||m>d)k["background-color"]="#dbdbdb",t["background-color"]="#dbdbdb";c==l&&(k["font-weight"]="bold",t["font-weight"]="bold");w&&(t["background-image"]="url('"+w+"')",t["background-repeat"]="no-repeat",t["background-position"]="center",n="tabsMenuEmptyImageDiv");for(var z in k)y+=z+":"+k[z]+";";for(var B in t)u+=B+":"+t[B]+";";0<u.length&&(p+='leftstyle \x3d "'+u+'"');0<y.length&&(p+=' middlestyle \x3d "'+y+'" rightstyle \x3d "'+
y+'"');16<v.length&&(v=v.substring(0,13)+"...");v.length>h&&(h=v.length);k=v;q=q.replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;").replace(/"/g,"\x26quot;").replace(/'/g,"\x26apos;");k=k.replace(/&/g,"\x26amp;");p=p.replace(/&/g,"\x26amp;");n=n.replace(/&/g,"\x26amp;");x+='\n\x3cItem Value\x3d"'+k+l+'" Caption\x3d"'+k+'" ToolTip\x3d"'+q+'" '+p+' ImageClass\x3d"'+n+'" onClick\x3d"pega.ui.TabView.selectTab('+l+');"\x3e\x3c/Item\x3e'}f.isIE&&!pega.u.d.inStandardsMode||this._fixTabsDisplay("inline");
this.objMenuXML.loadXML(x+"\n\x3c/Menu\x3e\n\x3c/pagedata\x3e");z=this.objMenuXML.documentElement.selectSingleNode("//Menu");this.currentlyOpenedMenus.setStylePrefix("");this.currentlyOpenedMenus.desktopClickHandler.srcElement=this._menuButtonList;this.onBeforeShowMenu.fire();this.currentlyOpenedMenus.doContextMenu(z,{relativeElement:this._menuButtonList,align:"right"});f.stopEvent(a);return!1}};e._onDOMScroll=function(a){a=a.target?a.target:a.srcElement;if(this._isHorizontal){var b=a.scrollLeft,
d=this._lastItemOffset-this._tabContainerWidth;b>d&&(a.scrollLeft=b=d);this._left=b}this._toggleQuickMenu()};e.focusActiveTab=function(a){a=this._tabParent.childNodes[this.get("activeIndex")];this.scrollToElement(a)};e._setLastOffset=function(){if(("undefined"==typeof gCloseAllTabsInProgress||!gCloseAllTabsInProgress)&&this._scrollContainer&&this._isHorizontal){var a=this._tabParent.lastChild;a&&"Top"==this._tabPos&&(a=a.previousSibling);for(;a;)if("none"==a.style.display)a=a.previousSibling;else break;
a&&!h.hasClass(a,"rightborder")&&(this._lastItemOffset=a.offsetLeft+a.offsetWidth);this._toggleQuickMenu()}};e._toggleQuickMenu=function(){if(this._tabContainerWidth&&this._tabParent.parentNode){var a=this.get("tabs"),b=0==this._left?this._currentMenuButtonWidth:0,a="Top"==this._tabPos?a.length-1:a.length;0!=this._tabContainerWidth&&(this.isDCTabView&&this._menuButton?("inline-block"!=this._menuButtonList.style.display&&(this._menuButtonList.style.display="inline-block"),window.gIsCustomTabHeaderEnabled&&
(this._menuButtonList.style.visibility="hidden")):(this._reachedStart=0==a||0>=this._left,this._reachedEnd=0==a||this._tabContainerWidth+b+this._left>=this._lastItemOffset,this._reachedStart&&this._reachedEnd?(this._menuButton&&(this._menuButtonList.style.display="none",this._currentMenuButtonWidth=0),this.currentlyOpenedMenus&&this.hideTabsMenu()):this._menuButton&&(this._menuButtonList.style.display="inline-block",null==this._menuButtonListWidth&&(this._menuButtonListWidth=this._menuButton.offsetWidth),
this._currentMenuButtonWidth=this._menuButtonListWidth)))}};e.scrollToElement=function(a){var b;if((b="string"==typeof a?document.getElementById(a):a)&&b.nodeType&&!h.hasClass(b,"rightborder")&&(a=b.querySelector("span#TABANCHOR"),this._isHorizontal&&a)){b=a;a=this._tabParent.parentNode;var d,g=b.offsetLeft,c=Math.abs(this._left);b=g+b.offsetWidth;d=null==this._tabContainerWidth?this._tabContainerWidth=a.offsetWidth:this._tabContainerWidth;d=c+d;if(g>c&&b<d){this._toggleQuickMenu();return}b>=d&&(g=
c+(b-d));0>g&&(g=0);this._left=g;window.gIsCustomTabHeaderEnabled&&(a=a.firstElementChild);a.scrollLeft=this._left}this._toggleQuickMenu()};e._fixTabsDisplay=function(a){};e._resizeScrollContainer=function(){if("undefined"==typeof gCloseAllTabsInProgress||!gCloseAllTabsInProgress){var a=this._tabParent.parentNode;if(a&&this._isHorizontal){var b=a.offsetWidth,d=Math.abs(this._left),g=0,c=this._lastItemOffset-d;0<d&&c<=b&&(g=b-c);g=this._left+g;0<=g&&(g=0);this._left=g;this._tabContainerWidth=b;a.scrollLeft=
this._left;this.focusActiveTab()}}};e.getTabLabelIconAndTooltip=function(a,b){var d=a.querySelector("span[data-stl]"),g=a.getElementsByTagName("img"),c=a.querySelector("span[id\x3d'TABANCHOR']"),e=a.querySelector("div[node_name\x3d'pyCustomDCTabSection']"),r=a="",f="";if(window.gIsCustomTabHeaderEnabled&&e){if(a=e.innerText,b=e.querySelector("[title]"))f=b.title}else b&&("string"==typeof b.label&&0<b.label.length&&(a=b.label),"string"==typeof b.ToolTip&&0<b.ToolTip.length&&(f=b.ToolTip),"string"==
typeof b.iconPath&&0<b.iconPath.length&&(r=b.iconPath));""==a&&d&&(a=h.getInnerText(d));""==f&&c&&(f=c.title);""==r&&0<g.length&&(r=g[0].src,f=g[0].title);r&&""==f&&(f=g[0].title);return{label:a,icon:r,tooltip:f}};e.CLASSNAME="yui-navset";e.TAB_PARENT_CLASSNAME="yui-nav";e.CONTENT_PARENT_CLASSNAME="yui-content";e._tabParent=null;e._contentParent=null;e.addTab=function(a,b){var d=this.get("tabs");if(!d)return this._queue[this._queue.length]=["addTab",arguments],!1;b=void 0===b?d.length:b;a.tabview=
this;var g=this.getTab(b),e=this;this.get("element");var x=this._tabParent,r=this._contentParent,m=a.get("element"),l=a.get("contentEl"),n=c(this._contentParent);this._scrollContainer&&0<n.length&&(this._scrollContainer.style.display="");g?x.insertBefore(m,g.get("element")):x.appendChild(m);l&&!h.isAncestor(r,l)&&r.appendChild(l);a.get("active")?this.set("activeTab",a,!0):a.set("contentVisible",!1,!0);var k=function(a,b){var d=pega.util.Event.getTarget(a);d&&d.tagName&&d.tagName.match(/^(input|select|textarea)$/gi)||
pega.util.Event.preventDefault(a);a=e.get("activeTab");e.set("activeTab",b);b.tabview.isDCTabView&&pega.desktop.sendEvent("DCTabSwitch",{fromTab:{id:a.label,handle:a.key,GadgetName:a.GadgetName},toTab:{id:b.label,handle:b.key,GadgetName:b.GadgetName}})};this.hasClass("with-fixed-header")?f.addListener(m,a.get("activationEvent"),k,a):a.addListener(a.get("activationEvent"),k,a);a.addListener("activationEventChange",function(b){b.prevValue!=b.newValue&&(this.tabview.hasClass("with-fixed-header")?(f.removeListener(a.get("element"),
b.prevValue,k,a),f.addListener(a.get("element"),b.newValue,k,a)):(a.removeListener(b.prevValue,k,a),a.addListener(b.newValue,k,a)))});d.splice(b,0,a);this.fireEvent("tabAdded",{tabs:this.get("tabs"),addedTab:a})};e.DOMEventHandler=function(a){var b=this.get("element"),d=pega.util.Event.getTarget(a),g=this._tabParent,c=!1;b&&b.id&&0==b.id.indexOf("PEGA_ACCORDION")&&(c=!0);if(h.isAncestor(g,d)){for(var g=null,e=this.get("tabs"),f=0,m=e.length;f<m;f++)if(b=e[f].get("element"),e[f].get("contentEl"),c){var l=
pega.util.Dom.getChildren(b)[0];if(d==b||d==l||h.isAncestor(l,d)){g=e[f];break}}else if((d==b||h.isAncestor(b,d))&&(null==b.className||0>b.className.indexOf("addTab"))){g=e[f];break}g&&g.fireEvent(a.type,a)}};e.getTab=function(a){return this.get("tabs")[a]};e.getTabIndex=function(a){for(var b=null,d=this.get("tabs"),g=0,c=d.length;g<c;++g)if(a==d[g]){b=g;break}return b};e.removeTab=function(a,b){var d=this.get("tabs").length,c=this.getTabIndex(a);b||a!=this.get("activeTab")||1<d&&(c+1==d?this.set("activeIndex",
c-1):this.set("activeIndex",c+1));this._tabParent.removeChild(a.get("element"));this._contentParent.removeChild(a.get("contentEl"));this._configs.tabs.value.splice(c,1);this.resizeTabsScroll();this.fireEvent("tabRemoved",{tabs:this.get("tabs"),removedTab:a})};e.toString=function(){return"TabView "+(this.get("id")||this.get("tagName"))};e.contentTransition=function(a,b){a.set("contentVisible",!0);b.set("contentVisible",!1)};e.initAttributes=function(a){pega.ui.TabView.superclass.initAttributes.call(this,
a);a.orientation||(a.orientation="top");var b=this.get("element");this.setAttributeConfig("tabs",{value:[],readOnly:!0});var d=h.getFirstChild(b);this._isCSSResize=!1;var c;0!=b.id.indexOf("PEGA_ACCORDION")&&(c=h.getChildrenBy(b,function(a){return a.className&&-1!=a.className.indexOf("scrlCntr")})[0]);this.hasClass("with-fixed-header")&&(this._isCSSResize=!0,c=h.getFirstChild(document.getElementById("dummyDiv")));c?(this._scrollContainer=c,c=b.getAttribute("data-pos"),this._isHorizontal="Top"==c||
"Bottom"==c,this._tabPos=c,"Top"==c?(this._isCSSResize&&(d=h.getFirstChild(document.getElementById("dummyDiv"))),this._tabParent=d.lastChild.firstChild):"Left"==c||"Right"==c?(b=d,(d=this._isCSSResize?$(".dc-"+c.toLowerCase()+" .contents .pegaTabGrp .tab-ul")[0]:h.getFirstChild(b.rows[0].cells[0]))&&"Left"==c?this._tabParent=d:(d=this._isCSSResize?$(".dc-"+c.toLowerCase()+" .contents .pegaTabGrp .tab-ul")[0]:h.getFirstChild(b.rows[0].cells[1]))&&"Right"==c&&(this._tabParent=d)):"Bottom"==c?(d=this._isCSSResize?
h.getFirstChild(document.getElementById("dummyDiv")):h.getLastChild(b),this._tabParent=d.lastChild.firstChild):this._tabParent=m.call(this),b=h.getElementsByClassName("harnessHeaderIcons","div",d),0<b.length&&(this._harnessHeaderIcons=b[0]),d=d.getElementsByTagName("ol"),0<d.length&&(this._menuButton=(this._menuButtonList=d[0])?this._menuButtonList.getElementsByTagName("a")[0]:null)):"UL"===d.nodeName?this._tabParent=d:"TABLE"===d.nodeName?(b=d,(d=h.getFirstChild(b.rows[0].cells[0]))&&"UL"===d.nodeName?
this._tabParent=d:(d=h.getFirstChild(b.rows[0].cells[1]))&&"UL"===d.nodeName&&(this._tabParent=d)):this._tabParent="DIV"===d.nodeName?h.getLastChild(b):m.call(this);this._contentParent=this.getElementsByClassName(this.CONTENT_PARENT_CLASSNAME,"div")[0]||w.call(this);this.setAttributeConfig("orientation",{value:a.orientation,method:function(a){var b=this.get("orientation");b!=a&&this.removeClass("yui-navset-"+b);switch(a){case "bottom":this.appendChild(this._tabParent)}}});this.setAttributeConfig("activeIndex",
{value:a.activeIndex,method:function(a){this.set("activeTab",this.getTab(a))},validator:function(a){return!this.getTab(a).get("disabled")}});this.setAttributeConfig("activeTab",{value:a.activeTab,method:function(a){var b=this.get("activeTab");a&&(a.set("active",!0),this._configs.activeIndex.value=this.getTabIndex(a));b&&b!=a&&b.set("active",!1);b&&a!=b?this.contentTransition(a,b):a&&a.set("contentVisible",!0)},validator:function(a){return!a.get("disabled")}});this._tabParent&&u.call(this);for(var e in this.DOM_EVENTS)pega.lang.hasOwnProperty(this.DOM_EVENTS,
e)&&this.addListener.call(this,e,this.DOMEventHandler)};var u=function(){var a;this.get("element");var b=c(this._tabParent),d=c(this._contentParent);this._scrollContainer&&0==d.length&&(this._scrollContainer.style.display="none");for(var e=0,f=b.length;e<f;++e)a={},d[e]&&(a.contentEl=d[e]),a=new pega.ui.Tab(b[e],a),this.addTab(a),a.hasClass(a.ACTIVE_CLASSNAME)&&(this._configs.activeTab.value=a)},m=function(a){a=document.createElement("ul");this.TAB_PARENT_CLASSNAME&&(a.className=this.TAB_PARENT_CLASSNAME);
this.get("element").appendChild(a);return a},w=function(a){a=document.createElement("div");this.CONTENT_PARENT_CLASSNAME&&(a.className=this.CONTENT_PARENT_CLASSNAME);this.get("element").appendChild(a);return a},c=function(a){var b=[];a=a.childNodes;for(var d=0,c=a.length;d<c;++d)1==a[d].nodeType&&(b[b.length]=a[d]);return b}})();
(function(){var e=pega.util.Dom,h=function(c,a){a=a||{};1!=arguments.length||pega.lang.isString(c)||c.nodeName||(a=c,c=a.element);c||a.element||(c=u.call(this,a));this.loadHandler={success:function(a){this.set("content",a.responseText)},failure:function(a){pega.log("loading failed: "+a.statusText,"error","Tab")}};h.superclass.constructor.call(this,c,a);this.DOM_EVENTS={}};pega.extend(h,pega.util.Element);var f=h.prototype;f.LABEL_TAGNAME="em";f.ACTIVE_CLASSNAME="selected";f.DISABLED_CLASSNAME="disabled";
f.LOADING_CLASSNAME="loading";f.dataConnection=null;f.loadHandler=null;f.toString=function(){var c=this.get("element");return"Tab "+(c.id||c.tagName)};f.initAttributes=function(c){c=c||{};h.superclass.initAttributes.call(this,c);var a=this.get("element");this.setAttributeConfig("activationEvent",{value:c.activationEvent||"click"});this.setAttributeConfig("labelEl",{value:c.labelEl||this.getElementsByTagName(this.LABEL_TAGNAME)[0],method:function(b){var d=this.get("labelEl");if(d){if(d==b)return!1;
this.replaceChild(b,d)}else a.firstChild?this.insertBefore(b,a.firstChild):this.appendChild(b)}});this.setAttributeConfig("label",{value:c.label||m.call(this),method:function(a){this.get("labelEl")||this.set("labelEl",document.createElement(this.LABEL_TAGNAME));this.get("labelEl").innerHTML=a}});this.setAttributeConfig("contentEl",{value:c.contentEl||document.createElement("div"),method:function(a){var b=this.get("contentEl");if(b){if(b==a)return!1;this.replaceChild(a,b)}}});this.setAttributeConfig("content",
{value:c.content,method:function(a){this.get("contentEl").innerHTML=a}});this.setAttributeConfig("dataSrc",{value:c.dataSrc});this.setAttributeConfig("cacheData",{value:c.cacheData||!1,validator:pega.lang.isBoolean});this.setAttributeConfig("loadMethod",{value:c.loadMethod||"GET",validator:pega.lang.isString});this.setAttributeConfig("dataLoaded",{value:!1,validator:pega.lang.isBoolean,writeOnce:!0});this.setAttributeConfig("dataTimeout",{value:c.dataTimeout||null,validator:pega.lang.isNumber});this.setAttributeConfig("active",
{value:c.active||this.hasClass(this.ACTIVE_CLASSNAME),method:function(a){!0===a?(this.addClass(this.ACTIVE_CLASSNAME),e.addClass(this.get("element"),this.get("element").getAttribute("sel_prefix")+"-selected")):(this.removeClass(this.ACTIVE_CLASSNAME),e.removeClass(this.get("element"),this.get("element").getAttribute("sel_prefix")+"-selected"))},validator:function(a){return pega.lang.isBoolean(a)&&!this.get("disabled")}});this.setAttributeConfig("disabled",{value:c.disabled||this.hasClass(this.DISABLED_CLASSNAME),
method:function(a){!0===a?e.addClass(this.get("element"),this.DISABLED_CLASSNAME):e.removeClass(this.get("element"),this.DISABLED_CLASSNAME)},validator:pega.lang.isBoolean});this.setAttributeConfig("href",{value:c.href||"#",method:function(a){this.getElementsByTagName("a")[0].href=a},validator:pega.lang.isString});this.setAttributeConfig("contentVisible",{value:c.contentVisible,method:function(a){var b=this.get("contentEl");a?(""!=b.style.display&&"block"!=b.style.display&&(b.style.display="block"),
this.get("dataSrc")&&(this.get("dataLoaded")&&this.get("cacheData")||w.call(this))):"none"!=b.style.display&&(b.style.display="none",(a=(a=(a=this.get("element").parentNode)&&a.getElementsByClassName("selected")&&0<a.getElementsByClassName("selected").length&&a.getElementsByClassName("selected")[0])&&pega.util.Dom.getElementsById("ACCORANCHOR",a)&&0<pega.util.Dom.getElementsById("ACCORANCHOR",a).length&&pega.util.Dom.getElementsById("ACCORANCHOR",a)[0])&&pega.u.d.scrollIntoViewIfOutOfView(a))},validator:pega.lang.isBoolean})};
var u=function(c){if(c&&c.labelEl&&"LI"==c.labelEl.tagName)return c.labelEl;var a=document.createElement("li"),b=document.createElement("a");b.href=c.href||"#";a.appendChild(b);var d=c.label||null;(c=c.labelEl||null)?d||m.call(this,c):c=document.createElement(this.LABEL_TAGNAME);b.appendChild(c);return a},m=function(){var c=this.get("labelEl");if(c)return c.innerHTML},w=function(){if(!pega.util.Connect)return pega.log("pega.util.Connect dependency not met","error","Tab"),!1;e.addClass(this.get("contentEl").parentNode,
this.LOADING_CLASSNAME);this.dataConnection=pega.util.Connect.asyncRequest(this.get("loadMethod"),this.get("dataSrc"),{success:function(c){this.loadHandler.success.call(this,c);this.set("dataLoaded",!0);this.dataConnection=null;e.removeClass(this.get("contentEl").parentNode,this.LOADING_CLASSNAME)},failure:function(c){this.loadHandler.failure.call(this,c);this.dataConnection=null;e.removeClass(this.get("contentEl").parentNode,this.LOADING_CLASSNAME)},scope:this,timeout:this.get("dataTimeout")})};
pega.ui.Tab=h})();
pega.namespace("pega.desktop");pega.widget.ResizePanel=function(l,m){0<arguments.length&&pega.widget.ResizePanel.superclass.constructor.call(this,l,m)};pega.extend(pega.widget.ResizePanel,pega.widget.Panel);pega.widget.ResizePanel.CSS_PANEL_RESIZE="resizepanel";pega.widget.ResizePanel.CSS_RESIZE_HANDLE="resizehandle";
pega.widget.ResizePanel.prototype.init=function(l,m){pega.widget.ResizePanel.superclass.init.call(this,l);this.createEvent("resizeEvent");this.beforeInitEvent.fire(pega.widget.ResizePanel);pega.util.Dom.addClass(this.innerElement,pega.widget.ResizePanel.CSS_PANEL_RESIZE);this.resizeHandle=document.createElement("div");this.resizeHandle.id=this.id+"_r";this.resizeHandle.className=pega.widget.ResizePanel.CSS_RESIZE_HANDLE;this.beforeRenderEvent.subscribe(function(){this.footer||this.setFooter("")},
this,!0);this.renderEvent.subscribe(function(){var d=this;this.ddDragdrop=new pega.util.DD("modaldialog_c");this.ddDragdrop.addInvalidHandleType("INPUT");this.ddDragdrop.addInvalidHandleType("TEXTAREA");this.ddDragdrop.addInvalidHandleType("SELECT");this.ddDragdrop.addInvalidHandleType("LABEL");this.ddDragdrop.addInvalidHandleType("BUTTON");this.ddDragdrop.addInvalidHandleType("IMG");this.ddDragdrop.startDrag=function(){var e,b,h,g,a,f;if(d.cfg.getProperty("constraintoviewport")){var c=pega.widget.Overlay.VIEWPORT_OFFSET;
e=d.element.offsetHeight;b=d.element.offsetWidth;h=pega.util.Dom.getViewportWidth();g=pega.util.Dom.getViewportHeight();a=pega.util.Dom.getDocumentScrollLeft();f=pega.util.Dom.getDocumentScrollTop();e+c<g?(this.minY=f+c,this.maxY=f+g-e-c):(this.minY=f+c,this.maxY=f+c);b+c<h?(this.minX=a+c,this.maxX=a+h-b-c):(this.minX=a+c,this.maxX=a+c);this.constrainY=this.constrainX=!0}else this.constrainY=this.constrainX=!1;d.dragEvent.fire("startDrag",arguments)};this.ddDragdrop.endDrag=function(){d.syncPosition();
d.cfg.refireEvent("iframe");"mac"==this.platform&&pega.env.ua.gecko&&this.showMacGeckoScrollbars();d.dragEvent.fire("onDrag",arguments)};d.innerElement.appendChild(d.resizeHandle);this.ddResize=new pega.util.DragDrop(this.resizeHandle.id,this.id);this.ddResize.setHandleElId(this.resizeHandle.id);this.ddResize.onMouseDown=function(e){this.startWidth=d.innerElement.offsetWidth;this.startHeight=d.innerElement.offsetHeight;d.cfg.setProperty("width",this.startWidth+"px");d.cfg.setProperty("height",this.startHeight+
"px");this.startPos=[pega.util.Event.getPageX(e),pega.util.Event.getPageY(e)];d.innerElement.style.overflow="hidden";e=document.getElementById("modaldialog_bd");pega.util.Event.isIE||(e.style.height="auto");var b=$("#modaldialog_con",document.getElementById("modaldialog")).get(0);if(b){for(;"DIV"!=b.parentNode.nodeName;)b=b.parentNode;b=b.parentNode}else b=e;d.body=b;d.body.style.overflow="auto"};this.ddResize.endDrag=function(e){var b=document.getElementById("modaldialog_ft").offsetHeight,h;pega.util.Event.getPageX(e);
pega.util.Event.getPageY(e);var g=this.actualHeight;h=this.actualHeight;e=this.actualWidth;var a=document.getElementById("modaldialog_bd"),f=$("#modaldialog_con",document.getElementById("modaldialog")).get(0);if(f){for(;"DIV"!=f.parentNode.nodeName;)f=f.parentNode;f=f.parentNode}else f=a;"undefined"!=typeof window.parent.frames.actionIFrame&&pega.u.d.resizeActionIFrame(!1);var c=a=0,k=pega.util.Dom.getElementsById("EXPAND-OUTERFRAME",document.getElementById("modaldialog_bd"),"TABLE");if(null!=k&&
(k=k[0],k=k.nextSibling,null!=k)){for(;1!=k.nodeType&&(k=k.nextSibling,null!=k););null!=k&&(c=k.offsetHeight)}null!=document.getElementById("modaldialog_hd")&&(a=document.getElementById("modaldialog_hd").offsetHeight);0==c&&(c=40);document.getElementById("modaldialog_bd").style.overflow=pega.u.d.useOldModalDialog?"visible":"hidden";f.style.height=g<=a+c?a+c+20+"px":0<g-(a+c+b)?h-a-c-b+5+"px":h-a-c+5+"px";b=document.getElementById("modaldialog");h=b.offsetHeight;g=document.getElementById("modaldialog_ft");
g=g.offsetTop+g.offsetHeight;h!=g&&(b.style.height=(h>g?h:g)+"px");f.style.width=e-2+"px";d.body=document.getElementById("modaldialog_bd")};this.ddResize.onDrag=function(e){var b=[pega.util.Event.getPageX(e),pega.util.Event.getPageY(e)];e=Math.max(this.startWidth+(b[0]-this.startPos[0]),10);b=Math.max(this.startHeight+(b[1]-this.startPos[1]),10);this.actualWidth=e;this.actualHeight=b;300>=e&&(e=this.actualWidth=300);200>=b&&(b=this.actualHeight=200);d.cfg.setProperty("width",e+"px");d.cfg.setProperty("height",
b+"px");var h=0,g=0,a=pega.util.Dom.getElementsById("EXPAND-OUTERFRAME",document.getElementById("modaldialog_bd"),"TABLE");if(null!=a&&(a=a[0],a=a.nextSibling,null!=a)){for(;1!=a.nodeType&&(a=a.nextSibling,null!=a););null!=a&&(g=a.offsetHeight)}null!=document.getElementById("modaldialog_hd")&&(h=document.getElementById("modaldialog_hd").offsetHeight);var f=pega.util.Dom.getElementsById("mCurve",document.getElementById("modaldialog")),a=0;if(f)for(var c=f.length,k=0;k<c;k++)if(a+=f[k].clientHeight,
"none"==pega.util.Dom.getStyle(f[k],"display")){a=0;break}f=document.getElementById("modaldialog_bd");f.style.overflowX="hidden";if(c=$("#modaldialog_con",document.getElementById("modaldialog")).get(0)){for(;"DIV"!=c.parentNode.nodeName;)c=c.parentNode;c=c.parentNode}else c=f;c.style.width=e+"px";b<=h+g?c.style.height=h+g+15+"px":0<b-(h+g+a+40)&&(c.style.height=b-(h+g+a+40)+"px");20>d.innerElement.offsetWidth&&(d.innerElement.style.width="20px");d.fireEvent("resizeEvent",{ev:"resizeEvent",target:d})}},
this,!0);m&&this.cfg.applyConfig(m,!0);this.initEvent.fire(pega.widget.ResizePanel)};pega.widget.ResizePanel.prototype.configClose=function(l,m,d){l=function(d,b){b.hide()};m[0]?this.close?this.close.style.display="block":(this.close=document.createElement("span"),pega.util.Dom.addClass(this.close,"container-close"),this.close.innerHTML="\x26#160;",this.innerElement.appendChild(this.close),pega.util.Event.addListener(this.close,"click",l,this)):this.close&&(this.close.style.display="none")};
(function(){function r(a){g[a]||(g[a]="\\u"+("0000"+(+a.charCodeAt(0)).toString(16)).slice(-4));return g[a]}function z(a,b){var h=function(a,d){var e,q,k=a[d];if(k&&"object"===typeof k)for(e in k)l.hasOwnProperty(k,e)&&(q=h(k,e),void 0===q?delete k[e]:k[e]=q);return b.call(a,d,k)};return"function"===typeof b?h({"":a},""):a}function n(a){return l.isString(a)&&A.test(a.replace(B,"@").replace(C,"]").replace(D,""))}function E(a,b){a=a.replace(u,r);if(n(a))return z(eval("("+a+")"),b);throw new SyntaxError("JSON.parse");
}function v(a){var b=typeof a;return w[b]||w[p.call(a)]||("object"===b?a?"object":"null":"undefined")}function F(a,b,h){function d(a,f){var c=a[f],g=v(c),e=[],n=h?": ":":",m,p;G(c)&&t(c.toJSON)?c=c.toJSON(f):"date"===g&&(c=q(c));t(l)&&(c=l.call(a,f,c));c!==a[f]&&(g=v(c));switch(g){case "date":case "object":break;case "string":return'"'+c.replace(x,r)+'"';case "number":return isFinite(c)?c+"":"null";case "boolean":return c+"";case "null":return"null";default:return}for(f=k.length-1;0<=f;--f)if(k[f]===
c)throw Error("JSON.stringify. Cyclical reference");a=y(c);k.push(c);if(a)for(f=c.length-1;0<=f;--f)e[f]=d(c,f)||"null";else for(m in g=b||c,f=0,g)g.hasOwnProperty(m)&&(p=d(c,m))&&(e[f++]='"'+m.replace(x,r)+'"'+n+p);k.pop();return h&&e.length?a?"[\n"+e.join(",\n").replace(/^/gm,h)+"\n]":"{\n"+e.join(",\n").replace(/^/gm,h)+"\n}":a?"["+e.join(",")+"]":"{"+e.join(",")+"}"}if(void 0!==a){var l=t(b)?b:null,e=p.call(h).match(/String|Number/)||[],q=pega.lang.JSON.dateToString,k=[],g,m,n;if(l||!y(b))b=void 0;
if(b){g={};m=0;for(n=b.length;m<n;++m)g[b[m]]=!0;b=g}h="Number"===e[0]?Array(Math.min(Math.max(0,h),10)+1).join(" "):(h||"").slice(0,10);return d({"":a},"")}}var l=pega.lang,t=l.isFunction,G=l.isObject,y=l.isArray,p=Object.prototype.toString,d=(pega.env.ua.caja?window:this).JSON,u=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,B=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,C=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,D=/(?:^|:|,)(?:\s*\[)+/g,
A=/^[\],:{}\s]*$/,x=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},w={undefined:"undefined",string:"string","[object String]":"string",number:"number","[object Number]":"number","boolean":"boolean","[object Boolean]":"boolean","[object Date]":"date","[object RegExp]":"object"},d="[object JSON]"===p.call(d)&&d;pega.lang.JSON={useNativeParse:!!d,
useNativeStringify:!!d,isSafe:function(a){return n(a.replace(u,r))},parse:function(a,b){return d&&pega.lang.JSON.useNativeParse?d.parse(a,b):E(a,b)},stringify:function(a,b,h){return d&&pega.lang.JSON.useNativeStringify?d.stringify(a,b,h):F(a,b,h)},dateToString:function(a){function b(a){return 10>a?"0"+a:a}return a.getUTCFullYear()+"-"+b(a.getUTCMonth()+1)+"-"+b(a.getUTCDate())+"T"+b(a.getUTCHours())+":"+b(a.getUTCMinutes())+":"+b(a.getUTCSeconds())+"Z"},stringToDate:function(a){var b=a.match(/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{3}))?Z$/);
b&&(a=new Date,a.setUTCFullYear(b[1],b[2]-1,b[3]),a.setUTCHours(b[4],b[5],b[6],b[7]||0));return a}};pega.lang.JSON.isValid=pega.lang.JSON.isSafe})();pega.register("json",pega.lang.JSON,{version:"2.8.1",build:"19"});
(function(d){function da(){try{if(pega.u.d.ServerProxy.isDestinationLocal())K=!1;else{var a=$(".screen-layout");K=a&&1<=a.length&&("absolute"==$(".screen-layout-region-main-middle").css("position")||"absolute"==$(".screen-layout-region-main-sidebar1").css("position"))?!0:!1}}catch(c){K=!1}}function oa(){var a=null;this.execute=function(c,b,k,d,p){a=setTimeout(function(){var l=b.apply(c,k);a=null;"function"==typeof p&&p.apply(d,l)},0)};this.cleanUp=function(){null!=a&&(clearTimeout(a),a=null)}}function pa(a,
c,b,k){this.initiateFetch=function(){var l=function(){pega.u.d.loadHTMLEleCallback(c);"function"==typeof k&&k.apply(b);if(b.onloads&&0<b.onloads.length)for(var a=0;a<b.onloads.length;a++)L(b.onloads[a],b.getContentContainerElement())};if(a&&a.firstChild&&"Pega_Cal_Cont"==a.firstChild.id){if(c.innerHTML=a.innerHTML,"function"==typeof k&&k.apply(b),b.onloads&&0<b.onloads.length)for(l=0;l<b.onloads.length;l++)L(b.onloads[l],b.getContentContainerElement())}else d.u.d.loadDOMObject(c,a,l)};this.cleanUp=
Z}function qa(a,c,b,k,d){var l=new oa;this.initiateFetch=function(){l.execute(a,c,b,this,this.asyncExecuteCompleted)};this.asyncExecuteCompleted=function(a){"function"==typeof d&&d.apply(k,a);this.cleanUp()};this.cleanUp=function(){l.cleanUp()}}function ra(a,c,b,k){var l=null;this.initiateFetch=function(){var p=a.name,r=a.preActivity,g={success:b,failure:k,scope:c},e=SafeURL_createFromURL(pega.u.d.url),q=r?r.name:null,m=new SafeURL;if(p&&(e.put("pyActivity","pzGetPopOverData"),e.put("SectionName",
p),r&&(e.put("PreActivity",q),(p=r.page)&&e.put("PreActivityPage",p),r=r.params))){var p=new SafeURL,t;for(t in r)p.put(t,r[t]);m.put("PreActivityParams",p.toQueryString())}l=d.u.d.asyncRequest("POST",e,g,m)};this.cleanUp=function(){"object"===typeof l&&(d.util.Connect.isCallInProgress(l)||d.util.Connect.abort(l),l=null)}}var ea='\x3ciframe  id\x3d"poi{0}" src\x3d"about:blank" class\x3d"pz-po-ci"\x3e\x3c/iframe\x3e',u=null,C=document.createElement("div");C.style.zIndex=100;C.id="_popOversContainer";
var P=!1,K=null,R=navigator.userAgent,W=R.match(/Android/i)||R.match(/BlackBerry/i)||R.match(/iPhone|iPad|iPod/i)||R.match(/Opera Mini/i)||R.match(/IEMobile/i);d.u.d.closeOverlayHandler=function(a){try{var c,b,k=!1;if(a&&a.inactiveTab){if(c=pega.u.d.getPopOver(a.inactiveTab).getActivePopOverElement(),b=pega.u.d.getPopOver(a.inactiveTab),k=!0,0===b.getLevel())var d=b.getAssociatedElement(),k=pega.util.Dom.isAncestor(a.layoutBody,d)}else c=pega.u.d.getPopOver().getActivePopOverElement(),b=pega.u.d.getPopOver(),
k=!0;k&&c&&-1!==c.className.indexOf("overlayPO")&&b.close()}catch(p){}};pega.ui.EventsEmitter.subscribe("onUnloadOverlayClose",d.u.d.closeOverlayHandler);pega.ui.EventsEmitter.isListenerSubscribed("onHarnessUnload",d.u.d.closeOverlayHandler)||pega.ui.EventsEmitter.subscribe("onHarnessUnload",d.u.d.closeOverlayHandler);var Z=function(){},T=function(a){var c=-1,b=document.body;try{for(;null!=a&&a!=b&&("object"!==typeof a.po||"function"!==typeof a.po.getLevel);)if(a=a.parentNode||a.offsetParent,null==
a){a=b;break}}catch(k){a=b}null!=a&&"object"===typeof a.po&&"function"===typeof a.po.getLevel&&(c=a.po.getLevel());return c},aa=function(a){var c=a.getLevel(),c=document.getElementById("poi"+c);a=a.getActivePopOverElement();var b=fa(a);"number"===typeof b.x&&d.util.Dom.setStyle(c,"width",b.x+"px");"number"===typeof b.y&&d.util.Dom.setStyle(c,"height",b.y+"px");a=ga(a);d.util.Dom.setXY(c,[a.x,a.y]);c.style.visibility="visible"},ha=function(a){a=a.getLevel();document.getElementById("poi"+a).style.visibility=
"hidden"},O=new function(a){var c=null,b=null,k=null,l=null,p=null,r=function(a){t(a,"click")},g=function(a){t(a,"iframe-clickaway")},e=function(a){if(pega.util.Event.getTarget(a).ownerDocument!==document){var b=pega.util.Event.getTarget(a).ownerDocument.defaultView.frameElement;(!b&&0==$(".ui-dialog").length||0==$(b).parents("#modaldialog_con").length&&0==$(b).parents(".ui-dialog").length||b.ownerDocument!=document)&&t(a,"iframe-clickaway")}},q=function(a){t(a,"scroll")},m=function(a){27===a.keyCode&&
t(a,"escape");9===a.keyCode&&document.activeElement&&document.getElementById("_popOversContainer")&&document.getElementById("_popOversContainer").hasChildNodes()&&(document.getElementById("_popOversContainer").contains(document.activeElement)||t(a,"escape"))},t=null,M=!1,h;this.registerScrollHandlers=function(a){for(;null!=a&&a.nodeName&&"main"!=a.nodeName.toLowerCase();){if("auto"==$(a).css("overflow")||"scroll"==$(a).css("overflow")||-1!==$(a).css("overflow").indexOf("scroll"))pega.util.Event.addListener(a,
"scroll",q),a.setAttribute("data-popover-scroll","yes");if("body"==a.nodeName.toLowerCase())break;a=a.parentNode}};this.unregisterScrollHandlers=function(){var a=document.querySelectorAll("*[data-popover-scroll\x3d'yes']");if(a&&1<=a.length)for(var b=0;b<a.length;b++)if(!(0<=pega.u.d.getPopOverLevel(a[b])&&pega.u.d.getPopOver(a[b]).isActive())){pega.util.Event.removeListener(a[b],"scroll",q);var c=a[b];c.removeAttribute&&c.removeAttribute("data-popover-scroll")}};this.registerClickAway=function(a){M||
(t=a,h=setTimeout(function(){pega.util.Event.addListener(document.body,"click",r);var a=document.body.getElementsByTagName("iframe");if(a&&0<a.length)for(var h=0;h<a.length;h++)-1!=a[h].className.indexOf("cke_")&&pega.util.Event.addListener(a[h].contentWindow,"click",g),"actionIFrame"==a[h].name&&"Take Action"==a[h].title&&pega.util.Event.addListener(a[h].contentWindow,"click",g);try{null!=pega.desktop.support.getDesktopApplication()&&pega.desktop.registerEventListener("DesktopMouseClick",e)}catch(n){}(c=
document.getElementById("HARNESS_CONTENT")||($("div.static-dc-tab")?$("div.static-dc-tab")[0]:null)||($("main.screen-layout-region")?$("main.screen-layout-region")[0]:null))&&d.util.Event.addListener(c,"scroll",q);(b=$("main.screen-layout-region")?$("main.screen-layout-region")[0]:null)&&b!=c&&(a=d.u.d.getPopOver().getContentContainerElement(),pega.util.Dom.isAncestor(b,a)||d.util.Event.addListener(b,"scroll",q));(l=document.getElementById("PEGA_HARNESS"))&&d.util.Event.addListener(l,"scroll",q);
(a=document.getElementById("INNERDIV-SubSectionpyPortalContentBB"))&&d.util.Event.addListener(a,"scroll",q);(p=document.getElementsByClassName("workarea-view-scroll-wrapper"))&&d.util.Event.addListener(p,"scroll",q);d.util.Event.addListener(window,"scroll",q);if(pega.u.d.bModalDialogOpen&&pega.u.d.modalDialog){a=pega.u.d.modalDialog.body;try{(k=a.getElementsByClassName("modal-scroll-panel")[0])&&d.util.Event.addListener(k,"scroll",q)}catch(n){}}d.util.Event.addListener(document,"keyup",m)},0),M=!0)};
this.removeClickAway=function(){clearTimeout(h);if(M){pega.util.Event.removeListener(document.body,"click",r);try{null!=pega.desktop.support.getDesktopApplication()&&pega.desktop.cancelEventListener("DesktopMouseClick",e)}catch(va){}c&&d.util.Event.removeListener(c,"scroll",q);b&&d.util.Event.removeListener(b,"scroll",q);l&&d.util.Event.removeListener(l,"scroll",q);var a=document.getElementById("INNERDIV-SubSectionpyPortalContentBB");a&&d.util.Event.removeListener(a,"scroll",q);p&&d.util.Event.removeListener(p,
"scroll",q);k&&d.util.Event.removeListener(k,"scroll",q);d.util.Event.removeListener(window,"scroll",q);d.util.Event.removeListener(document,"keyup",m);M=!1}}}(d.util.Event),ia=function(a){var c=document.getElementById("po"+a);if(!c){c=document.createElement("div");c.innerHTML=(ea+'\x3cdiv id\x3d"po{0}" class\x3d"pz-po-c"\x3e\x3cul class\x3d"pz-po-c-ul"\x3e\x3cli\x3e\x3cdiv id\x3d"arrow{0}" class\x3d"po-arrow-hide"\x3e\x3cdiv class\x3d"border" id\x3d"arrow-border"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"poc{0}"\x3e\x3c/div\x3e\x3c/li\x3e\x3cli id\x3d"pohr{0}" class\x3d"pz-po-c-hr"\x3e\x3c/li\x3e\x3cli id\x3d"pob{0}" style\x3d"text-align:center;"\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e').replace(/\{0\}/g,
a);a=c.firstChild;var b=a.tagName;C.appendChild(a);if("div"===b.toLowerCase())return a;a=c.firstChild;C.appendChild(a);return a}return c},sa=function(a,c){if(a){a=a.childNodes;for(var b=a.length,k=0;k<b;k++){var d=a[k];d.tagName&&"span"===d.tagName.toLowerCase()&&d.childNodes&&d.childNodes.length&&(d=d.childNodes[0]);d.tagName&&"table"===d.tagName.toLowerCase()&&"EXPAND-OUTERFRAME"===d.id&&(d.style.width=c)}}},ja={leftTop:0,centerTop:1,rightTop:2,leftMiddle:3,centerMiddle:4,rightMiddle:5,leftBottom:6,
centerBottom:7,rightBottom:8},ca=function(a,c,b,k,l,p,r){var g="";c.style.cssText=g+"z-index:100;";var e=pega.util.Dom.getClientRegion();try{var q=document.getElementById("PEGA_HARNESS"),m=a;0<l&&(m=d.u.d.getPopOver().getAssociatedElement());"object"===typeof r&&r.useRelativeElement&&(m=a);var t=0;try{var M=$(".pz-gap-panel").get(0);void 0!=M&&(t=$(M).css("top"),t="auto"!=t?t.replace(/px/ig,"").replace(/%/ig,""):$(M).position().top)}catch(U){}if(pega.util.Dom.isAncestor(q,m))for(var h=q.parentNode;h&&
h.tagName&&"body"!=h.tagName.toLowerCase();)if($(h).hasClass("screen-layout-region")){var m="",m=pega.u.d.isOrientationRTL()?$(h).css("right"):$(h).css("left"),m="auto"!=m?m.replace(/px/ig,"").replace(/%/ig,""):$(h).position().left,u=$(C).closest(h),H=u&&0<u.length;if(!(isNaN(m)||"absolute"!=$(h).css("position")||!(!jQuery("html").hasClass("ff")&&"fixed"!=$(C).css("position")||jQuery("html").hasClass("ff")&&"static"===$(C).css("position")&&h.tagName&&"main"===h.tagName.toLowerCase()&&H)&&h.tagName&&
"main"==h.tagName.toLowerCase()||W&&jQuery("html").hasClass("safari")||jQuery("html").hasClass("iOS"))&&0<=e.right-m){var v=$(h).css("width"),v=v.replace(/px/ig,"").replace(/%/ig,"");e.right-=m;v<e.right&&(e.right=v)}break}else h=h.parentNode}catch(U){}h=e.bottom-e.top;u=e.right-e.left;b.offsetAttach=b.offsetAttach||{};b.offsetAttach.x=b.offsetAttach.x||0;b.offsetAttach.y=b.offsetAttach.y||0;b.fieldAttach=b.fieldAttach||"rightBottom";b.popOverAttach=b.popOverAttach||"rightTop";b.mouseOrTouchPositionX=
b.mouseOrTouchPositionX||null;b.size=b.size||{};b.size.min=b.size.min||{};b.size.min.x=b.size.min.x||50;b.size.min.y=b.size.min.y||50;b.size.max=b.size.max||{};b.size.max.x=b.size.max.x?Math.min(b.size.max.x,u-20):u-20;b.size.max.y=b.size.max.y?Math.min(b.size.max.y,h-20):h-20;u=!1;"true"==a.getAttribute("data-setActualY")&&(u=!0);H=!1;h=void 0;b.mouseOrTouchPositionX&&!isNaN(b.mouseOrTouchPositionX)&&(h=b.mouseOrTouchPositionX,H=!0);var n=ga(a,h),w=b.offsetAttach.x,D=b.offsetAttach.y,A=ja[b.fieldAttach],
E=ja[b.popOverAttach],v=c.scrollWidth,h=c.scrollHeight,m=r&&!1===r.overflow,M=r&&!0===r.hideVScroll,y={};M&&(y["overflow-y"]="hidden");v<=b.size.min.x?(v=b.size.min.x,y.width=b.size.min.x+"px"):v>b.size.max.x&&(v=b.size.max.x,y.width=b.size.max.x+"px",m||(y["overflow-x"]="auto"));h<=b.size.min.y?(h=b.size.min.y,y.height=b.size.min.y+"px"):h>b.size.max.y&&(h=b.size.max.y,y.height=b.size.max.y+"px",M||m||(y["overflow-y"]="auto"));var x,z,L=!1;b=!1;0==A%3?0==E%3?(x=n.x,z=n.x+(H?0:a.offsetWidth?a.offsetWidth:
0)-v):2==E%3?(x=n.x-v,z=n.x+(a.offsetWidth?a.offsetWidth:0)):(x=n.x-v/2,z=n.x+a.offsetWidth-v/2):2==A%3?0==E%3?(x=n.x+a.offsetWidth,z=n.x-v):2==E%3?(x=n.x+a.offsetWidth-v,z=n.x):(x=n.x+a.offsetWidth-v/2,z=n.x-v/2):0==E%3?(x=n.x+a.offsetWidth/2,z=n.x+a.offsetWidth/2-v):2==E%3?(x=n.x+a.offsetWidth/2-v,z=n.x+a.offsetWidth/2):(x=n.x+a.offsetWidth/2-v/2,z=n.x+a.offsetWidth/2-v/2);x+=w;z-=w;0==parseInt(A/3)?0==parseInt(E/3)?(w=n.y,n=n.y+a.offsetHeight-h):2==parseInt(E/3)?(w=n.y-h,n=n.y+a.offsetHeight):
(w=n.y-h/2,n=n.y+a.offsetHeight-h/2):2==parseInt(A/3)?0==parseInt(E/3)?(w=n.y+a.offsetHeight,n=n.y-h):2==parseInt(E/3)?(w=n.y+a.offsetHeight-h,n=n.y):(w=n.y+a.offsetHeight-h/2,n=n.y-h/2):0==parseInt(E/3)?(w=n.y+a.offsetHeight/2,n=n.y+a.offsetHeight/2-h):2==parseInt(E/3)?(w=n.y+a.offsetHeight/2-h,n=n.y+a.offsetHeight/2):(w=n.y+a.offsetHeight/2-h/2,n=n.y+a.offsetHeight/2-h/2);w+=D;n-=D;D=0;try{pega.util.Event.isIE&&pega.u.d.inStandardsMode&&pega.u.d.bModalDialogOpen&&pega.u.d.modalDialog&&pega.util.Dom.isAncestor(pega.u.d.modalDialog.body,
a)&&!isNaN(document.body.scrollTop)&&0<document.body.scrollTop&&(D=document.body.scrollTop)}catch(U){}E=A=0;try{if(null==K&&da(),K){var q=document.getElementById("PEGA_HARNESS"),F=$(a).closest("div[data-mdc-id]");if(q&&pega.util.Dom.isAncestor(q,a)&&"absolute"===$(".screen-layout-region-main-middle").css("position")&&F&&0==F.length){var N=$(".screen-layout-region-main-middle").scrollTop(),Q=$(".screen-layout-region-main-middle").scrollLeft();N&&!isNaN(N)&&(A=N);Q&&!isNaN(Q)&&(E=Q)}}}catch(U){}x>=
e.left&&x+v<e.right?g+="left:"+(x+E)+"px;":z>e.left&&z+v<e.right?(g+="left:"+(z+E)+"px;",L=!0):(q=Math.min(e.right,x+v)-Math.max(e.left,x),F=Math.min(e.right,z+v)-Math.max(e.left,z),q>=F?(y.width=q+"px",m||(y["overflow-x"]="auto"),g=x<e.left?g+("left:"+e.left+"px;"):g+("left:"+x+"px;")):(y.width=F+"px",m||(y["overflow-x"]="auto"),L=!0,z<e.left?0>a.getBoundingClientRect().left&&d.u.d.scrolled&&0==e.left&&pega.u.d.findParentTable(a)?(g+="left:"+z+"px;",d.u.d.scrolled=!1):g+="left:"+e.left+"px;":g+=
"left:"+z+"px;"));F=N=q=0;if(0<l&&(a=d.u.d.getPopOver(a))&&(a=a.getContentContainerElement().parentNode)){for(a=a.getElementsByClassName("centerOverlay");0<l;){var Q="po"+(l-1),I;for(x=0;x<a.length;x++)if(a[x].id==Q){I=a[x];break}--l}I&&(I=I.className)&&-1!=I.indexOf("centerOverlay")&&(F=1,q=w-(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop),N=n-(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop))}I=0;a=navigator.userAgent.match(/Edge/ig);
document&&document.body&&document.body.scrollTop&&!a&&(I=document.body.scrollTop);1===F&&(A=0);w>e.top&&w+h<e.bottom?g=1==F?g+("top:"+(q-D-t+A+0-I)+"px;"):g+("top:"+(w-D-t+A+0-I)+"px;"):n>e.top&&n+h<e.bottom?(g=1==F?g+("top:"+(N-D-t+A+0-I)+"px;"):g+("top:"+(n-D-t+A+0-I)+"px;"),b=!0):(I=Math.min(e.bottom,w+h)-Math.max(e.top,w),a=Math.min(e.bottom,n+h)-Math.max(e.top,n),I>=a?(y.height=I+"px",M||m||(y["overflow-y"]="auto"),u&&0>w?g+="top:"+(w-D-t+A+0-q)+"px;":w<e.top?(1==F&&(e.top-=window.pageYOffset||
document.documentElement.scrollTop||document.body.scrollTop),g+="top:"+(e.top-D-t+A+0)+"px;"):g+="top:"+(w-D-t+A+0)+"px;"):(y.height=a+"px",M||m||(y["overflow-y"]="auto"),b=!0,n<e.top?(1==F&&(e.top-=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop),g+="top:"+(e.top-D-t+A+0)+"px;"):($(c).hasClass("smartInfoContainer")&&n>=e.bottom&&0>a&&(y.height="0px"),g+="top:"+(n-D-t+A+0)+"px;")));if(p&&0<p.length){var f=document.getElementById("arrow"+l);f.className=b&&L?p[3]:b?p[1]:
L?p[2]:p[0]}for(var S in y)g+=S+":"+y[S]+";";k||(c.firstChild.style.cssText="width:"+(v-8)+"px; height:"+(h-8)+"px; text-align:center; vertical-align:middle; overflow: hidden;z-index:100;");r&&!0===r.setVisible&&(g+="visibility: visible;");c.style.cssText=g+"z-index:100;";if(H)try{if(k=0,f=document.getElementById("arrow"+l),"string"===typeof f.className){if(-1!=f.className.indexOf("arrow top")||-1!=f.className.indexOf("arrow bottom"))k=-1*(parseInt($(f).css("left").replace(/px/ig,""))+15),0>parseInt($(c).css("left").replace(/px/ig,
""))+k&&(k=-1*parseInt($(c).css("left").replace(/px/ig,"")));else if(-1!=f.className.indexOf("arrow right")||-1!=f.className.indexOf("arrow left"))k=parseInt($(f).css("right").replace(/px/ig,""))+15,parseInt($(c).css("left").replace(/px/ig,""))+k+v>e.right&&(k-=parseInt($(c).css("left").replace(/px/ig,""))+k+v-e.right);isNaN(k)||$(c).css("left",parseInt($(c).css("left").replace(/px/ig,""))+k+"px")}}catch(U){}if(r&&!0===r.setMaxHeightAndWidth&&!W)try{l=!1;var J=c.style.cssText,G=$(c),B=G.css("max-height"),
ba=G.css("max-width");if("string"===typeof B&&("none"==B||""==B)){var X=G.css("top").replace(/px/ig,""),ka=G.css("border-top-width").replace(/px/ig,""),B=h+2*ka,ta=getComputedStyle(c).getPropertyValue("height");1>=Math.abs(B-parseInt(ta))&&(B+=1);b?isNaN(h)||(J+="max-height:"+B+"px;overflow:auto;",J+="top:"+(X-2*ka)+"px;",l=!0):!isNaN(X)&&!isNaN(e.bottom)&&1<=e.bottom-X&&(J+="max-height:"+(e.bottom-X)+"px;overflow:auto;",l=!0)}if("string"===typeof ba&&("none"==ba||""==ba)){var O=G.css("left").replace(/px/ig,
"");!isNaN(O)&&!isNaN(e.right)&&1<=e.right-O&&(J+="max-width:"+(e.right-O)+"px;"+(l?"":"overflow:auto;"),l=!0)}l&&(c.style.cssText=J)}catch(U){}},fa=function(a){a=d.util.Dom.getRegion(a);return{x:a.right-a.left,y:a.bottom-a.top}},ga=function(a,c){var b=navigator.userAgent.match(/iPad/i),k=d.util.Dom.getXY(a);c&&(k[0]=c);c=!0;if(pega.u.NavigateTopHandler)try{var l=d.u.d.getPopOver(),p=a;0<=d.u.d.getPopOverLevel(a)&&(p=l.getAssociatedElement());var r=pega.u.d.findParent(p,"PEGA_HARNESS");"static"===
$(".screen-layout-region-main-middle").css("position")&&r.scrollWidth>document.body.scrollWidth&&0<r.scrollLeft&&(k[0]+=r.scrollLeft);if(null!==r)for(var g=r.parentNode;g&&g.tagName&&"body"!=g.tagName.toLowerCase();)if($(g).hasClass("screen-layout-region")){l=a="";"static"!=$(g).css("position")&&(a=$(g).css("left"),l=$(g).css("top"));if("auto"!=a&&"auto"!=l)a=a.replace(/px/ig,"").replace(/%/ig,""),l=l.replace(/px/ig,"").replace(/%/ig,"");else{var e=$(g).position();a=e.left;l=e.top}var q=document.getElementById("_popOversContainer");
isNaN(a)||isNaN(l)||!("absolute"==$(g).css("position")||frameElement&&"static"==$(g).css("position"))||!(!jQuery("html").hasClass("ff")&&"fixed"!=$(C).css("position")||jQuery("html").hasClass("ff")&&"static"==$(C).css("position"))&&g.tagName&&"main"==g.tagName.toLowerCase()||!g.tagName||"main"!=g.tagName.toLowerCase()||!g.contains(q)||W&&!b&&(jQuery("html").hasClass("safari")||jQuery("html").hasClass("iOS"))||(0<=k[0]-a&&(k[0]-=a),0<=k[1]-l&&(k[1]-=l),c=!1);frameElement&&"static"==$(g).css("position")&&
document.body.scrollTop&&(k[1]+=$(g)[0].scrollTop);break}else g=g.parentNode}catch(m){}c&&document.getElementById("PEGA_HARNESS")&&window.getComputedStyle&&(b=window.getComputedStyle(document.body).marginLeft)&&(b=b.replace(/px/ig,""),k[0]-=b);return{x:k[0],y:k[1]}},L=function(a,c){var b=typeof a;if("undefined"!==b){if("function"===b)return a.apply(null,c);if("object"===b&&0<b.length){var b=a[0],d=a[1];"object"===typeof d&&"number"===typeof d.length?"object"===typeof c&&0<c.length&&d.unshift.apply(d,
c):d=c;return b.apply(a[2],d)}}},la={bind:Z},H=null,na=function(a){var c=null,b=null,k="init",l={ok:!0,cancel:!0},p={},r=la,g={},e={},q={},m={displayLoader:!0,customShowLoader:null,customHideLoader:null,contentClass:"",arrowDivClasses:null},t={},u=null,h=null,K=null,P=this;this.onloads=[];this.getLevel=function(){return a};this.getState=function(){return k};this.setState=function(a){k=a};this.isActive=function(){return"active"===k||"loader"===k};var v=!1;this.isDisabledClickaway=function(){return v};
this.isCenterOverlay=function(){return!1};var n=function(a){a=a.getContentContainerElement();var b=$(a).find("li:eq(0)")[0];a=document.createElement("button");a.className="circular-btn-placeholder";a.setAttribute("type","button");a.setAttribute("role","presentation");a.setAttribute("aria-hidden","true");$(b).parent().prepend(a);var f=document.createElement("button");f.className="circular-btn-placeholder";f.setAttribute("type","button");f.setAttribute("role","presentation");f.setAttribute("aria-hidden",
"true");$(b).parent().append(f);a.onfocus=function(){$(":not(.circular-btn-placeholder):tabbable:last",b).focus()};f.onfocus=function(){$(":not(.circular-btn-placeholder):tabbable:first",b).focus()}};this.attachOnLoads=function(a){this.onloads.push(a)};var w=function(a){var b=document.body;(new MutationObserver(function(b,f){for(var c=0;c<b.length;c++){if(!$(a).is(":visible")&&pega.u.d.getPopOver(a)){var S=pega.u.d.getPopOver(a).getActivePopOverElement();if(S&&S.className&&(-1!==S.className.indexOf("smarttip-container")||
-1!==S.className.indexOf("smartInfoContainer"))){pega.u.d.getPopOver(a).close();f.disconnect();break}}if(!$(a).is(":visible")){f.disconnect();break}}})).observe(b,{attributes:!0,childList:!0,subtree:!0,attributeFilter:["style"]})};this.open=function(f){if(this.isActive()){var c=f.bindings;if(c=c&&c.associatedProperty===p.associatedProperty&&c.associatedElement===p.associatedElement&&c.selectionProperty===p.selectionProperty)c=(c=f.visual)&&c.contentClass===m.contentClass;if(c){if(!f.extraParams||
0==f.extraParams.refresh)return}else this.close("clickaway",null,!0)}D=!1;k="init";r=la;t={};p={};g={};e={};q={};l={ok:!0,cancel:!0};m={displayLoader:!0,customShowLoader:null,customHideLoader:null,contentClass:"",arrowDivClasses:null,isMobile:!1};f&&(f.bindings&&(p=f.bindings,"object"===typeof p.bindingProvider&&"function"===typeof p.bindingProvider.bind&&(r=p.bindingProvider)),f.position&&(g=f.position),f.content&&(e=f.content,"undefined"==typeof e.type&&(e.type="section")),f.callbacks&&(q=f.callbacks),
f.buttons&&(l=f.buttons),f.visual&&$.extend(!0,m,f.visual),f.extraParams&&(t=f.extraParams));ia(a);c=document.getElementById("pol"+a);c||(c=document.createElement("div"),c.innerHTML='\x3cdiv id\x3d"pol{0}" class\x3d"pega_ui_busyIndicator pz-po-l" \x3e\x3cdiv style\x3d"width:20px; height:20px"\x3e\x3c/div\x3e\x3c/div\x3e'.replace(/\{0\}/g,a),c=c.firstChild,C.appendChild(c));h=c;u=N();null!=t.bIsCenterOverlay&&"TRUE"==t.bIsCenterOverlay.toUpperCase()&&(C.className="fixedPopOverContainer",C.style.display=
"block",this._IsCenterOverlay=!0);b&&document.body.contains(b)||(b=ia(a),b.po=this);c=$("html").hasClass("phone");m.isMobile=c;var c=m,J={};if(c.animations){var G=c.animations;if(G&&G.animIn&&G.animOut){if(-1==G.animIn.indexOf("null")&&-1==G.animOut.indexOf("null")){var B=pega.u.d.modalDialog._getEffect?pega.u.d.modalDialog._getEffect(G.animIn)+"-open":"none",G="anim-in-animation"===G.animOut?"reverse-"+B:pega.u.d.modalDialog._getEffect?pega.u.d.modalDialog._getEffect(G.animOut)+"-close":"none";J.mobile=
{reveal:{effect:B},dismiss:{effect:G}};c.isMobileFullScreen="true"}}else G&&pega.u.d.modalDialog._processAnimObj&&(J=pega.u.d.modalDialog._processAnimObj(G));c.animations=J}m.isMobile&&"true"===m.isMobileFullScreen?b.classList.contains("local-action")||b.classList.add("local-action"):b.classList.remove("local-action");c=m.contentClass;t&&t.modalStyle&&""!=t.modalStyle&&(c+=" "+t.modalStyle);0<c.length&&(d.util.Dom.addClass(b,c),null!=t.bIsCenterOverlay&&"TRUE"==t.bIsCenterOverlay.toUpperCase()&&d.util.Dom.addClass(b,
"centerOverlay"));m.arrowDivClasses&&0<m.arrowDivClasses.length&&(document.getElementById("arrow"+a).className=m.arrowDivClasses[0]);p.popOverElement=b;null==u&&(u=document.body,g.fieldAttach=g.popOverAttach="centerMiddle",g.offsetAttach={x:0,y:0});k="ready";k="loader";!0===m.displayLoader&&("function"==typeof m.customShowLoader?m.customShowLoader():(fa(u),ca(u,h,g),aa(this),h.style.visibility="visible",jQuery("html").hasClass("safari")&&jQuery("html").hasClass("iOS")&&(c=window.getComputedStyle?
window.getComputedStyle(document.body,"").visibility:document.body.style.visibility,document.body.style.visibility="hidden",document.body.offsetHeight,document.body.style.visibility=c),K=pega.u.d.setBusyIndicator(h,!0,!1)));c=!0;null!=f.extraParams&&null!=f.extraParams.bIsDisableClickaway&&"TRUE"==f.extraParams.bIsDisableClickaway.toUpperCase()&&(c=!1,v=!0);c&&(v=!1,O.registerClickAway(A));switch(e.type){case "section":F=new ra(e,this,x,z);break;case "method":c=e.contentMethod;B=typeof c;J="object"===
B;if("function"!==B&&!J&&"function"!==typeof c[0])throw"Content Fetch Method is not specified.\nPopover requires this method if the value of content.type is specified as 'method'.";B=J?c[1]:null;J=J?c[2]:null;"object"===typeof B&&"number"===typeof B.length?B.unshift(this):B=[this];F=new qa(J,c,B,this,E);break;case "domElement":if("object"!==typeof e.element)throw"Content dom element reference is not specified.\nPopover requires this reference if the value of content.type is specified as 'domElement'.";
F=new pa(e.element,document.getElementById("poc"+a),this,R)}pega.ctxmgr&&"function"===typeof pega.ctxmgr.registerContextSwitching&&pega.ctxmgr.registerContextSwitching(C);F.initiateFetch();m.isMobile&&"true"===m.isMobileFullScreen&&(pega.u.d.localActionContainerOpened(!0),$(".screen-layout-region-main-middle").css("overflow-y","visible"),$(".screen-layout-region-main-middle").css("overflow-x","visible"),$(".screen-layout-region-main-middle").css("overflow","visible"));n(this);O&&f.bindings&&f.bindings.associatedElement&&
(O.registerClickAway(A),O.registerScrollHandlers(f.bindings.associatedElement));f.bindings&&f.bindings.associatedElement&&(null==H&&(H=[]),H.push(f.bindings.associatedElement));pega.mobile.nativenav&&null!=this.getAssociatedElement()&&!this.getAssociatedElement().dataset.backNavId&&(this.getAssociatedElement().dataset.backNavId=pega.mobile.nativenav.addToHistory(this.close,this));b&&b.className&&(-1!==b.className.indexOf("smarttip-container")||-1!==b.className.indexOf("smartInfoContainer"))&&w(f.bindings.associatedElement)};
this.getActivePopOverElement=function(){return"active"===k?b:"loader"===k&&m.displayLoader?h:null};this.getContentContainerElement=function(){return b};this.getAssociatedElement=function(){return u};this.getSectionElement=function(){var a;a:{a=document.getElementById("poc"+this.getLevel());for(var b=a.childNodes.length,c=0;c<b;c++){var d=a.childNodes[c];if("RULE_KEY"===d.id){a=d;break a}}a=null}return a};var D=!1,A=function(a,c){switch(c){case "scroll":if(m.isMobile&&"true"===m.isMobileFullScreen)break;
try{var f=d.util.Event.getTarget(a);if(f&&"#document"==f.nodeName)try{if(pega.u.d.bModalDialogOpen&&"active"===k&&b){var e=N(),h=document.getElementById("modalOverlay");h&&pega.util.Dom.isAncestor(h,e)&&d.u.d.getPopOver(e).isActive()&&(d.u.d.scrolled=!0,d.u.d.getPopOver(e).reposit(),"hidden"===$(b).css("visibility")&&$(b).css("visibility","visible"))}}catch(Y){}else if(f&&"div"==f.nodeName.toLowerCase()&&"HARNESS_CONTENT"==f.id)document.getElementById("fixedBBStyles")&&b&&(e=N(),pega.util.Dom.isAncestor(f,
e)&&d.u.d.getPopOver(e).isActive()&&(e.setAttribute("data-setActualY","true"),d.u.d.scrolled=!0,d.u.d.getPopOver(e).reposit(),e.removeAttribute("data-setActualY"),"hidden"===$(b).css("visibility")&&$(b).css("visibility","visible")));else if(b&&f&&("div"==f.nodeName.toLowerCase()&&"PEGA_HARNESS"==f.id||f.getAttribute("class")&&(-1!=f.getAttribute("class").indexOf("modal-scroll-panel")||-1!=f.getAttribute("class").indexOf("workarea-view-scroll-wrapper")||-1!=f.getAttribute("class").indexOf("screen-layout-region")||
-1!=f.getAttribute("class").indexOf("static-dc-tab"))))e=N(),pega.util.Dom.isAncestor(f,e)&&d.u.d.getPopOver(e).isActive()&&(e.setAttribute("data-setActualY","true"),d.u.d.scrolled=!0,d.u.d.getPopOver(e).reposit(),e.removeAttribute("data-setActualY"),"hidden"===$(b).css("visibility")&&$(b).css("visibility","visible"));else if(f&&"div"==f.nodeName.toLowerCase()&&"INNERDIV-SubSectionpyPortalContentBB"==f.id)e=N(),e.setAttribute("data-setActualY","true"),d.u.d.scrolled=!0,d.u.d.getPopOver(e).reposit(),
e.removeAttribute("data-setActualY"),"hidden"===$(b).css("visibility")&&$(b).css("visibility","visible");else{var e=N(),g;g=null!=H&&1<=H.length?H[H.length-1]:null;if(f&&"yes"==f.getAttribute("data-popover-scroll"))if(pega.util.Dom.isAncestor(f,e)&&d.u.d.getPopOver(e).isActive())e.setAttribute("data-setActualY","true"),d.u.d.scrolled=!0,d.u.d.getPopOver(e).reposit(),e.removeAttribute("data-setActualY"),"hidden"===$(b).css("visibility")&&$(b).css("visibility","visible");else if(pega.util.Dom.isAncestor(f,
g)&&d.u.d.getPopOver(g).isActive()){g.setAttribute("data-setActualY","true");var l=d.u.d.getPopOver(g);d.u.d.scrolled=!0;l.reposit({useRelativeElement:!0},g);g.removeAttribute("data-setActualY");var n=l.getContentContainerElement();"hidden"===$(n).css("visibility")&&$(n).css("visibility","visible")}}}catch(Y){}break;case "click":c=-1;try{f=d.util.Event.getTarget(a);if(!pega.util.Dom.inDocument(f))break;var p=document.getElementById("ISnsPopDiv"),q=document.getElementById("menuFromOverlay");if(p&&
pega.util.Dom.isAncestor(p,f)||q){q&&$(q).remove();break}var r=document.getElementsByClassName("daterangefullscreen");if(W&&r&&pega.util.Dom.isAncestor(r[0],f))break;c=T(f)}catch(Y){break}p=d.u.d.getPopOver();a=-1!==c?d.u.d.getPopOver(c):null;a=null==a?p:a.getChildPopOver(!1);if(null!=a&&a.getAssociatedElement()!=f){c=[];for(c.push(a);null!=a.getChildPopOver(!1)&&a.getChildPopOver(!1).isActive();)c.push(a.getChildPopOver(!1)),a=a.getChildPopOver(!1);for(;0<c.length&&0==c[c.length-1].isDisabledClickaway();)c.pop().close("clickaway",
"","",f)}break;case "iframe-clickaway":f=d.util.Event.getTarget(a);if(!f)break;a=p=d.u.d.getPopOver();if(null!=a&&a.getAssociatedElement()!=f){c=[];for(c.push(a);null!=a.getChildPopOver(!1)&&a.getChildPopOver(!1).isActive();)c.push(a.getChildPopOver(!1)),a=a.getChildPopOver(!1);for(;0<c.length&&0==c[c.length-1].isDisabledClickaway();)c.pop().close("iframe-clickaway","","",f)}break;default:p=d.u.d.getPopOver();if("escape"===c){try{if(9===a.keyCode&&pega.u.d.focusElement&&pega.u.d.focusElement.firstElementChild&&
"iconOpenRule"===pega.u.d.focusElement.firstElementChild.className&&document.activeElement&&document.activeElement.tagName&&"body"===document.activeElement.tagName.toLowerCase())break}catch(Y){}if(27===a.keyCode&&p){c=-1;try{f=d.util.Event.getTarget(a);if(!pega.util.Dom.inDocument(f))break;c=T(f)}catch(Y){break}(c=-1!==c?d.u.d.getPopOver(c):null)?c.close("","","",f):p.close("","","",f)}}9===a.keyCode&&p&&(c=p.getActivePopOverElement(),a=d.util.Event.getTarget(a),c&&c.className&&-1!==c.className.indexOf("smarttip-container")&&
a===p.getAssociatedElement()||p.isDisabledClickaway()||p.close("","","",f))}},E=function(a){y(this)},y=function(c){I();Q();r.bind.call(r,c,p);k="active";L(q.onContentReady,[b]);ma("onContentReady");var f=P.getSectionElement();sa(f,"auto");if(!c._IsCenterOverlay||1!=c._IsCenterOverlay&&"TRUE"!=c._IsCenterOverlay.toUpperCase())ca(u,b,g,!0,a,m.arrowDivClasses,t);else{var f="z-index:100;",d=pega.util.Dom.getClientRegion(),e=d.bottom-d.top,d=d.right-d.left,h=b.scrollWidth,f=b.scrollHeight>=e?f+"overflow-y:auto;height:"+
(e-20)+"px;":f+"overflow-y:auto;max-height:100%;";h>=d&&(f=f+"overflow-x:auto;width:"+(d-20)+"px;");b.style.cssText=f}aa(c);pega.ctx&&pega.ctx.pzHarnessID&&b.setAttribute("data-harness-id",pega.ctx.pzHarnessID);var l=$(b);pega.u.d.ServerProxy.isDestinationLocal();m.isMobile?pega.u.d.allowTransition()?setTimeout(function(){l.css("visibility","visible");pega.u.d.modalDialog&&pega.u.d.modalDialog._revealDismissAnimation&&pega.u.d.modalDialog._revealDismissAnimation(b,m.animations,"reveal",function(){L(q.onContentDisplayed,
[b])},{clearProps:"transform"})},0):l.css("visibility","visible"):(l.css("visibility","visible"),pega.u.d.modalDialog&&pega.u.d.modalDialog._revealDismissAnimation&&pega.u.d.modalDialog._revealDismissAnimation(b,m.animations,"reveal",void 0,{clearProps:"transform"}));m.isMobile&&"true"===m.isMobileFullScreen?(P.setProperHeight(),$(window).resize(function(a){P.setProperHeight()})):L(q.onContentDisplayed,[b])};this.setProperHeight=function(){if(m.isMobile&&"true"===m.isMobileFullScreen){var a=$(b).height(),
c;if($($(b).find("#poc0").find(".sectionDivStyle")[0]).children().last().hasClass("layout")){c=$($(b).find("#poc0").find(".sectionDivStyle")[0]).children().last()[0];var d=0;if(null!=c){for(;1!=c.nodeType&&(c=c.nextSibling,null!=c););null!=c&&(d=c.offsetHeight)}c=d}else c=0;d=$(b).find("#modaldialog_con").find(".sectionDivStyle")[0];$(d).css("max-height",a-c-2);$(d).css("overflow-y","auto")}};var x=function(b){if(!D&&"loader"==k){b=b.responseText;var c=document.createElement("div");c.innerHTML=b;
var f=document.getElementById("poc"+a),e=this;d.u.d.loadDOMObject(f,c,function(){pega.u.d.loadHTMLEleCallback(f);y(e)})}},z=function(){},R=function(){y(this)},F=null,N=function(){if(p.associatedElement)return p.associatedElement;var a=null;p.associatedProperty&&(a=null);return a},Q=function(){if(!0===m.displayLoader)if("function"==typeof m.customHideLoader)m.customHideLoader();else if(K.hide(),h.style.cssText="visibility:hidden;",h.firstChild.style.cssText="",jQuery("html").hasClass("safari")&&jQuery("html").hasClass("iOS")){var a;
a=window.getComputedStyle?window.getComputedStyle(document.body,"").visibility:document.body.style.visibility;document.body.style.visibility="hidden";document.body.offsetHeight;document.body.style.visibility=a}},I=function(){var b=document.getElementById("pob"+a);if(b){var c=document.getElementById("pohr"+a),d="";if(l.ok)var e=l.okText?l.okText:"OK",d=d+'\x3cbutton type\x3d"button" class\x3d"pzhc pzbutton" onclick\x3d"pega.u.d.getPopOver({0}).close(\'{1}\');"\x3e\x3cimg class\x3d"pzbtn-i" src\x3d"webwb/zblankimage.gif"/\x3e{2}\x3c/button\x3e\x26nbsp;'.replace(/\{0\}/g,
a).replace(/\{1\}/g,"OK").replace(/\{2\}/g,e);l.cancel&&(e=l.cancelText?l.cancelText:"Cancel",d+='\x3cbutton type\x3d"button" class\x3d"pzhc pzbutton" onclick\x3d"pega.u.d.getPopOver({0}).close(\'{1}\');"\x3e\x3cimg class\x3d"pzbtn-i" src\x3d"webwb/zblankimage.gif"/\x3e{2}\x3c/button\x3e\x26nbsp;'.replace(/\{0\}/g,a).replace(/\{1\}/,"cancel").replace(/\{2\}/g,e));c.style.display=b.style.display="none";0<d.length&&(b.innerHTML="\x3cdiv\x3e"+d+"\x3c/div\x3e",c.style.display=b.style.display="block")}};
this.reposit=function(c,d){ca("undefined"!=typeof d&&null!=d?d:u,b,g,!0,a,m.arrowDivClasses,c)};this.close=function(f,e,g,h){function l(){b.style.removeProperty("opacity");pega.util.Event.isIE&&(pega.ctxmgr.skipContextSwitching=!0);b.style.removeProperty("visibility");b.style.removeProperty("transform");b.classList.remove("local-action");var a=m.contentClass;"pz-po-c-rteoverlay"==a&&pega.ui.rte.resetModalFlag();t&&t.modalStyle&&""!=t.modalStyle&&(a+=" "+t.modalStyle);0<a.length&&(d.util.Dom.removeClass(b,
a),d.util.Dom.removeClass(b,"centerOverlay"),null==b.previousSibling||"undefined"==typeof b.previousSibling)&&(C.className="");delete pega.ctxmgr.skipContextSwitching}if("locked"==this.getState()||$(this.getContentContainerElement()).hasClass("has-assertion-popover"))$(this.getContentContainerElement()).removeClass("has-assertion-popover");else if(pega.mobile.nativenav&&null!=this.getAssociatedElement()&&(pega.mobile.nativenav.removeFromHistory(this.getAssociatedElement().dataset.backNavId),this.getAssociatedElement().dataset.backNavId=
""),D=!0,this.isActive()&&("undefined"===typeof q.onBeforeClose||!0===L(q.onBeforeClose,[f,e,p,h])||g)){k="closing";pega.c&&pega.c.actionSequencer&&pega.u.d.pauseAjaxSequencer();null!=c&&c.close("cancel");F.cleanUp();Q();ha(this);this._IsCenterOverlay&&(this._IsCenterOverlay=!1);m.arrowDivClasses&&0<m.arrowDivClasses.length&&d.util.Dom.addClass(document.getElementById("arrow"+a),"po-arrow-hide");this.setResult(e);0===a&&(O.removeClickAway(),pega.ctxmgr&&"function"===typeof pega.ctxmgr.unregisterContextSwitching&&
pega.ctxmgr.unregisterContextSwitching(C));"function"===typeof r.onClose&&r.onClose.call(r,f);"function"===typeof r.unbind&&r.unbind.call(r,this,p);var n=this;g=pega.u.d.modalDialog&&pega.u.d.modalDialog._hasAnimations&&pega.u.d.modalDialog._hasAnimations(m.animations,"dismiss");if(pega.u.d.modalDialog&&pega.u.d.modalDialog._revealDismissAnimation)g?pega.u.d.modalDialog._revealDismissAnimation(b,m.animations,"dismiss",function(){l();n.closeCleanup(f,e,p,!0)},{clearProps:"transform"}):(l(),n.closeCleanup(f,
e,p));else if(l(),m.animations&&pega.u.d.allowTransition()&&$(b).hasClass("anim-show")){var u=$(b);m.animations.animIn!=m.animations.animOut&&u.removeClass(m.animations.animIn).addClass(m.animations.animOut);n=this;u.width(u.width()).removeClass("anim-show");pega.u.d.runTransitionTimeout(".anim",n,function(){u.removeClass("anim").removeClass(m.animations.animOut);u.removeClass("local-action")})}else this.closeCleanup(f,e,p);g=this.getContentContainerElement();g=$(g).find("li:eq(0)")[0];$(":not(.circular-btn-placeholder):tabbable:first",
g).length||(h=pega.util.Dom.getElementsByClassName("sectionDivStyle","div",g),0<h.length&&h[0].getAttribute("tabindex")&&h[0].removeAttribute("tabindex"));$(g).parent().find("button.circular-btn-placeholder").remove();return e}};this.closeCleanup=function(a,c,d,e){pega&&pega.offline?(b.style.visibility="hidden",b.style.height="0px",b.style.width="0px"):b.style.cssText="visibility:hidden; height:; width:;";b.removeAttribute("data-harness-id");null!=H&&(H.pop(),0>=H.length&&(H=null));m.isMobile&&"true"===
m.isMobileFullScreen&&($(".screen-layout-region-main-middle").css("overflow-y","auto"),$(".screen-layout-region-main-middle").css("overflow-x","auto"),$(".screen-layout-region-main-middle").css("overflow","auto"));L(q.onClose,[a,e,p,b]);ma("onClose");k="inactive";D=!1;pega.c&&pega.c.actionSequencer&&pega.u.d.resumeAjaxSequencer();$(b).find("input").removeAttr("name").removeAttr("validationtype").removeAttr("data-required");$(b).find("select").removeAttr("name").removeAttr("validationtype").removeAttr("data-required");
$(b).find("textarea").removeAttr("name").removeAttr("validationtype").removeAttr("data-required");$(b).find("#RULE_KEY").removeAttr("node_name");$(b).find("#CT").removeAttr("id");$(b).find("[data-expr-id]").removeAttr("data-expr-id");O&&O.unregisterScrollHandlers()};this.setResult=function(a){"undefined"===typeof a&&"function"===typeof r.getResult&&(a=r.getResult.call(r));"undefined"!==typeof a&&L(q.onResultChange,[a,p])};this.getChildPopOver=function(b){"undefined"==typeof b&&(b=!0);null==c&&b&&
(c=new na(a+1));return c};k="ready"},V=[];d.u.d.addPopOverListener=function(a){V.push(a)};d.u.d.removePopOverListener=function(a){a=V.indexOf(a);-1!==a&&V.splice(a,1)};var ma=function(a){for(var c=0;c<V.length;c++){var b=V[c][a];if("function"===typeof b)try{b()}catch(k){console.debug("Unable to call popover listener: "+k)}}},ua=new na(0);d.u.d.getPopOver=function(a){var c=a;(null==K||-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&!K&&($(".screen-layout-region-main-middle")&&"absolute"===
$(".screen-layout-region-main-middle").css("position")||$(".screen-layout-region-main-sidebar1")&&"absolute"===$(".screen-layout-region-main-sidebar1").css("position")))&&da();u&&!document.body.contains(u)&&(u=null);if(!u||null!=c&&"object"===typeof c&&K){var b=!u,d=u;if("undefined"===typeof c||null!=c&&"object"===typeof c&&!c._prevSmartInfo)u=document.body;if(!pega.mobile.isHybrid&&document.forms&&document.forms.length&&"main"==document.forms[0].name&&document.forms[0].parentNode&&"PEGA_HARNESS"==
document.forms[0].parentNode.id&&("undefined"===typeof c||null!=c&&"object"===typeof c&&!c._prevSmartInfo))if(K)if(null!=c&&"object"===typeof c&&pega.util.Dom.isAncestor(document.forms[0].parentNode,c))P=!0,u=document.forms[0];else{if("undefined"===typeof c){var l=document.getElementById("_popOversContainer");l||(P=!0,u=document.forms[0])}}else P=!0,u=document.forms[0];b&&u?u.appendChild(C):null!=c&&"object"===typeof c&&K&&d!=u&&u.appendChild(C)}else P&&(l=document.getElementById("_popOversContainer"),
l||(P=!1,u=document.body,u.appendChild(C)));pega.util.Event.isIE&&6==pega.util.Event.isIE||(ea="",aa=ha=Z);c=ua;"object"===typeof a&&null!=a&&(a=T(a)+1);if("number"!==typeof a)return c;for(;a--&&c;)c=c.getChildPopOver();return c};d.u.d.getPopOverLevel=function(a){return T(a)};d.u.d.repositionAndShowPopover=function(a){this.repositionPopover(a,{setVisible:!0})};d.u.d.repositionPopover=function(a,c){a=pega.util.Event.getTarget(a);a=T(a);0<=a&&("string"==typeof c&&(c=JSON.parse(c)),this.getPopOver(a).reposit(c))};
d.u.d.toggleFixedOverlay=function(a,c){if(c){var b=c.target;b&&"I"===b.tagName&&(b=b.parentElement);b.classList.toggle("active")}c=b.closest(".harness-content-workarea-view");var b=c.querySelector(".workarea-view-header"),d=c.querySelector('div[node_name\x3d"'+a+'"]');d&&(d.classList.contains("visible")?(d.classList.toggle("visible"),d.style.width="",setTimeout(function(){d.style.display="none"},400)):(d.style.display="block",b&&(d.style.top=(document.querySelector(".ie11")?b.offsetHeight+c.offsetTop:
b.offsetHeight)+"px",0<b.offsetWidth&&b.offsetWidth<d.offsetWidth&&(d.style.width=b.offsetWidth)),d.classList.toggle("visible")))};d.u.d.toggleCheckGroup=function(a){if(a){a=a.target;var c=a.getAttribute("name");if(!1!==a.checked){var b=a.closest("fieldset");if(a=b?b:a.closest("form"))a=a.querySelectorAll("input[type\x3d'hidden']"),Array.prototype.forEach.call(a,function(a,b){try{var d=a.getAttribute("name");d!==c&&!0===pega.u.d.getProperty(d)&&pega.u.d.setProperty(d,!1);var k=a.nextElementSibling;
if(k&&k.classList.contains("ErrorShade")){k.classList.remove("ErrorShade");var g=document.getElementById(d+"Error");g&&g.parentNode.removeChild(g);var e=pega.ui.property.toReference(d),e="Error_"+e.substring(e.indexOf(".")),d="Error_"+d,g=document.querySelectorAll(".custom_errorlist_ul \x3e li");Array.prototype.forEach.call(g,function(a,b){if(a.id===e||a.id===d)b=a.parentNode,b.removeChild(a),0===b.children.length&&(a=b.closest(".layout"))&&a.parentNode.removeChild(a)})}}catch(q){}})}}}})(pega);
(function(){function d(b){for(var a=0;a<c.length;a++)c[a]({status:b})}pega.ui||(pega.u=p.namespace("pega.ui"));var c=[];pega.u.d.AJAXStatus=new function(){this.register=function(b){for(var a=0;a<c.length;a++)if(c[a]==b)return;c.push(b)};this.cancel=function(b){for(var a=0;a<c.length;a++)c[a]==b&&c.splice(a,1)};this.start=function(){d("start")};this.complete=function(){d("complete")};this.isActive=function(){pega.u.d.isAjaxInProgress};this.nullify=function(){for(var b=0;b<c.length;b++)c[b]=null}}})();
pega.namespace("pega.ui");
pega.ui.HarnessActions=new function(){var g=pega.ui.HarnessContextMgr,l=function(a){if(pega.u.d.ServerProxy.isHybridClient()){var b=pega.mobile.support.getPortalWindow();b&&b.pega.ctx.isMDC?(a.put("pzPrimaryPageName","pyWorkPage"),a.put("action","runFlow"),a.put("api","runFlow"),b={online:pega.u.d.UIActionRouter.onlineHandler,offline:pega.u.d.UIActionRouter.offlineHandler,scope:that},pega.u.d.setBusyIndicator(document.body,!0,!0),pega.u.d.ServerProxy.doAction(a,null,b,null),removeScreenLayoutMask()):
(a.put("pzPrimaryPageName","pyWorkPage"),a.put("action","runFlow"),a.put("api","runFlow"),pega.ui.DCUtil.runFlow(a))}else pega.ctx.isMDC?(a.put("isURLReady","true"),pega.ui.MDCUtil.microDCRenderer(a,void 0,!0)):g.get("bIsDCSPA")?(a.put("isURLReady","true"),pega.u.d.UIActionRouter.singlePageRenderer(a)):(pega.mobile&&pega.mobile.isMultiWebViewOfflinePegaMobileClient&&!pega.offline&&a.put("isRemoteCase","true"),pega.u.d.convertToRunActivityAction(a),window.location=a.toURL())};this.changeStage=function(a,
b,c,d){pega.u.d.isHistoryReplaced=!1;if(pega.desktop.infinity&&"acsecondary"===pega.ctx.acName)pega.desktop.infinity.changeCaseStage(a,b,c,d);else{var e=new SafeURL("Work-.pxPerformChangeStage");if(null!=a||null!=b){var h=g.get("primaryPageName");null!=h&&""!=h&&(e.put("HarnessPurpose",pega.ctx.strHarnessPurpose),e.put("pzPrimaryPageName",h),null!=a&&e.put("ChangeToNextStage",a),null!=b&&e.put("ChangeToStage",b),null!=c&&e.put("AuditNote",c),d&&e.put("skipHistoryUpdation","true"),l(e))}}};this.handleMenuAction=
function(a,b,c,d,e,h,n){function m(){var f=SafeURL_createFromURL(g.get("url"));f.put("HarnessMode",g.get("strHarnessMode"));f.put("FieldError",g.get("fieldErrorType"));f.put("FormError",g.get("formErrorType"));f.put("pyCustomError",g.get("pyCustomError"));f.put("bExcludeLegacyJS",g.get("bExcludeLegacyJS"));switch(a){case "ActionChange62":if(1==g.get("bWarnBeforeChangingWindow")&&!showDialogForWindowChange())break;if(null==e||null==d)break;f.put("NewTaskStatus",e);f.put("PrevTaskIndex",b);f.put("TaskIndex",
d);pega.u.d.processActionDefault(f,c);break;case "DisplayAction":f=pega.ctx.strHarnessPurpose;if(n&&n.startsWith("ac")&&"Review"===f)pega.desktop.infinity&&pega.desktop.infinity.handleCaseAction?(f=Array.prototype.slice.call(p),pega.desktop.infinity.handleCaseAction(f)):openAssignment(h,"","",{NewTaskStatus:e,TaskIndex:d},"false",!1,{pyReloadAlways:"true",target:n});else{var f=SafeURL_createFromURL(g.get("url")),k=new SafeURL("Assign-.pyProcessAssignmentFromReview");k.put("pxReqURI",f.get("pxReqURI"));
null!=e&&null!=d&&null!=h&&(k.put("InsHandle",h),k.put("NewTaskStatus",e),k.put("TaskIndex",d),k.toURL(),l(k))}break;case "DisplayActionNewTab":k=new SafeURL("Assign-.pyProcessAssignmentFromReview"),null!=e&&null!=d&&null!=h&&(k.put("InsHandle",h),k.put("NewTaskStatus",e),k.put("TaskIndex",d),f=k.toURL(),openWorkByURL(f,c))}}var p=arguments;pega.util.Event.stopEvent(c);pega.u.d.isFormDirty(!0,null,null,null,m)||m()};this.getNextWorkSameFrame=function(a){var b=new SafeURL("@baseclass.doUIAction");
null==a&&(a="");b.put("action","getNextWork");b.put("UserIdentifier",a);pega.ctx&&pega.ctx.portalName&&b.put("portalName",pega.ctx.portalName);l(b)};this.addWorkFromActionsMenu=function(a,b,c){if(null!=a&&null!=b)if(c&&"string"===typeof c&&pega.desktop.infinity)c.startsWith("ac")&&pega.desktop.infinity.addCaseWorkFromActionMenu(b,a,c);else if(c=g.get("primaryPageName"),null!=c&&""!=c){var d=SafeURL_createFromURL(g.get("url"));d.put("pyActivity","Work-.NewCovered");d.put("pzPrimaryPageName",c);d.put("InsClass",
a);d.put("FlowType",b);l(d)}};this.addCoveredWork=function(){var a=new SafeURL("Work-.AddCovered"),b=g.get("primaryPageName");null!=b&&""!=b&&(a.put("pzPrimaryPageName",b),l(a))};this.addWorkFromActionsMenuInNewTab=function(a,b,c,d){var e=new SafeURL("pzNewCovered");if(null!=a&&null!=b){var h=g.get("primaryPageName");null!=h&&""!=h&&(e.put("InsClass",a),e.put("FlowType",b),e.put("WorkHandle",c),a=e.toURL(),openWorkByURL(a,d))}};this.addFlowFromActionsMenu=function(a,b,c){var d=pega.ctx.strHarnessPurpose;
if(c&&"string"===typeof c&&pega.desktop.infinity&&"Review"===d)c.startsWith("ac")&&pega.desktop.infinity.addCaseFlowFromActionMenu(a,b,c);else if(null!=a&&null!=b&&(c=g.get("primaryPageName"),null!=c&&""!=c)){d=new SafeURL_createFromEncryptedURL(g.get("url"));d.put("pyActivity","Work-.StartNewFlow");var e=pega.ctx.strHarnessPurpose;!e&&pega.mobile&&pega.mobile.isMultiWebViewOfflinePegaMobileClient&&pega.offline&&(e="pyCaseWorker");d.put("HarnessPurpose",e);d.put("pzPrimaryPageName",c);d.put("flowType",
a);d.put("flowClass",b);d.put("pyManualSupportingFlow","true");l(d)}};this.addFlowFromActionsMenuInNewTab=function(a,b,c,d){var e=new SafeURL("Work-.pzStartNewFlowWrapper");if(null!=a&&null!=b){var h=g.get("primaryPageName");null!=h&&""!=h&&(e.put("flowType",a),e.put("flowClass",b),e.put("WorkHandle",c),e.put("pyManualSupportingFlow","true"),pega.u.d.ServerProxy.isHybridClient()?(e.put("action","runFlow"),e.put("api","runFlow"),pega.ui.DCUtil.runFlow(e)):(a=e.toURL(),openWorkByURL(a,d)))}};this.doAttachmentSingleClick=
function(a,b,c,d,e,g,l,m,p,f){pega.c.AttachUtil.checkTokenAndDownloadAttachment(pega.util.Event.getEvent(),d,l,"Work-","GetAttachmentReference","DisplayAttachFile",m,p,f)};this.doAttachmentShare=function(a,b,c,d){pega.c.AttachUtil.shareAttachment(pega.util.Event.getEvent(),a,b,c,d,"DisplayAttachFile")};this.exportDocumentToPdf=function(a,b){var c=pega.desktop.support.getDesktopWindow(),c=(c?c:window).document.getElementById("ATTACHMENT-DATA");null==c&&(c=document.getElementById("ATTACHMENT-DATA"));
null==c&&(c=document.createElement("iframe"),c.id="ATTACHMENT-DATA",c.style.display="none",document.body.appendChild(c));var d=new SafeURL("PegaSocial-Document.pzConvertDocToPDF");d.put("DocContentPage",a);d.put("insHandle",b);pega.u.d.convertToRunActivityAction(d);d=d.toURL();c.src=d};this.replaceBrokenThumbnail=function(a){a.src="webwb/pyImageThumbnail.svg"};var q=function(a,b){pega.u.d.asyncRequest("GET",b,{success:function(){pega.api.ui.actions.launchLocalAction({flowAction:"pyOperatorMiniProfile",
displayMode:pega.api.ui.constants.OVERLAY,event:a,flowActionClass:"Embed-OperatorID-MiniProfile",closeOnClickAway:!0,skinFormat:"Standard no padding",contextPage:"D_pzOperatorMiniProfile"})}},null);a.preventDefault();a.stopPropagation()};this.openUserMiniProfile=function(a,b){var c=new SafeURL("@baseclass.pzSetUserIdentifier");c.put("UserIdentifier",b);pega.u.d.convertToRunActivityAction(c);q(a,c)};this.openUserMiniProfileWithURL=function(a,b){b=SafeURL_createFromURL(b);q(a,b)};this.openUserMiniProfileOnEnter=
function(a,b){a.preventDefault();13==a.keyCode&&pega.ui.HarnessActions.openUserMiniProfileWithURL(a,b);a.stopPropagation()}};
pega.ui.Invoke=function(){};
pega.ui.Invoke.prototype={runActivity:function(a,h,k){var c=a[0],f=a[1],b=a[2],g=a[3],e=a[4],d=a[5],m=a[6],p=a[7],r=p?!0:!1,l=SafeURL_createFromURL(pega.ctx.url),n=new SafeURL;!0===h&&(k=k||document.body,pega.u.d.processOnBeforeSubmit(!1,k),n=pega.u.d.getQueryString(k,!1,!0));r?(n.put(p,""),d=a[8]):c&&""!=c&&(l.put("pzActivity",c),l.put("pyActivity","pzRunActionWrapper"),l.put("pySubAction","runAct"));h=a=null;g&&(a=pega.util.Event.getTarget(g),"undefined"!=typeof a&&null!=a&&!a.parentNode&&pega.util.Event.isIE&&
(k=pega.ctx.dom.getElementsByName(a.name))&&(a=k[0]),"undefined"!=typeof Grids&&Grids&&(h=Grids.getActiveGrid(g)));k=!1;a&&(k=!h&&pega.u.d.isInRepeat(a));"tempNavStepPg"==b&&h&&(b=h.getEntryHandle());k?((g=pega.u.d.getRepeatRow(a,!0))&&g.getAttribute("hPref")?(d=pega.u.property.toReference(g.getAttribute("hPref")),l.put("pzPrimaryPageName",d)):g&&g.getAttribute("id")?(d=pega.u.property.toReference(g.getAttribute("id")),l.put("pzPrimaryPageName",d)):l.put("pzPrimaryPageName",b),0==l.get("pzPrimaryPageName")&&
d&&""!=d&&l.put("pzPrimaryPageName",d)):""!=b?l.put("pzPrimaryPageName",b):d&&""!=d?l.put("pzPrimaryPageName",d):null!=g&&"undefined"!=typeof Grids&&Grids&&null!=h&&(h.isLastEventFromRow?(b=h.getRightRow())&&pega.util.Dom.isAncestor(b,a)?(b=b.getAttribute("hPref")?b.getAttribute("hPref"):b.id,d=pega.u.property.toReference(b),l.put("pzPrimaryPageName",d)):l.put("pzPrimaryPageName",h.gridReferencePage):l.put("pzPrimaryPageName",h.gridReferencePage));null!=e&&""!=e&&l.put("pzActionID",e);e="";if(f){f=
f.split("\x26");for(b=0;b<f.length;b++)""!=f[b]&&(d=f[b].split("\x3d"),n.put(d[0],d[1]),e+=d[0]+"\x26");e=e.substring(0,e.lastIndexOf("\x26"));""==e&&null==e||n.put("pzActivityParams",e)}pega.u.d.setBusyIndicator();var q=m&&m.scope||this;pega.u.d.asyncRequest("POST",l,{success:function(a){try{m&&"function"==typeof m.success&&m.success.call(q,a)}catch(t){}pega.u.d.gBusyInd&&pega.u.d.gBusyInd.hide()},failure:function(a){try{m&&"function"==typeof m.failure&&m.failure.call(q,a)}catch(t){}pega.u.d.gBusyInd&&
pega.u.d.gBusyInd.hide()}},n)},runDataTransform:function(a){var h=a[0],k=a[1],c=a[2],f=a[3];a=a[4];if(h&&""!=h){var b=SafeURL_createFromURL(pega.ctx.url);b.put("pzDataTransform",h);b.put("pyActivity","pzRunActionWrapper");b.put("pySubAction","runDT");var g=null,e=null;if(f){g=pega.util.Event.getTarget(f);if(!g.parentNode&&pega.util.Event.isIE){var d=pega.ctx.dom.getElementsByName(g.name);d&&(g=d[0])}"undefined"!=typeof Grids&&Grids&&(e=Grids.getActiveGrid(f))}d=!1;g&&(d=!e&&pega.u.d.isInRepeat(g));
"tempNavStepPg"==c&&e&&(c=e.getEntryHandle());d?((f=pega.u.d.getRepeatRow(g,!0))&&f.getAttribute("hPref")?(a=pega.u.property.toReference(f.getAttribute("hPref")),b.put("pzPrimaryPageName",a)):b.put("pzPrimaryPageName",c),0==b.get("pzPrimaryPageName")&&a&&""!=a&&b.put("pzPrimaryPageName",a)):""!=c?b.put("pzPrimaryPageName",c):null!=f&&"undefined"!=typeof Grids&&Grids&&(a&&""!=a?b.put("pzPrimaryPageName",a):null!=e&&(e.isLastEventFromRow?(c=e.getRightRow())&&pega.util.Dom.isAncestor(c,g)?(c=c.getAttribute("hPref")?
c.getAttribute("hPref"):c.id,a=pega.u.property.toReference(c),b.put("pzPrimaryPageName",a)):b.put("pzPrimaryPageName",e.gridReferencePage):b.put("pzPrimaryPageName",e.gridReferencePage)));var c="",m=new SafeURL;if(k){k=k.split("\x26");for(f=0;f<k.length;f++)""!=k[f]&&(a=k[f].split("\x3d"),m.put(a[0],a[1]),c+=a[0]+"\x26");c=c.substring(0,c.lastIndexOf("\x26"));""==c&&null==c||m.put("pzDataTransformParams",c)}pega.u.d.ServerProxy.doAction(b,m,{scope:this,online:function(){pega.u.d.setBusyIndicator();
var a=function(a){try{pega.u.d.gBusyInd.hide()}catch(l){}};pega.u.d.asyncRequest("POST",b,{success:a,failure:a},m)},offline:function(a){a=a.get("pzPrimaryPageName");var b=pega.ui.ClientCache.find(a).get("pxObjClass").getValue();pega.offline.runDataTransform(h,b,a)}})}}};pega.u=pega.namespace("pega.ui");pega.u.invoke=new pega.ui.Invoke;
TouchPerformance={showLogs:!1,state:{control:"",touchstart:"",touchend:"",clickhandlerstart:"",dblclickhandlerstart:"",touchend_touchstart:"",clickstart_touchend:""},collection:[],now:function(){return(new Date).getTime()},recordTouchStart:function(n){this.state.control=n;this.state.touchstart=this.now();this.showLogs&&(console.log("[P]Control:"+this.state.control),console.log("[P]Touch-Start:"+this.state.touchstart))},recordTouchEnd:function(){this.state.touchend=this.now();this.state.touchend_touchstart=
this.state.touchend-this.state.touchstart;this.showLogs&&(console.log("[P]Touch-End:"+this.state.touchend),console.log("[P]Touch-Start to Touch-End:"+this.state.touchend_touchstart))},recordClickStart:function(){this.state.clickhandlerstart=this.now();this.state.clickstart_touchend=this.state.clickhandlerstart-this.state.touchend;this.collection.push(this.state);this.showLogs&&(console.log("[P]Click:"+this.state.clickhandlerstart),console.log("[P]Touch-End to Click:"+this.state.clickstart_touchend));
this.resetState()},resetState:function(){this.state={control:"",touchstart:"",touchend:"",clickhandlerstart:"",dblclickhandlerstart:"",touchend_touchstart:"",clickstart_touchend:""}},resetCollection:function(){this.collection=[]}};
(function(n){var q=n.util.Event,r=document;if(n.cl.isTouchAble()){var d="",e=0,h=0,k=0,g="",J=0,K=0,t=null,F=0,u=0,B=!1,f=null,v=null,L=!0,m="new",G=null,M=function(a,b,c){b-=a.pageX;c-=a.pageY;return Math.sqrt(b*b+c*c)},z=function(a,b){var c=a.x-b.x;a=a.y-b.y;return c*c+a*a},N=function(a,b,c){var d=z(b,c);if(0==d)return z(a,b);d=((a.x-b.x)*(c.x-b.x)+(a.y-b.y)*(c.y-b.y))/d;return 0>d?z(a,b):1<d?z(a,c):z(a,{x:b.x+d*(c.x-b.x),y:b.y+d*(c.y-b.y)})},C=function(a,b,c){return Math.sqrt(N(a,b,c))},A=function(a,
b){TouchPerformance.recordTouchEnd();var c=q.getTarget(a),d=20,f={x:a.changedTouches[0].pageX,y:a.changedTouches[0].pageY};"tap"!=b||c.getAttribute("data-click")&&""!=c.getAttribute("data-click")||$(c).find('[data-click*\x3d"[["], [onclick!\x3d""]').each(function(a,b){if(!b.tagName||"input"!=b.tagName.toLowerCase()||!b.type||"checkbox"!=b.type.toLowerCase()&&"radio"!=b.type.toLowerCase())if(""!=b.getAttribute("data-click")&&null!=b.getAttribute("data-click")||""!=b.getAttribute("onclick")&&null!=
b.getAttribute("onclick"))a=b.getBoundingClientRect(),a=Math.min(C(f,{x:a.left,y:a.top},{x:a.left,y:a.bottom}),C(f,{x:a.left,y:a.top},{x:a.right,y:a.top}),C(f,{x:a.left,y:a.bottom},{x:a.right,y:a.bottom}),C(f,{x:a.right,y:a.top},{x:a.right,y:a.bottom})),a<d&&(d=a,c=b)});var e;(e=D(c))||(e=c.tagName&&"textarea"==c.tagName.toLowerCase()?!0:!1);if(!(e||0<navigator.userAgent.indexOf("Android")&&!E(c)&&("SELECT"==c.tagName||O(c)||P(c))||0<navigator.userAgent.indexOf("Windows")&&"SELECT"==c.tagName)){if(H(c)||
I(c))if(c.tagName&&"label"==c.tagName.toLowerCase()&&null!=c.getAttribute("for")&&c.control&&(c=c.control),c.disabled)return;e=document.createEvent("MouseEvent");e.initMouseEvent("mouseover",!0,!0,a.view,a.detail,a.changedTouches[0].screenX,a.changedTouches[0].screenY,a.changedTouches[0].clientX,a.changedTouches[0].clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,a.button,a.relatedTarget);e.isATriggeredEvent=!0;c.dispatchEvent(e);document.activeElement&&document.activeElement!=c&&document.activeElement.blur();
e="";switch(b){case "tap":e="click";break;case "doubletap":e="dblclick";break;case "taphold":e="contextmenu"}b=document.createEvent("MouseEvent");b.touches=a.touches;b=document.createEvent("MouseEvent");b.initMouseEvent(e,!0,!0,a.view,a.detail,a.changedTouches[0].screenX,a.changedTouches[0].screenY,a.changedTouches[0].clientX,a.changedTouches[0].clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,a.button,a.relatedTarget);b.isSimulated=!0;G=b;c.dispatchEvent(b);$(c).focus();a.preventDefault();a.stopPropagation()}},
O=function(a){return a.tagName&&"button"==a.tagName.toLowerCase()||0<$(a).parents("button").length?!0:!1},P=function(a){return a.tagName&&"a"==a.tagName.toLowerCase()||0<$(a).parents("a").length?!0:!1},H=function(a){a.tagName&&"label"==a.tagName.toLowerCase()&&null!=a.getAttribute("for")&&a.control&&(a=a.control);return a.tagName&&"input"==a.tagName.toLowerCase()&&a.type&&"checkbox"==a.type.toLowerCase()?!0:!1},E=function(a){return a.getAttribute("class")&&a.getAttribute("class").match("^menu-item")?
!0:!1},D=function(a){var b=a.type&&a.type.toLowerCase();return a.tagName&&"input"==a.tagName.toLowerCase()&&a.type&&("text"==b||"number"==b||"email"==b||"phone"==b||"url"==b||"date"==b||"datetime-local"==b||"time"==b||"tel"==b||"password"==b)?!0:!1},I=function(a){a.tagName&&"label"==a.tagName.toLowerCase()&&null!=a.getAttribute("for")&&a.control&&(a=a.control);return a.tagName&&"input"==a.tagName.toLowerCase()&&a.type&&"radio"==a.type.toLowerCase()?!0:!1};n=function(a){if("INPUT"===document.activeElement.tagName||
"TEXTAREA"===document.activeElement.tagName)pega.u.d.bModalDialogOpen||document.activeElement.scrollIntoView({block:"center"})};q.addListener(r,"touchstart",function(a){var b=!1;B=!1;m="new";var c=f=v=null,p=null,l=q.getTarget(a),p=a.target.attributes["data-ctl"]?a.target.attributes["data-ctl"].value:"";H(a.target)&&(p="Checkbox");I(a.target)&&(p="Radio");p||(p=a.target.attributes.type?a.target.attributes.type.value:"");TouchPerformance.recordTouchStart(p);a.changedTouches&&1===a.changedTouches.length&&
a.targetTouches&&1===a.targetTouches.length&&a.touches&&1===a.touches.length&&(b=!0);if(b){m="open";L&&(pega.util.Dom.addClass(r.body,"disableSelection"),L=!1);"undefined"!=typeof Grids&&(f=Grids.getActiveGrid(a));f?c=f.gridDiv:"undefined"!=typeof pega.ui.tGrid&&(v=pega.ui.tGrid.getGridBySource(null,null,a))&&(p=$("table[uniqueid\x3d"+v.uniqueId+"]").closest("#PEGA_GRID_SKIIN").parent(),c=p[0]);J=a.touches[0].pageX;K=a.touches[0].pageY;t=l;if(c&&null!=c.getAttribute("data-rightclick")||null!=l.getAttribute("data-rightclick"))u=
setTimeout(function(){B=!0;d="";k=h=e=0;g="";A(a,"taphold")},500);if((c&&null!=c.getAttribute("data-dblclick")||null!=l.getAttribute("data-dblclick")||D(l)||E(l))&&"tap"==d)if(a.preventDefault(),c){var w,x;f?(pega.util.Dom.isAncestor(f.leftBodyUL,l)?w=f.leftBodyUL:pega.util.Dom.isAncestor(f.rightBodyTbl,l)&&(w=f.rightBodyTbl),f.setActiveRow(a,w),x=f.getRightRow()):v&&(b=pega.ui.DataRepeaterUtils.getClosestRepeatLayoutInfo(a,!0))&&b.rowNode&&(x=b.rowNode);g!=x&&(d="",k=h=e=0,g="")}else g!=l&&(d="",
k=h=e=0,g="");""==d&&(h=a.touches[0].pageX,k=a.touches[0].pageY);f=v=null}else return!1});q.addListener(r,"touchmove",function(a){var b=!1,c=q.getTarget(a),f=H(c);f?m="cancel":(f=I(c))?m="cancel":(1==a.changedTouches.length&&1==a.targetTouches.length&&1==a.touches.length&&(b=!0),b&&"open"==m&&t==c?(a=M(a.touches[0],J,K),10<a&&(m="cancel",d="",k=h=e=0,g=""),5<a&&u&&(clearTimeout(u),u=0)):(m="cancel",d="",k=h=e=0,g="",t=null))});q.addListener(r,"touchend",function(a){var b=!1,c=null,p=null,l=q.getTarget(a),
w=!1,x=!1;f=v=null;var n=(new Date).getTime();a.changedTouches&&1===a.changedTouches.length&&a.targetTouches&&0===a.targetTouches.length&&a.touches&&0===a.touches.length&&(b=!0);u&&(clearTimeout(u),u=0);if(B)return m="close",d="",k=h=e=0,g="",t=null,B=!1,a.preventDefault(),!1;if(b&&"open"==m&&t==l){"undefined"!=typeof Grids&&(f=Grids.getActiveGrid(a));f?c=f.gridDiv:"undefined"!=typeof pega.ui.tGrid&&(v=pega.ui.tGrid.getGridBySource(null,null,a))&&(p=$("table[uniqueid\x3d"+v.uniqueId+"]").closest("#PEGA_GRID_SKIIN").parent(),
c=p[0]);if(c&&null!=c.getAttribute("data-dblclick")||null!=l.getAttribute("data-dblclick")||D(l)||E(l))if(w=!0,""==d){d="tap";e=n;if(c)if(null!=l.getAttribute("data-click"))d="",k=h=e=0,g="";else{var r,y;f?(pega.util.Dom.isAncestor(f.leftBodyUL,l)?r=f.leftBodyUL:pega.util.Dom.isAncestor(f.rightBodyTbl,l)&&(r=f.rightBodyTbl),f.setActiveRow(a,r),y=f.getRightRow()):v&&(b=pega.ui.DataRepeaterUtils.getClosestRepeatLayoutInfo(a,!0))&&b.rowNode&&(y=b.rowNode);g=y}else setTimeout(function(){d="";k=h=e=0;
g=""},300),g=t;m="close";A(a,"tap");y=$(c).find(".gridActionTop");b=$(c).find(".gridActionBottom");if(y[0]&&$.contains(y[0],a.target)||b[0]&&$.contains(b[0],a.target))d="",k=h=e=0,g=""}else"tap"==d&&300>n-e&&20>M(a.changedTouches[0],h,k)?(d="",k=h=e=0,g="",m="close",D(l)||E(l)||A(a,"doubletap")):(d="",k=h=e=0,g="",m="close");!w&&(c&&null!=c.getAttribute("data-click")||null!=l.getAttribute("data-click"))&&300<n-e?(x=!0,""==d?(d="tap",e=n,g=t,m="close",d="",A(a,"tap")):(d="",k=h=e=0,g="",m="close")):
setTimeout(function(){d="";k=h=e=0;g=""},300);if(!w&&!x&&300>n-e)return d="",k=h=e=0,g="",m="close",a.preventDefault(),a.stopPropagation(),!1;w||x||(d="",k=h=e=0,g="",m="close",A(a,"tap"));f=t=null}else t=null,m="cancel",d="",k=h=e=0,g=""});q.addListener(r,"touchcancel",function(a){u&&(clearTimeout(u),u=0);F&&(clearTimeout(F),F=0);m="cancel";d="";k=h=e=0;g="";t=null});q.addListener(r,"click",function(a){if(null!==G&&!0!==a.isSimulated&&G.target===a.target)return a.preventDefault(),a.stopImmediatePropagation(),
!1});/Android/.test(navigator.appVersion)&&q.addListener(window,"resize",n)}})(pega);
$(function(){!pega.cl.isTouchAble()||"undefined"!=typeof pega.cl.disableSwipeGestures&&!0===pega.cl.disableSwipeGestures||function(b,f,a,h){var e,l,m,k,p,q=f||function(c){},r=a||function(c){},t=h||function(){},n=!1;(function(){var c=!1;if(window.PointerEvent&&"maxTouchPoints"in navigator)0<navigator.maxTouchPoints&&(c=!0);else if(window.matchMedia&&window.matchMedia("(any-pointer:coarse)").matches)c=!0;else if(window.TouchEvent||"ontouchstart"in window)c=!0;return c})()&&navigator.userAgent.includes("Windows");
var g=null;b.addEventListener("touchstart",function(c){c=c.changedTouches[0];e="";l=c.pageX;m=c.pageY;p=(new Date).getTime();g=c.target},!1);b.addEventListener("touchmove",function(c){var a=c.changedTouches[0],d=a.pageX-l,a=a.pageY-m,b;if(10<=Math.abs(a)&&100>=Math.abs(d))b="vertical";else if(10<=Math.abs(d)&&100>=Math.abs(a))b="horizontal";else return;n=!0;r({type:b,distanceX:d,distanceY:a},c,g)},!1);f=function(a){if(n){n=!1;var b=a.changedTouches[0],d=b.pageX-l,c=b.pageY-m;k=(new Date).getTime()-
p;b="";120<k&&3E3>=k?(b="swipe",50<=Math.abs(d)&&100>=Math.abs(c)?e=0>d?"left":"right":50<=Math.abs(c)&&100>=Math.abs(d)&&(e=0>c?"up":"down")):120>=k&&(b="fling",50<=Math.abs(d)&&100>=Math.abs(c)?e=0>d?"left":"right":50<=Math.abs(c)&&100>=Math.abs(d)&&(e=0>c?"up":"down"));if(d=""!==e&&"up"!==e&&"down"!==e&&null!=g)d=g,d="true"===$.trim($(d).attr("data-nogestures"))?!0:0<$(d).parents("[data-nogestures\x3dtrue]").length?!0:!1,d=!d;d?q(b,e,a,g):t(a,g);g=null}};b.addEventListener("touchcancel",f,!1);
b.addEventListener("touchend",f,!1)}(document,function(b,f,a,h){if(h){var e=document.createEvent("MouseEvent");e.initMouseEvent(b+""+f,!0,!0,a.view,a.detail,a.changedTouches[0].screenX,a.changedTouches[0].screenY,a.changedTouches[0].clientX,a.changedTouches[0].clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,a.button,a.relatedTarget);h.dispatchEvent(e)}},function(b,f,a){a&&(b=new CustomEvent("swipeinprogress",{bubbles:!0,detail:b}),a.dispatchEvent(b))},function(b,f){f&&(b=new CustomEvent("swipecancel",
{bubbles:!0}),f.dispatchEvent(b))})});
pega.namespace("pega.tools");
pega.tools.EvalDomUtils_globals={loadedExternalFiles:"",objDocFragDOM:null,gInlineScripts:"",gInlineDOMId:"",scriptCntr:0,objDocFragElemDOM:null,thisDomObj:null,bFoundHTMLTag:!1,skipExecuteCallBack:!1,initializeVariables:function(){this.gInlineScripts="";this.gInlineDOMId=null;this.scriptCntr=0;this.objDocFragDOM=null;this.skipExecuteCallBack=!1},cleanup:function(){pega.tools.EvalDomUtils_globals.objDocFragElemDOM=null;pega.tools.EvalDomUtils_globals.objDocFragDOM=null;pega.tools.EvalDomUtils_globals.orgDomObj=
null},scriptLoaded:function(){this.scriptCntr--;0>=this.scriptCntr&&(null!=this.thisDomObj&&0<this.gInlineScripts.length&&""!=this.gInlineDOMId&&this.thisDomObj.addFileToHeader(this.gInlineScripts,this.gInlineDOMId,null),this.gInlineScripts="",this.gInlineDOMId=null,this.callbackFunction&&!this.skipExecuteCallBack&&(this.skipExecuteCallBack=!1,this.callbackFunction(this.orgDomObj),pega.c&&pega.c.actionSequencer&&!pega.u.d.gIsScriptsLoading&&!pega.u.d.isAjaxInProgress()&&pega.c.actionSequencer.resume()),
pega.ui.statetracking&&pega.ui.statetracking.setScriptLoadingDone())},callbackFunction:null,orgDomObj:null};pega.tools.EvalDOMScripts=function(){};
pega.tools.EvalDOMScripts.prototype={_IE6:!1,loadHTMLElement:function(c,a,e,b){var d=pega.tools.EvalDomUtils_globals;this.setIE6Flag();if(null!=c&&"undefined"!=typeof c&&null!=a){if("object"!=typeof a){pega.util.Event.isIE&&(a=a.replace(/`/g,"\x26#96;"));d.bFoundHTMLTag=!1;d.callbackFunction=e;d.orgDomObj=c;if(-1!=a.indexOf("\x3cHTML")||-1!=a.indexOf("\x3chtml"))d.bFoundHTMLTag=!0;null==d.objDocFragDOM&&(d.objDocFragDOM=document.createDocumentFragment());d.objDocFragElemDOM||(d.objDocFragElemDOM=
d.objDocFragDOM.appendChild(document.createElement("dummytag","")));try{if(b){var f=b.domAction,n=b.domElement;if(n&&f){e=null;var h=document.createElement("div");if("append"!=f&&"TR"==n.tagName||"append"==f&&"TBODY"==n.tagName){var m=pega.tools.SUtils.trim(a);if(0==m.indexOf("\x3ctr")||0==m.indexOf("\x3cTR"))a="\x3ctable\x3e"+a+"\x3c/table\x3e";h.innerHTML="\x26nbsp;"+a;var g=pega.util.Dom.getFirstChild(h);if(g&&g.rows&&0<g.rows.length){var q=g.rows[0],p=document.createElement("table");p.insertRow(0);
var l=p.rows[0];l.parentNode.replaceChild(q,l);h.innerHTML="";h.appendChild(p)}else h.innerHTML=""}else"append"==f&&"UL"==n.tagName||"LI"==n.tagName?(h.innerHTML="\x26nbsp;"+a,pega.util.Dom.getFirstChild(h)||(h.innerHTML="")):a&&("TBODY"===n.tagName.toUpperCase()&&(a="\x3ctable\x3e"+a+"\x3c/table\x3e"),h.innerHTML="\x26nbsp;"+a,b.bMultiple||(e=pega.util.Dom.getFirstChild(h),e.parentNode.removeChild(e),h.innerHTML="",h.appendChild(e)));a=h.innerHTML}}d.objDocFragElemDOM.innerHTML="\x26nbsp;"+a}catch(v){this.displayErrorMsg(v)}}else d.bFoundHTMLTag=
!1,d.callbackFunction=e,d.orgDomObj=c,d.objDocFragElemDOM&&(d.TempObjDocFragElemDOM=d.objDocFragElemDOM),d.objDocFragElemDOM=a;"undefined"!=typeof c.getAttribute("uniqueID")&&null!=c.getAttribute("uniqueID")?a=c.getAttribute("uniqueID"):(a=pega.util.Dom.generateId(),c.setAttribute("uniqueID",a));d.initializeVariables();d.thisDomObj=this;this.processInlineScripts(c,d.objDocFragElemDOM,a,b)}},displayErrorMsg:function(c,a){a="There was an error when loading the content given.\n\n";pega.tools.EvalDomUtils_globals.bFoundHTMLTag&&
(a+="Found HTML Tag in the given content which is not valid.\n\n");a+="IE Error description: "+c.description+"\n";alert(a)},setIE6Flag:function(){pega.util.Event.isIE&&(this._IE6=6==pega.util.Event.isIE?!0:!1)},processInlineScripts:function(c,a,e,b){var d="",f,n=!1,h=[];pega.tools.EvalDomUtils_globals.scriptCntr=0;var m=!1;pega.env.ua.gecko&&b&&("append"==b.domAction||"replace"==b.domAction||"insert"==b.domAction)&&(m=!0);var g=[];for(f=0;3>f;f++){var q=null,q=0==f?a.getElementsByTagName("LINK"):
1==f?pega.util.Dom.getElementsById("loadscripts",a,"SPAN"):a.getElementsByTagName("SCRIPT"),p,l,v,z=q?q.length:0;for(v=0;v<z;++v)if(p=q[v],(l=p.tagName)&&("SCRIPT"==l||"LINK"==l||"SPAN"==l)){var r="";"SCRIPT"==l?r=p.getAttribute("src"):"LINK"==l?r=p.getAttribute("href"):"SPAN"==l&&(r=p.getAttribute("scriptsrc"));null!=r&&"undefined"!=typeof r&&""!=r?pega.offline&&"SCRIPT"==l||this.isDuplicateUrl(r,h)||("SCRIPT"==l&&pega.tools.EvalDomUtils_globals.scriptCntr++,"LINK"==l&&this.checkScriptsInTag(r,"head",
"css")||(h.push([p,null,c]),n=!0)):"LINK"==l||"SPAN"==l||"SCRIPT"!=l||null!=p.getAttribute("EVENT")&&""!=p.getAttribute("EVENT")||(l=p.innerHTML,-1==l.indexOf("document.write")&&(n=!0,d+=l,m&&g.push(p)))}}for(f=0;f<h.length;f++)q=h[f][0],q.parentNode.removeChild(q);if(m)for(f=0;f<g.length;f++)m=g[f],m.parentNode.removeChild(m);g=pega.tools.EvalDomUtils_globals;try{var m="",x=a.innerHTML,m="\x26nbsp;"==x.match("^\x26nbsp;")?x.substring(6):x;pega.util.Event.isIE&&(m=m.replace(/`/g,"\x26#96;"));if(b){var k=
b.domElement;if(k){var t=b.domAction;if(t){var w=k.parentNode;if(!w){c.className=c.className;pega.u.d.gIsScriptsLoading=!1;return}a=null;var u=document.createElement("div");u.innerHTML="\x26nbsp;"+m;a=pega.util.Dom.getFirstChild(u);("append"!=t&&"TR"==k.tagName||"append"==t&&"TBODY"==k.tagName)&&a&&a.rows&&0<a.rows.length&&(a=a.rows[0]);"replace"===t&&"TBODY"==k.tagName.toUpperCase()&&(a=pega.util.Dom.getFirstChild(a));g.orgDomObj=a;pega.env.ua.gecko&&!a&&(a=document.createElement("dummytag",""));
switch(t){case "remove":g.orgDomObj=null;w.removeChild(k);break;case "replace":if(b.bTreegrid&&"LI"==a.tagName){var y=pega.util.Dom;b.partialTrigger&&"progressiveLoad"==b.partialTrigger?w.replaceChild(a,k):(k.setAttribute("rowUniqueID",a.getAttribute("rowUniqueID")),k.replaceChild(y.getFirstChild(a),y.getFirstChild(k)),k.className=a.className);y=null}else w.replaceChild(a,k);break;case "insert":w.insertBefore(a,k);break;case "append":if(b.bMultiple){var A=document.createElement("div");k.appendChild(A);
"DIV"!=u.firstChild.tagName&&u.firstChild.remove();k.lastChild.outerHTML=u.innerHTML;g.orgDomObj=u.innerHTML;u.innerHTML=""}else k.appendChild(a)}}else k.innerHTML=m}else g.orgDomObj=a}else $(c).find("[validationType]").each(function(a,b){b.removeAttribute("validationType")}),$(c).find("[data-change]").each(function(a,b){(a=b.getAttribute("data-ctl"))&&'["AutoCompleteAG"]'==a&&b.removeAttribute("data-change")}),c.innerHTML=m,g.TempObjDocFragElemDOM&&(g.objDocFragElemDOM=g.TempObjDocFragElemDOM,g.TempObjDocFragElemDOM=
null)}catch(B){this.displayErrorMsg(B)}b=null;k=h.length;t=0;0<d.length&&(g.skipExecuteCallBack=!0,pega.ui&&pega.ui.statetracking&&pega.ui.statetracking.setScriptLoadingBusy());for(f=0;f<k;f++)b=h[f],b[0].tagName&&"LINK"==b[0].tagName&&t++,this.addFileToHeader(b[0],b[1],b[2]);0<d.length?(g.gInlineScripts=d,g.gInlineDOMId=e,0==g.scriptCntr&&(g.skipExecuteCallBack=!1,g.scriptLoaded())):n&&t!=k||!g.callbackFunction||(g.callbackFunction(g.orgDomObj),pega&&pega.c&&pega.c.actionSequencer&&pega.u&&pega.u.d&&
!pega.u.d.gIsScriptsLoading&&!pega.u.d.isAjaxInProgress()&&pega.c.actionSequencer.resume());c.className=c.className},addFileToHeader:function(c,a,e){var b="string"!=typeof c?c.getAttribute("src"):"";if(null==b||"undefined"==typeof b||""==b)b="string"!=typeof c?c.getAttribute("scriptsrc"):"";var d="string"!=typeof c?c.getAttribute("href"):"";null!=b&&"undefined"!=typeof b&&""!=b?(a=!1,null!=e&&(a=this.checkScriptInDiv(e,b,"js")),6!=pega.env.ua.ie&&null!=c.parentNode&&c.parentNode.removeChild(c),this.loadExternalFile(b,
"js",a)):null!=d&&"undefined"!=typeof d&&""!=d?(a=!1,null!=e&&(a=this.checkScriptInDiv(e,d,"css")),6!=pega.env.ua.ie&&null!=c.parentNode&&c.parentNode.removeChild(c),this.loadExternalFile(d,"css",a)):(e=this.chkInlineJSExists(a),null!=e&&pega.env.ua.IE?e.text=c:(null!=e&&e.parentNode.removeChild(e),e=document.getElementsByTagName("head")[0],b=document.createElement("script"),b.type="text/javascript",b.text=c,b.id="inline_"+a,e.appendChild(b)))},checkScriptInDiv:function(c,a,e){var b;"js"==e?(b=c.scripts)||
(b=c.getElementsByTagName("script")):"css"==e&&((b=c.links)||(b=c.getElementsByTagName("link")));if(null!=b)if(null!=b.length)for(c=0;c<b.length;c++){var d="";"js"==e?d=unescape(b[c].src):"css"==e&&(d=b[c].href);if(null!=d&&(d==a||-1!=d.indexOf(a)))return!0}else if(null!=b.src&&(unescape(b.src)==a||-1!=unescape(b.src).indexOf(a))||null!=b.href&&(b.href==a||-1!=b.href.indexOf(a)))return!0},chkInlineJSExists:function(c){var a;(a=document.scripts)||(a=document.getElementsByTagName("script"));if(null!=
a){if(null!=a.length)for(var e=0;e<a.length;e++)if(a[e].id=="inline_"+c)return a[e]}else if(a.id=="inline_"+c)return a;return null},loadExternalFile:function(c,a,e){if(!e&&(null!=c&&""==c||this.isFileAlreadyLoaded(c,a)))return"js"==a&&pega.tools.EvalDomUtils_globals.scriptLoaded(),!0;var b="";"js"==a?(b=document.createElement("script"),b.setAttribute("type","text/javascript"),b.setAttribute("src",c)):"css"==a&&(b=document.createElement("link"),b.setAttribute("rel","stylesheet"),b.setAttribute("type",
"text/css"),b.setAttribute("href",c));if(""!==b){if(pega&&pega.offline&&"js"===a)launchbox.PRPC.ClientStore.getItems("js",c,function(a){a&&a[0]?(f.removeChild(b),document.createElement("script").innerText=a[0].content,eval(a[0].content),pega.tools.EvalDomUtils_globals.scriptLoaded()):(pega.tools.EvalDomUtils_globals.scriptLoaded(),f.removeChild(b))},function(a,c){pega.tools.EvalDomUtils_globals.scriptLoaded();f.removeChild(b)});else{var d=pega.ctx;b.onreadystatechange=function(){var a=pega.ctx;pega.ctxmgr.setContext(d);
"complete"!=this.readyState&&"loaded"!=this.readyState||!this.getAttribute("src")||null==this.getAttribute("src")||1==this.loaded||(this.loaded=!0,pega.tools.EvalDomUtils_globals.scriptLoaded());pega.ctxmgr.resetContext(a)};b.onload=function(){var a=pega.ctx;pega.ctxmgr.setContext(d);this.getAttribute("src")&&null!=this.getAttribute("src")&&1!=this.loaded&&(this.loaded=!0,pega.tools.EvalDomUtils_globals.skipExecuteCallBack=!1,pega.tools.EvalDomUtils_globals.scriptLoaded());pega.ctxmgr.resetContext(a)}}var f=
document.getElementsByTagName("head")[0];f.appendChild(b);pega.tools.EvalDomUtils_globals.loadedExternalFiles+=c+" "}},isFileAlreadyLoaded:function(c,a){var e=!1;if(-1!=pega.tools.EvalDomUtils_globals.loadedExternalFiles.indexOf(c))e=!0;else if(this.checkScriptsInTag(c,"head",a)||this.checkScriptsInTag(c,"body",a))return!0;return e},checkScriptsInTag:function(c,a,e){var b="";a=document.getElementsByTagName(a)[0];"js"==e?(b=a.scripts)||(b=a.getElementsByTagName("script")):"css"==e&&((b=a.links)||(b=
a.getElementsByTagName("link")));if(null!=b)if(null!=b.length)for(a=0;a<b.length;a++){var d="";"js"==e?d=unescape(b[a].src):"css"==e&&(d=b[a].href);if(null!=d&&(d==c||-1!=d.indexOf(c)))return!0}else if(null!=b.src&&(unescape(b.src)==c||-1!=unescape(b.src).indexOf(c))||null!=b.href&&(b.href==c||-1!=b.href.indexOf(c)))return!0;return!1},isDuplicateUrl:function(c,a){for(var e=a.length,b,d=null,f,n=0;n<e;n++)if(b=a[n][0],f=b.tagName,"SCRIPT"==f?d=unescape(b.getAttribute("src")):"LINK"==f?d=b.getAttribute("href"):
"SPAN"==f&&(d=b.getAttribute("scriptsrc")),d==c)return!0;return!1}};var DOMScriptLoader=function(){DOMScriptLoader.superclass.constructor.call(this)};pega.lang.extend(DOMScriptLoader,pega.tools.EvalDOMScripts);
(function(){if("undefined"!=typeof pega){var c=pega.util.Dom,h=pega.util.Event,l=pega.lang,k=function(a,b){k.superclass.constructor.call(this,a,b||{})};k._instances={};k.getResizeById=function(a){return k._instances[a]?k._instances[a]:!1};pega.extend(k,pega.util.Element,{CSS_RESIZE:"yui-resize",CSS_DRAG:"yui-draggable",CSS_HOVER:"yui-resize-hover",CSS_PROXY:"yui-resize-proxy",CSS_WRAP:"yui-resize-wrap",CSS_KNOB:"yui-resize-knob",CSS_HIDDEN:"yui-resize-hidden",CSS_HANDLE:"yui-resize-handle",CSS_STATUS:"yui-resize-status",
CSS_GHOST:"yui-resize-ghost",CSS_RESIZING:"yui-resize-resizing",_resizeEvent:null,dd:null,browser:pega.env.ua,_positioned:null,_dds:null,_wrap:null,_proxy:null,_handles:null,_currentHandle:null,_currentDD:null,_cache:null,_active:null,_createProxy:function(){this.get("proxy")?(this._proxy=document.createElement("div"),this._proxy.className=this.CSS_PROXY,this._proxy.style.height=this.get("element").clientHeight+"px",this._proxy.style.width=this.get("element").clientWidth+"px",this._wrap.parentNode.appendChild(this._proxy)):
this.set("animate",!1)},_createWrap:function(){this._positioned=!1;switch(this.get("element").tagName.toLowerCase()){case "img":case "textarea":case "input":case "iframe":case "select":this.set("wrap",!0)}if(this.get("wrap")){this._wrap=document.createElement("div");this._wrap.id=this.get("element").id+"_wrap";this._wrap.className=this.CSS_WRAP;c.setStyle(this._wrap,"width",this.get("width"));c.setStyle(this._wrap,"height",this.get("height"));c.setStyle(this._wrap,"z-index",this.getStyle("z-index"));
this.setStyle("z-index",0);var a=c.getStyle(this.get("element"),"position");c.setStyle(this._wrap,"position","static"==a?"relative":a);c.setStyle(this._wrap,"top",c.getStyle(this.get("element"),"top"));c.setStyle(this._wrap,"left",c.getStyle(this.get("element"),"left"));"absolute"==c.getStyle(this.get("element"),"position")&&(this._positioned=!0,c.setStyle(this.get("element"),"position","relative"),c.setStyle(this.get("element"),"top","0"),c.setStyle(this.get("element"),"left","0"));this.get("element").parentNode.replaceChild(this._wrap,
this.get("element"));this._wrap.appendChild(this.get("element"))}else this._wrap=this.get("element"),"absolute"==c.getStyle(this._wrap,"position")&&(this._positioned=!0);this.get("draggable")&&this._setupDragDrop();this.get("hover")&&c.addClass(this._wrap,this.CSS_HOVER);this.get("knobHandles")&&c.addClass(this._wrap,this.CSS_KNOB);this.get("hiddenHandles")&&c.addClass(this._wrap,this.CSS_HIDDEN);c.addClass(this._wrap,this.CSS_RESIZE)},_setupDragDrop:function(){c.addClass(this._wrap,this.CSS_DRAG);
this.dd=new pega.util.DD(this._wrap,this.get("id")+"-resize",{dragOnly:!0});this.dd.on("dragEvent",function(){this.fireEvent("dragEvent",arguments)},this,!0)},_createHandles:function(){this._handles={};this._dds={};for(var a=this.get("handles"),b=0;b<a.length;b++){this._handles[a[b]]=document.createElement("div");this._handles[a[b]].id=c.generateId(this._handles[a[b]]);this._handles[a[b]].className=this.CSS_HANDLE+" "+this.CSS_HANDLE+"-"+a[b];var e=document.createElement("div");e.className=this.CSS_HANDLE+
"-inner-"+a[b];this._handles[a[b]].appendChild(e);this._wrap.appendChild(this._handles[a[b]]);h.on(this._handles[a[b]],"mouseover",this._handleMouseOver,this,!0);h.on(this._handles[a[b]],"mouseout",this._handleMouseOut,this,!0);this._dds[a[b]]=new pega.util.DragDrop(this._handles[a[b]],this.get("id")+"-handle-"+a);this._dds[a[b]].setPadding(15,15,15,15);this._dds[a[b]].on("startDragEvent",this._handleStartDrag,this._dds[a[b]],this);this._dds[a[b]].on("mouseDownEvent",this._handleMouseDown,this._dds[a[b]],
this)}this._status=document.createElement("span");this._status.className=this.CSS_STATUS;document.body.insertBefore(this._status,document.body.firstChild)},_ieSelectFix:function(){return!1},_ieSelectBack:null,_setAutoRatio:function(a){this.get("autoRatio")&&(a&&a.shiftKey?this.set("ratio",!0):this.set("ratio",this._configs.ratio._initialConfig.value))},_handleMouseDown:function(a){"absolute"==c.getStyle(this._wrap,"position")&&(this._positioned=!0);a&&this._setAutoRatio(a);this.browser.ie&&(this._ieSelectBack=
document.body.onselectstart)},_handleMouseOver:function(a){c.removeClass(this._wrap,this.CSS_RESIZE);this.get("hover")&&c.removeClass(this._wrap,this.CSS_HOVER);a=h.getTarget(a);c.hasClass(a,this.CSS_HANDLE)||(a=a.parentNode);if(c.hasClass(a,this.CSS_HANDLE)&&!this._active){c.addClass(a,this.CSS_HANDLE+"-active");for(var b in this._handles)if(l.hasOwnProperty(this._handles,b)&&this._handles[b]==a){c.addClass(a,this.CSS_HANDLE+"-"+b+"-active");break}}c.addClass(this._wrap,this.CSS_RESIZE)},_handleMouseOut:function(a){c.removeClass(this._wrap,
this.CSS_RESIZE);this.get("hover")&&!this._active&&c.addClass(this._wrap,this.CSS_HOVER);a=h.getTarget(a);c.hasClass(a,this.CSS_HANDLE)||(a=a.parentNode);if(c.hasClass(a,this.CSS_HANDLE)&&!this._active){c.removeClass(a,this.CSS_HANDLE+"-active");for(var b in this._handles)if(l.hasOwnProperty(this._handles,b)&&this._handles[b]==a){c.removeClass(a,this.CSS_HANDLE+"-"+b+"-active");break}}c.addClass(this._wrap,this.CSS_RESIZE)},_handleStartDrag:function(a,b){a=b.getDragEl();if(c.hasClass(a,this.CSS_HANDLE)){"absolute"==
c.getStyle(this._wrap,"position")&&(this._positioned=!0);this._active=!0;this._currentDD=b;this._proxy&&(this._proxy.style.visibility="visible",this._proxy.style.zIndex="1000",this._proxy.style.height=this.get("element").clientHeight+"px",this._proxy.style.width=this.get("element").clientWidth+"px");for(var e in this._handles)if(l.hasOwnProperty(this._handles,e)&&this._handles[e]==a){this._currentHandle=e;var d="_handle_for_"+e;c.addClass(a,this.CSS_HANDLE+"-"+e+"-active");b.on("dragEvent",this[d],
this,!0);b.on("mouseUpEvent",this._handleMouseUp,this,!0);break}c.addClass(a,this.CSS_HANDLE+"-active");this.get("proxy")&&(b=c.getXY(this.get("element")),c.setXY(this._proxy,b),this.get("ghost")&&this.addClass(this.CSS_GHOST));c.addClass(this._wrap,this.CSS_RESIZING);this._setCache();this._updateStatus(this._cache.height,this._cache.width,this._cache.top,this._cache.left);this.fireEvent("startResize",{type:"startresize",target:this})}},_setCache:function(){this._cache.xy=c.getXY(this._wrap);c.setXY(this._wrap,
this._cache.xy);this._cache.height=$(this._configs.element.value).height();this._cache.width=$(this._configs.element.value).width();this._cache.start.height=this._cache.height;this._cache.start.width=this._cache.width;this._cache.start.top=this._cache.xy[1];this._cache.start.left=this._cache.xy[0];this._cache.top=this._cache.xy[1];this._cache.left=this._cache.xy[0];this.set("height",this._cache.height,!0);this.set("width",this._cache.width,!0)},_handleMouseUp:function(a){this._active=!1;this._currentDD.unsubscribe("dragEvent",
this["_handle_for_"+this._currentHandle],this,!0);this._currentDD.unsubscribe("mouseUpEvent",this._handleMouseUp,this,!0);this._proxy&&(this._proxy.style.visibility="hidden",this._proxy.style.zIndex="-1",this.get("setSize")?this.resize(a,this._cache.height,this._cache.width,this._cache.top,this._cache.left,!0):this.fireEvent("resize",{ev:"resize",target:this,height:this._cache.height,width:this._cache.width,top:this._cache.top,left:this._cache.left}),this.get("ghost")&&this.removeClass(this.CSS_GHOST));
this.get("hover")&&c.addClass(this._wrap,this.CSS_HOVER);this._status&&c.setStyle(this._status,"display","none");this.browser.ie&&(document.body.onselectstart=this._ieSelectBack);this.browser.ie&&c.removeClass(this._wrap,this.CSS_RESIZE);for(var b in this._handles)l.hasOwnProperty(this._handles,b)&&c.removeClass(this._handles[b],this.CSS_HANDLE+"-active");this.get("hover")&&!this._active&&c.addClass(this._wrap,this.CSS_HOVER);c.removeClass(this._wrap,this.CSS_RESIZING);c.removeClass(this._handles[this._currentHandle],
this.CSS_HANDLE+"-"+this._currentHandle+"-active");c.removeClass(this._handles[this._currentHandle],this.CSS_HANDLE+"-active");this.browser.ie&&c.addClass(this._wrap,this.CSS_RESIZE);this._currentHandle=this._resizeEvent=null;this.get("animate")||(this.set("height",this._cache.height,!0),this.set("width",this._cache.width,!0));this.fireEvent("endResize",{ev:"endResize",target:this,height:this._cache.height,width:this._cache.width,top:this._cache.top,left:this._cache.left})},_setRatio:function(a,b,
e,c){var d=a,f=b;if(this.get("ratio")){var d=parseInt(this.get("height"),10),f=parseInt(this.get("width"),10),l=this.get("maxHeight"),m=this.get("minHeight");this.get("maxWidth");this.get("minWidth");switch(this._currentHandle){case "l":a=Math.min(Math.max(m,b/f*d),l);b=a/d*f;e=this._cache.start.top- -((d-a)/2);c=this._cache.start.left- -(f-b);break;case "r":a=Math.min(Math.max(m,b/f*d),l);b=a/d*f;e=this._cache.start.top- -((d-a)/2);break;case "t":b=a/d*f;a=b/f*d;c=this._cache.start.left- -((f-b)/
2);e=this._cache.start.top- -(d-a);break;case "b":b=a/d*f;a=b/f*d;c=this._cache.start.left- -((f-b)/2);break;case "bl":a=b/f*d;b=a/d*f;c=this._cache.start.left- -(f-b);break;case "br":a=b/f*d;b=a/d*f;break;case "tl":a=b/f*d;b=a/d*f;c=this._cache.start.left- -(f-b);e=this._cache.start.top- -(d-a);break;case "tr":a=b/f*d,b=a/d*f,c=this._cache.start.left,e=this._cache.start.top- -(d-a)}d=this._checkHeight(a);f=this._checkWidth(b);if(d!=a||f!=b)c=e=0,d!=a&&(f=this._cache.width),f!=b&&(d=this._cache.height)}return[d,
f,e,c]},_updateStatus:function(a,b,e,d){this._resizeEvent&&!l.isString(this._resizeEvent)&&(this.get("status")&&c.setStyle(this._status,"display","inline"),a=0===a?this._cache.start.height:a,b=0===b?this._cache.start.width:b,d=parseInt(this.get("height"),10),e=parseInt(this.get("width"),10),isNaN(d)&&(d=parseInt(a,10)),isNaN(e)&&(e=parseInt(b,10)),d=parseInt(a,10)-d,e=parseInt(b,10)-e,this._cache.offsetHeight=d,this._cache.offsetWidth=e,this._status.innerHTML="\x3cstrong\x3e"+parseInt(a,10)+" x "+
parseInt(b,10)+"\x3c/strong\x3e\x3cem\x3e"+(0<d?"+":"")+d+" x "+(0<e?"+":"")+e+"\x3c/em\x3e",c.setXY(this._status,[h.getPageX(this._resizeEvent)+12,h.getPageY(this._resizeEvent)+12]))},reset:function(){this.resize(null,this._cache.start.height,this._cache.start.width,this._cache.start.top,this._cache.start.left,!0);return this},resize:function(a,b,e,d,g,f,l){this._resizeEvent=a;var m=this._wrap,k=this.get("animate"),h=!0;this._proxy&&!f&&(m=this._proxy,k=!1);this._setAutoRatio(a);this._positioned&&
this._proxy&&(d=this._cache.top-d,g=this._cache.left-g);a=this._setRatio(b,e,d,g);b=parseInt(a[0],10);e=parseInt(a[1],10);d=parseInt(a[2],10);g=parseInt(a[3],10);0==d&&(d=c.getY(m));0==g&&(g=c.getX(m));this._positioned&&(this._proxy&&f?k?(d=this._proxy.style.top,g=this._proxy.style.left):(m.style.top=this._proxy.style.top,m.style.left=this._proxy.style.left):(this.get("ratio")||this._proxy||(d=this._cache.top+-d,g=this._cache.left+-g),d&&(this.get("minY")&&d<this.get("minY")&&(d=this.get("minY")),
this.get("maxY")&&d>this.get("maxY")&&(d=this.get("maxY"))),g&&(this.get("minX")&&g<this.get("minX")&&(g=this.get("minX")),this.get("maxX")&&g+e>this.get("maxX")&&(g=this.get("maxX")-e))));if(!l&&!1===this.fireEvent("beforeResize",{ev:"beforeResize",target:this,height:b,width:e,top:d,left:g}))return!1;this._updateStatus(b,e,d,g);!this._positioned||this._proxy&&f||(d&&(c.setY(m,d),this._cache.top=d),g&&(c.setX(m,g),this._cache.left=g));b&&(k||(h=!0,this._proxy&&f&&(this.get("setSize")||(h=!1)),h&&
(m.style.height=b+"px"),(this._proxy&&f||!this._proxy)&&this._wrap!=this.get("element")&&(this.get("element").style.height=b+"px")),this._cache.height=b);e&&(this._cache.width=e,k||(h=!0,this._proxy&&f&&(this.get("setSize")||(h=!1)),h&&(m.style.width=e+"px"),(this._proxy&&f||!this._proxy)&&this._wrap!=this.get("element")&&(this.get("element").style.width=e+"px")));k?pega.util.Anim&&(f=new pega.util.Anim(m,{height:{to:this._cache.height},width:{to:this._cache.width}},this.get("animateDuration"),this.get("animateEasing")),
this._positioned&&(d&&(f.attributes.top={to:parseInt(d,10)}),g&&(f.attributes.left={to:parseInt(g,10)})),this._wrap!=this.get("element")&&f.onTween.subscribe(function(){this.get("element").style.height=m.style.height;this.get("element").style.width=m.style.width},this,!0),f.onComplete.subscribe(function(){this.set("height",b);this.set("width",e);this.fireEvent("resize",{ev:"resize",target:this,height:b,width:e,top:d,left:g})},this,!0),f.animate()):this._proxy&&!f?this.fireEvent("proxyResize",{ev:"proxyresize",
target:this,height:b,width:e,top:d,left:g}):this.fireEvent("resize",{ev:"resize",target:this,height:b,width:e,top:d,left:g});return this},_handle_for_br:function(a){var b=this._setWidth(a.e),c=this._setHeight(a.e);this.resize(a.e,c+1,b,0,0)},_handle_for_bl:function(a){var b=this._setWidth(a.e,!0),c=this._setHeight(a.e);this.resize(a.e,c,b,0,b-this._cache.width)},_handle_for_tl:function(a){var b=this._setWidth(a.e,!0),c=this._setHeight(a.e,!0);this.resize(a.e,c,b,c-this._cache.height,b-this._cache.width)},
_handle_for_tr:function(a){var b=this._setWidth(a.e),c=this._setHeight(a.e,!0);this.resize(a.e,c,b,c-this._cache.height,0)},_handle_for_r:function(a){this._dds.r.setYConstraint(0,0);var b=this._setWidth(a.e);this.resize(a.e,0,b,0,0)},_handle_for_l:function(a){this._dds.l.setYConstraint(0,0);var b=this._setWidth(a.e,!0);this.resize(a.e,0,b,0,b-this._cache.width)},_handle_for_b:function(a){this._dds.b.setXConstraint(0,0);var b=this._setHeight(a.e);this.resize(a.e,b,0,0,0)},_handle_for_t:function(a){this._dds.t.setXConstraint(0,
0);var b=this._setHeight(a.e,!0);this.resize(a.e,b,0,b-this._cache.height,0)},_setWidth:function(a,b){var c=this._cache.xy[0];a=h.getPageX(a);var d=a-c;b&&(d=c-a+parseInt(this.get("width"),10));d=this._snapTick(d,this.get("yTicks"));return d=this._checkWidth(d)},_checkWidth:function(a){this.get("minWidth")&&a<=this.get("minWidth")&&(a=this.get("minWidth"));this.get("maxWidth")&&a>=this.get("maxWidth")&&(a=this.get("maxWidth"));return a},_checkHeight:function(a){this.get("minHeight")&&a<=this.get("minHeight")&&
(a=this.get("minHeight"));this.get("maxHeight")&&a>=this.get("maxHeight")&&(a=this.get("maxHeight"));return a},_setHeight:function(a,b){var c=this._cache.xy[1];a=h.getPageY(a);var d=a-c;b&&(d=c-a+parseInt(this.get("height"),10));d=this._snapTick(d,this.get("xTicks"));return d=this._checkHeight(d)},_snapTick:function(a,b){if(!a||!b)return a;var c=a,d=a%b;0<d&&(c=d>b/2?a+(b-d):a-d);return c},init:function(a,b){this._cache={xy:[],height:0,width:0,top:0,left:0,offsetHeight:0,offsetWidth:0,start:{height:0,
width:0,top:0,left:0}};k.superclass.init.call(this,a,b);this.set("setSize",this.get("setSize"));b.height&&this.set("height",parseInt(b.height,10));b.width&&this.set("width",parseInt(b.width,10));l.isString(a)||(a=c.generateId(a));k._instances[a]=this;this._active=!1;this._createWrap();this._createProxy();this._createHandles()},getProxyEl:function(){return this._proxy},getWrapEl:function(){return this._wrap},getStatusEl:function(){return this._status},getActiveHandleEl:function(){return this._handles[this._currentHandle]},
isActive:function(){return this._active?!0:!1},initAttributes:function(a){k.superclass.initAttributes.call(this,a);this.setAttributeConfig("setSize",{value:!1===a.setSize?!1:!0,validator:pega.lang.isBoolean});this.setAttributeConfig("wrap",{writeOnce:!0,validator:pega.lang.isBoolean,value:a.wrap||!1});this.setAttributeConfig("handles",{writeOnce:!0,value:a.handles||["r","b","br"],validator:function(a){l.isString(a)&&"all"==a.toLowerCase()&&(a="t b r l bl br tl tr".split(" "));l.isArray(a)||(a=a.replace(/, /g,
","),a=a.split(","));this._configs.handles.value=a}});this.setAttributeConfig("width",{value:a.width||parseInt(this.getStyle("width"),10),validator:pega.lang.isNumber,method:function(a){a=parseInt(a,10);0<a&&(this.get("setSize")&&this.setStyle("width",a+"px"),this._cache.width=a,this._configs.width.value=a)}});this.setAttributeConfig("height",{value:a.height||parseInt(this.getStyle("height"),10),validator:pega.lang.isNumber,method:function(a){a=parseInt(a,10);0<a&&(this.get("setSize")&&this.setStyle("height",
a+"px"),this._cache.height=a,this._configs.height.value=a)}});this.setAttributeConfig("minWidth",{value:a.minWidth||15,validator:pega.lang.isNumber});this.setAttributeConfig("minHeight",{value:a.minHeight||15,validator:pega.lang.isNumber});this.setAttributeConfig("maxWidth",{value:a.maxWidth||1E4,validator:pega.lang.isNumber});this.setAttributeConfig("maxHeight",{value:a.maxHeight||1E4,validator:pega.lang.isNumber});this.setAttributeConfig("minY",{value:a.minY||!1});this.setAttributeConfig("minX",
{value:a.minX||!1});this.setAttributeConfig("maxY",{value:a.maxY||!1});this.setAttributeConfig("maxX",{value:a.maxX||!1});this.setAttributeConfig("animate",{value:a.animate||!1,validator:function(a){a=!0;pega.util.Anim||(a=!1);return a}});this.setAttributeConfig("animateEasing",{value:a.animateEasing||function(){var a=!1;try{a=pega.util.Easing.easeOut}catch(e){}return a}()});this.setAttributeConfig("animateDuration",{value:a.animateDuration||.5});this.setAttributeConfig("proxy",{value:a.proxy||!1,
validator:pega.lang.isBoolean});this.setAttributeConfig("ratio",{value:a.ratio||!1,validator:pega.lang.isBoolean});this.setAttributeConfig("ghost",{value:a.ghost||!1,validator:pega.lang.isBoolean});this.setAttributeConfig("draggable",{value:a.draggable||!1,validator:pega.lang.isBoolean,method:function(a){a&&this._wrap?this._setupDragDrop():this.dd&&(c.removeClass(this._wrap,this.CSS_DRAG),this.dd.unreg())}});this.setAttributeConfig("hover",{value:a.hover||!1,validator:pega.lang.isBoolean});this.setAttributeConfig("hiddenHandles",
{value:a.hiddenHandles||!1,validator:pega.lang.isBoolean});this.setAttributeConfig("knobHandles",{value:a.knobHandles||!1,validator:pega.lang.isBoolean});this.setAttributeConfig("xTicks",{value:a.xTicks||!1});this.setAttributeConfig("yTicks",{value:a.yTicks||!1});this.setAttributeConfig("status",{value:a.status||!1,validator:pega.lang.isBoolean});this.setAttributeConfig("autoRatio",{value:a.autoRatio||!1,validator:pega.lang.isBoolean})},destroy:function(){var a=this.get("id")+"-handle-"+this.get("handles"),
b;for(b in this._handles)l.hasOwnProperty(this._handles,b)&&(h.purgeElement(this._handles[b]),this._handles[b].parentNode?this._handles[b].parentNode.removeChild(this._handles[b]):delete this._handles[b],this._dds[b].removeFromGroup(a));this._proxy&&(this._proxy.parentNode?this._proxy.parentNode.removeChild(this._proxy):delete this._proxy);this._status&&(this._status.parentNode?this._status.parentNode.removeChild(this._status):delete this._status);this.dd&&(this.dd.unreg(),c.removeClass(this._wrap,
this.CSS_DRAG));this._wrap!=this.get("element")&&(this.setStyle("position",""),this.setStyle("top",""),this.setStyle("left",""),this._wrap.parentNode&&this._wrap.parentNode.replaceChild(this.get("element"),this._wrap));this.removeClass(this.CSS_RESIZE);delete pega.util.Resize._instances[this.get("id")];for(var e in this)l.hasOwnProperty(this,e)&&(this[e]=null,delete this[e])},toString:function(){return this.get?"Resize (#"+this.get("id")+")":"Resize Utility"}});pega.util.Resize=k}})();
"undefined"!=typeof pega&&pega.register("resize",pega.util.Resize,{version:"2.5.2",build:"1076"});
pega.u=pega.namespace("pega.ui");pega.u.NonBlockingAjax={};
(function(w){var l={},p=pega.u.d.longPollRetryCount||0,n=[],q=function(){var a=1,d=1;pega.env.ua.ie?document.documentMode&&(a=5):2<pega.env.ua.gecko?a=5:522<pega.env.ua.webkit?a=3:10.5>=pega.env.ua.opera?a=3:10.5<pega.env.ua.opera&&(a=7);d=a;return{getConnToken:function(){return 0<d?(d--,!0):!1},releaseConnToken:function(){d++;d>a&&(d=a)},setMaxConnections:function(c){1<=c&&c<=a&&(a=c)}}}(),x=function(){var a={scope:this,success:function(a){pega.ui.statetracking.setAjaxPostBusy("NonBlockingAjax");p=
pega.u.d.longPollRetryCount||0;t.processResponseBundle(a);pega.ui.statetracking.setAjaxPostDone("NonBlockingAjax")},failure:function(a){0<p?(p--,setTimeout(function(){pega.util.Connect.initHeader("Content-Type","application/json;charset\x3dUTF-8");pega.util.Connect.setDefaultPostHeader(!1);pega.util.Connect.asyncRequest("POST",l.safeUrl,l.callback,l.requestString)},pega.u.d.longPollRetryTimeout)):(pega.ui.statetracking.setAjaxPostBusy("NonBlockingAjax"),t.processFailure(a),pega.ui.statetracking.setAjaxPostDone("NonBlockingAjax"))}};
return{send:function(d,c,g){var b=new SafeURL;b.put("pzIsNonBLocking","true");g&&b.put("pxReqURI",g);g=a;c&&(g=void 0);l.safeUrl=b.toURL();l.callback=g;l.requestString=d;0>=p&&(p=pega.u.d.longPollRetryCount||0);pega.util.Connect.initHeader("Content-Type","application/json;charset\x3dUTF-8");pega.util.Connect.setDefaultPostHeader(!1);pega.util.Connect.asyncRequest("POST",b.toURL(),g,d)}}}(),r=function(){var a=new w.tools.Queue,d=1001;return{add:function(c,g){for(var b=0;b<c.length;b++){if(!c[b].ID)if("D_LongPoll"==
c[b].data.adp)c[b].ID=c[b].data.activity.subscriptionId;else{var e=c[b],f;99999==d&&(d=1001);f=(new Date).getTime()+d++%1E3;e.ID=f}try{g&&(c[b].pendingRequests=g,g.push(c[b].ID))}catch(h){}a.enqueue(c[b])}u.scheduleDispatch()},getNextRequest:function(){return a.isEmpty()?null:a.dequeue()},isEmpty:function(){return a.isEmpty()}}}(),u=function(){var a=null,d=function(a,g){g=g||{};for(var b in a)"Callbacks"!==b&&"DataPreProcessor"!==b&&("object"===typeof a[b]?(g[b]=a[b].splice?[]:{},d(a[b],g[b])):g[b]=
a[b]);return g};return{scheduleDispatch:function(){if(null==a&&q.getConnToken()){var c;a=[];var g=[],b=null;if(r.isEmpty())a=null,q.releaseConnToken();else{do if(c=r.getNextRequest()){var e=!1;c.data&&c.data.pxReqURI&&(null==b?b=c.data.pxReqURI:null!=b&&c.data.pxReqURI!=b&&(e=!0));if(e&&c.data&&c.data.isAssociateRequestor)g.push(c);else{m.add(c.ID,c);e=c;if(e.DataPreProcessor)for(var f=e.DataPreProcessor.functions,h=0;h<f.length;h++){var k=[];if(f[h].args)for(var l=0;l<f[h].args.length;l++)k.push(f[h].args[l]);
k.push(e.data);f[h].scope?f[h].funcRef.apply(f[h].scope,k):f[h].funcRef.apply(null,k)}e=d(c);delete e.DataPreProcessor;delete e.Callbacks;delete e.pendingRequests;delete e.responsePreProcessor;a[a.length]=e}}while(c);if(0<a.length&&a){c=null;for(b=0;b<a.length;b++)a[b]&&a[b].data&&a[b].data.activity&&(a[b].data.activity.UITemplatingStatus="N"),a[b]&&a[b].data&&a[b].data.pxReqURI&&(null==c?c=a[b].data.pxReqURI:null!=c&&a[b].data.pxReqURI!=c&&(c=""),delete a[b].data.pxReqURI),a[b]&&a[b].data&&"undefined"!=
typeof a[b].data.isAssociateRequestor&&delete a[b].data.isAssociateRequestor;""===c&&(c=null);b=JSON.stringify(a);""!==b&&"[]"!==b&&x.send(b,!1,c);a=null}0<g.length&&r.add(g)}}else setTimeout(u.scheduleDispatch,1E3)},sendCancelRequest:function(a){for(var c=[],b=0;b<a.length;b++){var e=m.getRequest(a[b]);e&&c.push({channel:e.channel.substring(0,e.channel.lastIndexOf("/"))+"/cancel",ID:e.ID,clientID:e.clientID,connectionType:e.connectionType})}0<c.length&&(a=JSON.stringify(c),""!==a&&"[]"!==a&&x.send(a,
!0))}}}(),v=function(){var a=window;try{for(;a.parent!=a&&a.parent.document&&a.parent.pega.u.NonBlockingAjax;)a=a.parent}catch(d){}return a},m=function(){var a=new w.tools.Hashtable;return{add:function(d,c){a.put(d,c)},getRequest:function(d){return a.get(d)},remove:function(d){a.remove(d)},getAllRequests:function(){return a.values()},clear:function(){a.clear()},isEmpty:function(){return a.isEmpty()}}}(),t=function(){var a,d={reconnect:{retry:function(b,c){a.push(b)},"process-partial":function(b,c){g(b,
c);a.push(b)},none:function(a,e){g(a,e);m.remove(a.ID);c(a)}}},c=function(a){try{for(var b=0;b<a.pendingRequests.length;b++)if(a.pendingRequests[b]==a.ID){a.pendingRequests.splice(b,1);break}}catch(f){}},g=function(a,c){if(a.Callbacks){a=a.Callbacks.functions;for(var b=0;b<a.length;b++){var d=[];if(a[b].args)for(var e=0;e<a[b].args.length;e++)d.push(a[b].args[e]);d.push(c.data);d.push(c.successful);"false"==c.successful&&d.push(c.error);a[b].scope?a[b].funcRef.apply(a[b].scope,d):a[b].funcRef.apply(null,
d)}}};return{processResponseBundle:function(b){try{a=[];var e=JSON.parse(b.responseText);for(b=0;b<e.length;b++){var f=e[b],h=f.ID,k=m.getRequest(h);if(f&&f.advice&&f.advice.reconnect)d.reconnect[f.advice.reconnect](k,f);else k.responsePreProcessor&&k.responsePreProcessor.apply(null,[k,f]),m.remove(h),g(k,f),c(k),n&&0==n.length&&pega.u.d.clearReloadedStatus()}0<a.length&&r.add(a)}catch(y){}q.releaseConnToken()},processFailure:function(a){q.releaseConnToken()},responsePreProcessor:function(a,c){if(a=
pega.ui.ChangeTrackerMap.getTrackerByThread(a.data.threadId))a.parseForChangeTrackerDiv(c.data.response,!1),0<a.changedPropertiesList.length?("function"===typeof updateExpressionTargetsFromList&&updateExpressionTargetsFromList(a.changedPropertiesList),pega.u.d.evaluateClientConditions("TCL",null,!0,!0)):0<a.addRemovePagesList.length&&pega.u.d.evaluateClientConditions("TCL",null,!1,!0)}}}();pega.u.NonBlockingAjax.addRequests=function(a,d,c,g){if(!d){if((c=v())&&c!=window){c.pega.u.NonBlockingAjax.addRequests(a,
!0,n,t.responsePreProcessor);return}c=n;g=t.responsePreProcessor}if(a&&1<=a.length){d=[];for(var b=0;b<a.length;b++){var e=a[b],f={ID:"",clientID:"session"};f.channel="/"+e.serviceName+"/"+e.mode;f.data=e.data;f.DataPreProcessor=e.DataPreProcessor;f.Callbacks=e.Callbacks;"adp"==e.serviceName&&(f.responsePreProcessor=g);f.connectionType="long-polling";d.push(f)}r.add(d,c)}};pega.u.NonBlockingAjax.cleanPendingRequests=function(a,d){if(a){if(!m.isEmpty())for(0<d.length&&u.sendCancelRequest(d),a=0;a<
d.length;a++)m.remove(d[a].ID)}else if((a=v())&&a!=window)a.pega.u.NonBlockingAjax.cleanPendingRequests(!0,n),n=[];else{d=[];var c=m.getAllRequests();for(a=0;a<c.length;a++)d.push(c[a].ID);0<d.length&&u.sendCancelRequest(d);m.clear()}};pega.u.NonBlockingAjax.setMaxConnection=function(a){var d=v();d&&d!=window?d.ConnectionManager.setMaxConnections(a):q.setMaxConnections(a)}})(pega);
!function(y,t,C){function k(a,b){a=t.createElement(a||"div");for(var c in b)a[c]=b[c];return a}function l(a){for(var b=1,c=arguments.length;b<c;b++)a.appendChild(arguments[b]);return a}function z(a,b,c,d){var g=["opacity",b,~~(100*a),c,d].join("-");c=.01+c/d*100;d=Math.max(1-(1-a)/b*(100-c),a);var f=n.substring(0,n.indexOf("Animation")).toLowerCase();u[g]||(p.insertRule("@"+(f&&"-"+f+"-"||"")+"keyframes "+g+"{0%{opacity:"+d+"}"+c+"%{opacity:"+a+"}"+(c+.01)+"%{opacity:1}"+(c+b)%100+"%{opacity:"+a+
"}100%{opacity:"+d+"}}",p.cssRules.length),u[g]=1);return g}function q(a,b){a=a.style;var c,d;if(void 0!==a[b])return b;b=b.charAt(0).toUpperCase()+b.slice(1);for(d=0;d<v.length;d++)if(c=v[d]+b,void 0!==a[c])return c}function m(a,b){for(var c in b)a.style[q(a,c)||c]=b[c];return a}function w(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],d;for(d in c)void 0===a[d]&&(a[d]=c[d])}return a}function x(a){for(var b={x:a.offsetLeft,y:a.offsetTop};a=a.offsetParent;)b.x+=a.offsetLeft,b.y+=a.offsetTop;
return b}function e(a){if(8===pega.util.Event.isIE)return{spin:function(){},stop:function(){},opacity:function(){}};if(!this.spin)return new e(a);this.opts=w(a||{},e.defaults,A)}var v=["webkit","Moz","ms","O"],u={},n,p=function(){var a=k("style",{type:"text/css"});l(t.getElementsByTagName("head")[0],a);return a.sheet||a.styleSheet}(),A={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",speed:1,trail:100,opacity:.25,fps:20,zIndex:2E9,className:"spinner",top:"auto",left:"auto",position:"relative"};
e.defaults={};w(e.prototype,{spin:function(a){this.stop();var b=this,c=b.opts,d=b.el=m(k(0,{className:c.className}),{position:c.position,width:0,zIndex:c.zIndex}),g=c.radius+c.length+c.width,f,r;a&&(a.insertBefore(d,a.firstChild||null),r=x(a),f=x(d),m(d,{left:("auto"==c.left?r.x-f.x+(a.offsetWidth>>1):parseInt(c.left,10)+g)+"px",top:("auto"==c.top?r.y-f.y+(a.offsetHeight>>1):parseInt(c.top,10)+g)+"px"}));d.setAttribute("aria-role","progressbar");b.lines(d,b.opts);if(!n){var l=0,h=c.fps,e=h/c.speed,
p=(1-c.opacity)/(e*c.trail/100),q=e/c.lines;(function B(){l++;for(var a=c.lines;a;a--)b.opacity(d,c.lines-a,Math.max(1-(l+a*q)%e*p,c.opacity),c);b.timeout=b.el&&setTimeout(B,~~(1E3/h))})()}return b},stop:function(){var a=this.el;a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=void 0);return this},lines:function(a,b){function c(a,c){return m(k(),{position:"absolute",width:b.length+b.width+"px",height:b.width+"px",background:a,boxShadow:c,transformOrigin:"left",transform:"rotate("+
~~(360/b.lines*d+b.rotate)+"deg) translate("+b.radius+"px,0)",borderRadius:(b.corners*b.width>>1)+"px"})}for(var d=0,g;d<b.lines;d++)g=m(k(),{position:"absolute",top:1+~(b.width/2)+"px",transform:b.hwaccel?"translate3d(0,0,0)":"",opacity:b.opacity,animation:n&&z(b.opacity,b.trail,d,b.lines)+" "+1/b.speed+"s linear infinite"}),b.shadow&&l(g,m(c("#000","0 0 4px #000"),{top:"2px"})),l(a,l(g,c(b.color,"0 0 1px rgba(0,0,0,.1)")));return a},opacity:function(a,b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=
c)}});8!==pega.util.Event.isIE&&function(){function a(a,b){return k("\x3c"+a+' xmlns\x3d"urn:schemas-microsoft.com:vml" class\x3d"spin-vml"\x3e',b)}var b=m(k("group"),{behavior:"url(#default#VML)"});!q(b,"transform")&&b.adj?(p.addRule(".spin-vml","behavior:url(#default#VML)"),e.prototype.lines=function(b,d){function c(){return m(a("group",{coordsize:k+" "+k,coordorigin:-e+" "+-e}),{width:k,height:k})}function f(b,f,g){l(n,l(m(c(),{rotation:360/d.lines*b+"deg",left:~~f}),l(m(a("roundrect",{arcsize:d.corners}),
{width:e,height:d.width,left:d.radius,top:-d.width>>1,filter:g}),a("fill",{color:d.color,opacity:d.opacity}),a("stroke",{opacity:0}))))}var e=d.length+d.width,k=2*e,h=2*-(d.width+d.length)+"px",n=m(c(),{position:"absolute",top:h,left:h});if(d.shadow)for(h=1;h<=d.lines;h++)f(h,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius\x3d2,makeshadow\x3d1,shadowopacity\x3d.3)");for(h=1;h<=d.lines;h++)f(h);return l(b,n)},e.prototype.opacity=function(a,b,e,f){a=a.firstChild;f=f.shadow&&f.lines||0;a&&b+f<
a.childNodes.length&&(a=(a=(a=a.childNodes[b+f])&&a.firstChild)&&a.firstChild)&&(a.opacity=e)}):n=q(b,"animation")}();y.Spinner=e}(window,document);
function screenLayoutResize(){function d(b){return"absolute"==b.css("position")}if($(".screen-layout").hasClass("load-transition"))return!1;registerScreenLayoutWithAppView();var g=$(".screen-layout-region-main-sidebar1").outerWidth(),h=$(".screen-layout-region-main-sidebar2").outerWidth(),k=pega.u.d.isOrientationRTL();$(".screen-layout-region-header").hasClass("screen-layout-region-resize")&&($(".screen-layout-region-header").resizable({minHeight:parseInt($("#sidebar-collapse-header").outerHeight())},
{handles:{s:$("#sidebar-collapse-header")},resize:function(b,a){$("#sidebar-collapse-header").addClass("noclick");b=$(this);a=b.outerHeight();var c=$("#sidebar-collapse-header");c.hasClass("collapsed")&&a>parseInt($("#sidebar-collapse-header").outerHeight())?c.removeClass("collapsed"):c.hasClass("collapsed")||a!=parseInt($("#sidebar-collapse-header").outerHeight())||c.addClass("collapsed");c=parseInt($(".screen-layout-region-footer").outerHeight());parseInt(c)||(c=0);parseInt(a)+c>parseInt($(".screen-layout").outerHeight()-
100)&&($(this).outerHeight(parseInt($(".screen-layout").outerHeight()-100-c)),$(this).resizable("widget").trigger("mouseup"));a=b.outerHeight();if($(b).parents(".screen-layout").hasClass("flex")){var e,f=$(".screen-layout").height(),c=$("footer.screen-layout-region-footer").outerHeight()||0;b=$(b).find("#sidebar-collapse-header").outerHeight()||0;e=a+c;$(".screen-layout-region-main-middle, .screen-layout-region-main-sidebar1, .screen-layout-region-main-sidebar2, #sidebar-collapse-left, #sidebar-collapse-right").css({height:f-
e+"px"});$("#sidebar-collapse-header").css({top:a-b+"px"});$("#sidebar-collapse-left, #sidebar-collapse-right").css({top:a+"px"});c?$("footer.screen-layout-region-footer").css("z-index",0):1}else $(".screen-layout-region-main-middle").css({top:a}),d($(".screen-layout-region-main-sidebar1"))&&($(".screen-layout-region-main-sidebar2").css({top:a}),$(".screen-layout-region-main-sidebar1").css({top:a}))},start:function(b,a){document.all?($(".dynamicContainer").css("z-index","-1"),$(".dynamicContainer \x3e iframe").css("z-index",
"-1"),$(".dc-main").css("z-index","-1"),$(".dc-main \x3e iframe").css("z-index","-1")):($(".dynamicContainer").css("pointer-events","none"),$(".dynamicContainer \x3e iframe").css("pointer-events","none"),$(".dc-main").css("pointer-events","none"),$(".dc-main \x3e iframe").css("pointer-events","none"))},stop:function(b,a){document.all?($(".dynamicContainer \x3e iframe").css("z-index",""),$(".dynamicContainer").css("z-index",""),$(".dc-main \x3e iframe").css("z-index",""),$(".dc-main").css("z-index",
"")):($(".dynamicContainer \x3e iframe").css("pointer-events","auto"),$(".dynamicContainer").css("pointer-events","auto"),$(".dc-main \x3e iframe").css("pointer-events","auto"),$(".dc-main").css("pointer-events","auto"))}}),$(".screen-layout-region-header").css({overflow:"hidden"}),$("#sidebar-collapse-header").click(function(){var b=$("#sidebar-collapse-header");if($(this).hasClass("noclick")&&!b.hasClass("collapsed"))$(this).removeClass("noclick");else{var a;b.hasClass("collapsed")?(a=g,b.removeClass("collapsed")):
(a=parseInt($("#sidebar-collapse-header").outerHeight()),b.addClass("collapsed"));$(".screen-layout-region-header").animate({height:a},"fast");if($("#sidebar-collapse-header").parents(".screen-layout").hasClass("flex")){var c,e=$(".screen-layout").height(),b=$("#sidebar-collapse-header").outerHeight();c=$("footer.screen-layout-region-footer").outerHeight()||0;c=a+c;$(".screen-layout-region-main-middle, .screen-layout-region-main-sidebar1, .screen-layout-region-main-sidebar2, #sidebar-collapse-left, #sidebar-collapse-right").animate({height:e-
c+"px"},{duration:200,queue:!1});$("#sidebar-collapse-header").animate({top:a-b+"px"},{duration:200,queue:!1});$("#sidebar-collapse-left, #sidebar-collapse-right").animate({top:a+"px"},{duration:200,queue:!1})}else $(".screen-layout-region-main-middle").animate({top:a},"fast"),d($(".screen-layout-region-main-sidebar1"))&&($(".screen-layout-region-main-sidebar2").animate({top:a},"fast"),$(".screen-layout-region-main-sidebar1").animate({top:a},"fast"))}}));$(".screen-layout-region-main-sidebar1").hasClass("screen-layout-region-resize")&&
($(".screen-layout-region-main-sidebar1").resizable({minWidth:parseInt($("#sidebar-collapse-left").outerWidth())},{handles:{e:$("#sidebar-collapse-left")},resize:function(b,a){$("#sidebar-collapse-left").addClass("noclick");0==g&&(g=$(".screen-layout-region-main-sidebar1").outerWidth());b=$(this);a=b.outerWidth();var c=$("#sidebar-collapse-left");c.hasClass("collapsed")&&a>parseInt($("#sidebar-collapse-left").outerWidth())?c.removeClass("collapsed"):c.hasClass("collapsed")||a!=parseInt($("#sidebar-collapse-left").outerWidth())||
c.addClass("collapsed");c=parseInt($(".screen-layout-region-main-sidebar2").outerWidth());parseInt(c)||(c=0);parseInt(a)+c>parseInt($(".screen-layout").outerWidth()-100)&&($(this).outerWidth(parseInt($(".screen-layout").outerWidth()-100-c)),$(this).resizable("widget").trigger("mouseup"));a=b.outerWidth();if($(b).parents(".screen-layout").hasClass("flex")){var e,f;f=$(".runtime-control-panel.showing.runtime-control-panel-active").outerWidth()||0;c=$(".screen-layout").width();e=$(".screen-layout-region-main-sidebar2").outerWidth()||
0;b=$(b).find("#sidebar-collapse-left").outerWidth()||0;e=a+e+f;$(".screen-layout-region-main-middle").css({width:c-e+"px"});$("#sidebar-collapse-left").css({left:a-b+"px"})}else b=parseInt(a)-parseInt(g),b+="px",d($(".screen-layout-region-main-sidebar1"))?k?$(".screen-layout-region-main-middle").css({right:a},"fast"):$(".screen-layout-region-main-middle").css({left:a},"fast"):k?($(".screen-layout-region-header").css({right:b},"fast"),$(".screen-layout-region-footer").css({right:b},"fast"),$(".screen-layout-region-main-middle").css({right:b},
"fast")):($(".screen-layout-region-header").css({left:b},"fast"),$(".screen-layout-region-footer").css({left:b},"fast"),$(".screen-layout-region-main-middle").css({left:b},"fast"))},start:function(b,a){document.all?($(".dynamicContainer").css("z-index","-1"),$(".dynamicContainer \x3e iframe").css("z-index","-1"),$(".dc-main").css("z-index","-1"),$(".dc-main \x3e iframe").css("z-index","-1")):($(".dynamicContainer").css("pointer-events","none"),$(".dynamicContainer \x3e iframe").css("pointer-events",
"none"),$(".dc-main").css("pointer-events","none"),$(".dc-main \x3e iframe").css("pointer-events","none"))},stop:function(b,a){document.all?($(".dynamicContainer \x3e iframe").css("z-index",""),$(".dynamicContainer").css("z-index",""),$(".dc-main \x3e iframe").css("z-index",""),$(".dc-main").css("z-index","")):($(".dynamicContainer \x3e iframe").css("pointer-events","auto"),$(".dynamicContainer").css("pointer-events","auto"),$(".dc-main \x3e iframe").css("pointer-events","auto"),$(".dc-main").css("pointer-events",
"auto"))}}),$("#sidebar-collapse-left").click(function(b){var a=$(".screen-layout-region-main-sidebar1"),c=$("#sidebar-collapse-left");0==g&&(g=a.outerWidth());if($(this).hasClass("noclick")&&!c.hasClass("collapsed"))$(this).removeClass("noclick"),b.stopImmediatePropagation();else{var e,f=a.find(".screen-layout-region-content");if(c.hasClass("collapsed"))e=b=g,c.removeClass("collapsed"),f&&f.removeClass("hide");else{b=parseInt($("#sidebar-collapse-left").outerWidth());c.addClass("collapsed");var h=
$(".screen-layout-region-main-sidebar1").outerWidth();e=parseInt(h)-parseInt(g);e=parseInt(e)+parseInt(b)-parseInt(h);f&&f.addClass("hide")}$(c).hasClass("collapsed")?a.attr("data-expanded","false"):a.attr("data-expanded","true");a.animate({width:b},"fast",function(){"false"===a.attr("data-expanded")&&$(".screen-layout-region-main-sidebar1").css("display","block")});$("#sidebar-collapse-left").parents(".screen-layout").hasClass("flex")?(h=$(".runtime-control-panel.showing.runtime-control-panel-active").outerWidth()||
0,e=$(".screen-layout").width(),c=$("#sidebar-collapse-left").outerWidth(),f=$("aside.screen-layout-region-main-sidebar2").outerWidth()||0,f=b+f+h,$(".screen-layout-region-main-middle").animate({width:e-f+"px"},"fast"),$("#sidebar-collapse-left").animate({left:b-c+"px"},"fast")):d(a)?(0<window.navigator.userAgent.indexOf("Trident/")&&(c=$(".dc-main .dynamicContainer:visible \x3e iframe")[0])&&$(c.contentDocument).find(".harnessContent #harness-container").css("width",""),k?$(".screen-layout-region-main-middle").animate({right:b},
"fast"):$(".screen-layout-region-main-middle").animate({left:b},"fast")):$(".screen-layout-region-main-middle").animate({left:e},"fast")}}));$(".screen-layout-region-main-sidebar2").hasClass("screen-layout-region-resize")&&($(".screen-layout-region-main-sidebar2").resizable({minWidth:parseInt($("#sidebar-collapse-right").outerWidth())},{handles:{w:$("#sidebar-collapse-right")},resize:function(b,a){$("#sidebar-collapse-right").addClass("noclick");0==h&&(h=$(".screen-layout-region-main-sidebar2").outerWidth());
b=$(this);a=b.outerWidth();var c=$("#sidebar-collapse-right");c.hasClass("collapsed")&&a>parseInt($("#sidebar-collapse-right").outerWidth())?c.removeClass("collapsed"):c.hasClass("collapsed")||a!=parseInt($("#sidebar-collapse-right").outerWidth())||c.addClass("collapsed");c=parseInt($(".screen-layout-region-main-sidebar1").outerWidth());parseInt(c)||(c=0);parseInt(a)+c>parseInt($(".screen-layout").outerWidth()-100)&&($(this).outerWidth(parseInt($(".screen-layout").outerWidth()-100-c)),$(this).resizable("widget").trigger("mouseup"));
a=b.outerWidth();if($(b).parents(".screen-layout").hasClass("flex")){var e,f;f=$(".runtime-control-panel.showing.runtime-control-panel-active").outerWidth()||0;c=$(".screen-layout").width();e=$(".screen-layout-region-main-sidebar1").outerWidth()||0;b=$(b).find("#sidebar-collapse-right").outerWidth()||0;e=a+e+f;$(".screen-layout-region-main-middle").css({width:c-e+"px"});$("#sidebar-collapse-right").css({right:a-b+"px"})}else k?b.css({left:"0",right:""}):b.css({right:"0",left:""}),b=parseInt(a)-parseInt(h),
b+="px",d($(".screen-layout-region-main-sidebar2"))?k?$(".screen-layout-region-main-middle").css({left:a}):$(".screen-layout-region-main-middle").css({right:a}):k?($(".screen-layout-region-header").css({right:b}),$(".screen-layout-region-footer").css({right:b}),$(".screen-layout-region-main-middle").css({right:b})):($(".screen-layout-region-header").css({left:b}),$(".screen-layout-region-footer").css({left:b}),$(".screen-layout-region-main-middle").css({left:b}))},start:function(b,a){document.all?
($(".dynamicContainer").css("z-index","-1"),$(".dynamicContainer \x3e iframe").css("z-index","-1"),$(".dc-main").css("z-index","-1"),$(".dc-main \x3e iframe").css("z-index","-1")):($(".dynamicContainer").css("pointer-events","none"),$(".dynamicContainer \x3e iframe").css("pointer-events","none"),$(".dc-main").css("pointer-events","none"),$(".dc-main \x3e iframe").css("pointer-events","none"))},stop:function(b,a){document.all?($(".dynamicContainer \x3e iframe").css("z-index",""),$(".dynamicContainer").css("z-index",
""),$(".dc-main \x3e iframe").css("z-index",""),$(".dc-main").css("z-index","")):($(".dynamicContainer \x3e iframe").css("pointer-events","auto"),$(".dynamicContainer").css("pointer-events","auto"),$(".dc-main \x3e iframe").css("pointer-events","auto"),$(".dc-main").css("pointer-events","auto"))}}),$("#sidebar-collapse-right").click(function(){var b=$(".screen-layout-region-main-sidebar2"),a=$("#sidebar-collapse-right");0==h&&(h=b.outerWidth());if($(this).hasClass("noclick")&&!a.hasClass("collapsed"))$(this).removeClass("noclick");
else{var c,e=null;a.hasClass("collapsed")?(c=h,a.removeClass("collapsed"),e=!1):(c=parseInt($("#sidebar-collapse-right").outerWidth()),a.addClass("collapsed"),e=!0);var a=$(".screen-layout-region-main-sidebar2").outerWidth(),f=parseInt(a)-parseInt(h),f=parseInt(f)+parseInt(c)-parseInt(a);e?b.attr("data-expanded","false"):b.attr("data-expanded","true");b.animate({width:c},"fast",function(){"false"===b.attr("data-expanded")&&e&&$(".screen-layout-region-main-sidebar2").css("display","block")});if($("#sidebar-collapse-right").parents(".screen-layout").hasClass("flex")){var g,
l;l=$(".runtime-control-panel.showing.runtime-control-panel-active").outerWidth()||0;f=$(".screen-layout").width();a=$("#sidebar-collapse-right").outerWidth();g=$("aside.screen-layout-region-main-sidebar1").outerWidth()||0;g=c+g+l;$(".screen-layout-region-main-middle").animate({width:f-g+"px"},"fast");$("#sidebar-collapse-right").animate({right:c-a+"px"},"fast")}else d(b)?(k&&($(".screen-layout-region-main-middle").animate({left:c},"fast"),c=0),$(".screen-layout-region-main-middle").animate({right:c},
"fast")):$(".screen-layout-region-main-middle").animate({right:f},"fast")}}));$(".screen-layout-region-footer").hasClass("screen-layout-region-resize")&&($(".screen-layout-region-footer").resizable({minHeight:parseInt($("#sidebar-collapse-footer").outerHeight())},{handles:{n:$("#sidebar-collapse-footer")},resize:function(b,a){$("#sidebar-collapse-footer").addClass("noclick");b=$(this);a=b.outerHeight();var c=$("#sidebar-collapse-footer");c.hasClass("collapsed")&&a>parseInt($("#sidebar-collapse-footer").outerHeight())?
c.removeClass("collapsed"):c.hasClass("collapsed")||a!=parseInt($("#sidebar-collapse-footer").outerHeight())||c.addClass("collapsed");c=parseInt($(".screen-layout-region-header").outerHeight());parseInt(c)||(c=0);parseInt(a)+c>parseInt($(".screen-layout").outerHeight()-100)&&($(this).outerHeight(parseInt($(".screen-layout").outerHeight()-100-c)),$(this).resizable("widget").trigger("mouseup"));a=b.outerHeight();if($(b).parents(".screen-layout").hasClass("flex")){var e,f=$(".screen-layout").height();
e=$("header.screen-layout-region-header").outerHeight()||0;c=$(b).find("#sidebar-collapse-footer").outerHeight()||0;e=a+e;$(".screen-layout-region-main-middle, .screen-layout-region-main-sidebar1, .screen-layout-region-main-sidebar2, #sidebar-collapse-left, #sidebar-collapse-right").css({height:f-e+"px"});$("#sidebar-collapse-footer").css({bottom:a-c+"px"});$("#sidebar-collapse-left, #sidebar-collapse-right").css({bottom:a+"px"});$(b).css("z-index",0)}else b.css({bottom:"0",top:""}),$(".screen-layout-region-main-middle").css({bottom:a}),
d($(".screen-layout-region-main-sidebar1"))&&($(".screen-layout-region-main-sidebar2").css({bottom:a}),$(".screen-layout-region-main-sidebar1").css({bottom:a}))},start:function(b,a){document.all?($(".dynamicContainer").css("z-index","-1"),$(".dynamicContainer \x3e iframe").css("z-index","-1"),$(".dc-main").css("z-index","-1"),$(".dc-main \x3e iframe").css("z-index","-1")):($(".dynamicContainer").css("pointer-events","none"),$(".dynamicContainer \x3e iframe").css("pointer-events","none"),$(".dc-main").css("pointer-events",
"none"),$(".dc-main \x3e iframe").css("pointer-events","none"))},stop:function(b,a){document.all?($(".dynamicContainer \x3e iframe").css("z-index",""),$(".dynamicContainer").css("z-index",""),$(".dc-main \x3e iframe").css("z-index",""),$(".dc-main").css("z-index","")):($(".dynamicContainer \x3e iframe").css("pointer-events","auto"),$(".dynamicContainer").css("pointer-events","auto"),$(".dc-main \x3e iframe").css("pointer-events","auto"),$(".dc-main").css("pointer-events","auto"))}}),$("#sidebar-collapse-footer").click(function(){var b=
$("#sidebar-collapse-footer");if($(this).hasClass("noclick")&&!b.hasClass("collapsed"))$(this).removeClass("noclick");else{var a;b.hasClass("collapsed")?(a=g,b.removeClass("collapsed")):(a=parseInt($("#sidebar-collapse-footer").outerHeight()),b.addClass("collapsed"));$(".screen-layout-region-footer").animate({height:a},"fast");if($("#sidebar-collapse-footer").parents(".screen-layout").hasClass("flex")){var c,e=$(".screen-layout").height(),b=$("#sidebar-collapse-footer").outerHeight();c=$("header.screen-layout-region-header").outerHeight()||
0;c=a+c;$(".screen-layout-region-main-middle, .screen-layout-region-main-sidebar1, .screen-layout-region-main-sidebar2, #sidebar-collapse-left, #sidebar-collapse-right").animate({height:e-c+"px"},{duration:200,queue:!1});$("#sidebar-collapse-footer").animate({bottom:a-b+"px"},{duration:200,queue:!1});$("#sidebar-collapse-left, #sidebar-collapse-right").animate({bottom:a+"px"},{duration:200,queue:!1})}else $(".screen-layout-region-main-middle").animate({bottom:a},"fast"),d($(".screen-layout-region-main-sidebar1"))&&
($(".screen-layout-region-main-sidebar2").animate({bottom:a},"fast"),$(".screen-layout-region-main-sidebar1").animate({bottom:a},"fast"))}}));"false"!==$("#sidebar-region-one").attr("data-expanded")||$("#sidebar-collapse-left").hasClass("collaapsed")||$("#sidebar-collapse-left").click();"false"!==$("#sidebar-region-two").attr("data-expanded")||$("#sidebar-collapse-right").hasClass("collaapsed")||$("#sidebar-collapse-right").click();$(window).resize(function(b,a){pega.ui.screenLayout.resizeScreenLayout()})}
function resetScreenLayoutInlineStyles(){for(var d=document.querySelectorAll(".screen-layout \x3e *"),g=0;g<d.length;g++)d[g].style.removeProperty("top"),d[g].style.removeProperty("bottom"),d[g].style.removeProperty("left"),d[g].style.removeProperty("right"),d[g].style.removeProperty("width")}function _getScreenLayoutElement(d){var g=pega.desktop.support.getDesktopWindow();return window==g||window.opener?$(d):$(d,g.document)}
function toggleCollapseLeftPanel(){_getScreenLayoutElement("#sidebar-collapse-left").trigger("click")}function toggleCollapseRightPanel(){_getScreenLayoutElement("#sidebar-collapse-right").trigger("click")}
function collapsePanel(d){d="LEFT"==d.toUpperCase()?"#sidebar-collapse-left":"RIGHT"==d.toUpperCase()?"#sidebar-collapse-right":"HEADER"==d.toUpperCase()?"#sidebar-collapse-header":"FOOTER"==d.toUpperCase()?"#sidebar-collapse-footer":d;d=_getScreenLayoutElement(d);d.hasClass("collapsed")||d.trigger("click")}
function expandPanel(d){d="LEFT"==d.toUpperCase()?"#sidebar-collapse-left":"RIGHT"==d.toUpperCase()?"#sidebar-collapse-right":"HEADER"==d.toUpperCase()?"#sidebar-collapse-header":"FOOTER"==d.toUpperCase()?"#sidebar-collapse-footer":d;d=_getScreenLayoutElement(d);d.hasClass("collapsed")&&d.trigger("click")}function removeScreenLayoutMask(){pega.ui.appview.hideRegion(pega.ui.appview.REGION_LEFT);pega.ui.appview.hideRegion(pega.ui.appview.REGION_RIGHT)}
function showScreenLayoutLeftSidebar(){pega.ui.appview.showRegion(pega.ui.appview.REGION_LEFT)}function showScreenLayoutRightSidebar(){pega.ui.appview.showRegion(pega.ui.appview.REGION_RIGHT)}function toggleLeftSidebar(){pega.ui.appview.showRegion(pega.ui.appview.REGION_LEFT)}function toggleRightSidebar(){pega.ui.appview.showRegion(pega.ui.appview.REGION_RIGHT)}
function registerScreenLayoutWithAppView(){pega.ui.appview.onScreenLayoutLoad({showPanel:function(d){$(".screen-layout").hasClass("screen-layout-icon_toolbar")?$(".screen-layout").addClass("icon-bar-slideup"):d==pega.ui.appview.REGION_RIGHT?((d=document.getElementById("appview-nav-toggle-two"))&&d.setAttribute("aria-expanded",!0),$(".screen-layout").addClass("screen-layout-expanded-s2"),$(".screen-layout").addClass("screen-layout-expanded-s2-animate")):((d=document.getElementById("appview-nav-toggle-one"))&&
d.setAttribute("aria-expanded",!0),$(".screen-layout").addClass("screen-layout-expanded-s1"),$(".screen-layout").addClass("screen-layout-expanded-s1-animate"))},hidePanel:function(d){if($(".screen-layout").hasClass("flex")){$(".screen-layout").removeClass("screen-layout-expanded-s1-animate screen-layout-expanded-s2-animate screen-layout-expanded-s1-animate2d screen-layout-expanded-s2-animate2d icon-bar-slideup");d=document.getElementById("appview-nav-toggle-one");var g=document.getElementById("appview-nav-toggle-two");
d&&d.setAttribute("aria-expanded",!1);g&&g.setAttribute("aria-expanded",!1);setTimeout(function(){$(".screen-layout").removeClass("screen-layout-expanded-s1 screen-layout-expanded-s2")},200)}else $(".screen-layout").removeClass("screen-layout-expanded-s1-animate screen-layout-expanded-s2-animate screen-layout-expanded-s1-animate2d screen-layout-expanded-s2-animate2d icon-bar-slideup"),setTimeout(function(){$(".screen-layout").addClass("screen-layout-expanded-s1-close screen-layout-expanded-s2-close");
$(".screen-layout").removeClass("screen-layout-expanded-s1 screen-layout-expanded-s2")},200),setTimeout(function(){$(".screen-layout").removeClass("screen-layout-expanded-s1-close");$(".screen-layout").removeClass("screen-layout-expanded-s2-close")},400)}})}var that=this;
window.addEventListener("load",function(){var d;d=$(".screen-layout-region-main-middle").height();var g=$("div.dc-header").height();d-=g;$(".ie11 .flex #workarea .static-dc-tab,.ie11 .flex #workarea .tabContent .dynamicContainer,.edge .flex #workarea .static-dc-tab").css({height:d+"px"});if(pega.u.d&&pega.u.d.HCLoadManager&&pega.offline)pega.u.d.HCLoadManager.onViewRendered(function(){screenLayoutResize.call(that)});else screenLayoutResize.call(that)});pega.namespace("pega.ui");
pega.ui.screenLayout=function(){return{resizeScreenLayout:function(d,g){if($("main.screen-layout-region-main-middle").parents(".screen-layout").hasClass("flex")){d||(d=document.querySelector(".screen-layout").getBoundingClientRect().width);g||(g=document.querySelector(".screen-layout").getBoundingClientRect().height);var h=$(".screen-layout-region-main-sidebar1").outerWidth()||0;-1==$(".screen-layout-region-main-sidebar1").css("z-index")&&(h=1);var k=$(".screen-layout-region-main-sidebar2").outerWidth()||
0;-1==$(".screen-layout-region-main-sidebar2").css("z-index")&&(k=1);var b=$(".runtime-control-panel.showing.runtime-control-panel-active").outerWidth()||0,a=$(".pz-gap-panel.ui-resizable.showing.pz-gap-panel-active").outerWidth()||0,c=$("header.screen-layout-region-header").outerHeight()||0,e=$("footer.screen-layout-region-footer").outerHeight()||0,c=c+e,h=h+k+b+a;pega.util.Event.isIE&&(h+=1);k=$(".screen-layout-region-header").hasClass("screen-layout-region-resize ui-resizable");b=$(".screen-layout-region-footer").hasClass("screen-layout-region-resize ui-resizable");
a=$(".screen-layout-region-main-sidebar1").hasClass("screen-layout-region-resize ui-resizable");e=$(".screen-layout-region-main-sidebar2").hasClass("screen-layout-region-resize ui-resizable");if(k||b||a||e)$(".screen-layout-region-main-middle,.screen-layout-region-main-sidebar1, .screen-layout-region-main-sidebar2, #sidebar-collapse-left, #sidebar-collapse-right").css({height:g-c+"px"}),$(".screen-layout-region-main-middle").css({width:d-h+"px"})}d=$(".screen-layout");g=$(".screen-layout-region-header");
c=$(".screen-layout-region-footer");h=g.outerHeight();k=c.outerHeight();e=$(".screen-layout-region-main-sidebar1");b=$(".screen-layout-region-main-sidebar2");a=$(".screen-layout-region-main-middle");if("absolute"==e.css("position")){$("#sidebar-collapse-left").show();var f=e.attr("style");f&&("false"===e.attr("data-expanded")&&-1!=f.indexOf("display: block;")?e.attr("style",f.replace(/width: 0px;/g,"").replace(/display: none;/g,"").replace(/position: absolute;/g,"")):e.attr("style",f.replace(/width: 0px;/g,
"").replace(/display: block;/g,"").replace(/display: none;/g,"").replace(/position: absolute;/g,"")),e.css({top:h,bottom:k}));f=e.outerWidth();pega.u.d.isOrientationRTL()?(a.css({right:f}),a.css({left:0})):a.css({left:f});g.css({"margin-left":"0",left:"0"});c.css({"margin-left":"0",left:"0"});if(f=d.attr("style"))pega.u.d.isOrientationRTL()?(e=new RegExp("margin-right: "+e.css("width")+";","g"),d.attr("style",f.replace(e,"").replace(/margin-right: [0-9]*px;/g,""))):(e=new RegExp("margin-left: "+e.css("width")+
";","g"),d.attr("style",f.replace(e,"").replace(/margin-left: [0-9]*px;/g,"")))}else"fixed"==e.css("position")&&(e.is(":visible")||a.css({left:""}));if("absolute"==b.css("position")){$("#sidebar-collapse-right").show();if(f=b.attr("style"))"false"===b.attr("data-expanded")&&-1!=f.indexOf("display: block;")?b.attr("style",f.replace(/width: 0px;/g,"").replace(/display: none;/g,"").replace(/position: absolute;/g,"")):b.attr("style",f.replace(/width: 0px;/g,"").replace(/display: block;/g,"").replace(/display: none;/g,
"").replace(/position: absolute;/g,"")),b.css({top:h,bottom:k});f=b.outerWidth();pega.u.d.isOrientationRTL()?a.css({left:f}):a.css({right:f});g.css({"margin-right":"0",right:"0"});c.css({"margin-right":"0",right:"0"});if(f=d.attr("style"))pega.u.d.isOrientationRTL()?(e=new RegExp("margin-left: "+b.css("width")+";","g"),d.attr("style",f.replace(e,"").replace(/margin-left: [0-9]*px;/g,""))):(e=new RegExp("margin-right: "+b.css("width")+";","g"),d.attr("style",f.replace(e,"").replace(/margin-right: [0-9]*px;/g,
"")))}else"fixed"==b.css("position")&&(b.is(":visible")||a.css({right:""}))}}}();"undefined"!=typeof pega&&"undefined"!=typeof pega.u&&"undefined"!=typeof pega.u.d?pega.u.d.attachOnload(harnessPortalResizable,!0):window.attachEvent("onload",harnessPortalResizable);
function harnessPortalResizable(){var d=$(".workarea-main-left"),g=$(".workarea-main-right"),h=$(d.find('div[class*\x3d"workarea-main-left-handle"]')),k=$(g.find('div[class*\x3d"workarea-main-right-handle"]'));0<g.length&&!g.hasClass("ui-resizable")&&0<k.length&&(k.click(function(){if($(".workarea-main-right").hasClass("noClick"))return $(".workarea-main-right").removeClass("noClick"),!1;$(this.parentElement).toggleClass("collapsed");$(this.parentElement).hasClass("collapsed")?$(this.parentElement).attr("data-expanded",
"false"):$(this.parentElement).attr("data-expanded","true");"false"===$(this.parentElement).attr("data-expanded")&&$(this.parentElement).css("display","block");$(window).resize()}),g.resizable({handles:{w:k},resize:function(b,a){a.position.left=a.originalPosition.left;a.size.width-=3},start:function(b,a){$(".workarea-main-right").addClass("noClick");$(".workarea-main-right").removeClass("collapsed")},stop:function(b,a){setTimeout(function(){$(".workarea-main-right").removeClass("noClick")},300)}}));
0<d.length&&!d.hasClass("ui-resizable")&&0<h.length&&(h.click(function(){if($(".workarea-main-left").hasClass("noClick"))return $(".workarea-main-left").removeClass("noClick"),!1;$(this.parentElement).toggleClass("collapsed");$(this.parentElement).hasClass("collapsed")?$(this.parentElement).attr("data-expanded","false"):$(this.parentElement).attr("data-expanded","true");"false"===$(this.parentElement).attr("data-expanded")&&$(this.parentElement).css("display","block");$(window).resize()}),d.resizable({handles:{e:h},
resize:function(b,a){a.size.width-=3},start:function(b,a){$(".workarea-main-left").addClass("noClick");$(".workarea-main-left").removeClass("collapsed")},stop:function(b,a){setTimeout(function(){$(".workarea-main-left").removeClass("noClick")},300)}}));"false"!==$(".workarea-main-left").attr("data-expanded")||$(".workarea-main-left").hasClass("collapsed")||$(".workarea-main-left-handle").click();"false"!==$(".workarea-main-right").attr("data-expanded")||$(".workarea-main-right").hasClass("collapsed")||
$(".workarea-main-right-handle").click()};
(function(b){var d=b.util.Event,e=b.u.d,f=pega.desktop,g=f.support,h=b.env.ua,k=null,l=function(){if(e&&f&&g){k=g.getDesktopWindow();var a=window;h.ie?d.addListener(a.document,"focusin",c):h.webkit?a.addEventListener("focus",c,!0):d.addListener(a.document,"focusin",c)}},c=function(){try{k.pega.desktop.windowReloadHandler()}catch(a){}},m=this;e.attachOnload(function(){l.call(m)},!1)})(pega);
(function(a){a.m=a.mobile;a.m.isNativeSDK=-1!==navigator.userAgent.toLowerCase().indexOf("pegamobilesdk");a.m.isHybridClient=-1!==navigator.userAgent.toLowerCase().indexOf("ampwebcontrol");a.m.isPegaElectronContainer=-1!==navigator.userAgent.toLowerCase().indexOf("pegaelectroncontainer");a.m.isPegaMobileClient=-1!==navigator.userAgent.toLowerCase().indexOf("pegamobile");a.m.isOfflineBrowser=pega.offline&&pega.offline.browser?!0:!1;a.m.isHybrid=a.m.isNativeSDK||a.m.isHybridClient||a.m.isPegaElectronContainer||
a.m.isOfflineBrowser||a.m.isPegaMobileClient;a.m.isPegaMobileClient&&"undefined"===typeof pmcRuntimeFeatures?console.warn("pmcRuntimeFeatures is undefined in Pega Mobile Client. This shouldn't be the case."):a.m.isPegaMobileClient&&"undefined"!==pmcRuntimeFeatures&&(a.m.isParentWebView="undefined"!==typeof pmcPortalConfiguration,a.m.isChildWebView="undefined"===typeof pmcPortalConfiguration,a.m.isSingleWebViewPegaMobileClient=!pmcRuntimeFeatures.pxUsesMultiWebView,a.m.isSingleWebViewOfflinePegaMobileClient=
"true"===pmcRuntimeFeatures.pxUsesOffline&&!pmcRuntimeFeatures.pxUsesMultiWebView,a.m.isMultiWebViewPegaMobileClient="true"===pmcRuntimeFeatures.pxUsesMultiWebView,a.m.isMultiWebViewOfflinePegaMobileClient="true"===pmcRuntimeFeatures.pxUsesOffline&&"true"===pmcRuntimeFeatures.pxUsesMultiWebView);pega&&pega.u&&pega.u.d&&pega.u.d.attachOnload(function(){var a;a=/iP(hone|od|ad)/.test(navigator.platform)?(a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/))&&parseInt(a[1],10):void 0;a&&12<a&&(document.body.style.overflow=
"auto")},!1);var b=a.desktop.support.getDesktopWindow(),p=b=b?b:window;b.pega.ui&&b.pega.ui.composer&&(b=b.pega.ui.composer.getCurrentComposerWindow());a.m.getDesktopWindow=function(){return p};var g=function(){};g.prototype={logOut:function(){},handlers:[],addEventListener:function(a,b,f){this.handlers.push({type:a,fn:b,scope:f})},removeEventListener:function(a,b,f){this.handlers=this.handlers.filter(function(c){if(c.type!==a||c.fn!==b||c.scope!==f)return c})},fireEvent:function(a,b){this.handlers.forEach(function(c){c.type.toLowerCase()===
a.toLowerCase()&&c.fn.apply(c.scope||window,b)})}};var l=function(a){if(b.launchbox.Authentication&&b.launchbox.Authentication.AuthenticationType&&b.launchbox.Authentication.AuthenticationType.OAUTH2_AUTHORIZATION_CODE===b.launchbox.Authentication.authenticationType&&b.launchbox.InterAppCommunicator)b.launchbox.InterAppCommunicator.sendEvent({name:"Logoff"}),a();else if(b.launchbox.Authentication&&b.launchbox.Authentication.Type.PEGA_AUTHENTICATOR){var c=b.launchbox.Authentication.authenticator(b.launchbox.Authentication.Type.PEGA_AUTHENTICATOR);
c.url=window.location.origin+window.pxReqURI;c.logOff().then(a,function(a){console.error("pegaAuthenticatior logOff failed"+JSON.stringify(a))})}else console.warn("The launchbox.Authentication.PEGA_AUTHENTICATOR API not available. Skipping logout on server side.")},q=function(a){if(b.pega.offline&&b.launchbox.PRPC&&b.launchbox.PRPC.ClientStore){var c={onStatusUpdate:function(k){k.busy?b.launchbox.PRPC.ClientStore.stop():(b.launchbox.PRPC.ClientStore.removeListener(c),a())}};b.launchbox.PRPC.ClientStore.addListener(c)}else a()},
d=g;if(a.m.isNativeSDK)d=function(){},d.prototype=new g,d.prototype.logOut=function(){l(function(){window.close()})};else if(a.m.isHybridClient||a.m.isPegaElectronContainer||a.m.isOfflineBrowser||a.m.isPegaMobileClient)d=function(){},d.prototype=new g,d.prototype.logOut=function(a){var c=function(){b.launchbox.AccountManager&&b.launchbox.AccountManager.closeAccount&&(b.launchbox.AccountManager.accountManagerListener={onOpen:function(){},onClose:function(){}},b.launchbox.AccountManager.closeAccount({onSuccess:function(){},
onFailure:function(a){console.log("Failed to close AccountManager account. "+a)}}))};q(function(){l(a);window.launchbox&&window.launchbox.appDynamics?window.launchbox.appDynamics.stopTimer("Offline").then(window.launchbox.appDynamics.stopTimer("Online").then(c(),c()),c()):c()})};a.m.hybrid=new d;var m=!1,h=[];a.m.hybrid.callWhenLaunchboxLoaded=function(a,b){m?a():b?h.unshift(a):h.push(a)};a.m.isHybrid&&(b.onLaunchboxLoaded=function(){m=!0;h.forEach(function(a){try{a()}catch(k){console.log("Failed to call one of 'on launchbox loaded' callbacks."),
console.error(k)}});h=[];b.pega.mobile.hybrid.fireEvent("launchboxloaded",arguments)});a.m.hybrid.isSessionCookieAvailable=function(){for(var a=document.cookie.split(";"),b=[],f=0;f<a.length;f++){for(var e=a[f];" "===e.charAt(0);)e=e.substring(1,e.length);0===e.indexOf("Pega-RULES\x3d")&&b.push(e.substring(11,e.length))}for(a=0;a<b.length;a++)if(0<b[a].length&&"none"!==b[a])return!0;return!1};a.m.hybrid.getLaunchBox=function(){return a.m.isHybrid?top.launchbox:null};var n=!1;if(a.u.d.HCLoadManager&&
a.u.d.HCLoadManager.onViewRendered)a.u.d.HCLoadManager.onViewRendered(function(){if(!n){var a=function(){b.launchbox.InterAppCommunicator.sendEvent({name:"OfflineViewRendered"});window.pega.offline.ExceptionHandler.disable()};if(window.launchbox.ApplicationManager)if("started"===window.launchbox.ApplicationManager.self.state)a();else{var d={onListChanged:function(){},onApplicationChanged:function(c,e,g){c.id===window.launchbox.ApplicationManager.self.id&&"started"===c.state&&(a(),b.launchbox.ApplicationManager.removeApplicationManagerListener(d))}};
b.launchbox.ApplicationManager.addApplicationManagerListener(d)}}});var r={onEvent:function(a,b){"JavascriptErrorInApplication"===a.name&&(n=!0)}};a.u.d.HCLoadManager&&(a.u.d.HCLoadManager.attachOfflineExceptionListener=function(){b.launchbox.InterAppCommunicator&&b.launchbox.InterAppCommunicator.addListener(r)});a.m.hybrid.callWhenLaunchboxLoaded(function(){a.u.d.HCLoadManager&&a.u.d.HCLoadManager.attachOfflineExceptionListener&&a.u.d.HCLoadManager.attachOfflineExceptionListener()})})(pega);
(function(h){function n(){k=!0;if(!pega.u.d.isAppOfflineEnabled()){if("function"==typeof window.history.replaceState){var a=window.history.state?window.history.state:{};a.page=1;window.history.replaceState(a,"Home");console.log("native_navigation:Home page marked!")}p=!0}}function l(){if(pega.ui.hasAjaxContainer&&d.isEmpty()){var a=pega.redux.Utils.getAjaxContainerState();if(a.docsHistory&&1<a.docsHistory.length){pega.redux.store.dispatch(pega.redux.actions(pega.redux.actionTypes.SWITCH,{recordId:a.docsHistory[a.docsHistory.length-
2],fromBackButtonClick:!0}));return}}if(d.isEmpty())if((window.history.state&&1!=window.history.state.page||null==window.history.state)&&p)window.history.back();else{var a=pega.u.d.fieldValuesList.get("Are you sure you want to exit?")||"Are you sure you want to exit?",b=!0;bottomVars.dynamic_context.showExitConfirmationOnAndroidApp&&(b=confirm(a));b&&(pega.mobile.sdk&&pega.mobile.sdk.device&&pega.mobile.sdk.device.goBack&&pega.mobile.sdk.device.goBack(),top.launchbox&&top.launchbox.BackAction.fireDefaultBackButtonAction())}else{a=
d.getLastItem();try{a()}catch(c){console.error("Native nav back handler execution failed with exception",c)}}}function m(a,b,c){if(!k)return!1;if("function"!==typeof a)throw Error("Invalid handler!");var f=a;b&&(b=Array.prototype.slice.call(c,1),f=a.bind.apply(a,b));return f}h.m=h.namespace("pega.mobile");var k=!1,p=!1,g=!1,d=new function(){var a={},b=null;this.list=a;var c=0;this.push=function(f,d){var e;c++;e="key"+c;a[e]={data:f,prev:b,next:null,isCheckPoint:d?!0:!1};null!=b&&(a[b].next=e);return b=
e};this.getLastItem=function(){return b&&a[b]?a[b].data:!1};this.pop=function(c){if(null==b)return!1;var f=null;a[b]&&(f=a[b].prev);var e=a[b];delete a[b];b=f;null!=b&&(a[b].next=null);return c?e:e.data};this.restore=function(b){if(a[b]&&a[b].isCheckPoint)for(;!this.isEmpty();)if(b=this.pop(!0),b.isCheckPoint)return b;return!1};this.remove=function(c){if(!a[c])return!1;var d=a[c].next,e=a[c].prev;delete a[c];e?a[e].next=d:d||(b=null);d?a[d].prev=e:b=e;return!0};this.isEmpty=function(){return null==
b?!0:!1}};$(function(){pega.mobile.sdk&&pega.mobile.sdk.device&&pega.mobile.sdk.device.goBack&&(n(),pega.mobile.sdk.device.addEventListener("backbuttonpressed",l));pega.mobile&&pega.mobile.hybrid&&pega.mobile.hybrid.callWhenLaunchboxLoaded(function(){window.launchbox&&window.launchbox.BackAction&&(n(),window.launchbox.BackAction.addListener({onBackButtonPressed:l}))})});h.m.nativenav={addToHistory:function(a,b){if(g)return-1;var c=m(a,b,arguments);return c?d.push(c):-1},addToHistoryAndBlock:function(a,
b){if(g)return-1;var c=m(a,b,arguments);return c?((c=d.push(c))&&-1!==c&&(g=c),c):-1},removeFromHistory:function(a){if(!k)return!0;g&&g==a&&(g=!1);return d.remove(a)},addAsCheckPoint:function(a,b){var c=m(a,b,arguments);return c?d.push(c,!0):-1},restoreCheckpoint:function(a){return a&&-1==a?!1:d.restore(a)}};k=!0;$(document).on("onBackButtonPressed",l);h.m.nativenav.items=d.list;h.m.nativenav.triggerBack=l})(pega);
"undefined"==typeof showModalDialog&&(window.showModalDialog=function(h,l,k){alert("OpenUrlInDialog API and window.showModalDialog are no longer supported. Replace by an auto-generated local action")});if(!pega)var pega={};
pega.openUrlInModal||(pega.openUrlInModal=function(){var h,l,k,m,n,p,q,v=function(c,d){function a(a){for(var b in a)this[b]=a[b]}d||(d={});a.prototype=c;return new a(d)},r=function(c){"OPEN"===c&&pega.util.Dom.setStyle(pega.u.d.modalDialog.resizeHandle,"display","none")},x=function(c){pega.u.d.performFlowAction=function(d,a,e,b,f,g,t){h&&(pega.u.d.performFlowAction=l,pega.u.d.unregisterModalListener(r),h=!1,pega.u.d.gBusyInd&&pega.u.d.gBusyInd.hide(),k=void 0);f?(d=pega.u.d.getPopOver(pega.u.d.insertButton),
null!=d&&(pega.u.d.overLaySubmit=!1,d.close()),pega.u.d.resetSubmitModalDlgParam()):pega.u.d.modalDialog.hide();if(c)try{c(window.returnValue)}catch(w){alert("pega.openUrlInModal.showModalDialog - error when calling callbackfunction: '"+w.message+"'")}}},y=function(c,d,a,e,b){d&&(window.dialogArguments=d);var f=$('\x3cdiv\x3e\x3ciframe name\x3d"pzDisplayModalDialog" id\x3d"pzDisplayModalDialog" frameborder\x3d"0" src\x3d"'+("string"===typeof c?c:c.toURL())+'" style\x3d"width:100%; height:100%"/\x3e\x3c/div\x3e'),
g=f.dialog({autoOpen:!0,modal:!0,width:e,height:a+50,resizable:!1,autoResize:!1,position:["middle",20],overlay:{opacity:.8,background:"black"},open:function(){var a=$(this).children()[0].contentWindow;window.gsServerReqURI&&(a.gsServerReqURI=window.gsServerReqURI);a.dialogArguments=window.dialogArguments;a.returnValue=void 0},close:function(){u(b,void 0,f,g)}}).width(e-30).height(a).css("overflow","hidden");f.children().on("load",function(){var a=$(this).contents().find("title").html();g.dialog("option",
"title",a);var c=$(this)[0].contentWindow;c.closeModal=function(){u(b,c.returnValue,f,g)}})},u=function(c,d,a,e){window.returnValue=d;e.dialog("destroy");a.remove();e.remove();if(c)try{c(window.returnValue)}catch(b){alert("pega.openUrlInModal.showModalDialog - error when calling callbackfunction: '"+b.message+"'")}},z=function(){if(pega.env&&pega.env.ua&&pega.env.ua.ie)return 8>=pega.env.ua.ie?!0:!1;var c;c=window.navigator.userAgent;var d=c.indexOf("MSIE ");return 0<d?(c=parseInt(c.substring(d+5,
c.indexOf(".",d))),8>=c):!1};return{showModalDialog:function(c,d,a,e,b){if(z()){if("string"===typeof e&&(e=e.replace("px","")),"string"===typeof a&&(a=a.replace("px","")),e="dialogHeight: "+a+"px; dialogWidth: "+e+"px; status: no; help: no; scroll: yes; resizable: no;",c=window.showModalDialog("string"===typeof c?c:c.toURL(),d,e),window.returnValue=c,b)try{b(window.returnValue)}catch(t){alert("pega.openUrlInModal.showModalDialog - error when calling callbackfunction: '"+t.message+"'")}}else{var f=
!1,g=$("#_popOversContainer \x3e #po0");0<g.length&&"hidden"!==g.css("visibility")&&(f=!0);window.frameElement&&"pzDisplayModalDialog"===window.frameElement.id||!pega.ui||!pega.ui.Doc||!pega.ui.Doc.prototype||"function"!=typeof pega.ui.Doc.prototype.processActionModal||f?window.$?y(c,d,a,e,b):alert("pega.openUrlInModal.showModalDialog is missing some javascript modules to work correctly"):(d&&(window.dialogArguments=d),"string"==typeof e&&(e=e.replace("px","")),"string"==typeof a&&(a=a.replace("px",
"")),d=pega.ui.Doc.prototype.isModalLoaded(),l=pega.u.d.performFlowAction,h=!0,x(b),pega.u.d.registerModalListener(r),b=new SafeURL,b.put("readOnly","true"),b.put("pzPrimaryPageName","pyWorkPage"),b.put("BaseReference","pyWorkPage"),b.put("modelessDialog","true"),b.put("IgnoreSectionSubmit",!0),b.put("NewTaskStatus","pzDisplayModalDialog"),b.put("TaskIndex",""),b.put("StreamType",""),b.put("FieldError",""),b.put("FormError",""),b.put("pyCustomError",""),b.put("bExcludeLegacyJS","true"),b.put("modalStyle",
""),b.put("bIsDCinDL",!1),m="string"==typeof c?c:c.toURL(),b.put("frameWidth",e+"px"),b.put("frameHeight",a+"px"),p=e,q=a,b.put("bIsModal","true"),b.put("inStandardsMode","true"),d?(b.put("ActionSection","pyOverlayTemplate"),b.put("bIsOverlay","true"),b.put("FlowActionTarget","overlay"),n=!0):(b.put("ModalSection","pyModalTemplate"),n=!1),k=v(document.event,{target:document.body}),pega.ui.Doc.prototype.processActionModal(b,"",k,""))}},getCurrentUrl:function(){var c=document.getElementById("pzDisplayModalDialogWrapper"),
d=$("\x3ciframe src\x3d'"+m+"' name\x3d'pzDisplayModalDialog' frameborder\x3d'0' style\x3d'width:"+p+"px; height:"+q+"px;' id\x3d'pzDisplayModalDialog' onload\x3d\"pzDisplayModalDialogLoaderOnLoad(this,'pzDisplayModalDialog');\"\x3e\x3c/iframe\x3e");c.appendChild(d[0]);q=p=m="";d.ready(function(){var a=window.frames.pzDisplayModalDialog;a.gsServerReqURI=window.gsServerReqURI;a.dialogArguments=window.dialogArguments;a.dialogChangeTrackerMap=pega.ui.ChangeTrackerMap;a.returnValue=void 0;if(n)$(".overlayPO").attr("style",
"left: "+$(".modal-overlay").offset().left+"px; top: "+$(".modal-overlay").offset().top+"px; width: \x3c%\x3d width + 40 %\x3epx; overflow: auto; height: \x3c%\x3d height + 40 %\x3e; z-index:    100; visibility: visible;"),a.closeModal=function(){window.returnValue=a.returnValue;"undefined"!=typeof pega.u.d.processOnFrameLoads&&pega.util.Event.removeListener(a.frameElement,"load",pega.u.d.processOnFrameLoads);a.frameElement.src="javascript:false";$(a.frameElement).remove();var b=pega.u.d.getPopOver();
b&&b.close();a.closeModal=void 0;a=null};else{a.closeModal=function(){window.returnValue=a.returnValue;"undefined"!=typeof pega.u.d.processOnFrameLoads&&pega.util.Event.removeListener(a.frameElement,"load",pega.u.d.processOnFrameLoads);a.frameElement.src="javascript:false";$(a.frameElement).remove();$("#container_close").click();a.closeModal=void 0;a=null;pega.u.d.modalResizeObj.reset();$(".yui-resize-status").remove()};var c=a.document.title;$("#modaldialog_hd_title")[0]&&($("#modaldialog_hd_title")[0].innerHTML=
c)}try{if(a.dialogChangeTrackerMap&&pega.u.d.getThreadName()===a.pega.u.d.getThreadName()&&a.pega&&a.pega.ui&&a.pega.ui.ChangeTrackerMap){var b=a.pega.ui.ChangeTrackerMap.getTracker().id;if(null==b||"undefined"==typeof b)a.pega.ui.ChangeTrackerMap=a.dialogChangeTrackerMap}}catch(f){}})}}}(pega));
(function(c){c.c=c.control?c.control:c.namespace("pega.control");if(!c.c.AttachUtil){var m=function(a){return!a||""===a.trim()},L=function(){var a=c.mobile.hybrid.getLaunchBox();return a&&a.DocumentViewer},q=function(){return/Android|webOS|iPhone|iPad|iPod|IEMobile|BlackBerry/i.test(navigator.userAgent)},H=-1<navigator.userAgent.indexOf("PegaMobile"),n=function(a){var b;a||(a=this.getRunScriptEvent());a&&(b=a.srcElement?a.srcElement:a.target);return b},D=function(a){var b=SafeURL_createFromURL(c.u.d.url);
b.put("pyActivity","pzAppStorageOkToAttachFile");return c.u.d.asyncRequest("GET",b,{success:function(b){a(b.responseText)}},null,null)},I=function(a,b,d,f){var e=d?a:window.location.protocol+"//"+window.location.host+a,h=function(a,b){return b?function(){console.debug("Attachment opened successfully"+a);a&&c.u.d.ServerProxy.setDestination(c.u.d.ServerProxy.DESTINATION.LOCAL)}:function(b){var d='Failed to open attachment "'+e+'"';b&&(d+=". Reason: "+b.description);console.error(d);a&&c.u.d.ServerProxy.setDestination(c.u.d.ServerProxy.DESTINATION.LOCAL)}};
c.mobile.sdk.plugins.documents.preview(e).then(function(){console.debug("Attachment downloaded and previewed with success");h(f,!0)()}).catch(function(){h(f)()})},T=function(a,b,d,f){a=d?a:window.location.protocol+"//"+window.location.host+a;var e=new c.ui.busyIndicator("",!0,null);(b=n(b))&&e.setTargetElement(b);e.show();b=function(a,b){return b?function(){console.debug("Attachment opened successfully"+a);e.hide();a&&c.u.d.ServerProxy.setDestination(c.u.d.ServerProxy.DESTINATION.LOCAL)}:function(b){console.error("Failed to open attachment: "+
b.description);e.hide();a&&c.u.d.ServerProxy.setDestination(c.u.d.ServerProxy.DESTINATION.LOCAL)}};f={onSuccess:b(f,!0),onProgress:function(){},onFailure:b(f)};c.mobile.hybrid.getLaunchBox().DocumentViewer.open(a,{},f)},C=function(a,b,d,f,e){function h(a){var d=c.u.d.fieldValuesList.get("pzDownload")+" "+e.fileType.toUpperCase();a.innerHTML+='\x3ca id\x3d"inlineDownload" tabindex\x3d0 role\x3d"link" title\x3d"'+d+'" class\x3d"attachment-inline-preview-header-links-download"\x3e\x3ci class\x3d"pi pi-download"\x3e\x3c/i\x3e \x3cspan\x3e'+
d+"\x3c/span\x3e\x3c/a\x3e";var v=function(a){null==b?alert(c.u.d.fieldValuesList.get("pzAttachDownloadURLBroken")):q()?$("html").hasClass("iOS")?window.openUrlInWindow(b,"Attachment","resizable\x3dyes,scrollbars\x3dyes,status\x3dyes"):n(b):n(b)};$(document).on("click","#inlineDownload",v);$(document).on("keypress","#inlineDownload",function(a){13!==a.which&&13!==a.keyCode||v(a)})}function k(a){var b=c.u.d.fieldValuesList.get("pzClose");a.innerHTML+='\x3ca id\x3d"inlineClose" tabindex\x3d0 role\x3d"link" title\x3d"'+
b+'" class\x3d"attachment-inline-preview-header-links-close"\x3e\x3ci class\x3d"pi pi-times"/\x3e\x3c/a\x3e';$(document).on("click","#inlineClose",function(){$("#ATTACHMENT-WRAPPER-DIV").remove()});$(document).on("keypress","#inlineClose",function(a){13!==a.which&&13!==a.keyCode||$("#ATTACHMENT-WRAPPER-DIV").remove()})}function t(b,c){b+="\x26viewInline\x3dtrue";if(J(c)){b=document.createElement("img");b.setAttribute("class","attachment-inline-preview-content-img attachment-inline-preview-content-img"+
l);b.setAttribute("style","display:none;");b.onerror=function(){w("image")};"false"!==G?b.onload=function(){E("image")}:(y(),b.setAttribute("style","display:block;"),b.setAttribute("width",M),b.setAttribute("height",N));b.src=a+"\x26viewInline\x3dtrue";if(q())$(document).on("click",".attachment-inline-preview-content-img"+l,function(){$(".attachment-inline-preview-content-img"+l).toggleClass("zoom-in-inline-img")});return b}if(F(c)){c=document.createElement("video");var d=e.fileType;"ogv"===d&&(d=
"ogg");"m4v"===d&&(d="mp4");"embed"!==B&&c.setAttribute("autoplay","");c.setAttribute("controls","");c.preload="auto";c.setAttribute("class","attachment-inline-preview-content-video attachment-inline-preview-content-video"+l);q()?y():c.setAttribute("style","display:none;");"false"!==G?c.onloadeddata=function(){E("video")}:(y(),c.setAttribute("style","display:block;width:"+M+"px;height:"+N+"px;"));c.onerror=function(){w("video")};var v=document.createElement("source");v.type="video/"+d;v.onerror=function(){w("video")};
v.src=b;c.appendChild(v);return c}}function g(a,b,d){a="true"===z?c.c.EVAUtil.modifyURLForExternalViewer(U,e,a):a+"\x26viewInline\x3dtrue";var r=document.createElement("iframe"),f=window.navigator.userAgent;0<f.indexOf("Trident/")||0<f.indexOf("Edge/")?u(r,!1,d):(r.style.position="absolute",r.style.left="-9999px",r.onload=function(){u(r,!0)});"false"===z?void 0!==a&&null!==a&&""!==a?0<f.indexOf("Trident/")?r.src=a+"\x26viewPDFInline\x3dtrue":(a=SafeURL_createFromURL(a+"\x26viewPDFInline\x3dtrue\x26fileName\x3d"+
b),r.src=a.toURL()):r.src="":r.src=a;return r}function u(a,b,c){var d=V("pdf"),e=d[0],d=d[1];y();b?(a.height=e,a.width=d):(c.style.height=e+"px",c.style.width=d+"px",a.style.height="100%",a.style.width="100%");p(e,d);b&&(a.style.position="inherit",a.style.left="0");x()}function E(a){var b=document.getElementsByClassName("image"===a?"attachment-inline-preview-content-img"+l:"attachment-inline-preview-content-video"+l)[0];q()&&"image"!==a&&(b.style.display="none");var c=V(a),d=c[0],c=c[1];y();var e;
"image"===a?(a=b.naturalHeight,e=b.naturalWidth):(a=b.videoHeight,e=b.videoWidth);if(0===parseInt(c))b.setAttribute("style","display:block;width: 100%; height: 100%");else{for(0===parseInt(d)&&(d=Math.round(a/e*c));a>d||e>c;)a>d?p(d,d/a*e):e>c&&p(c/e*a,c),a=Math.round($("#ATTACHMENT-PREVIEW-CONTENT"+l+" \x3e span").height()),e=Math.round($("#ATTACHMENT-PREVIEW-CONTENT"+l+" \x3e span").width());b.height=a;b.width=e;b.setAttribute("style","display:block;")}x()}function V(a){var b,c;"embed"!==B?(b=Math.round($("#ATTACHMENT-WRAPPER-DIV").height()-
$("#ATTACHMENT-PREVIEW-HEADER").height()-35),c=Math.round($("#ATTACHMENT-WRAPPER-DIV").width()-28),q()&&(c+=28)):(b=parseInt(N),c=parseInt(M),0===c&&(c=Math.round(document.getElementById(D).offsetWidth)),0===b&&"pdf"===a&&(b=Math.round(842/595*c)));return[b,c]}function p(a,b){$("#ATTACHMENT-PREVIEW-CONTENT"+l+" \x3e span").width(b);$("#ATTACHMENT-PREVIEW-CONTENT"+l+" \x3e span").height(a)}function x(){"embed"!==B&&("false"!==A?$("#inlineDownload").focus():$("#inlineClose").focus())}function w(a){y();
a="embed"!==B?"\x3cb style\x3d'color:#fff'\x3e"+c.u.d.fieldValuesList.get("pzAttachmentNotFound")+"\x3c/b\x3e":"\x3cimg src \x3d '"+K+"' width\x3d'44' height\x3d'44'\x3e";document.getElementById("INLINE-PREVIEW-MEDIA-WRAPPER"+l).innerHTML=a}function y(){document.getElementById("IMG_SHOW_THROBBER_BEFORE_LOAD"+l)&&document.getElementById("IMG_SHOW_THROBBER_BEFORE_LOAD"+l).remove()}function m(a,b){if(null!=e&&"false"===z){var d;d=e.fileType;d=void 0===d?!1:O(d)||"pdf"===d.toLowerCase();d||(b=!1)}if(b&&
null!=e){b=D;void 0===b||null===b||""===b?(b=document.getElementById("ATTACHMENT-WRAPPER-DIV"),null!=b&&$("#ATTACHMENT-WRAPPER-DIV").remove(),b=document.createElement("div"),b.id="ATTACHMENT-WRAPPER-DIV",b.setAttribute("class","attachment-inline-preview-wrapper"),document.body.appendChild(b)):b=document.getElementById(b);if("embed"!==B){b.innerHTML='\x3cdiv id\x3d"ATTACHMENT-PREVIEW-HEADER" class\x3d"attachment-inline-preview-header"\x3e\x3c/div\x3e';d=document.getElementById("ATTACHMENT-PREVIEW-HEADER");
d.innerHTML='\x3cdiv id\x3d"ATTACHMENT-PREVIEW-HEADER-INFO" class\x3d"attachment-inline-preview-header-info"\x3e\x3c/div\x3e';d.innerHTML+='\x3cdiv id\x3d"ATTACHMENT-PREVIEW-HEADER-DOWNLOAD-LINK" class\x3d"attachment-inline-preview-header-download-link"\x3e\x3c/div\x3e';d.innerHTML+='\x3cdiv id\x3d"ATTACHMENT-PREVIEW-HEADER-CLOSE-LINK" class\x3d"attachment-inline-preview-header-close-link"\x3e\x3c/div\x3e';if("false"!==C){d=document.getElementById("ATTACHMENT-PREVIEW-HEADER-INFO");d.innerHTML+='\x3cdiv id\x3d"ATTACHMENT-PREVIEW-HEADER-INFO-TITLE" class\x3d"attachment-inline-preview-header-info-title"\x3e\x3ch1\x3e'+
e.fileName+"\x3cspan\x3e."+e.fileType+"\x3c/span\x3e\x3c/h1\x3e\x3c/div\x3e";var f;f=e.fileType;f=f.toLowerCase();f=J(f)||"tif"===f||"tiff"===f?c.u.d.fieldValuesList.get("pzImage"):F(f)?c.u.d.fieldValuesList.get("pzVideo"):P(f)?c.u.d.fieldValuesList.get("pzMusic"):Q(f)?c.u.d.fieldValuesList.get("pzOfcDoc"):R(f)?c.u.d.fieldValuesList.get("pzOfcExcel"):S(f)?c.u.d.fieldValuesList.get("pzOfcPPT"):"pdf"===f?c.u.d.fieldValuesList.get("pzPDF"):f;d.innerHTML+='\x3cdiv id\x3d"ATTACHMENT-PREVIEW-HEADER-INFO-META" class\x3d"attachment-inline-preview-header-info-meta"\x3e'+
(f+" | "+e.uploadedOn+" "+e.uploadedBy)+"\x3c/div\x3e"}"false"!==A&&h(document.getElementById("ATTACHMENT-PREVIEW-HEADER-DOWNLOAD-LINK"));k(document.getElementById("ATTACHMENT-PREVIEW-HEADER-CLOSE-LINK"))}b.innerHTML=b.innerHTML+'\x3cdiv id\x3d"'+("ATTACHMENT-PREVIEW-CONTENT"+l)+'" class\x3d"attachment-inline-preview-content"\x3e\x3c/div\x3e';b=document.getElementById("ATTACHMENT-PREVIEW-CONTENT"+l);"embed"===B&&b.classList.add("attachment-inline-preview-content-embed");d=document.createElement("span");
f=document.createElement("img");f.src="webwb/pzLoadingBarAnimation.gif";f.id="IMG_SHOW_THROBBER_BEFORE_LOAD"+l;b.appendChild(f);"true"!==z||F(e.fileType)?(d.id="INLINE-PREVIEW-MEDIA-WRAPPER"+l,O(e.fileType)?(d.appendChild(t(a,e.fileType)),b.appendChild(d)):"pdf"===e.fileType.toLowerCase()?(d.appendChild(g(a,e.fileName,d)),b.appendChild(d)):n(a)):(d.appendChild(g(a,e.fileName,d)),b.appendChild(d))}else n(a)}function n(a){var b=c.desktop.support.getDesktopWindow(),b=(b?b:window).document.getElementById("ATTACHMENT-DATA");
null===b&&(b=document.getElementById("ATTACHMENT-DATA"));null===b&&(b=W());b.src=a}var z="false";if(f&&void 0!==e&&null!==e){var l=e.uniqueID,C=e.isHeaderRequired,A=e.isDownloadRequired,D=e.targetDiv,B=e.displayType,N=e.height,M=e.width,K=e.fallbackThumbnail,G=e.maintainAspectRatio;if("true"!==e.doNotUseEV&&c.c.EVAUtil)var U=c.c.EVAUtil.getExternalViewerDetails(e),z=U.useExternalViewer;else z="false";"false"===z&&X(e.fileType)&&(f=!1)}var W=function(){var a=document.createElement("iframe");a.id="ATTACHMENT-DATA";
a.style.display="none";document.body.appendChild(a);return a};try{L()?T(a,d):H?I(a,d):q()?f?m(a,f):$("html").hasClass("iOS")?window.openUrlInWindow(a,"Attachment","resizable\x3dyes,scrollbars\x3dyes,status\x3dyes"):m(a):document.addEventListener?m(a,f):window.open(a,"Attachment","resizable\x3dyes,scrollbars\x3dyes,status\x3dyes")}catch(v){console.error("Error displaying attachment: ",a,v),W().src=a}},O=function(a){return J(a)||F(a)||P(a)},J=function(a){a=a.toLowerCase();return"png"===a||"jpg"===a||
"jpeg"===a||"bmp"===a||"gif"===a||("tif"===a||"tiff"===a)&&K()},F=function(a){a=a.toLowerCase();return"mp4"===a||"m4v"===a?!0:K()?!1:"webm"===a||"ogg"===a||"ogv"===a},P=function(a){a=a.toLowerCase();return"mp3"===a||"wav"===a},Q=function(a){a=a.toLowerCase();return"doc"===a||"docx"===a},R=function(a){a=a.toLowerCase();return"xls"===a||"xlsx"===a},S=function(a){a=a.toLowerCase();return"ppt"===a||"pptx"===a},X=function(a){return Q(a)||R(a)||S(a)},K=function(){var a=/Chrome/.test(navigator.userAgent)&&
/Google Inc/.test(navigator.vendor),b=window.navigator.userAgent;return!a&&0>=b.indexOf("Firefox/")&&(0<b.indexOf("Safari/")||0<b.indexOf("Trident/")||0<b.indexOf("Edge/"))?!0:!1},A=function(a){void 0!==a&&null!==a&&(a.uniqueID=(new Date).getTime()+Math.floor(20*Math.random()))},Y=function(a){var b=c.ui.ClientCache.find("D_pzOfflineAttachmentList");if(b=b&&b.get("pxResults")?b.get("pxResults").iterator():void 0)for(;b.hasNext();){var d=b.next();if(a===d.get("pxLinkedRefTo").getValue())return"Signature-Attach"===
d.get("pyLabel").getValue()}return!1},Z=function(a,b,d,f,e,h,k,t){if(!L()&&!H||m(b)||m(e)){var g="",u="",E=g=!1,n="";if(k){if(null!=t)try{var p=t.fileType;null!=p&&""!==p.trim()&&(g=O(p.trim()),E="pdf"===p.trim().toLowerCase(),n=t.storageType)}catch(y){}!g&&!E||"External"===n?(g=new SafeURL(d+"."+f),g.put("linkInsHandle",a.trim())):(g=new SafeURL(d+"."+e),g.put("LinkedRefTo",b.trim()));u=new SafeURL(d+"."+f);u.put("linkInsHandle",a.trim());c.u.d.convertToRunActivityAction(u);c.u.d.convertToRunActivityAction(g);
u=u.toURL()}else q()?$("html").hasClass("iOS")?(g=new SafeURL("@baseclass.pzProcessURLInWindow"),g.put("pyPreActivity",d+"."+f)):(g=new SafeURL(d+"."+f),c.u.d.convertToRunActivityAction(g)):(g=new SafeURL(d+"."+f),c.u.d.convertToRunActivityAction(g)),g.put("linkInsHandle",a.trim());C(g.toURL(),u,h,k,t)}else{a=new SafeURL(d+"."+e);a.put("LinkedRefTo",b.trim());c.u.d.convertToRunActivityAction(a);a=a.toURL();var x,w;if(c.u.d.ServerProxy&&c.u.d.ServerProxy.isDestinationLocal())if(0>b.toUpperCase().indexOf("DATA-WORKATTACH-")){if(H&&
Y(b)){pms.plugins.clientstore.getItemUrl("signature",b.trim(),{decodeBase64:!0,fileExtension:"png"}).then(function(a){I({id:a},h,!0,w)}).catch(function(a){console.error("Can't preview signature attachment "+b+". Reason: "+a)});return}a=b.trim();x=!0}else{if(-1!==b.toUpperCase().indexOf("TMP-DATA-WORKATTACH-")){c.mobile.sdk.plugins.clientstore.getItem("DATA-WORKATTACH-FILE",b.trim()).then(function(a){x=!0;I({id:a.url},h,x,w)}).catch(function(){console.log("error")});return}if(c.offline.NetworkStatus.isDataNetworkAvailable())c.u.d.ServerProxy.setDestination(c.u.d.ServerProxy.DESTINATION.REMOTE),
w=!0;else{setTimeout(function(){var a=c.u.d.fieldValuesList.get("CannotPerformWhenOffline");alert(a);c&&c.control&&c.control.Actions&&c.control.Actions.prototype.hideSkeleton()},100);return}}H?I(a,h,x,w):T(a,h,x,w)}},aa=function(a,b){if("DATA-WORKATTACH-URL"===a)a=c.u.d.fieldValuesList.get("CannotOpenUrlOnMobileApp"),alert(a);else{var d=c.mobile.hybrid.getLaunchBox();d.PRPC.ClientStore.getItem(a,b).then(function(a){d.DocumentViewer.open(a.url,{onSuccess:function(){console.debug("Attachment opened successfully")},
onFailure:function(a){console.error("Failed to open attachment: "+a.description)}})},function(){console.error("Failed to fetch attachment URL from ClientStore.")})}},G=function(a){a=document.getElementById(a.thisId);if(null!=a){var b=a.getAttribute("validationTypeBackup");b&&(a.setAttribute("validationType",b),a.removeAttribute("validationTypeBackup"))}},ba=function(a){window.addEventListener?window.addEventListener("load",a,!1):window.attachEvent&&window.attachEvent("onload",a)};c.c.AttachUtil={MULTIPART_FORM_DATA:"multipart/form-data",
FORM_URL_ENCODED:"application/x-www-form-urlencoded",resetEncoding:function(a,b){a&&(a.encoding=b)},resetEncodingFileUpload:function(a){this.resetEncoding(a,this.MULTIPART_FORM_DATA)},resetEncodingForm:function(a){this.resetEncoding(a,this.FORM_URL_ENCODED)},setEncoding:function(a,b,d){a&&(b?a.encoding=d:ba(function(){a.encoding=d}))},setEncodingFileUpload:function(a,b){this.setEncoding(a,b,this.MULTIPART_FORM_DATA)},setEncodingForm:function(a,b){this.setEncoding(a,b,this.FORM_URL_ENCODED)},isMaxFileSizeExceeded:function(a,
b){if(window.File&&window.FileReader&&window.FileList&&null!=b){b=b.files;for(var d=0,c=b.length;d<c;++d)if(b[d].size>a)return!0}return!1},showMaxFileSizeViolation:function(a){c.u.d.reloadSection(null,"pyMaxFileSizeViolation","",!1,!1,null,null,a)},getSelectedFileName:function(a){var b="",d;if(null!=a)if(window.File&&window.FileReader&&window.FileList){a=a.files;for(var c=0,e=a.length;null!=a&&c<e;++c)d=a[c].name,m(d)&&(d=a[c].value),m(d)||(b+=d+":")}else d=a.getAttribute("value"),m(d)&&(d=a.value),
m(d)||(b=d);return b},deferValidationUntilSubmit:function(a){a={thisId:a};var b=document.getElementById(a.thisId);if(null!=b){var d=b.getAttribute("validationType");d&&(b.setAttribute("validationTypeBackup",d),b.removeAttribute("validationType"))}isRegisteredOnBeforeSubmit(G)||c.u.d.registerOnBeforeSubmit(G,a)},getRunScriptEvent:function(){var a=window.event;if(!a)for(var b=this.getRunScriptEvent.caller;b;){for(var d=0;d<b.arguments.length;++d)if((a=b.arguments[d])&&(a.srcElement||a.target))return a;
b=b.caller}},checkStorageAuthAndExecute:function(a,b,d){var f=function(e){if("true"===e)b();else{var f=c.u.d.performFlowACallback;m(d)&&(d="pzCheckContentStorageTarget");c.u.d.performFlowACallback=function(a,d,e){c.u.d.performFlowACallback=f;f(a,d,e);D(function(a){"true"===a&&b()})};e=n(a);c.u.d.processAction(d,"","","","","popup","","","",e)}};c.u.d.ServerProxy&&c.u.d.ServerProxy.isDestinationLocal()?f("true"):D(f)},checkWebStorageTokenAndExecute:function(a,b,d){this.checkStorageAuthAndExecute(a,
b,d)},checkTokenAndDownloadAttachment:function(a,b,d,f,e,h,k,t,g){var n=-1<navigator.userAgent.indexOf("PegaMobile");if(""===d&&c.mobile&&c.mobile.isPegaElectronContainer)g=c.u.d.fieldValuesList.get("OfflineApplicationGettingSynchronized"),alert(g),c&&c.control&&c.control.Actions&&c.control.Actions.prototype.hideSkeleton();else{var m=function(){A(t);Z(b,d,f,e,h,a,k,t)},q=-1<navigator.userAgent.indexOf("AmpWebControl")||-1<navigator.userAgent.indexOf("PegaElectronContainer")||n,p=null!=c.ui.ClientCache.find("pyWorkPage.pxObjClass")?
c.ui.ClientCache.find("pyWorkPage.pxObjClass").getValue():null;L()?null!=p?"false"!==c.offline.Utils.getOfflineSettingsForCase(p,"pyOfflineAttachmentsEnabled")&&q?(console.info("Opening attachment in offline."),g||(g="DATA-WORKATTACH-FILE"),aa(g.toUpperCase(),d)):this.checkStorageAuthAndExecute(a,m):this.checkStorageAuthAndExecute(a,m):n?(g||(g="DATA-WORKATTACH-FILE"),null!=p?this.previewPIMCAttachmentOffline(a,p,g,d,q,m):this.previewPIMCAttachmentOnline(a,d,h,f,b,e)):this.checkStorageAuthAndExecute(a,
m)}},checkTokenAndDisplayAttachment_pegaSocial_inline:function(a,b,d,c,e){c="false"===c||!1===c?!1:!0;this.checkStorageAuthAndExecute(a,function(){A(b);C(d,e,a,c,b)})},determineTypeOfAttachment:function(a){return J(a)?"image":F(a)?"video":P(a)?"audio":Q(a)?"doc":R(a)?"excel":S(a)?"ppt":"pdf"===a?"pdf":"NA"},displayEmbeddedAttachment:function(a,b,c){var d=$.Event("onload");d.target=document.getElementById(a.targetDiv);this.checkStorageAuthAndExecute(d,function(){A(a);C(c,b,null,!0,a)})},downloadEmbeddedAttachment:function(a,
b){var c=$.Event("onload");c.target=document.getElementById(a.targetDiv);this.checkStorageAuthAndExecute(c,function(){A(a);C(b,b,null,!1,a)})},previewPIMCAttachmentOnline:function(a,b,d,f,e,h){if(b.startsWith("DATA-WORKATTACH-URL"))a=SafeURL_createFromURL(c.u.d.url),a.put("pyActivity","pzFetchURLDetails"),a.put("linkkey",b),c.u.d.asyncRequest("GET",a,{success:function(a){a=a.responseText;a=-1===a.indexOf("://")?"http://"+a:a;c.mobile.sdk.application.openUrl(a).then(function(){console.debug("Successfully opened the url")}).catch(function(){console.error("Unable to open the url")})}},
null,null);else{b=new SafeURL(f+"."+h);b.put("linkInsHandle",e.trim());c.u.d.convertToRunActivityAction(b);b=b.toURL();b=window.location.protocol+"//"+window.location.host+b;var k=new c.ui.busyIndicator("",!0,null);(a=n(a))&&k.setTargetElement(a);k.show();c.mobile.sdk.plugins.documents.preview(b).then(function(){console.debug("Attachment downloaded and previewed with success");k.hide()}).catch(function(){console.error("Downloading and previewing attachment failed");k.hide()})}},previewPIMCAttachmentOffline:function(a,
b,d,f,e,h){b=c.offline.Utils.getOfflineSettingsForCase(b,"pyOfflineAttachmentsEnabled");if("DATA-WORKATTACH-URL"===(d?d.toUpperCase():d)){var k=c.u.d.fieldValuesList.get("CannotOpenUrlOnMobileApp");alert(k)}"false"!==b&&e?pms.plugins.clientstore.getItems([{type:d.toUpperCase(),handle:f}]).then(function(a){return 0<a.length&&a[0].url?a[0].url:pms.plugins.clientstore.getItemUrl("signature",f,{decodeBase64:!0,fileExtension:"jpg"})}).then(function(a){return pms.plugins.documents.preview({id:a})}).catch(function(a){console.error("Cannot preview attachment (type\x3d'"+
d.toUpperCase()+"', handle\x3d'"+f+"'). "+a)}):this.checkStorageAuthAndExecute(a,h)},shareAttachment:function(a,b,d,f,e,h){b=new SafeURL("Work-."+h);b.put("LinkedRefTo",f.trim());c.u.d.convertToRunActivityAction(b);b=b.toURL();f=window.location.protocol+"//"+window.location.host+b;var k=new c.ui.busyIndicator("",!0,null);(a=n(a))&&k.setTargetElement(a);k.show();c.mobile.sdk.plugins.documents.share(f).then(function(){console.debug("File shared with success");k.hide()}).catch(function(a){console.error("Sharing file failed.",
a);k.hide()})}}}})(pega);
pega.ui.roboticAutomationApi = (function() {
  var _public = {};
  var _priv = {};

  /* Logging and debugging */
   _priv.log = function (msg) {
    if (pega.ui.debug) {
      console.log(msg);
    }
  };
  _public.invokeAutomation = function(action, automationMetadata,successCallback,errorCallback, bInvokeUsingConstellationService,responseId) {
    _priv.log("RDA API is invoked with automation metadata: "+JSON.stringify(automationMetadata));
    /* validate api inputs */
    var inputValidationMsg = _priv.validateInput(automationMetadata,bInvokeUsingConstellationService);

    
    if(!inputValidationMsg){
      if(bInvokeUsingConstellationService === true){
      pega.ui.roboticAutomationMessagingUtils.requestAutomationFromServer(action,automationMetadata,responseId);
    }
      else{
      // check runtime availability and subsequently invoke it
      _priv.checkAutomationRuntimeAvailability(automationMetadata,successCallback,errorCallback);
    }
    }  
    else{
      throw new Error(inputValidationMsg);
    }
    
    
  };

  _priv.validateInput = function(automationMetadata,bInvokeUsingConstellationService){

    var inputMissingFields = [];
    var invalidValues = [] ;
    var inputValidationMsg = null;

    if(!automationMetadata.automationName){
      inputMissingFields.push("automationName");
    }

    if(!automationMetadata.automationURL && !bInvokeUsingConstellationService){
      inputMissingFields.push("automationURL");
    }

    if(!automationMetadata.jwtString && !bInvokeUsingConstellationService){
      inputMissingFields.push("jwtString");
    }

    if(inputMissingFields.length > 0){
      inputValidationMsg = "Missing required fields: ["+inputMissingFields+"]";  
    }

    if(automationMetadata.timeout){

      if( isNaN(automationMetadata.timeout) || parseInt(automationMetadata.timeout) < 0){
        invalidValues["timeout"] = automationMetadata.timeout;
      }
    }

    if(Object.keys(invalidValues).length > 0){
      var invalidValuesString ;
      for(key in invalidValues){
        if(invalidValuesString){
          invalidValuesString = invalidValuesString + ","+key+":"+invalidValues[key]
        }else{
          invalidValuesString = key+":"+invalidValues[key]
        }
      }

      if(inputValidationMsg){
        inputValidationMsg = inputValidationMsg+" inavlid values: ["+invalidValuesString+"]";
      }
      else{
        inputValidationMsg = "inavlid values: ["+invalidValuesString+"]";
      }
    }

    return inputValidationMsg;
  };

  _priv.checkAutomationRuntimeAvailability = function(automationMetaData,successCallback,errorCallback) {

    _priv.log("checking RDA runtime availability ...");
    
    $.ajax({
      type: "GET",
      contentType: "application/json",
      url: automationMetaData.automationURL + "/IsAvailable",
      success: function(json) {
        _priv.log("Runtime is available!");
        // invoke RDA automation here.
        _priv.runAutomationInner(automationMetaData,successCallback,errorCallback);
      },
      error: function(response) {
        _priv.log("Runtime is NOT available!");
        response.isRuntimeAvailable = "false";
        errorCallback(response);
      },
      headers: {
        'Authorization': 'Bearer ' + automationMetaData.jwtString
      },
      timeout: 4000
    });
  }; 

  _priv.runAutomationInner = function(automationMetaData,successCallback,errorCallback) {
    _priv.log("Data sent to automation : " + JSON.stringify(automationMetaData.payload));
    
    $.ajax({
      type: "POST",
      contentType: "application/json",
      url: automationMetaData.automationURL + "/execute?activity=" + automationMetaData.automationName,
      dataType: "json",
      /* This data should be generate dynamically based on selected case type */
      data: automationMetaData.payload,
      success: function(response) {
        _priv.log("success: returned from rest service.... : " + JSON.stringify(response.ModifiedFields));
        successCallback(response);
      },
      error: function(response) {
        _priv.log("failed: returned from rest service.... : " + JSON.stringify(response));
        response.isRuntimeAvailable = "true";
        errorCallback(response);
      },
      headers: {
        'Authorization': 'Bearer ' + automationMetaData.jwtString
      },
      timeout: automationMetaData.timeout
    });
  };

  _public["testObject"] = _priv;
  return _public;

})();
//static-content-hash-trigger-NON
/*IE11 does not implement startsWith  . So overriding startsWith method */
if (!String.prototype.startsWith) {
    String.prototype.startsWith = function(searchString, position) {
        position = position || 0;
        return this.indexOf(searchString, position) === position;
    };
}
pega.ui.roboticAutomation = (function() {
  
    var _public = {}
    var _priv = {}
    var automationMetaData;
    var callbackMethodName;
    var callbackParamsValue;
    var actionType;
    var containerElemName;
    var bInvokeUsingConstellationService  ;
    
    _priv.getRunMode = function(){ //method to identify the mode of execution. Can be : constellation or legacy
        console.log("fetching runtime availability");
        var postData = new SafeURL();
        var strUrlSF = SafeURL_createFromURL(pega.d.RDARuntimeSubscriptionStatusActivityEncrypted);
        var returnValue = "legacy";
        var callback = {
            success: function(response) {
              
              var responseData = JSON.parse(response.responseText);
              console.log("fetched runtime subscription successfully");
              if(responseData.pyStatusValue === "true"){
                returnValue = "constellation";
                console.log("runtime subscription for current user exists. Runmode : constellation");
              }
              else {
                 returnValue = "legacy";
                console.log("runtime subscription for curent user does not exist. Runmode : legacy");
              }
              },
            failure: function(o) {
               console.log("failed to fetch runtime subscription status. check pega logs for details. Attempting to run in legacy mode");
              returnValue = "legacy";
            }
     };
    const syncMode = {bAsync:false};
	  pega.u.d.asyncRequest('POST', strUrlSF, callback, postData,syncMode);
      return returnValue;

    }

    _public.runAutomation = function(action, containerElem, callbackMethod, callbackParams) {
        var relativeElem;
        if (action === "preLoad") {
            relativeElem = $(containerElem).closest('.pz-po-c')[0] || pega.u.d.findParent(containerElem, "modalWrapper") || pega.u.d.findParent(containerElem, "PEGA_HARNESS");
        } else if (action === "submitAssignment") {
            relativeElem = $("#PEGA_HARNESS");
        } else if (action === "submit") {
            relativeElem = containerElem;
        }
        if (relativeElem) {
            _public.showHideBusyIndicator(relativeElem);
        }
      var runMode = _priv.getRunMode();
      bInvokeUsingConstellationService  = false;
      var responseId = "";
      if(runMode === "constellation"){
        bInvokeUsingConstellationService = true;
        callbackMethodName = callbackMethod;
        callbackParamsValue = callbackParams;
        actionType = action;
        containerElemName = containerElem;
        const response ='';
        automationMetaData = _priv.returnAutomationMedataData(response, containerElem);
        responseId = pega.ui.roboticAutomationMessagingUtils.InvokeSubscribeToMsgService();        
        
      }else{     
        //firing ajax call to get the URL along with JWT token
        var postData = new SafeURL();
        //var strUrlSF = SafeURL_createFromURL(pega.u.d.url);
        //strUrlSF.put("pyActivity", "pzGetRDAURLWithToken");
        var strUrlSF = SafeURL_createFromURL(pega.d.RDAURLWithTokenActivityEncrypted);
        console.log("Calling the encrypted url for RDA token");
        var callback = {
            success: function(response) {
                if (response.responseText) {
                    automationMetaData = _priv.returnAutomationMedataData(response, containerElem);
                    _priv.processRunAutomation(action, containerElem, callbackMethod, callbackParams, automationMetaData,bInvokeUsingConstellationService,responseId);
                } else
                    console.log("Error in retrieving RDA URL with JWT token");
            },
            failure: function(o) {
                console.log("pzGetRDAURLWithToken activity failed");
            }
        };
        pega.u.d.asyncRequest('POST', strUrlSF, callback, postData);
       }
    }
    

    _priv.returnAutomationMedataData = function(response, containerElem) {
        var preAutomationDiv = $(containerElem).find("#preAutomationMeta")[0];
        var postAutomationDiv = $(containerElem).find("#postAutomationMeta")[0];

        var autoMeta,
            autoData,
            autoPrimaryPage,
            autoDataString,
            automationName,
            automationDiv,
            automationURL,
            automationBaseURL,
            urlWithJWT,
            timeoutVal;

        if (preAutomationDiv) {
            /* Fetch host details for preparing base URL and checking runtime - START*/
            var sectionMethodname = preAutomationDiv.getAttribute("data-section-methodname");
            autoMeta = JSON.parse(preAutomationDiv.getAttribute("data-automation-meta"));
            if (!sectionMethodname || !autoMeta) {
                return;
            }
            automationDiv = preAutomationDiv;
        } else if (postAutomationDiv) {
            automationDiv = postAutomationDiv;
            autoMeta = JSON.parse(postAutomationDiv.getAttribute("data-automation-meta"));
        }
        var jwtString;
        if(response){
            urlWithJWT = JSON.parse(response.responseText);
            //capturing the URL in automationBaseURL
            automationBaseURL = urlWithJWT.pyRDAUrl;
            if (automationBaseURL.startsWith("http://") || automationBaseURL.startsWith("https://")) {
            automationURL = automationBaseURL + "/api/v1/runtime";
        } else {
            automationURL = "https://" + automationBaseURL + "/api/v1/runtime";
        }
        console.log("URL provided is:" + automationURL);
        //capturing the JWT string in jwtString
        jwtString = urlWithJWT.pyJWTString;
        //getting timeout value
        timeoutVal =   urlWithJWT.pyTimeoutInMilliSeconds;
        //getting the localized text for ignore and continue 
        pega.ui.roboticAutomation.ignoreAndContinuteText = urlWithJWT.pyTempText;
        }
        /* END */      
        autoData = JSON.parse(_priv.jsonEscape(automationDiv.getAttribute("data-automation-propData")));
        autoPrimaryPage = automationDiv.getAttribute("data-automation-primaryPage");
        if (autoMeta.PRE) {
            automationName = autoMeta.PRE[0];
        } else if (autoMeta.POST) {
            automationName = autoMeta.POST[0];
        }
        return {
            autoData: autoData,
            automationName: automationName,
            automationURL: automationURL,
            sectionMethodname: sectionMethodname,
            automationDiv: automationDiv,
            autoPrimaryPage: autoPrimaryPage,
            jwtString: jwtString,
            timeout:timeoutVal
        };
    }

    _priv.processRunAutomation = function(action, containerElem, callbackMethod, callbackParams, automationMetaData,bInvokeUsingConstellationService,responseId) {
        if (action === "submit" || action === "submitAssignment") {
            if (!automationMetaData.jwtString && !bInvokeUsingConstellationService) {
                //refreshing the section to show errors in case jwt string is blank
                console.log("Blank JWT string.");
                _priv.processAutomationError(action, containerElem, callbackMethod, callbackParams, automationMetaData, "false");
                return;
            }
            _priv.invokeServerSideValidation(action, containerElem, callbackMethod, callbackParams, automationMetaData,bInvokeUsingConstellationService,responseId);
        } else if (action === "preLoad") {
            var sectionMethodname = automationMetaData.sectionMethodname;
            var preAutomationDiv = automationMetaData.automationDiv;
            if (!callbackParams) {
                callbackParams = new Array();
            }
            callbackParams = [sectionMethodname, preAutomationDiv];
            var hasMessages = containerElem ? $(containerElem).find('#preAutomationMeta')[0].getAttribute('data-automation-hasMessages') : false;
            if ("true" == hasMessages) {
                console.log("Primary page has errors. Automation is not invoked");
                callbackMethod.apply(this, callbackParams);
            } else {
                if (!automationMetaData.jwtString && !bInvokeUsingConstellationService) {
                    //refreshing the section to show errors in case jwt string is blank
                    console.log("Blank JWT string.");
                    _priv.processAutomationError(action, containerElem, callbackMethod, callbackParams, automationMetaData, "false");
                    return;
                }
                console.log("No errors. Proceeding to invoke Automation");
                callbackParamsValue = callbackParams;
                _priv.invokeRdaAutomation(action, containerElem, callbackMethod, callbackParams, automationMetaData, bInvokeUsingConstellationService,responseId);
            }
        }
    }
_public.processRunAutomation=function(responseId){
    _priv.processRunAutomation(actionType, containerElemName, callbackMethodName, callbackParamsValue, automationMetaData,bInvokeUsingConstellationService,responseId);
}
    _priv.processAutomationError = function(action, containerElem, callbackMethod, callbackParams, automationMetaData, executeAutomation, response) {
        var strUrl = new SafeURL();
        var sectionName;
        strUrl.put("ExecuteAutomation", executeAutomation);
        //handling scenarios to show the error on the page in case automation invocation failed
        if (action == "submit" || action == "submitAssignment") {
            strUrl.put("pzPrimaryPageName", $(containerElem).find('#postAutomationMeta')[0].getAttribute('data-automation-primarypage'));
            strUrl.put("Action", "submit");
            sectionName = $(containerElem).find('#postAutomationMeta')[0].getAttribute('data-section-name');
        } else if (action == "preLoad") {
            strUrl.put("pzPrimaryPageName", $(containerElem).find('#preAutomationMeta')[0].getAttribute('data-automation-primarypage'));
            strUrl.put("Action", "preLoad");
            sectionName = $(containerElem).find('#preAutomationMeta')[0].getAttribute('data-section-name');
        }
        if (automationMetaData.jwtString || bInvokeUsingConstellationService) {
            if (response) {
                if (response.statusText)
                    strUrl.put("StatusText", response.statusText);
                if (response.responseText)
                    strUrl.put("ResponseText", response.responseText);
                if (response.status)
                    strUrl.put("Status", response.status);
            }
        } else {
            strUrl.put("ResponseText", "Blank JWT");
        }
        var sectionNode = pega.u.d.getSectionByName(sectionName);
        var callback = {
            success: function(response) {
                callbackMethod.apply(this, callbackParams);
            }
        };
        //proceeding with case execution in pre automation via success callback
        if (action == "preLoad") {
            pega.u.d.reloadSection(sectionNode, "pxProcessAutomationFailure", strUrl.toQueryString(), false, true, '', true, null, null, '', callback.success);
        } else {
            //reloading the section to show errors
            pega.u.d.reloadSection(sectionNode, "pxProcessAutomationFailure", strUrl.toQueryString(), false, true, '', true, null, null, '', null);
            _public.showHideBusyIndicator(null, "hide");
            _priv.changeSubmitText(action, containerElem, callbackParams);

        }

    }

    _priv.invokeServerSideValidation = function(action, containerElem, callbackMethod, callbackParams, automationMetaData,bInvokeUsingConstellationService,responseId) {
        //Validate and proceed with rest of the flow upon successful validation. 
        var callback = {
            success: function(response) {
                _priv.fetchUpdatedRRValues(action, containerElem, callbackMethod, callbackParams, automationMetaData,bInvokeUsingConstellationService,responseId);
            }
        };
        var strUrl = new SafeURL();
        strUrl.put("pzPrimaryPageName", $(containerElem).find('#postAutomationMeta')[0].getAttribute('data-automation-primarypage'));
        strUrl.put("TaskStatus", $(containerElem).find('#postAutomationMeta')[0].getAttribute('data-flowaction-name'));
        if (action === "submitAssignment") {
            strUrl.put("isAssignment", true);
        }
        var sectionName = $(containerElem).find('#postAutomationMeta')[0].getAttribute('data-section-name');
        var sectionNode = pega.u.d.getSectionByName(sectionName);
        //Use reload section by passing the validate API to load the section upon any errors.
        pega.u.d.reloadSection(sectionNode, "pxPerformAutomationValidation", strUrl.toQueryString(), false, true, '', true, null, null, '', callback.success);
    };

  	//Added for SE-35311 by rathu
 	  _priv.jsonEscape =  function (str)  {
      	if(str)
        		return str.replace(/\n/g, "\\\\n").replace(/\r/g, "\\\\r").replace(/\t/g, "\\\\t");
        else
          return str;
	  };

    _priv.fetchUpdatedRRValues = function(action, containerElem, callbackMethod, callbackParams, automationMetaData,bInvokeUsingConstellationService,responseId) {
        var postData = new SafeURL();
        //var strUrlSF = SafeURL_createFromURL(pega.u.d.url);
        //strUrlSF.put("pyActivity", "pxFetchUpdatedRRFromClipboard");
        var strUrlSF = SafeURL_createFromURL(pega.d.FetchUpdatedRRFromClipboardActivityEncrypted);
        strUrlSF.put("pzPrimaryPageName", automationMetaData.autoPrimaryPage);
        strUrlSF.put("pzKeepPageMessages", "true");
        var callback = {
            success: function(response) {
                if (response.responseText == "hasMessages") { // in case of any property/page-set-messages
                    _public.showHideBusyIndicator(null, "hide");
                    _priv.enableButtons(action, containerElem);
                    console.log("Primary page has messages");
                } else {
                    var postAutomationDiv = $(containerElem).find('#postAutomationMeta')[0];
                    //getting the json string object  
                    var jsonStr = response.responseText;
                    postAutomationDiv.setAttribute("data-automation-propData", jsonStr);
                    automationMetaData.autoData = JSON.parse(_priv.jsonEscape(jsonStr)); //Modified by rathu for SE-35311
                    _priv.invokeRdaAutomation(action, containerElem, callbackMethod, callbackParams, automationMetaData,bInvokeUsingConstellationService,responseId);
                }
            },
            failure: function(o) {
                console.log("pxFetchUpdatedRRFromClipboard activity failed");
            }
        };
        pega.u.d.asyncRequest('POST', strUrlSF, callback, postData);
    };

  _priv.successCallbackInner = function(action, containerElem, callbackMethod, callbackParams, automationMetaData,response){
    _public.showHideBusyIndicator(null, "hide");
    _priv.updateClipboardWithAutomationValues(callbackMethod, callbackParams, automationMetaData, response);
  }
  
    _priv.invokeRdaAutomation = function(action, containerElem, callbackMethod, callbackParams, automationMetaData,bInvokeUsingConstellationService,responseId) {
      
      var autoData = pega.u.d.getPropValuesFromDOM(automationMetaData.autoData, automationMetaData.autoPrimaryPage);
      var autoDataString = JSON.stringify(autoData);
      automationMetaData.payload = autoDataString;
      //automationMetaData.timeout="60000";
      console.log("timeout value : "+automationMetaData.timeout);
      
      var successCallback = function(response) {
        _priv.successCallbackInner(action, containerElem, callbackMethod, callbackParams,automationMetaData,response);
      }
      
      var errorCallback = function(response) {
        _priv.processAutomationError(action, containerElem, callbackMethod, callbackParams,automationMetaData,response.isRuntimeAvailable, response);
      }
      pega.ui.roboticAutomationApi.invokeAutomation(action,automationMetaData, successCallback, errorCallback,bInvokeUsingConstellationService,responseId);
      
    };
  
   //Callback function once runtime publishes automation message
    _public.processExecutionCallBack = function(response){
        var automationStatus = response.Status
        if(automationStatus === "Completed"){
            _public.showHideBusyIndicator(null, "hide");
            _priv.updateClipboardWithAutomationValues(callbackMethodName, callbackParamsValue, automationMetaData, response);
        }else{
            _priv.processAutomationError(actionType, containerElemName, callbackMethodName, callbackParamsValue, automationMetaData,'true', response);
        }
      var postData = new SafeURL();
      var strUrlSF = SafeURL_createFromURL(pega.d.C11NPostExecutionCallBackActivityEncrypted);
      strUrlSF.put("action", actionType);
      strUrlSF.put("response", JSON.stringify(response));
      var callback = {
          success: function() {
              console.log("pyC11NPostExecutionCallBack activity executed.");
          },
          failure: function(o) {
              console.log("failed to execute pyC11NPostExecutionCallBack activity");
          }
      };
      pega.u.d.asyncRequest('POST', strUrlSF, callback, postData);
	  };

    //post the modified values into the clipboard by calling pzUpdateClipboardWithAutomationValues activity.
    _priv.updateClipboardWithAutomationValues = function(callbackMethod, callbackParams, automationMetaData, response) {
        var responseJson = JSON.stringify(response.ModifiedFields);
        var postData = new SafeURL();
        //var strUrlSF = SafeURL_createFromURL(pega.u.d.url);
        //strUrlSF.put("pyActivity", "pzUpdateClipboardWithAutomationValues");
        var strUrlSF = SafeURL_createFromURL(pega.d.UpdateClipboardWithAutomationValuesActivityEncrypted);
        strUrlSF.put("pzPrimaryPageName", automationMetaData.autoPrimaryPage);
        strUrlSF.put("clipboardPageName", automationMetaData.autoPrimaryPage);
        strUrlSF.put("jsonString", responseJson);
        var callback = {
            success: function(o) {
                callbackParams.push(response.ModifiedFields);
                callbackMethod.apply(this, callbackParams);
            },
            failure: function(o) {
                console.log("updateClipboardWithAutomationValues failed");
            }
        };
        pega.u.d.asyncRequest('POST', strUrlSF, callback, postData);


    }
    _priv.changeSubmitText = function(action, containerElem, callBackParameters) {
        var eventObj, sourceButton;
        if (action == 'submitAssignment')
            eventObj = callBackParameters[3];
        else if (action == 'submit')
            eventObj = callBackParameters[1];
        if (eventObj)
            sourceButton = eventObj.target || eventObj.srcElement;
        sourceButton.text = pega.ui.roboticAutomation.ignoreAndContinuteText;
        $(containerElem).find('#postAutomationMeta')[0].setAttribute("skipAutomation", "true");
        _priv.enableButtons(action, containerElem);
    }

    _public.skipAutomation = function(containerElem) {
        var postAutomationDiv = $(containerElem).find("#postAutomationMeta")[0];
        return postAutomationDiv.getAttribute("skipAutomation");
    }

    _priv.enableButtons = function(action, containerElem) {
        //This allows the workobject to be submitted again in case of failures.
        if (action === 'submitAssignment') { //for assignments
            pega.ctx.SubmitInProgress = false;
        } else { //for modal/overlays
            pega.u.d.enableAllButtons(containerElem);
        }
    }

    _public.isAutomationConfigured = function(action, containerElem) {
        if (action === "submit") {
            var postAutomationDiv;
            //code to diffrentiate b/n assignment's postAutomationMetaDiv with overlay's postAutomationMetaDiv
            //containerElem would be 'document' in case of submit on an Assignmemnt.
            if (containerElem == document) { // in case of submit on an Assignment 
                //code to see if an overlay had been launched. Yes, it's postAutomationMeta div could conflict with Assignment's postAutomationMeta div.              
                var overLaycontainer = document.getElementById('_popOversContainer');
                $(containerElem).find("#postAutomationMeta").each(function(i, elem) {
                    //If the found postAutomationMeta is not a child of overLayContainer,select it.
                    if (!pega.util.Dom.isAncestor(overLaycontainer, elem)) {
                        postAutomationDiv = elem;
                    }
                });
            } else { // in case of submit on a modal/overlay
                postAutomationDiv = $(containerElem).find("#postAutomationMeta")[0];
            }
            return postAutomationDiv;
        } else if (action === "preLoad") {
            var preAutomationDiv = $(containerElem).find("#preAutomationMeta")[0];
            return preAutomationDiv;
        }
    };
    _public.showHideBusyIndicator = function(relativeElem, action) {
        var mask = $('.overlay-mask');

        // Create the required mask

        if (mask && mask.length == 0) {
            var docBodyScrollTop = document.body.scrollTop;
            var docBodyScrollLeft = document.body.scrollLeft;
            if ((pega.env.ua.gecko || pega.util.Event.isIE) && document.documentElement) {
                docBodyScrollTop = document.documentElement.scrollTop;
                docBodyScrollLeft = document.documentElement.scrollLeft;
            }
            var docBodyClientHeight = document.body.clientHeight;
            var docBodyClientWidth = document.body.clientWidth;
            if (!$(relativeElem).hasClass("pz-po-c")) {
                $(relativeElem).css({
                    position: 'relative'
                });
            }
            mask = $('<div class="overlay-mask"></div>');
            mask.css({
                position: 'absolute',
                width: '100%',
                height: '100%',
                top: 0,
                left: 0,
                zIndex: 100
            }).appendTo($(relativeElem));

            var img = $("<ul class='throbber' role='progressbar' aria-valuetext='Loading content'  tabindex='0'>" +
                "<li></li>" +
                "<li></li>" +
                "<li></li>" +
                "<li></li>" +
                "<li></li>" +
                "<li></li>" +
                "<li></li>" +
                "<li></li>" +
                "<li></li>" +
                "</ul>");
            if (relativeElem && (relativeElem.id == "modalWrapper" || $(relativeElem).hasClass("pz-po-c"))) {
                img.css({
                    position: 'absolute',
                    top: '50%',
                    left: '50%',
                    transform: 'translate(-50%, -50%)'
                });
            } else {
                img.css({
                    position: 'absolute',
                    top: (docBodyScrollTop + docBodyClientHeight / 2) + "px",
                    left: (docBodyScrollLeft + docBodyClientWidth / 2) + "px"
                });
            }
            img.appendTo(mask);

        }

        // Act based on params

        if (!action || action === 'show') {
            mask.show();
        } else if (action === 'hide') {
            mask.remove();
        }

    };
  
    _public["testObject"] = _priv;
    return _public;
})();
//static-content-hash-trigger-GCC
//static-content-hash-trigger-NON
pega.ui.roboticAutomationMessagingUtils = (function() {
    var _public = {};
    var _priv = {};
    var timeout;
    var timeoutInterval;
    var userId;
  
    _priv.log = function(msg) {
      //if (pega.ui.debug) {
        console.log(msg);
      //}
    };

    _priv.pegaLog = function(msg, logLevel, generateStackTrace, sentToTracer) {
        var postData = new SafeURL();
        var strUrlSF = SafeURL_createFromURL(pega.d.AddLogMessagesAndAlertsActivityEncrypted);
        strUrlSF.put("message", msg);
        strUrlSF.put("loggingLevel", logLevel);
        strUrlSF.put("generateStackTrace", generateStackTrace);
        strUrlSF.put("sendToTracer", sentToTracer);
      
        var callback = {
            success: function() {
                _priv.log("pzAddLogMessagesAndAlerts activity executed.");
            },
            failure: function(o) {
                _priv.log("failed to execute pzAddLogMessagesAndAlerts activity");
            }
        };
        pega.u.d.asyncRequest('POST', strUrlSF, callback, postData);
    }

    _public.requestAutomationFromServer = function(action, automationMetadata, responseId) {
        const responseFields = {
            action: action,
            responseId: responseId
        };
        var requiredResponseFields = JSON.stringify(responseFields);
        console.log(requiredResponseFields);
        _priv.sendAutomationRequest(automationMetadata, responseFields);

    };

    _public.InvokeSubscribeToMsgService = function() {
        var postData = new SafeURL();
        var strUrlSF = SafeURL_createFromURL(pega.d.C11NRDAMsgSvcSubscriptionInfoActivityEncrypted);
        console.log("running messaging activity");
        var responseId;
        var callback = {
            success: function(response) {
                _priv.log("pzGetC11NRDAMsgSvcSubscriptionInfo executed successfully");
                _priv.pegaLog("pzGetC11NRDAMsgSvcSubscriptionInfo executed successfully", "Info", false, false);
                _priv.log("response from pzGetC11NRDAMsgSvcSubscriptionInfo"+JSON.stringify(response));
                if (response.responseText) {
                    var urlWithJWT = JSON.parse(response.responseText);
                    var token = urlWithJWT.pyJWTString;
                    userId = urlWithJWT.pyUserIdentifier;
                    var sessionId = urlWithJWT.pxSessionID;
                    var filterMatcher = "AttendedRPA";
                    var url = urlWithJWT.pzMessagingServiceURL;
                    timeoutInterval = urlWithJWT.timeout;
                    pega.ui.roboticAutomation.ignoreAndContinuteText = urlWithJWT.pyTempText;
                    responseId = _public.subscribeToMessagingService(url, token, filterMatcher, userId, sessionId);
                } else {
                    _priv.log("Error in retrieving Msg Svc URL with JWT token");
                    _priv.pegaLog("Error in retrieving Msg Svc URL with JWT token", "Error", false, false);
                }
            },
            failure: function(o) {
                _priv.log("pzGetC11NRDAMsgSvcSubscriptionInfo activity failed");
                _priv.pegaLog("pzGetC11NRDAMsgSvcSubscriptionInfo activity failed", "Error", false, false);
            }
        };
        //pega.u.d.asyncRequest('POST', strUrlSF, callback, postData);
        const syncMode = {bAsync:false};
	      pega.u.d.asyncRequest('POST', strUrlSF, callback, postData,syncMode);
        return responseId;
    }

    _public.subscribeToMessagingService = function(serviceURL, token, filterMatcher, userId, sessionId) {    
        var connURL = "wss://" + serviceURL;
        const conn = {
            messagingService: connURL
        };
        _public.reloadConstellationControlSection();
        const currentDate = new Date();
        const timestamp = currentDate.getTime();
        var responseId = userId + "_" + sessionId + "_" + timestamp;
        const filter = {
            matcher: filterMatcher,
            criteria: {
                responseId: responseId
            }
        };
        var subscriptionID = "";
        console.log("before "+new Date().getTime());
        (async () => {
            console.log("waiting for PCore in window");
            var waitCount = 0;
            while (!window.hasOwnProperty("PCore")){ // define the condition as you like
                await new Promise(resolve => setTimeout(resolve, 1000));
                waitCount++;
                if(waitCount === 5)
                    break;
            }
            if(waitCount === 5){
                  const response = {
                        responseText : "Failed to load PCore"
                   };
                   _priv.log("Failed to load PCore");
                   pega.ui.roboticAutomation.processExecutionCallBack(response);
            }else{
               console.log("after "+new Date().getTime()); 
               console.log("PCore is defined");          
               PCore.getMessagingServiceManager().initConnection(conn);
               subscriptionID = PCore.getMessagingServiceManager().subscribe(filter, callbackforSubscribe, responseId);
               _priv.log("filter : " + JSON.stringify(filter));
               _priv.pegaLog("filter : " + JSON.stringify(filter), "Info", false, false);
               _priv.log("subscription ID " + subscriptionID);
               _priv.pegaLog("subscription ID " + subscriptionID, "Info", false, false);
               pega.ui.roboticAutomation.processRunAutomation(responseId); 
           }
        })();  
      return responseId;
    }
/*const syncWait = ms => {
    const end = Date.now() + ms
    while (Date.now() < end) continue
}*/
    const callbackforSubscribe = data => {
        _priv.log("callbackforSubscribe invoked " + JSON.stringify(data));
        clearTimeout(timeout);
        var response = data.message;
        var subscriptionID = data.message.RequiredResponseFields.responseId;
        pega.ui.roboticAutomation.processExecutionCallBack(response);
        _public.unsubscribeToMessaginSvc(subscriptionID);
    };

    _public.reloadConstellationControlSection = function() {
        $(document.body).find("#HARNESS_CONTENT").append('<div data-template="" node_name="pzConstellationControlLoad" node_type="MAIN_RULE" name="BASE_REF" id="RULE_KEY" class="sectionDivStyle  " style="visibility: hidden" base_ref="" data-node-id="pzConstellationControlLoad" version="1" objclass="Rule-HTML-Section" pyclassname="@baseclass" readonly="false" expandrl="" index="" uniqueid="SID1626676435037"></div>')
        pega.u.d.refreshSection("pzConstellationControlLoad");
    };

    //calling the publish activity
    _priv.sendAutomationRequest = function(automationMetaData, requiredResponseFields) {
        _priv.log("Data sent to automation : " + JSON.stringify(automationMetaData.payload));
        _priv.log("Required response fields sent in message : " + JSON.stringify(requiredResponseFields));
        var postData = new SafeURL();
        var strUrlSF = SafeURL_createFromURL(pega.d.C11NPublishRDAMessageActivityEncrypted);
        strUrlSF.put("runtimeOpID", userId);
        strUrlSF.put("automationName", automationMetaData.automationName);
        strUrlSF.put("automationData", automationMetaData.payload);
        strUrlSF.put("requiredResponseFields", JSON.stringify(requiredResponseFields));
        strUrlSF.put("isConstellationApp", "true");
      var responseIdForUnsubscribe = requiredResponseFields.responseId;
   
        var callback = {
            success: function() {
                _priv.log("pzC11NPublishRDAMessage activity executed.");
                timeout = setTimeout(function() {
                  
                 console.log("responseID for unsubscribe "+responseIdForUnsubscribe);
                    _public.unsubscribeToMessaginSvc(responseIdForUnsubscribe);
                    const response = {
                        statusText : "timeout"
                     };
                    pega.ui.roboticAutomation.processExecutionCallBack(response);
                }, timeoutInterval);
            },
            failure: function(o) {
                _priv.log("failed to execute pzC11NPublishRDAMessage activity");
                _public.unsubscribeToMessaginSvc(responseIdForUnsubscribe);
                    const response = {
                        statusText : "automationRequestFailed"
                     };
                    pega.ui.roboticAutomation.processExecutionCallBack(response);
            }
        };
        pega.u.d.asyncRequest('POST', strUrlSF, callback, postData);
    };

    _public.unsubscribeToMessaginSvc = function(subscriptionId) {
        PCore.getMessagingServiceManager().unsubscribe(subscriptionId);
        console.log("unsubscribed to msg svc for responseID : "+subscriptionId);
    };

    _public["testObject"] = _priv;
    return _public;
})();
//static-content-hash-trigger-GCC
/*
 MIT
*/
(function(q){"function"===typeof define&&define.amd?define("sortableModule",q):"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=q():"undefined"!==typeof Package?Sortable=q():window.Sortable=q()})(function(){function q(a,b){if(!a||!a.nodeType||1!==a.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(a);this.el=a;this.options=b=X({},b);a[E]=this;var c={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,
scrollSpeed:10,draggable:/[uo]l/i.test(a.nodeName)?"li":"\x3e*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,animation:0,setData:function(a,b){N("html").hasClass("ff")?a.setData("text/html",b.innerHTML):a.setData("Text",b.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0}},e;for(e in c)e in b||(b[e]=
c[e]);Y(b);for(var g in this)"_"===g.charAt(0)&&"function"===typeof this[g]&&(this[g]=this[g].bind(this));this.nativeDraggable=b.forceFallback?!1:ia;m(a,"mousedown",this._onTapStart);m(a,"touchstart",this._onTapStart);this.nativeDraggable&&(m(a,"dragover",this),m(a,"dragenter",this));I.push(this._onDragOver);b.store&&this.sort(b.store.get(this))}function O(a){u&&u.state!==a&&(k(u,"display",a?"none":""),!a&&u.state&&f.insertBefore(u,d),u.state=a)}function A(a,b,c){if(a){c=c||n;do if("\x3e*"===b&&a.parentNode===
c||Z(a,b))return a;while(a!==c&&(a=a.parentNode))}return null}function m(a,b,c){a.addEventListener(b,c,P)}function p(a,b,c){a.removeEventListener(b,c,P)}function v(a,b,c){if(a)if(a.classList)a.classList[c?"add":"remove"](b);else{var e=(" "+a.className+" ").replace(aa," ").replace(" "+b+" "," ");a.className=(e+(c?" "+b:"")).replace(aa," ")}}function k(a,b,c){var e=a&&a.style;if(e){if(void 0===c)return n.defaultView&&n.defaultView.getComputedStyle?c=n.defaultView.getComputedStyle(a,""):a.currentStyle&&
(c=a.currentStyle),void 0===b?c:c[b];b in e||(b="-webkit-"+b);e[b]=c+("string"===typeof c?"":"px")}}function ba(a,b,c){if(a){a=a.getElementsByTagName(b);b=0;var e=a.length;if(c)for(;b<e;b++)c(a[b],b);return a}return[]}function w(a,b,c,e,g,d,f){a=a||b[E];var h=n.createEvent("Event"),H=a.options,l="on"+c.charAt(0).toUpperCase()+c.substr(1);h.initEvent(c,!0,!0);h.to=b;h.from=g||b;h.item=e||b;h.clone=u;h.oldIndex=d;h.newIndex=f;b.dispatchEvent(h);H[l]&&H[l].call(a,h)}function ca(a,b,c,e,g,d,f){var h,
H=a[E],l=H.options.onMove,k;h=n.createEvent("Event");h.initEvent("move",!0,!0);h.to=b;h.from=a;h.dragged=c;h.draggedRect=e;h.related=g||b;h.relatedRect=d||b.getBoundingClientRect();a.dispatchEvent(h);l&&(k=l.call(H,h,f));return k}function da(a){a.draggable=!1}function ja(){Q=!1}function ka(a){a=a.tagName+a.className+a.src+a.href+a.textContent;for(var b=a.length,c=0;b--;)c+=a.charCodeAt(b);return c.toString(36)}function K(a,b){var c=0;if(!a||!a.parentNode)return-1;for(;a&&(a=a.previousElementSibling);)"TEMPLATE"===
a.nodeName.toUpperCase()||"\x3e*"!==b&&!Z(a,b)||c++;return c}function Z(a,b){if(a){b=b.split(".");var c=b.shift().toUpperCase(),e=new RegExp("\\s("+b.join("|")+")(?\x3d\\s)","g");return(""===c||a.nodeName.toUpperCase()==c)&&(!b.length||((" "+a.className+" ").match(e)||[]).length==b.length)}return!1}function ea(a,b){var c,e;return function(){void 0===c&&(c=arguments,e=this,setTimeout(function(){1===c.length?a.call(e,c[0]):a.apply(e,c);c=void 0},b))}}function X(a,b){if(a&&b)for(var c in b)b.hasOwnProperty(c)&&
(a[c]=b[c]);return a}function fa(a){return N?N(a).clone(!0)[0]:R&&R.dom?R.dom(a).cloneNode(!0):a.cloneNode(!0)}if("undefined"==typeof window||!window.document)return function(){throw Error("Sortable.js requires a window with a document");};var d,C,l,u,f,J,t,S,T,U,L,V,x,r,F,W,B={},D,y,M,aa=/\s+/g,E="Sortable"+(new Date).getTime(),z=window,n=z.document,ga=z.parseInt,N=z.jQuery||z.Zepto,R=z.Polymer,P=!1,ia=!!("draggable"in n.createElement("div")),ha=function(a){if(navigator.userAgent.match(/Trident.*rv[ :]?11\./))return!1;
a=n.createElement("x");a.style.cssText="pointer-events:auto";return"auto"===a.style.pointerEvents}(),Q=!1,G=Math.abs,la=Math.min,I=[],ma=ea(function(a,b,c){if(c&&b.scroll){var e,g=b.scrollSensitivity,d=b.scrollSpeed,f=a.clientX,h=a.clientY,l=window.innerWidth,k=window.innerHeight,m,n,q,p;if(S!==c&&(t=b.scroll,S=c,T=b.scrollFn,!0===t)){t=c;do if(t.offsetWidth<t.scrollWidth||t.offsetHeight<t.scrollHeight)break;while(t=t.parentNode)}t&&(e=t,b=t.getBoundingClientRect(),m=(G(b.right-f)<=g)-(G(b.left-f)<=
g),n=(G(b.bottom-h)<=g)-(G(b.top-h)<=g));m||n||(m=(l-f<=g)-(f<=g),n=(k-h<=g)-(h<=g),(m||n)&&(e=z));if(B.vx!==m||B.vy!==n||B.el!==e)B.el=e,B.vx=m,B.vy=n,clearInterval(B.pid),e&&(B.pid=setInterval(function(){p=n?n*d:0;q=m?m*d:0;if("function"===typeof T)return T.call(_this,q,p,a);e===z?z.scrollTo(z.pageXOffset+q,z.pageYOffset+p):(e.scrollTop+=p,e.scrollLeft+=q)},24))}},30),Y=function(a){function b(a,b){if(void 0===a||!0===a)a=c.name;return"function"===typeof a?a:function(c,e){c=e.options.group.name;
return b?a:a&&(a.join?-1<a.indexOf(c):c==a)}}var c={},e=a.group;e&&"object"==typeof e||(e={name:e});c.name=e.name;c.checkPull=b(e.pull,!0);c.checkPut=b(e.put);a.group=c};q.prototype={constructor:q,_onTapStart:function(a){var b=this,c=this.el,e=this.options,g=a.touches&&a.touches[0],f=(g||a).target,l=f,h=e.filter,k;if(!(d||"mousedown"===a.type&&0!==a.button||e.disabled||!(f=A(f,e.draggable,c))||e.handle&&!A(l,e.handle,c))){k=K(f,e.draggable);if("function"===typeof h){if(h.call(this,a,f,this)){w(b,
l,"filter",f,c,k);a.preventDefault();return}}else if(h&&(h=h.split(",").some(function(a){if(a=A(l,a.trim(),c))return w(b,a,"filter",f,c,k),!0}))){a.preventDefault();return}this._prepareDragStart(a,g,f,k)}},_prepareDragStart:function(a,b,c,e){var g=this,l=g.el,k=g.options,h=l.ownerDocument;c&&!d&&c.parentNode===l&&(D=a,f=l,d=c,C=d.parentNode,J=d.nextSibling,F=k.group,x=e,this._lastX=(b||a).clientX,this._lastY=(b||a).clientY,d.style["will-change"]="transform",a=function(){g._disableDelayedDrag();d.draggable=
g.nativeDraggable;v(d,k.chosenClass,!0);v(d,k.ghostClass,!1);g._triggerDragStart(b);w(g,f,"choose",d,f,x)},k.ignore.split(",").forEach(function(a){ba(d,a.trim(),da)}),m(h,"mouseup",g._onDrop),m(h,"touchend",g._onDrop),m(h,"touchcancel",g._onDrop),k.delay?(m(h,"mouseup",g._disableDelayedDrag),m(h,"touchend",g._disableDelayedDrag),m(h,"touchcancel",g._disableDelayedDrag),m(h,"mousemove",g._disableDelayedDrag),m(h,"touchmove",g._disableDelayedDrag),g._dragStartTimer=setTimeout(a,k.delay)):a())},_disableDelayedDrag:function(){var a=
this.el.ownerDocument;clearTimeout(this._dragStartTimer);p(a,"mouseup",this._disableDelayedDrag);p(a,"touchend",this._disableDelayedDrag);p(a,"touchcancel",this._disableDelayedDrag);p(a,"mousemove",this._disableDelayedDrag);p(a,"touchmove",this._disableDelayedDrag)},_triggerDragStart:function(a){a?(D={target:d,clientX:a.clientX,clientY:a.clientY},this._onDragStart(D,"touch")):this.nativeDraggable?(m(d,"dragend",this),m(f,"dragstart",this._onDragStart)):this._onDragStart(D,!0);try{n.selection?setTimeout(function(){n.selection.empty()}):
window.getSelection().removeAllRanges()}catch(b){}},_dragStarted:function(){if(f&&d){var a=this.options;v(d,a.ghostClass,!0);v(d,a.dragClass,!1);q.active=this;w(this,f,"start",d,f,x)}},_emulateDragOver:function(){if(y&&(this._lastX!==y.clientX||this._lastY!==y.clientY)){this._lastX=y.clientX;this._lastY=y.clientY;ha||k(l,"display","none");var a=n.elementFromPoint(y.clientX,y.clientY),b=a,c=I.length;if(b){do{if(b[E]){for(;c--;)I[c]({clientX:y.clientX,clientY:y.clientY,target:a,rootEl:b});break}a=b}while(b=
b.parentNode)}ha||k(l,"display","")}},_onTouchMove:function(a){if(D){var b=this.options,c=b.fallbackTolerance,e=b.fallbackOffset,b=a.touches?a.touches[0]:a,d=b.clientX-D.clientX+e.x,e=b.clientY-D.clientY+e.y,d=a.touches?"translate3d("+d+"px,"+e+"px,0)":"translate("+d+"px,"+e+"px)";if(!q.active){if(c&&la(G(b.clientX-this._lastX),G(b.clientY-this._lastY))<c)return;this._dragStarted()}this._appendGhost();M=!0;y=b;k(l,"webkitTransform",d);k(l,"mozTransform",d);k(l,"msTransform",d);k(l,"transform",d);
a.preventDefault()}},_appendGhost:function(){if(!l){var a=d.getBoundingClientRect(),b=k(d),c=this.options;l=d.cloneNode(!0);v(l,c.ghostClass,!1);v(l,c.fallbackClass,!0);v(l,c.dragClass,!0);k(l,"top",a.top-ga(b.marginTop,10));k(l,"left",a.left-ga(b.marginLeft,10));k(l,"width",a.width);k(l,"height",a.height);k(l,"opacity","0.8");k(l,"position","fixed");k(l,"zIndex","100000");k(l,"pointerEvents","none");c.fallbackOnBody&&n.body.appendChild(l)||f.appendChild(l);b=l.getBoundingClientRect();k(l,"width",
2*a.width-b.width);k(l,"height",2*a.height-b.height)}},_onDragStart:function(a,b){var c=a.dataTransfer,e=this.options;this._offUpEvents();"clone"==F.checkPull(this,this,d,a)&&(u=fa(d),k(u,"display","none"),f.insertBefore(u,d),w(this,f,"clone",d));v(d,e.dragClass,!0);b?("touch"===b?(m(n,"touchmove",this._onTouchMove),m(n,"touchend",this._onDrop),m(n,"touchcancel",this._onDrop)):(m(n,"mousemove",this._onTouchMove),m(n,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,50)):(c&&
(c.effectAllowed="move",e.setData&&e.setData.call(this,c,d)),m(n,"drop",this),setTimeout(this._dragStarted,0))},_onDragOver:function(a){var b=this.el,c,e,g;e=this.options;c=e.group;var m=q.active,n=F===c,h=e.sort;void 0!==a.preventDefault&&(a.preventDefault(),!e.dragoverBubble&&a.stopPropagation());M=!0;if(F&&!e.disabled&&(n?h||(g=!f.contains(d)):W===this||F.checkPull(this,m,d,a)&&c.checkPut(this,m,d,a))&&(void 0===a.rootEl||a.rootEl===this.el)&&(ma(a,e,this.el),!Q))if(c=A(a.target,e.draggable,b),
e=d.getBoundingClientRect(),W=this,g)O(!0),C=f,u||J?f.insertBefore(d,u||J):h||f.appendChild(d);else if(!(g=0===b.children.length||b.children[0]===l)&&(g=b===a.target)&&(c=b.lastElementChild,g=c.getBoundingClientRect(),g=c=(5<a.clientY-(g.top+g.height)||5<a.clientX-(g.right+g.width))&&c),g){if(c){if(c.animated)return;p=c.getBoundingClientRect()}O(n);!1!==ca(f,b,d,e,c,p,a)&&(d.contains(b)||(b.appendChild(d),C=b),this._animate(e,d),c&&this._animate(p,c))}else if(c&&!c.animated&&c!==d&&void 0!==c.parentNode[E]){U!==
c&&(U=c,L=k(c),V=k(c.parentNode));var p=c.getBoundingClientRect(),m=p.right-p.left;g=p.bottom-p.top;var r=/left|right|inline/.test(L.cssFloat+L.display)||"flex"==V.display&&0===V["flex-direction"].indexOf("row"),h=c.offsetWidth>d.offsetWidth,t=c.offsetHeight>d.offsetHeight,w=.5<(r?(a.clientX-p.left)/m:(a.clientY-p.top)/g),m=c.nextElementSibling,v=ca(f,b,d,e,c,p,a);!1!==v&&(Q=!0,setTimeout(ja,30),O(n),1===v||-1===v?a=1===v:r?(n=d.offsetTop,r=c.offsetTop,a=n===r?c.previousElementSibling===d&&!h||w&&
h:c.previousElementSibling===d||d.previousElementSibling===c?.5<(a.clientY-p.top)/g:r>n):a=b.contains(d)?m!==d&&!t||w&&t:w&&t,d.contains(b)||(a&&!m?b.appendChild(d):c.parentNode&&c.parentNode.insertBefore(d,a?m:c)),C=d.parentNode,this._animate(e,d),this._animate(p,c))}},_animate:function(a,b){var c=this.options.animation;if(c){var e=b.getBoundingClientRect();k(b,"transition","none");k(b,"transform","translate3d("+(a.left-e.left)+"px,"+(a.top-e.top)+"px,0)");b.offsetWidth;k(b,"transition","all "+c+
"ms");k(b,"transform","translate3d(0,0,0)");clearTimeout(b.animated);b.animated=setTimeout(function(){k(b,"transition","");k(b,"transform","");b.animated=!1},c)}},_offUpEvents:function(){var a=this.el.ownerDocument;p(n,"touchmove",this._onTouchMove);p(a,"mouseup",this._onDrop);p(a,"touchend",this._onDrop);p(a,"touchcancel",this._onDrop)},_onDrop:function(a){var b=this.el,c=this.options;clearInterval(this._loopId);clearInterval(B.pid);clearTimeout(this._dragStartTimer);p(n,"mousemove",this._onTouchMove);
this.nativeDraggable&&(p(n,"drop",this),p(b,"dragstart",this._onDragStart));this._offUpEvents();if(a&&(M&&(a.preventDefault(),!c.dropBubble&&a.stopPropagation()),l&&l.parentNode.removeChild(l),d&&(this.nativeDraggable&&p(d,"dragend",this),da(d),d.style["will-change"]="",v(d,this.options.ghostClass,!1),v(d,this.options.chosenClass,!1),f!==C?(r=K(d,c.draggable),0<=r&&(w(null,C,"add",d,f,x,r),w(this,f,"remove",d,f,x,r),w(null,C,"sort",d,f,x,r),w(this,f,"sort",d,f,x,r))):(u&&u.parentNode.removeChild(u),
d.nextSibling!==J&&(r=K(d,c.draggable),0<=r&&(w(this,f,"update",d,f,x,r),w(this,f,"sort",d,f,x,r)))),q.active))){if(null==r||-1===r)r=x;w(this,f,"end",d,f,x,r);this.save()}this._nulling()},_nulling:function(){f=d=C=l=J=u=t=S=D=y=M=r=U=L=W=F=q.active=null},handleEvent:function(a){var b=a.type;"dragover"===b||"dragenter"===b?d&&(this._onDragOver(a),a.dataTransfer&&(a.dataTransfer.dropEffect="move"),a.preventDefault()):"drop"!==b&&"dragend"!==b||this._onDrop(a)},toArray:function(){for(var a=[],b,c=this.el.children,
e=0,d=c.length,f=this.options;e<d;e++)b=c[e],A(b,f.draggable,this.el)&&a.push(b.getAttribute(f.dataIdAttr)||ka(b));return a},sort:function(a){var b={},c=this.el;this.toArray().forEach(function(a,d){d=c.children[d];A(d,this.options.draggable,c)&&(b[a]=d)},this);a.forEach(function(a){b[a]&&(c.removeChild(b[a]),c.appendChild(b[a]))})},save:function(){var a=this.options.store;a&&a.set(this)},closest:function(a,b){return A(a,b||this.options.draggable,this.el)},option:function(a,b){var c=this.options;if(void 0===
b)return c[a];c[a]=b;"group"===a&&Y(c)},destroy:function(){var a=this.el;a[E]=null;p(a,"mousedown",this._onTapStart);p(a,"touchstart",this._onTapStart);this.nativeDraggable&&(p(a,"dragover",this),p(a,"dragenter",this));Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),function(a){a.removeAttribute("draggable")});I.splice(I.indexOf(this._onDragOver),1);this._onDrop();this.el=a=null}};m(n,"touchmove",function(a){q.active&&a.preventDefault()});try{window.addEventListener("test",null,Object.defineProperty({},
"passive",{get:function(){P={capture:!1,passive:!1}}}))}catch(a){}q.utils={on:m,off:p,css:k,find:ba,is:function(a,b){return!!A(a,b,a)},extend:X,throttle:ea,closest:A,toggleClass:v,clone:fa,index:K};q.create=function(a,b){return new q(a,b)};q.version="1.4.2";return q});
pega.namespace("pega.ui");
pega.ui.Sortable=function(d,t,b){function p(a){return{draggedElement:a.item,oldIndex:a.oldIndex,newIndex:a.newIndex,sourceLocation:a.from,targetLocation:a.to,previousLocation:B}}function C(a){var b=p(a),g=$(f).offset(),d=$(f).outerWidth(),v=$(f).outerHeight(),h=a.pageX-g.left,q=a.pageY-g.top;(0>=h||0>q||h>g.left+d|q>v)&&y();b.draggedElement=e;b.targetLocation=f;b.sourceLocation=w;return c.onDrag(b,a)}function m(a){var d=!1,g=p(a),u=!1,v=e.getBoundingClientRect(),m=v.left,v=v.top,q=f;a=$(a.target).closest("[sortable]");
var z=!1;a&&(a=a[0]);var k=Array.prototype.indexOf.call(a.children,h),n=Array.prototype.indexOf.call(q.children,e),l=f.sortable,x=a.sortable;if(x.group&&a!==q&&!x.group.checkPut(x,l))y();else{if(l.group){var t=l.group.checkPull(x,l);if("clone"===t)e=e.cloneNode(!0);else if(!t&&a!==q){y();return}}if("right"===r||"bottom"===r)a!==q?(u=!0,f=a,w=q,z=!1):n!==k+1&&b.sortItems&&(z=u=!0),u&&(b.virtualDrop&&a.insertBefore(e,a.children[k+1]),n>k+1&&(k+=1),g.newIndex=k,d=!0);else if("left"===r||"top"===r)a!==
q?(u=!0,f=a,w=q,z=!1):n!==(0!==k?k-1:k)&&b.sortItems&&(z=u=!0),u&&(b.virtualDrop&&a.insertBefore(e,a.children[k]),n<k&&(k=0!==k?k-1:k),g.newIndex=k,d=!0);y();if(d)return A._animate({left:m,top:v},e),g.draggedElement=e,g.oldIndex=n,g.targetLocation=f,g.sourceLocation=w,x.htmlElement=f,l.htmlElement=w,0!==$(e).length&&($(e).hasClass(b.ghostClass)&&$(e).removeClass(b.ghostClass),$(e).hasClass(b.chosenClass)&&$(e).removeClass(b.chosenClass)),z?c.onDrop(g):x.onDrop(g)}}function F(a){a&&!f.sortable.options.previewOnDrag&&
(f.ownerDocument.removeEventListener("drop",m,!0),f.ownerDocument.removeEventListener("touchend",m,!0),f.ownerDocument.removeEventListener("touchcancel",m,!0),a.item.removeEventListener("drag",C));a&&a.from&&(a=$(a.from).find(a.clone),0!==$(a).length&&($(a).hasClass(b.ghostClass)&&$(a).removeClass(b.ghostClass),$(a).hasClass(b.chosenClass)&&$(a).removeClass(b.chosenClass)));if(!1===D)return D=!0,c.onEnd()}function G(){d.ownerDocument.defaultView.removeEventListener("mouseup",G);return F()}var c=this;
if(!d)return!1;if(d.sortable)return d.sortable;$(d).attr("sortable","");var B=d,D,h,r,n,f,e,w,H=b.dropPositionLeftClass?b.dropPositionLeftClass:"drop-position-left",I=b.dropPositionRightClass?b.dropPositionRightClass:"drop-position-right",J=b.dropPositionTopClass?b.dropPositionTopClass:"drop-position-top",K=b.dropPositionBottomClass?b.dropPositionBottomClass:"drop-position-bottom";b.dropPosition=b.dropPosition?b.dropPosition:"horizontal";b.previewOnDrag="undefined"!==typeof b.previewOnDrag?b.previewOnDrag:
!0;b.virtualDrop="undefined"!==typeof b.virtualDrop?b.virtualDrop:!0;b.sortItems=void 0!==b.sortItems?b.sortItems:!0;null===b&&(b={});"undefined"==typeof b.animation&&(b.animation=250);null===b.dragHandle&&(b.dragHandle="");if(b.cellMask)for(var l=0;l<d.children.length;l++){var E=d.children[l];$(E).hasClass("cell-mask")||($(E).append("\x3cdiv class\x3d'mask-element'\x3e\x3c/div\x3e"),$(E).addClass("cell-mask"))}b.customUIClass&&$(d).addClass(b.customUIClass);var y=function(){h&&$(h).removeClass(n);
return!0},l=function(a,b){function d(a,b,c){if(void 0===a||!0===a)a=b;return"function"===typeof a?a:function(b,d){b=d.group.name;return c?a:a&&(a.join?-1<a.indexOf(b):b===a)}}var e={};e.name=a;e.checkPull=d(b.pullItems,a,!0);e.checkPut=d(b.putItems,a);c.group=e};c.options=b;c.el=d;t&&l(t,b);c.destroy=function(){A.destroy();if(b.cellMask)for(var a=0;a<d.children.length;a++){var c=d.children[a],e=c.querySelector(".mask-element");$(e).remove();$(c).removeClass("cell-mask")}b.customUIClass&&$(d).removeClass(b.customUIClass);
d.sortable&&(d.sortable=null)};c.disable=function(){A.option("disabled",!0)};c.enable=function(){A.option("disabled",!1)};c.getElement=function(){return d};c.revertDrop=function(a){null!=a&&null!=a.draggedElement&&a.previousLocation.insertBefore(a.draggedElement,a.previousLocation.children[a.oldIndex])};c.onStart=function(a){};c.onDragStart=function(a){};c.onMove=function(a){};c.onDrop=function(a){};c.onDrag=function(a,b){};c.onClone=function(a){};c.onSort=function(a){};c.onRemove=function(a){};c.onEnd=
function(){};c._onDrag=C;c._onDrop=m;var A=Sortable.create(d,{group:{name:t,put:void 0!==b.putItems?b.putItems:!0,pull:void 0!==b.pullItems?b.pullItems:!0},sort:b.sortItems,delay:b.delay?b.delay:0,animation:b.animation,disabled:"true"===b.disabled||!0===b.disabled?!0:!1,handle:b.dragHandle,filter:b.filter,dragClass:b.dragClass?b.dragClass:"dragging",onChoose:function(a){var h=p(a);f=h.targetLocation;w=h.sourceLocation;e=a.item;if(!b.previewOnDrag||b.pullItems)a.item.addEventListener("drag",C),e.ownerDocument.addEventListener("drop",
m,!0),e.ownerDocument.addEventListener("touchend",m,!0),e.ownerDocument.addEventListener("touchcancel",m,!0);D=!1;d.ownerDocument.defaultView.addEventListener("mouseup",G);return c.onStart(h)},onMove:function(a,d){var g=p(a);g.draggedElement=e;g.relatedElement=a.related;if(b.previewOnDrag)a=c.onMove(g);else{var f=a.related.offsetWidth,l=a.related.offsetHeight,m=$(a.related).offset(),f=f/2+m.left,l=l/2+m.top;y();"vertical"===b.dropPosition?d.clientY<l?(h=a.related,n=J,r="top"):(h=a.related,n=K,h.style.boxShadow=
"",r="bottom"):"horizontal"===b.dropPosition&&(d.clientX<=f?(h=a.related,n=H,r="left"):(h=a.related,n=I,r="right"));$(h).addClass(n);c.onMove(g,d);a=!1}return a},onUpdate:function(a){B=a.from;a=p(a);a=b.previewOnDrag?c.onDrop(a):void 0;return a},onStart:function(a){a=p(a);return c.onDragStart(a)},onAdd:function(a){B=a.from;a=p(a);a=b.previewOnDrag?c.onDrop(a):void 0;return a},onEnd:function(a){return F(a)},onSort:function(a){a=p(a);return c.onSort(a)},onRemove:function(a){var b=p(a);return c.onRemove(b,
a)},onClone:function(a){a=p(a);return c.onClone(a)},ghostClass:b.ghostClass?b.ghostClass:"dropping",chosenClass:b.chosenClass?b.chosenClass:"dragging",forceFallback:b.forceFallback});return d.sortable=c};
(function(){var d=pega.util.Dom,l=pega.util.Event,h=pega.lang,f=function(b,a){h.isObject(b)&&!b.tagName&&(a=b,b=null);h.isString(b)&&d.get(b)&&(b=d.get(b));b||(b=document.body);f.superclass.constructor.call(this,b,a||{})};f._instances={};f.getLayoutById=function(b){return f._instances[b]?f._instances[b]:!1};pega.extend(f,pega.util.Element,{browser:function(){var b=pega.env.ua;b.standardsMode=!1;b.secure=!1;return b}(),_rendered:null,_zIndex:null,_sizes:null,_setBodySize:function(b){var a,c;b=!1===
b?!1:!0;this._isBody?(a=d.getClientHeight(),c=d.getClientWidth()):(a=parseInt(this.getStyle("height"),10),c=parseInt(this.getStyle("width"),10),isNaN(c)&&(c=this.get("element").clientWidth),isNaN(a)&&(a=this.get("element").clientHeight));this.get("minWidth")&&c<this.get("minWidth")&&(c=this.get("minWidth"));this.get("minHeight")&&a<this.get("minHeight")&&(a=this.get("minHeight"));b&&(d.setStyle(this._doc,"height",a+"px"),d.setStyle(this._doc,"width",c+"px"));this._sizes.doc={h:a,w:c};this._setSides(b)},
_setSides:function(b){var a=this._top?this._top.get("height"):0,c=this._bottom?this._bottom.get("height"):0,g=this._sizes.doc.h,d=this._sizes.doc.w;b=!1===b?!1:!0;this._sizes.top={h:a,w:this._top?d:0,t:0};this._sizes.bottom={h:c,w:this._bottom?d:0};a=g-(a+c);this._sizes.left={h:a,w:this._left?this._left.get("width"):0};this._sizes.right={h:a,w:this._right?this._right.get("width"):0,l:this._right?d-this._right.get("width"):0,t:this._top?this._sizes.top.h:0};this._right&&b&&(this._right.set("top",this._sizes.right.t),
this._right._collapsing||this._right.set("left",this._sizes.right.l),this._right.set("height",this._sizes.right.h,!0));this._left&&(this._sizes.left.l=0,this._sizes.left.t=this._top?this._sizes.top.h:0,b&&(this._left.set("top",this._sizes.left.t),this._left.set("height",this._sizes.left.h,!0),this._left.set("left",0)));this._bottom&&(this._sizes.bottom.t=this._sizes.top.h+this._sizes.left.h,b&&(this._bottom.set("top",this._sizes.bottom.t),this._bottom.set("width",this._sizes.bottom.w,!0)));this._top&&
b&&this._top.set("width",this._sizes.top.w,!0);this._setCenter(b)},_setCenter:function(b){var a=this._sizes.left.h,c=this._sizes.doc.w-(this._sizes.left.w+this._sizes.right.w);!1!==b&&(this._center.set("height",a,!0),this._center.set("width",c,!0),this._center.set("top",this._sizes.top.h),this._center.set("left",this._sizes.left.w));this._sizes.center={h:a,w:c,t:this._sizes.top.h,l:this._sizes.left.w}},getSizes:function(){return this._sizes},getUnitById:function(b){return pega.widget.LayoutUnit.getLayoutUnitById(b)},
getUnitByPosition:function(b){return b&&(b=b.toLowerCase(),this["_"+b])?this["_"+b]:!1},removeUnit:function(b){this["_"+b.get("position")]=null;this.resize()},addUnit:function(b){if(!b.position||this["_"+b.position])return!1;var a=null,c=null;b.id&&d.get(b.id)&&(a=d.get(b.id),delete b.id);b.element&&(a=b.element);if(!this.bNewGen){if(!c){var c=document.createElement("div"),g=d.generateId();c.id=g}a||(a=document.createElement("div"));d.addClass(a,"yui-layout-wrap");this.browser.ie&&!this.browser.standardsMode&&
(c.style.zoom=1,a.style.zoom=1);c.firstChild?c.insertBefore(a,c.firstChild):c.appendChild(a);this._doc.appendChild(c)}var k=g=!1;b.height&&(g=parseInt(b.height,10));b.width&&(k=parseInt(b.width,10));var e={};pega.lang.augmentObject(e,b);e.parent=this;e.height=g;e.width=k;this.bNewGen?(e.wrap=d.get(b.body).parentNode.parentNode,a=new pega.widget.LayoutUnit(d.get(b.body).parentNode.parentNode.parentNode,e)):(e.wrap=a,a=new pega.widget.LayoutUnit(c,e));a.on("heightChange",this.resize,this,!0);a.on("widthChange",
this.resize,this,!0);a.on("gutterChange",this.resize,this,!0);this["_"+b.position]=a;this._rendered&&this.resize();return a},_createUnits:function(){var b=this.get("units"),a;for(a in b)h.hasOwnProperty(b,a)&&this.addUnit(b[a])},resize:function(b){if(b=!1===b?!1:!0)!1===this.fireEvent("beforeResize")&&(b=!1),this.browser.ie&&(this._isBody?(d.removeClass(document.documentElement,"yui-layout"),d.addClass(document.documentElement,"yui-layout")):(this.removeClass("yui-layout"),this.addClass("yui-layout")));
this._setBodySize(b);b&&this.fireEvent("resize",{target:this,sizes:this._sizes});return this},_setupBodyElements:function(){this._doc=d.get("layout-doc");this._doc||(this._doc=document.createElement("div"),this._doc.id="layout-doc",document.body.firstChild?document.body.insertBefore(this._doc,document.body.firstChild):document.body.appendChild(this._doc));this._createUnits();this._setBodySize();l.on(window,"resize",this.resize,this,!0);this.bNewGen||d.addClass(this._doc,"yui-layout-doc")},_setupElements:function(){this._doc=
this.bNewGen?this.getElementsByClassName("yui-layout-doc")[0]:this.getElementsByClassName("doc")[0];this._doc||(this._doc=document.createElement("div"),this.get("element").appendChild(this._doc));this._createUnits();this._setBodySize();l.on(window,"resize",this.resize,this,!0);this.bNewGen||d.addClass(this._doc,"yui-layout-doc")},_isBody:null,_doc:null,_left:null,_right:null,_top:null,_bottom:null,_center:null,init:function(b,a){this._zIndex=0;f.superclass.init.call(this,b,a);this.get("parent")&&
(this._zIndex=this.get("parent")._zIndex+10);this._sizes={};h.isString(b)||(b=d.generateId(b));"true"===d.get("layout-doc").getAttribute("data-newgen")?this.bNewGen=!0:this.bNewGen=!1;f._instances[b]=this},render:function(){this._stamp();var b=this.get("element");b&&b.tagName&&"body"==b.tagName.toLowerCase()?(this._isBody=!0,this.bNewGen||(d.addClass(document.body,"yui-layout"),d.hasClass(document.body,"yui-skin-sam")&&(d.addClass(document.documentElement,"yui-skin-sam"),d.removeClass(document.body,
"yui-skin-sam"))),this._setupBodyElements()):(this._isBody=!1,this.addClass("yui-layout"),this._setupElements());this._rendered=!0;this.fireEvent("render");return this},_stamp:function(){"CSS1Compat"==document.compatMode&&(this.browser.standardsMode=!0);0===window.location.href.toLowerCase().indexOf("https")&&(d.addClass(document.documentElement,"secure"),this.browser.secure=!0)},initAttributes:function(b){f.superclass.initAttributes.call(this,b);this.setAttributeConfig("units",{writeOnce:!0,validator:pega.lang.isArray,
value:b.units||[]});this.setAttributeConfig("minHeight",{value:b.minHeight||!1,validator:pega.lang.isNumber});this.setAttributeConfig("minWidth",{value:b.minWidth||!1,validator:pega.lang.isNumber});this.setAttributeConfig("height",{value:b.height||!1,validator:pega.lang.isNumber,method:function(a){this.setStyle("height",a+"px")}});this.setAttributeConfig("width",{value:b.width||!1,validator:pega.lang.isNumber,method:function(a){this.setStyle("width",a+"px")}});this.setAttributeConfig("parent",{writeOnce:!0,
value:b.parent||!1,method:function(a){if(a)a.on("resize",this.resize,this,!0)}})},toString:function(){return this.get?"Layout #"+this.get("id"):"Layout"}});pega.widget.Layout=f})();
(function(){var d=pega.util.Dom,l=pega.util.Selector,h=pega.util.Event,f=pega.lang,b=function(a,c){b.superclass.constructor.call(this,a,c||{})};b._instances={};b.getLayoutUnitById=function(a){return b._instances[a]?b._instances[a]:!1};pega.extend(b,pega.util.Element,{STR_CLOSE:"Click to close this pane.",STR_COLLAPSE:"Click to collapse this pane.",STR_EXPAND:"Click to expand this pane.",browser:null,_sizes:null,_anim:null,_resize:null,_clip:null,_gutter:null,header:null,body:null,footer:null,_collapsed:null,
_collapsing:null,_lastWidth:null,_lastHeight:null,_lastTop:null,_lastLeft:null,_lastScroll:null,_lastCenterScroll:null,_lastScrollTop:null,resize:function(a){if(!1===this.fireEvent("beforeResize"))return this;if(!this._collapsing||!0===a){a=this.get("scroll");this.body.firstChild.setAttribute("scroll",!1);this.addClass("yui-layout-scroll");this.removeClass("yui-layout-noscroll");var c=this._getBoxSize(this.header),g=this._getBoxSize(this.footer),b=[this.get("height"),this.get("width")],e=b[0]-c[0]-
g[0]-(this._gutter.top+this._gutter.bottom)+(c[0]+g[0]),b=b[1]-(this._gutter.left+this._gutter.right);if(this._collapsed&&!this._collapsing)this._setHeight(this._clip,e),this._setWidth(this._clip,b),d.setStyle(this._clip,"top",this.get("top")+this._gutter.top+"px"),d.setStyle(this._clip,"left",this.get("left")+this._gutter.left+"px");else if(!this._collapsed||this._collapsed&&this._collapsing)e=this._setHeight(this.get("wrap"),e),b=this._setWidth(this.get("wrap"),b),this._sizes.wrap.h=e,this._sizes.wrap.w=
b,d.setStyle(this.get("wrap"),"top",this._gutter.top+"px"),d.setStyle(this.get("wrap"),"left",this._gutter.left+"px"),this._sizes.header.w=this._setWidth(this.header,b),this._sizes.header.h=c[0],this._sizes.footer.w=this._setWidth(this.footer,b),this._sizes.footer.h=g[0],d.setStyle(this.footer,"bottom","0px"),this._sizes.body.h=this._setHeight(this.body,e-(c[0]+g[0])),this._sizes.body.w=this._setWidth(this.body,b),d.setStyle(this.body,"top",c[0]+"px"),this.body.firstChild.setAttribute("scroll",a),
this.addClass("yui-layout-scroll"),this.fireEvent("resize")}return this},_setWidth:function(a,c){a&&d.setStyle(a,"width",c+"px");return c},_setHeight:function(a,c){if(a){var b=this._getBorderSizes(a);c-=b[0]+b[2];c=this._fixQuirks(a,c,"h");d.setStyle(a,"height",c+"px")}return c},_fixQuirks:function(a,c,b){var g=0,d=2;"w"==b&&(g=1,d=3);this.browser.ie&&!this.browser.standardsMode&&(b=this._getBorderSizes(a),a=this._getBorderSizes(a.parentNode),0===b[g]&&0===b[d]?0!==a[g]&&0!==a[d]&&(c-=a[g]+a[d]):
0===a[g]&&0===a[d]&&(c+=b[g]+b[d]));return c},_getBoxSize:function(a){var c=[0,0];if(a){this.browser.ie&&!this.browser.standardsMode&&(a.style.zoom=1);var b=this._getBorderSizes(a);c[0]=a.clientHeight+(b[0]+b[2]);c[1]=a.clientWidth+(b[1]+b[3])}return c},_getBorderSizes:function(a){var c=[];a=a||this.get("element");this.bNewGen||!this.browser.ie||this.browser.standardsMode||(a.style.zoom=1);c[0]=parseInt(d.getStyle(a,"borderTopWidth"),10);c[1]=parseInt(d.getStyle(a,"borderRightWidth"),10);c[2]=parseInt(d.getStyle(a,
"borderBottomWidth"),10);c[3]=parseInt(d.getStyle(a,"borderLeftWidth"),10);for(a=0;a<c.length;a++)isNaN(c[a])&&(c[a]=0);return c},_createClip:function(){this._clip||(this._clip=document.createElement("div"),this._clip.className="yui-layout-clip yui-layout-clip-"+this.get("position"),this.STR_EXPAND=pega.u.d.fieldValuesList.get("STR_EXPAND"),this._clip.innerHTML='\x3cdiv class\x3d"collapse_div"\x3e\x3cbutton type\x3d"button" class\x3d"collapse" title\x3d"'+this.STR_EXPAND+'"\x3e\x3c/button\x3e\x3c/div\x3e',
h.on(this._clip.firstChild,"click",this.expand,this,!0),this.get("element").parentNode.appendChild(this._clip))},_toggleClip:function(){if(this._collapsed)d.setStyle(this._clip,"display","none");else{var a=this._getBoxSize(this.header),c=this._getBoxSize(this.footer),b=[this.get("height"),this.get("width")],k=b[1]-(this._gutter.left+this._gutter.right),a=b[0]-a[0]-c[0]-(this._gutter.top+this._gutter.bottom)+(a[0]+c[0]);switch(this.get("position")){case "top":case "bottom":this._setWidth(this._clip,
k);this._setHeight(this._clip,this.get("collapseSize"));d.setStyle(this._clip,"left",this._lastLeft+this._gutter.left+"px");"bottom"==this.get("position")?d.setStyle(this._clip,"top",this._lastTop+this._lastHeight-(this.get("collapseSize")-this._gutter.top)+"px"):d.setStyle(this._clip,"top",this.get("top")+this._gutter.top+"px");break;case "left":case "right":this._setWidth(this._clip,this.get("collapseSize")),this._setHeight(this._clip,a),d.setStyle(this._clip,"top",this.get("top")+this._gutter.top+
"px"),"right"==this.get("position")?d.setStyle(this._clip,"left",this._lastLeft+this._lastWidth-this.get("collapseSize")-this._gutter.left+"px"):d.setStyle(this._clip,"left",this.get("left")+this._gutter.left+"px")}d.setStyle(this._clip,"display","block");this.setStyle("display","none")}},getSizes:function(){return this._sizes},toggle:function(){this._collapsed?this.expand():this.collapse();return this},expand:function(){if(!this._collapsed||!1===this.fireEvent("beforeExpand"))return this;this._collapsing=
!0;this.setStyle("zIndex",this.get("parent")._zIndex+1);if(this._anim){this.setStyle("display","none");var a={},c;switch(this.get("position")){case "left":case "right":this.set("width",this._lastWidth,!0);this.setStyle("width",this._lastWidth+"px");this.get("parent").resize(!1);c=this.get("parent").getSizes()[this.get("position")];this.set("height",c.h,!0);var b=c.l,a={left:{to:b}};"left"==this.get("position")&&(a.left.from=b-c.w,this.setStyle("left",b-c.w+"px"));break;case "top":case "bottom":this.set("height",
this._lastHeight,!0),this.setStyle("height",this._lastHeight+"px"),this.get("parent").resize(!1),c=this.get("parent").getSizes()[this.get("position")],this.set("width",c.w,!0),b=c.t,a={top:{to:b}},"top"==this.get("position")&&(this.setStyle("top",b-c.h+"px"),a.top.from=b-c.h)}this._anim.attributes=a;var d=function(){this.setStyle("display","block");this.resize(!0);this._anim.onStart.unsubscribe(d,this,!0)},e=function(){this._collapsing=!1;this.setStyle("zIndex",this.get("parent")._zIndex);this.set("width",
this._lastWidth);this.set("height",this._lastHeight);this._collapsed=!1;this.resize();0<this._lastScrollTop&&(this.body.scrollTop=this._lastScrollTop);this._anim.onComplete.unsubscribe(e,this,!0);this.fireEvent("expand")};this._anim.onStart.subscribe(d,this,!0);this._anim.onComplete.subscribe(e,this,!0);this._anim.animate();this._toggleClip()}else this._collapsing=!1,this._toggleClip(),this.setStyle("zIndex",this.get("parent")._zIndex),this.setStyle("display","block"),this.set("width",this._lastWidth),
this.set("height",this._lastHeight),this._collapsed=!1,this.resize(),0<this._lastScrollTop&&(this.body.scrollTop=this._lastScrollTop),this.fireEvent("expand");return this},collapse:function(){if(this._collapsed||!1===this.fireEvent("beforeCollapse"))return this;this._clip||this._createClip();this._collapsing=!0;var a=this.get("width"),c=this.get("height"),b={};this._lastWidth=a;this._lastHeight=c;this._lastScroll=this.get("scroll");this._lastScrollTop=this.body.scrollTop;this.set("scroll",!1,!0);
this._lastLeft=parseInt(this.get("element").style.left,10);this._lastTop=parseInt(this.get("element").style.top,10);isNaN(this._lastTop)&&(this._lastTop=0,this.set("top",0));isNaN(this._lastLeft)&&(this._lastLeft=0,this.set("left",0));this.setStyle("zIndex",this.get("parent")._zIndex+1);var d=this.get("position");switch(d){case "top":case "bottom":this.set("height",this.get("collapseSize")+(this._gutter.top+this._gutter.bottom));b={top:{to:this.get("top")-c}};"bottom"==d&&(b.top.to=this.get("top")+
c);break;case "left":case "right":this.set("width",this.get("collapseSize")+(this._gutter.left+this._gutter.right)),b={left:{to:-this._lastWidth}},"right"==d&&(b.left={to:this.get("left")+a})}if(this._anim){this._anim.attributes=b;var e=function(){this._collapsing=!1;this._toggleClip();this.setStyle("zIndex",this.get("parent")._zIndex);this._collapsed=!0;this.get("parent").resize();this._anim.onComplete.unsubscribe(e,this,!0);this.fireEvent("collapse")};this._anim.onComplete.subscribe(e,this,!0);
this._anim.animate()}else this._collapsing=!1,this.setStyle("display","none"),this._toggleClip(),this.setStyle("zIndex",this.get("parent")._zIndex),this.get("parent").resize(),this._collapsed=!0,this.fireEvent("collapse");return this},close:function(){this.setStyle("display","none");this.get("parent").removeUnit(this);this.fireEvent("close");this._clip&&(this._clip.parentNode.removeChild(this._clip),this._clip=null);return this.get("parent")},init:function(a,c){this._gutter={left:0,right:0,top:0,
bottom:0};this._sizes={wrap:{h:0,w:0},header:{h:0,w:0},body:{h:0,w:0},footer:{h:0,w:0}};b.superclass.init.call(this,a,c);this.browser=this.get("parent").browser;f.isString(a)||(a=d.generateId(a));b._instances[a]=this;"true"===d.get("layout-doc").getAttribute("data-newgen")?this.bNewGen=!0:this.bNewGen=!1;this.bNewGen||(this.setStyle("position","absolute"),this.addClass("yui-layout-unit"),this.addClass("yui-layout-unit-"+this.get("position")));if(a=this.getElementsByClassName("yui-layout-hd","div")[0])this.header=
a;if(a=this.getElementsByClassName("yui-layout-bd","div")[0])this.body=a;if(a=this.getElementsByClassName("yui-layout-ft","div")[0])this.footer=a;this.on("contentChange",this.resize,this,!0);this._lastScrollTop=0;this.set("animate",this.get("animate"))},initAttributes:function(a){b.superclass.initAttributes.call(this,a);this.setAttributeConfig("wrap",{value:a.wrap||null,method:function(a){a&&(a=d.generateId(a),b._instances[a]=this)}});this.setAttributeConfig("grids",{value:a.grids||!1});this.setAttributeConfig("top",
{value:a.top||0,validator:f.isNumber,method:function(a){this._collapsing||this.setStyle("top",a+"px")}});this.setAttributeConfig("left",{value:a.left||0,validator:f.isNumber,method:function(a){this._collapsing||this.setStyle("left",a+"px")}});this.setAttributeConfig("minWidth",{value:a.minWidth||!1,validator:pega.lang.isNumber});this.setAttributeConfig("maxWidth",{value:a.maxWidth||!1,validator:pega.lang.isNumber});this.setAttributeConfig("minHeight",{value:a.minHeight||!1,validator:pega.lang.isNumber});
this.setAttributeConfig("maxHeight",{value:a.maxHeight||!1,validator:pega.lang.isNumber});this.setAttributeConfig("height",{value:a.height,validator:f.isNumber,method:function(a){this._collapsing||(0>a&&(a=0),this.setStyle("height",a+"px"))}});this.setAttributeConfig("width",{value:a.width,validator:f.isNumber,method:function(a){this._collapsing||(0>a&&(a=0),this.setStyle("width",a+"px"))}});this.setAttributeConfig("position",{value:a.position});this.setAttributeConfig("gutter",{value:a.gutter||0,
validator:pega.lang.isString,method:function(a){a=a.split(" ");a.length&&(this._gutter.top=parseInt(a[0],10),this._gutter.right=a[1]?parseInt(a[1],10):this._gutter.top,this._gutter.bottom=a[2]?parseInt(a[2],10):this._gutter.top,this._gutter.left=a[3]?parseInt(a[3],10):a[1]?this._gutter.right:this._gutter.top)}});this.setAttributeConfig("parent",{writeOnce:!0,value:a.parent||!1,method:function(a){if(a)a.on("resize",this.resize,this,!0)}});this.setAttributeConfig("collapseSize",{value:a.collapseSize||
25,validator:pega.lang.isNumber});this.setAttributeConfig("duration",{value:a.duration||.5});this.setAttributeConfig("easing",{value:a.easing||(pega.util&&pega.util.Easing?pega.util.Easing.BounceIn:"false")});this.setAttributeConfig("animate",{value:!1===a.animate?!1:!0,validator:function(){var a=!1;pega.util.Anim&&(a=!0);return a},method:function(a){this._anim=a?new pega.util.Anim(this.get("element"),{},this.get("duration"),this.get("easing")):!1}});this.setAttributeConfig("header",{value:a.header||
!1,method:function(a){if(!1===a)this.header&&(d.addClass(this.body,"yui-layout-bd-nohd"),this.header.parentNode.removeChild(this.header),this.header=null);else{if(!this.header){var b=this.getElementsByClassName("yui-layout-hd","div")[0];b||(b=this._createHeader());this.header=b}b=this.header.getElementsByTagName("h2")[0];b||(b=document.createElement("h2"),this.header.appendChild(b));b.innerHTML=a;this.body&&d.removeClass(this.body,"yui-layout-bd-nohd")}this.fireEvent("contentChange",{target:"header"})}});
this.setAttributeConfig("proxy",{writeOnce:!0,value:!1===a.proxy?!1:!0});this.setAttributeConfig("body",{value:a.body||!1,method:function(a){if(!this.body){var c=this.getElementsByClassName("yui-layout-bd","div")[0];c?this.body=c:(c=document.createElement("div"),c.className="yui-layout-bd",this.body=c,this.get("wrap").appendChild(c))}c=!1;"true"===d.get("layout-doc").getAttribute("data-newgen")&&(c=!0);c||(this.header||d.addClass(this.body,"yui-layout-bd-nohd"),d.addClass(this.body,"yui-layout-bd-noft"));
var k=null;f.isString(a)?k=d.get(a):a&&a.tagName&&(k=a);k?(a=d.generateId(k),b._instances[a]=this,c||this.body.appendChild(k)):this.body.innerHTML=a;this._cleanGrids();this.fireEvent("contentChange",{target:"body"})}});this.setAttributeConfig("footer",{value:a.footer||!1,method:function(a){if(!1===a)this.footer&&(d.addClass(this.body,"yui-layout-bd-noft"),this.footer.parentNode.removeChild(this.footer),this.footer=null);else{if(!this.footer){var b=this.getElementsByClassName("yui-layout-ft","div")[0];
b?this.footer=b:(b=document.createElement("div"),b.className="yui-layout-ft",this.footer=b,this.get("wrap").appendChild(b))}b=null;f.isString(a)?b=d.get(a):a&&a.tagName&&(b=a);b?this.footer.appendChild(b):this.footer.innerHTML=a;d.removeClass(this.body,"yui-layout-bd-noft")}this.fireEvent("contentChange",{target:"footer"})}});this.setAttributeConfig("close",{value:a.close||!1,method:function(a){if("center"==this.get("position"))return!1;this.header||this._createHeader();var b=d.getElementsByClassName("close",
"div",this.header)[0];a?(b||(b=document.createElement("div"),b.className="close",this.header.appendChild(b),h.on(b,"click",this.close,this,!0)),b.title=this.STR_CLOSE):b&&(h.purgeElement(b),b.parentNode.removeChild(b));this._configs.close.value=a;this.set("collapse",this.get("collapse"))}});this.setAttributeConfig("collapse",{value:a.collapse||!1,method:function(a){if("center"==this.get("position"))return!1;this.header||this._createHeader();var b=d.getElementsByClassName("collapse_div","div",this.header)[0],
c=d.getElementsByClassName("collapse","button",this.header)[0];a?(b||(b=document.createElement("div"),this.header.appendChild(b)),c||(c=document.createElement("button"),this.STR_COLLAPSE=pega.u.d.fieldValuesList.get("STR_COLLAPSE"),c.setAttribute("title",this.STR_COLLAPSE),c.setAttribute("type","button"),b.appendChild(c),h.on(c,"click",this.collapse,this,!0)),b.className="collapse_div"+(this.get("close")?" collapse-close":""),c.className="collapse"+(this.get("close")?" collapse-close":"")):b&&(h.purgeElement(b),
b.parentNode.removeChild(b))}});this.setAttributeConfig("scroll",{value:a.scroll||!1,method:function(a){!1===a&&!this._collapsed&&this.body&&0<this.body.scrollTop&&(this._lastScrollTop=this.body.scrollTop);var b=!1;"true"===d.get("layout-doc").getAttribute("data-newgen")&&(b=!0);a?(b||this.addClass("yui-layout-scroll"),0<this._lastScrollTop&&this.body&&(this.body.scrollTop=this._lastScrollTop)):b||this.removeClass("yui-layout-scroll")}});this.setAttributeConfig("hover",{writeOnce:!0,value:a.hover||
!1,validator:pega.lang.isBoolean});this.setAttributeConfig("resize",{value:a.resize||!1,validator:function(a){return pega.util&&pega.util.Resize?!0:!1},method:function(a){if(a&&!this._resize){if("center"==this.get("position"))return!1;a=!1;switch(this.get("position")){case "top":a="b";break;case "bottom":a="t";break;case "right":a="l";break;case "left":a="r"}this.setStyle("position","absolute");a&&(this._resize=new pega.util.Resize(this.get("element"),{proxy:this.get("proxy"),hover:this.get("hover"),
status:!1,autoRatio:!1,handles:[a],minWidth:this.get("minWidth"),maxWidth:this.get("maxWidth"),minHeight:this.get("minHeight"),maxHeight:this.get("maxHeight"),height:this.get("height"),width:this.get("width"),setSize:!1}),this._resize._handles[a].innerHTML='\x3cdiv class\x3d"yui-layout-resize-knob"\x3e\x3c/div\x3e',this.get("proxy")&&(this._resize.getProxyEl().innerHTML='\x3cdiv class\x3d"yui-layout-handle-'+a+'"\x3e\x3c/div\x3e'),this._resize.on("startResize",function(a){this._lastScroll=this.get("scroll");
this.set("scroll",!1);this.get("parent")&&(this.get("parent").fireEvent("startResize"),a=this.get("parent").getUnitByPosition("center"),this._lastCenterScroll=a.get("scroll"),a.set("scroll",!1));this.fireEvent("startResize")},this,!0),this._resize.on("resize",function(a){this.set("height",a.height);this.set("width",a.width);this.get("parent")&&this.get("parent").getUnitByPosition("center").set("scroll",this._lastCenterScroll)},this,!0))}else this._resize&&this._resize.destroy()}})},_cleanGrids:function(){if(this.get("grids")){var a=
l.query("div.yui-b",this.body,!0);a&&d.removeClass(a,"yui-b");h.onAvailable("yui-main",function(){d.setStyle(l.query("#yui-main"),"margin-left","0");d.setStyle(l.query("#yui-main"),"margin-right","0")})}},_createHeader:function(){var a=document.createElement("div");a.className="yui-layout-hd";this._configs.header&&this._configs.header.value||(a.style.borderWidth="0px");this.get("firstChild")?this.get("wrap").insertBefore(a,this.get("wrap").firstChild):this.get("wrap").appendChild(a);return this.header=
a},destroy:function(){this._resize&&this._resize.destroy();var a=this.get("parent");this.setStyle("display","none");a.removeUnit(this);this._clip&&(this._clip.parentNode.removeChild(this._clip),this._clip=null);h.purgeElement(this.get("element"));this.get("parentNode").removeChild(this.get("element"));delete pega.widget.LayoutUnit._instances[this.get("id")];for(var b in this)f.hasOwnProperty(this,b)&&(this[b]=null,delete this[b]);return a},toString:function(){return this.get?"LayoutUnit #"+this.get("id")+
" ("+this.get("position")+")":"LayoutUnit"}});pega.widget.LayoutUnit=b})();pega.register("layout",pega.widget.Layout,{version:"2.5.2",build:"1076"});
pega.namespace("pega.ui");function initLayout(a,c){if(a=pega.util.Dom.getElementsById("layout-doc",c,"div"))return new pega.ui.Layout(a[0],c)}
pega.ui.Layout=function(a,c){this.accorIndex=this.accorObj=this.shim=null;this.topLayout=a;a=this.getLUs();this.unitConfig=a.units;this.collapsedUnits=a.collapsedLUs;this.setPortalWidth(c)?this.layoutObj=new pega.widget.Layout({units:this.unitConfig}):this.layoutObj=new pega.widget.Layout("PEGA_PORTAL",{units:this.unitConfig});this.layoutObj.on("startResize",this.activateShim,this,!0);this.layoutObj.on("resize",this.deactivateShim,this,!0);this.layoutObj.on("resize",pega.u.d.resizeHarnessCallback,
pega.u.d,!0);this.layoutObj.render();pega.u.d.isAccessible&&this.addARIARoles(this.layoutObj)};
pega.ui.Layout.prototype.addARIARoles=function(a){for(var c=["PEGA_LU_T","PEGA_LU_L","PEGA_LU_C","PEGA_LU_R","PEGA_LU_B"],b=c.length,d="",f=0;f<b;f++){var e=c[f];switch(e){case "PEGA_LU_T":d="banner";break;case "PEGA_LU_L":d="navigation";break;case "PEGA_LU_C":d="main";break;case "PEGA_LU_R":d="contentinfo";break;case "PEGA_LU_B":d="complementary"}var g=a.getUnitById(e);0!=g&&(e=g.body,g=g.header,null!=e&&(null!=g&&(e=e.parentNode),e.setAttribute("role",d)))}};
pega.ui.Layout.prototype.customizeLayout=function(){"none"==document.getElementById("layout-doc").style.display&&(document.getElementById("layout-doc").style.display="block");this.layoutObj.panel=[];for(var a=["TOP","RIGHT","LEFT","BOTTOM"],c=a.length,b=0;b<c;b++){var d=this.layoutObj.getUnitByPosition(a[b]);d&&this.configExpandCollapse(d,b)}a=this.layoutObj.getUnitByPosition("TOP");c=this.layoutObj.getUnitByPosition("RIGHT");b=this.layoutObj.getUnitByPosition("LEFT");a&&a.setStyle("zIndex",2);b&&
b.setStyle("zIndex",1);c&&c.setStyle("zIndex",1);if(null!=this.collapsedUnits)for(c=this.collapsedUnits.length,b=0;b<c;b++){var f=this.collapsedUnits.LU[b];this.layoutObj.getUnitByPosition(f).set("animate",!1);this.layoutObj.getUnitByPosition(f).collapse();setTimeout(function(){this.layoutObj.resize();this.layoutObj.getUnitByPosition(f).set("animate",!0)},1E3)}};
pega.ui.Layout.prototype.configExpandCollapse=function(a,c){var b="",d="",f="",e,g=a.get("position");switch(g){case "top":b="expandIcon-h";d="yui-layout-clip-top";f="yui-layout-unit-top";a._resize&&(e=a._resize._handles.b);break;case "bottom":b="expandIcon-h";d="yui-layout-clip-bottom";f="yui-layout-unit-bottom";a._resize&&(e=a._resize._handles.t);break;case "left":b="expandIcon-v";d="yui-layout-clip-left";f="yui-layout-unit-left";a._resize&&(e=a._resize._handles.r);break;case "right":b="expandIcon-v",
d="yui-layout-clip-right",f="yui-layout-unit-right",a._resize&&(e=a._resize._handles.l)}var k=a.get("collapse"),h=a.get("resize"),l=a.get("header");a.get("position");this.layoutObj.panel[c]=a;if(k&&""==l){k=pega.u.d.fieldValuesList.get("EXPAND_COLLAPSE_MESSAGE");f=this.layoutObj.getElementsByClassName(f,"div")[0];pega.util.Dom.setStyle(f.firstChild.firstChild,"height","0px");h?(h=e.firstChild,pega.util.Dom.setStyle(h,"position","static"),"left"==g||"right"==g?pega.util.Dom.setStyle(h,"top","auto"):
(pega.util.Dom.setStyle(h,"float","left"),pega.util.Dom.setStyle(h,"left","auto")),c='\x3cbutton type\x3d"button" class\x3d"'+b+'" title\x3d"'+k+'" onclick\x3d"pega.u.d.portal.layoutObj.panel['+c+'].collapse();"\x3e\x3c/button\x3e'+e.innerHTML+'\x3cbutton type\x3d"button" class\x3d"'+b+'" title\x3d"'+k+'" onclick\x3d"pega.u.d.portal.layoutObj.panel['+c+'].collapse();"\x3e\x3c/button\x3e',b=document.createElement("div"),b.className="collapse-div",b.innerHTML=c,e.removeChild(h),e.appendChild(b)):(e=
document.createElement("div"),e.className="collapse_div_New",e.innerHTML='\x3cbutton type\x3d"button" class\x3d"'+b+'"  title\x3d"'+k+'" onclick\x3d"pega.u.d.portal.layoutObj.panel['+c+'].collapse();"\x3e\x3c/button\x3e',f.appendChild(e));a.set("collapseSize",8);if(e=document.getElementById("collapse_button_icon"))e.style.display="none";a.on("collapse",handleCollapse,d,this)}};
function handleCollapse(a,c){a=pega.util.Dom.getElementsByClassName(c)[0];a.firstChild.firstChild.className="yui-layout-clip-right"==c||"yui-layout-clip-left"==c?"collapseIcon-v":"collapseIcon-h";a.firstChild.className="collapse_div_New"}
pega.ui.Layout.prototype.getLUs=function(){for(var a=this.topLayout,c={},b=[],d=[],f=0,e=0,g=["PEGA_LU_T","PEGA_LU_L","PEGA_LU_C","PEGA_LU_R","PEGA_LU_B"],k=g.length,h=0;h<k;h++){var l=pega.util.Dom.getElementsById(g[h],a,"div");null!=l&&(b[f]=this.getLUAttr(l[0]),this.isCollapsed(b[f])&&(d[e++]=b[f].position),f++)}c.units=b;0<d.length&&(c.collapsedLUs=d);return c};
pega.ui.Layout.prototype.getLUAttr=function(a){var c=[];c.animate=!1;var b;c.resize=!1;pega.u.d.isAccessible||(b=a.getAttribute("resize"),null!=b&&(c.tempResize=b));b=a.getAttribute("collapse");null!=b&&(c.collapse=b);b=a.getAttribute("collapsed");null!=b&&(c.collapsed=b);b=a.getAttribute("scroll");null!=b&&(c.scroll="true"===b);b=a.getAttribute("id");c.body=b;b=a.getAttribute("position");c.position=b;var d=a.getAttribute("width");c.width=parseInt(d);d=a.getAttribute("height");c.height=parseInt(d);
a=a.getAttribute("header");null!=a&&(c.header=a);"top"==b?c.tempGutter=pega.u.d.topGutter:"left"==b?c.tempGutter=c.tempResize?pega.u.d.leftGutter:"0px 0px 0px 0px":"right"==b?c.tempGutter=pega.u.d.rightGutter:"bottom"==b&&(c.tempGutter=pega.u.d.bottomGutter);return c};pega.ui.Layout.prototype.isCollapsed=function(a){return"true"==a.collapsed?!0:!1};pega.ui.Layout.prototype.hasIFrame=function(a){return 0<pega.util.Dom.getElementsById(a)[0].getElementsByTagName("iframe").length?!0:!1};
pega.ui.Layout.prototype.setPortalWidth=function(a){a=pega.util.Dom.getElementsById("PEGA_PORTAL",a,"div");if(null==a)return!0;var c=a[0].style.width,b=a[0].style.height;if("100%"==c)return!0;var d=c.indexOf("%");-1!=d&&(d=c.substr(0,d),c=document.body.clientWidth*d/100+"px");d=b.indexOf("%");-1!=d&&(d=b.substr(0,d),b=document.body.clientHeight*d/100+"px");a[0].style.width=c;a[0].style.height=b;return!1};
pega.ui.Layout.prototype.getLUName=function(a){a=a.parentNode;for(var c=/PEGA_ACCORDION[\w]+/gi;a&&"layout-doc"!=a.id;){var b=a.id;if("PEGA_LU_L"==b||"PEGA_LU_R"==b||"PEGA_LU_T"==b||"PEGA_LU_B"==b||"PEGA_LU_C"==b)return b;if(b&&b.match(c))break;a=a.parentNode}return!1};pega.ui.Layout.prototype.getLayoutUnit=function(a){if(a=this.getLUName(a))return pega.util.Dom.getElementsById(a)[0]};
pega.ui.Layout.prototype.doBeforeOpen=function(a){a=a.get("api");if("openAssignment"==a||"createNewWork"==a||"getNextWorkItem"==a||"getNextWork"==a||"openWorkItem"==a||"openWorkByHandle"==a||"display"==a){a=pega.u.d.portal.accorObj;var c=pega.u.d.portal.accorIndex;null!=a&&null!=c&&a.set("activeIndex",c)}};
pega.ui.Layout.prototype.stretchLayoutsToContent=function(){var a=0,c=0,b=20,d=0,f=0,e=this.layoutObj.getUnitByPosition("left"),g=this.layoutObj.getUnitByPosition("right"),k=this.layoutObj.getUnitByPosition("bottom"),h=this.layoutObj.getUnitByPosition("top");if(!pega.util.Event.isIE){var l=pega.util.Dom.getElementsById("PEGA_ACCORDION",document.getElementById("PEGA_LU_L"),"DIV"),m=pega.util.Dom.getElementsById("PEGA_ACCORDION",document.getElementById("PEGA_LU_R"),"DIV");if(null!=l||null!=m)b=120}e&&
(a=document.getElementById("PEGA_LU_L").parentNode.scrollWidth);g&&(c=document.getElementById("PEGA_LU_R").parentNode.scrollWidth);k&&(d=document.getElementById("PEGA_LU_B").parentNode.scrollHeight,f=document.getElementById("PEGA_LU_B").scrollHeight);h&&document.getElementById("PEGA_LU_T");pega.util.Event.isIE||0<pega.env.ua.webkit?d+=25:0<pega.env.ua.gecko&&(d+=f);e&&150==e._configs.width.value&&this.layoutObj.getUnitByPosition("left").set("width",a+b);g&&150==g._configs.width.value&&this.layoutObj.getUnitByPosition("right").set("width",
c+b);k&&50==k._configs.height.value&&this.layoutObj.getUnitByPosition("bottom").set("height",d)};
pega.ui.Layout.prototype.createShim=function(){var a=document.createElement("div");a.id="yui-ddm-shim";document.body.firstChild?document.body.insertBefore(a,document.body.firstChild):document.body.appendChild(a);a.style.display="none";a.style.backgroundColor="red";a.style.position="absolute";a.style.zIndex="99999";pega.util.Dom.setStyle(a,"opacity","0");this.shim=a;pega.ui.DDM&&(pega.util.Event.on(a,"mouseup",pega.util.DDM.handleMouseUp,pega.util.DDM,!0),pega.util.Event.on(a,"mousemove",pega.util.DDM.handleMouseMove,
pega.util.DDM,!0));pega.util.Event.on(window,"scroll",this.sizeShim,this,!0)};pega.ui.Layout.prototype.sizeShim=function(){var a=this.shim;a.style.height=pega.util.Dom.getDocumentHeight()+"px";a.style.width=pega.util.Dom.getDocumentWidth()+"px";a.style.top="0";a.style.left="0"};pega.ui.Layout.prototype.activateShim=function(){null==this.shim&&(this.createShim(),this.sizeShim());this.shim.style.display="block"};
pega.ui.Layout.prototype.deactivateShim=function(){null!=this.shim&&(this.shim.style.display="none")};
pega&&pega.desktop&&pega.desktop.support&&pega.desktop.support.getDesktopWindow()&&pega.desktop.support.getDesktopWindow().pega.ui.commandpalette&&pega.desktop.support.getDesktopWindow().pega.ui.commandpalette.init(window);
(function(){pega.mobile.hybrid.callWhenLaunchboxLoaded(function(){if(window.launchbox&&window.launchbox.appDynamics){var a={appKey:pega.ui.HarnessContextMap.getCurrentHarnessContext().getProperty("AppDynamicsAppKey")};window.launchbox.appDynamics.configure(a);a=function(){window.navigator.onLine?(window.launchbox.appDynamics.stopTimer("Offline"),window.launchbox.appDynamics.startTimer("Online")):(window.launchbox.appDynamics.stopTimer("Online"),window.launchbox.appDynamics.startTimer("Offline"))};
window.addEventListener("online",a);window.addEventListener("offline",a)}})})();
"undefined"!=typeof pega&&function(h){h.api||(h.api=h.namespace("pega.api"),h.api.ui={constants:{SECTION:1,HARNESS:2,GRID:3,RDL:4,REPLACE_CURRENT:1,OVERLAY:2,MODAL_DIALOG:3,REFRESH_CURRENT_ITEM:1,REFRESH_ALL_ITEMS:2,POP_UP_WINDOW:2,NEW_DOCUMENT:3}});var m=function(a){console.log(a)};h.api.ui.actions={refreshSection:function(a){if(a&&a instanceof Object){var b=a.section,d=a.dataTransform,c=a.activity,e;e="undefined"==typeof a.submitOnRefresh?"0":1==a.submitOnRefresh?"0":"1";var f=(a=a.event)?pega.util.Event.getTarget(a):
"",g="",k="",l="",n=b?"otherSection":"thisSection";if(d&&d instanceof Object){var p=d.name,d=d.parameters;p&&(g=p,(d=h.api.ui.util.getParametersString(d,f))&&(g+=","+d))}c&&c instanceof Object&&(k=c.name,l=h.api.ui.util.getParametersString(c.parameters,f));pega.control.UIElement.Actions.refresh(n,b,k,l,"",g,a,e)}else m("Invalid JS Object passed to pega.api.ui.actions.refresh API")},refreshHarness:function(a){if(a&&a instanceof Object){var b=a.dataTransform,d=a.activity,c="undefined"==typeof a.submitOnRefresh?
!0:a.submitOnRefresh,e=(a=a.event)?pega.util.Event.getTarget(a):"",f="",g="",k="";if(b&&b instanceof Object){var l=b.name,b=b.parameters;l&&(f=l,(b=h.api.ui.util.getParametersString(b,e))&&(f+=","+b))}d&&d instanceof Object&&(g=d.name,k=h.api.ui.util.getParametersString(d.parameters,e));pega.control.UIElement.Actions.refresh("currentharness","",g,k,"",f,a,!c)}else m("Invalid JS Object passed to pega.api.ui.actions.refresh API")},postValue:function(a,b){a?pega.control.UIElement.Actions.postValue(a,
"undefined"==typeof b?!1:b):m("Invalid event object passed to pega.api.ui.actions.postValue API")},setValue:function(a,b,d,c){if(a){c=(c=c?pega.util.Event.getTarget(c):"")?h.api.ui.util.getBaseRef(c):"";var e=a.substr(0,a.indexOf("."));a=a.substr(a.indexOf("."));d&&b?(d=b.substr(0,b.indexOf(".")),b=b.substr(b.indexOf(".")),b=pega.u.d.getProperty(b,d||c),pega.u.d.setProperty(a,b,e||c)):pega.u.d.setProperty(a,"undefined"!=typeof b?b:"",e||c)}},setValues:function(a){if(a&&a instanceof Object){var b=
a.list;if(b&&b.length){a=(a=(a=a.event)?pega.util.Event.getTarget(a):"")?h.api.ui.util.getBaseRef(a):"";for(var d=0;d<b.length;d++){var c=b[d],e=c.target,f=c.source,g=c.isProperty;e&&(c=e.substr(0,e.indexOf(".")),e=e.substr(e.indexOf(".")),g&&f?(g=f.substr(0,f.indexOf(".")),f=f.substr(f.indexOf(".")),f=pega.u.d.getProperty(f,g||a),pega.u.d.setProperty(e,f,c||a)):pega.u.d.setProperty(e,"undefined"!=typeof f?f:"",c||a))}}}},runDataTransform:function(a){if(a&&a instanceof Object){var b=a.name,d=a.event,
c=d?pega.util.Event.getTarget(d):"",c=h.api.ui.util.getParametersString(a.parameters,c);a=a.contextPage||"";b&&pega.u.invoke.runDataTransform([b,c,a,d])}else m("Invalid JS Object passed to pega.api.ui.actions.runDataTransform API")},runActivity:function(a){if(a&&a instanceof Object){var b=a.name,d=a.event,c=d?pega.util.Event.getTarget(d):"",c=h.api.ui.util.getParametersString(a.parameters,c),e=a.contextPage||"",f=a.returnsResponse,g;!0===f&&a.callbackObj&&(c=0<c.length?c+"\x26":c,c=c+"pyReturnsResponse\x3d"+
f,g=a.callbackObj);b&&pega.u.invoke.runActivity([b,c,e,d,null,null,g])}else m("Invalid JS Object passed to pega.api.ui.actions.runActivity API")},getDataPage:function(a){if(a&&a instanceof Object){var b=a.name;if(b){var d=a.callback,c=a.parameters;a=(a=a.event)?pega.util.Event.getTarget(a):"";var e="";if(c&&c.length){for(var e={},f=0;f<c.length;f++){var g=c[f];e[g.name]=h.api.ui.util.getParameterValue(g,a)}e=JSON.stringify(e)}c=SafeURL_createFromURL(pega.u.d.url);c.put("pyActivity","pzGetDataPageJSON");
c.put("pyDataPageName",b);var k;e&&(k=new SafeURL,k.put("DPParams",e));b=function(a){return function(b){a&&a(JSON.parse(b.responseText))}}(d);h.u.d.asyncRequest("POST",c,{success:b,failure:function(a){console.log("Error getting the datapage JSON "+a)}},k,{isFromDatapage:!0})}}else m("Invalid JS Object passed to pega.api.ui.actions.getDataPage API")},list:{addListItem:function(a){if(a&&a instanceof Object){var b=a.target||pega.api.ui.constants.GRID,d=a.position,c=a.event,e="";d||(d=b==pega.api.ui.constants.RDL?
"first":"after");var f=a.dataPage||"";f&&(e={dataSource:f});d="after"==d?"INSERTAFTER":"before"==d?"INSERTBEFORE":"first"==d?"INSERTFIRST":"INSERTLAST";b==pega.api.ui.constants.RDL?pega.control.UIElement.Actions.addToRepeatSource(c,f,d,a.detailFlowAction||"",a.template||"pyNextGenGridModalTemplate",a.dataPageResultsClass||""):pega.control.UIElement.Actions.doGridAction(c,d,"",e)}else m("Invalid JS Object passed to pega.api.ui.actions.list.addListItem API")},deleteListItem:function(a){a&&window.removeFromRepeatSource&&
removeFromRepeatSource(a)},editListItem:function(a){a&&window.editRepeatItem&&editRepeatItem(a)},openLocalAction:function(a){if(a&&a instanceof Object){var b=a.flowAction,d=a.onLaunch||pega.api.ui.constants.REFRESH_CURRENT_ITEM,c=a.event;b&&(d=d==pega.api.ui.constants.REFRESH_CURRENT_ITEM?"false":"true",isTemplateGrid(c)?(a={noThreadProcess:"true",templateName:a.template||"pyNextGenGridModalTemplate"},pega.control.UIElement.Actions.doListAction(c,"FLOWACTION",b,a,null,d)):a={noThreadProcess:("undefined"==
typeof a.disableWorkProcessing?!1:a.disableWorkProcessing).toString(),templateName:a.template||"pzGridModalTemplate"},pega.control.UIElement.Actions.doGridAction(c,"FLOWACTION",b,a,null,d))}else m("Invalid JS Object passed to pega.api.ui.actions.launchListLocalAction API")}},launchLocalAction:function(a){if(a&&a instanceof Object){var b=a.flowAction,d=a.displayMode||pega.api.ui.constants.REPLACE_CURRENT,c=a.event,e=a.flowActionClass;if(b&&d&&c&&e){var f=a.skinFormat||"",g=a.template||"pzModalTemplate",
k="anim-null",l="anim-null",n=a.contextPage;if("undefined"==typeof a.isMobileFullScreen||a.isMobileFullScreen)k=h.api.ui.util.inAnimMap[a.revealEffectName||"From bottom"],l=h.api.ui.util.outAnimMap[a.closingEffectName||"Reverse the reveal effect"];var p="undefined"==typeof a.closeOnClickAway?!0:a.closeOnClickAway;a="undefined"==typeof a.centerOverlay?!1:a.centerOverlay;var t=d==pega.api.ui.constants.REPLACE_CURRENT?"false":d==pega.api.ui.constants.MODAL_DIALOG?"true":"overlay";f&&(d==pega.api.ui.constants.MODAL_DIALOG?
f=f.trim().replace(/ /g,"_").toLowerCase()+"_modal":d==pega.api.ui.constants.OVERLAY&&(f="pz-po-c-"+f.trim().replace(/ /g,"_").toLowerCase()));pega.control.UIElement.Actions.processAction(b,t,c,n,"Rule-HTML-Section",f,g,k,l,e,e,!p,a)}}else m("Invalid JS Object passed to pega.api.ui.actions.launchLocalAction API")},setFocus:function(a){if(a&&a instanceof Object){var b=a.target,d=a.rowIndex;if(b||c&&d){var c=a.event;a=c?pega.util.Event.getTarget(c):"";d&&d instanceof Object?(d=h.api.ui.util.getParameterValue(d,
a),pega.control.UIElement.Actions.doGridAction(c,"SETFOCUS",null,{dataSource:b,focusIndex:d})):(c=a?h.api.ui.util.getBaseRef(a):"",d=b.substr(0,b.indexOf(".")),b=b.substr(b.indexOf(".")),pega.control.UIElement.Actions.setItemFocus(b,d||c))}}else m("Invalid JS Object passed to pega.api.ui.actions.setFocus API")},openURLInWindow:function(a){if(a&&a instanceof Object){var b=a.url,d=a.event,c=d?pega.util.Event.getTarget(d):"",e=a.windowProperties,f="",g="",k=!1,l=b?"true":"false";e&&e instanceof Object&&
((g=e.name)&&(f=h.api.ui.util.getParameterValue(g,c)),k="undefined"==typeof e.replaceHistory?!1:e.replaceHistory,g="resizable\x3d"+(e.resizable?1:0)+","+("scrollbars\x3d"+(e.scrollbars?1:0)+",")+("location\x3d"+(e.locationbar?1:0)+",")+("menubar\x3d"+(e.menubar?1:0)+",")+("status\x3d"+(e.statusbar?1:0)+",")+("toolbar\x3d"+(e.toolbar?1:0)+",")+("undefined"==typeof e.height?"":"height\x3d"+e.height+",")+("undefined"==typeof e.width?"":"width\x3d"+e.width+",")+("undefined"==typeof e.top?"":"top\x3d"+
e.top+",")+("undefined"==typeof e.left?"":"left\x3d"+e.left));if(b)pega.control.UIElement.Actions.openUrlInWindow(b,f,g,k.toString(),d,l);else{var e=a.activity,b=a.dataTransform,n="undefined"==typeof a.usePrimaryPage?!1:a.usePrimaryPage;if(e&&e instanceof Object&&(a=e.name)){e=h.api.ui.util.getParametersString(e.parameters,c);n="pzPrimaryPageName\x3d"+(n?SafeURL_createFromURL(pega.u.d.url).get("pzPrimaryPageName"):h.api.ui.util.getBaseRef(c));if(b&&b instanceof Object){var p=b.parameters,t="",b="pyActivity\x3d@baseclass.pzTransformAndRun\x26pyDataTransform\x3d"+
b.name;p&&p.length&&(t="\x26pyDataTransformParams\x3d"+h.api.ui.util.getDataTransformParamsStr(p,c));b+=t+"\x26pyPreActivity\x3d"+a+"\x26"+e+n}else b="pyActivity\x3d"+a+"\x26"+e+n;b=window.location.pathname+"?"+b;pega.control.UIElement.Actions.openUrlInWindow(b,f,g,k.toString(),d,l)}}}else m("Invalid JS Object passed to pega.api.ui.actions.openURLInWindow API")},getSection:function(a,b,d){var c=SafeURL_createFromURL(pega.u.d.url);c.put("pyActivity","@baseclass.pzGetSectionForPage");c.put("sectionName",
a);c.put("pzPrimaryPageName",b);h.u.d.asyncRequest("GET",c,{success:function(a){d(a.responseText)},failure:function(a){console.log("Error getting section markup "+a)}})},getSections:function(a,b,d){var c=SafeURL_createFromURL(pega.u.d.url);c.put("pyActivity","Code-Pega-List.pzGetSectionsForPageInList");c.put("sectionName",a);c.put("pzPrimaryPageName",b);h.u.d.asyncRequest("GET",c,{success:function(a){d(a.responseText)},failure:function(a){console.log("Error getting section markup "+a)}})},launchHarness:function(a){if(a&&
a instanceof Object){var b=a.harness,d=a.harnessClass;if(b&&d){var c=a.displayMode||pega.api.ui.constants.REPLACE_CURRENT,e=a.activity,f=a.dataTransform,g=a.event,k=a.contextPage,l="undefined"==typeof a.readOnly?!0:a.readOnly,n="undefined"==typeof a.doSubmit?!0:a.doSubmit,p="undefined"==typeof a.displayHarnessFromServer?!1:a.displayHarnessFromServer,t=a.windowName,r=a.windowWidth,v=a.windowHeight,q=a.tabName;a=a.key;var w=g?pega.util.Event.getTarget(g):"",z="",x="",u="",y="",A="",l=l?"Yes":"No",n=
n?"Yes":"No",c=c==pega.api.ui.constants.POP_UP_WINDOW?"popup":c==pega.api.ui.constants.REPLACE_CURRENT?"current":"newDocument";q&&q instanceof Object&&(y=h.api.ui.util.getParameterValue(q,w));a&&a instanceof Object&&(a=h.api.ui.util.getParameterValue(a,w));"popup"==c&&(A="scrollbars\x3dyes,resizable\x3d1,"+("undefined"==typeof r?"":"width\x3d"+r+",")+("undefined"==typeof v?"":"height\x3d"+v+","));if(e&&e instanceof Object&&(z=e.name,(e=e.parameters)&&e.length))for(r=0;r<e.length;r++)q=e[r],v=q.name,
q=h.api.ui.util.getParameterValue(q,w),0<r&&(x+=","),x+=v+":"+q;f&&f instanceof Object&&(e=f.name,f=f.parameters,e&&(u=h.api.ui.util.getDataTransformParamsStr(f,w),u="pyDataTransform\x3d"+e+(u?"\x26pyDataTransformParams\x3d"+encodeURIComponent(u):"")));f=SafeURL_createFromURL(pega.u.d.url).get("pzPrimaryPageName");pega.control.UIElement.Actions.showHarnessWrapper(c,d,b,z,x,f,"newDocument"==c?y:"popup"==c?l:n,"popup"==c?A:"newDocument"==c?a:y,"popup"==c?t||"":l,u,g,k,"","","","",p)}}else m("Invalid JS Object passed to pega.api.ui.actions.launchHarness API")}};
h.api.ui.util={getParametersString:function(a,b){var d="";if(a&&a.length)for(var c=0;c<a.length;c++){var e=a[c],f=e.name,g=e.value;if("undefined"==typeof e.isProperty?0:e.isProperty)g=this.getPropertyValue(b,g);d+=f+"\x3d"+g+"\x26"}return d},getDataTransformParamsStr:function(a,b){var d="";if(a&&a.length){for(var d="[",c=0;c<a.length;c++){var e=a[c],f=e.name,g=e.value;if("undefined"==typeof e.isProperty?0:e.isProperty)g=this.getPropertyValue(b,g);0<c&&(d+=",");d+='"'+f+'":"'+g+'"'}d+="]"}return d},
getPropertyFullReferance:function(a,b){if(a&&"."==b.charAt(0)){var d=pega.u.property.toReference(pega.u.d.getRowAndEntryHandle(a).rowEntryHandle);b=d?d+b:this.getBaseRef(a)+b}return b},getBaseRef:function(a){(a=pega.u.d.getBaseRef(a))?"."==a.charAt(0)&&(a=SafeURL_createFromURL(pega.u.d.url).get("pzPrimaryPageName")+a):a=SafeURL_createFromURL(pega.u.d.url).get("pzPrimaryPageName");return a},getPropertyValue:function(a,b){b=this.getPropertyFullReferance(a,b);return pega.c.eventParser.replaceTokensWrapper("#~"+
b+"~#","","",!0)},getParameterValue:function(a,b){var d=a.value;return("undefined"==typeof a.isProperty?0:a.isProperty)?this.getPropertyValue(b,d):d},inAnimMap:{"From bottom":"anim-bottom","Fade in":"anim-fade",Grow:"anim-grow","From left":"anim-left","From right":"anim-right",Shrink:"anim-shrink","From top":"anim-top","Vertical flip":"anim-vert-flip"},outAnimMap:{"Reverse the reveal effect":"anim-in-animation","To top":"anim-top","To bottom":"anim-bottom","To left":"anim-left","To right":"anim-right",
Shrink:"anim-grow",Grow:"anim-shrink","Vertical flip":"anim-vert-flip","Fade out":"anim-fade"}}}(pega);
pega.namespace("pega.ui.compare");
pega.ui.compare=function(){function w(a){t=a;pega.u.d.modalDialog.subscribe("show",x);pega.u.d.processAction("pzLaunchCompareDiffDialog","","Rule-HTML-Section","","",!0,d.event,"pzCompareTextModalTemplate","","",!1,"Standard")}function I(){pega.u.d.gBusyInd&&pega.u.d.gBusyInd.hide();alert("Diff tool: Ajax call to launch diff in popup failed!")}function y(){if(document.querySelector("div[data-node-id\x3d'pzCompareTextModalTemplate'] .modal-scroll-panel")){var a=document.querySelector("div[data-node-id\x3d'pzCompareTextModalTemplate']\x3e#EXPAND-OUTERFRAME").clientHeight,b=
parseInt,c;c=document.querySelector(".diff-view-panel .item-1");c=window.getComputedStyle(c,null).getPropertyValue("height");b=b(c);c=parseInt;var e;e=document.querySelector(".diff-content .headersDiv");e=window.getComputedStyle(e,null).getPropertyValue("height");c=c(e);document.getElementById("ce-diff-view").style.height=a-b-60-c+"px"}}function z(){var a=h.rightChunks();f=document.querySelectorAll(".diff-view-panel select")[0];f.innerHTML="";for(var b,c,e=0;e<a.length;e++)val=a[e].editTo,b=e+1+". Difference from line no."+
a[e].editFrom+" to line no."+a[e].editTo,c=document.createElement("option"),c.text=b,c.editFrom=a[e].editFrom,c.editTo=a[e].editTo,f.add(c)}function q(a,b){a=b?b:f[f.selectedIndex].editFrom;A(a);g.setCursor({line:a});u()}function B(a){a=h.rightChunks();document.querySelectorAll(".diff-view-panel .diff-count")[0].innerHTML=a.length}function J(){var a=h.right.orig.getValue();g.setValue(a);g.refresh()}function K(){document.getElementById("ce-diff-view");var a=document.querySelectorAll(".headersDiv")[0];
a&&a.parentNode.removeChild(a);a=document.createElement("div");a.className="headersDiv";var b=document.createElement("div");b.innerHTML="\x3cb\x3eCurrent file : \x3c/b\x3e"+d.currentLabel;b.className="header leftDiv";var c=document.createElement("div");c.innerHTML="\x3cb\x3eCompare with : \x3c/b\x3e"+d.compareWithLabel;c.className="header rightDiv";var e=document.createElement("div");e.className="header middleDiv";e.title="Revert all chunks";m(e,"click",J);a.appendChild(b);a.appendChild(e);a.appendChild(c);
b=document.querySelectorAll("#ce-diff-view")[0];b.parentNode.insertBefore(a,b.parentNode.firstChild)}function m(a,b,c){a&&a.addEventListener(b,c)}function A(a){a=g.charCoords({line:a,ch:0},"local").top;var b=g.getScrollerElement().offsetHeight/2;g.scrollTo(null,a-b-5)}function u(){for(var a=g.getCursor().line,b=g.state.diffViews[0].chunks,c=!1,e=0;e<b.length;e++)if(a<=b[e].editTo){c=!0;if(1==b.length){k.classList.remove("disabled");l.classList.remove("disabled");break}e==b.length-1?(l.classList.add("disabled"),
k.classList.remove("disabled")):(0==e?k.classList.add("disabled"):k.classList.remove("disabled"),l.classList.remove("disabled"));break}c||nextArrow.classList.add("disabled")}function v(a,b,c){a&&a.currentTarget&&a.currentTarget.classList.contains("disabled")?a.preventDefault():(g.execCommand(b),u(),a=g.getCursor().line,A(a),c&&0<f.selectedIndex?f.selectedIndex--:f.selectedIndex<f.length-1&&f.selectedIndex++)}function L(a){switch(a){case "js":case "javascript":mode="javascript";break;case "css":mode=
"css";break;case "java":case "text/x-java":mode="text/x-java";break;case "html":mode="text/html";break;case "jsp":case "application/x-jsp":mode="application/x-jsp";break;case "text":case "text/plain":mode="text/x-diff";default:mode="application/x-jsp"}return mode}function C(){0==h.rightChunks().length?(f.style.display="none",k.style.display="none",l.style.display="none"):(f.style.display="block",k.style.display="block",l.style.display="block")}function M(a){a=document.getElementById("ce-diff-view");
null==a?(a=document.createElement("div"),a.setAttribute("id","ce-diff-view"),document.querySelectorAll(".diff-view-panel .diff-content")[0].appendChild(a)):(a.style.height="",a.innerHTML="");return a}function N(){for(var a=arguments.length>=p.length?arguments.length:p.length,b=0;b<a;b++)d[p[b]]=arguments[b];if(a>p.length){a=arguments.length;b=0;n=[];for(var c=p.length;c<a;c++)n[b]=arguments[c],b++}}function D(a){for(var b=0;b<f.length;b++)if(f[b].editFrom===a){f.selectedIndex=b;break}}function E(){var a=
f.length,b=f.selectedIndex;B();z();C();0!==f.length&&(a<f.length?(q(null,g.getCursor().line),D(g.getCursor().line)):b===a-1?q():(v(null,"goNextDiff",!1),D(g.getCursor().line)),u())}function O(){var a=document.querySelectorAll("div[class\x3d'CodeMirror-merge-scrolllock']")[0];a.onclick=function(){"\u21db\u21da"===this.innerHTML?(this.classList.add("lock"),this.classList.remove("unlock")):(this.classList.add("unlock"),this.classList.remove("lock"))};a.classList.add("lock");a.classList.remove("unlock")}
function P(a){k=document.querySelectorAll(".diff-view-panel .prev-diff")[0];l=document.querySelectorAll(".diff-view-panel .next-diff")[0];F=document.querySelectorAll("div[data-node-id\x3d'pzCompareTextModalTemplate'] .container-close")[0];var b=M();"inskey"===d.fetch&&(a=JSON.parse(a.responseText));var c=(d.language||"java").toLowerCase();h=CodeMirror.MergeView(b,{value:a.currentValue,orig:a.compareWithValue,lineNumbers:!0,mode:L(c),highlightDifferences:!0,connect:null,collapseIdentical:!1});g=h.editor();
B();z();m(f,"change",q);C();K();O();m(k,"click",function(a){v(a,"goPrevDiff",!0)});m(l,"click",function(a){v(a,"goNextDiff",!1)});g.on("updateDiff",E);k.classList.add("disabled");pega.u.d.gBusyInd&&pega.u.d.gBusyInd.hide();y();m(window,"resize",G);m(F,"click",r);setTimeout(function(){h.editor().refresh();h.rightOriginal().refresh()},0);q()}function r(){document.querySelectorAll("div[data-node-id\x3d'pzCompareTextModalTemplate'] .container-close").length&&document.querySelectorAll("div[data-node-id\x3d'pzCompareTextModalTemplate'] .container-close")[0].removeEventListener("click",
r);pega.u.d.hideModalWindow();if("undefined"!==d.cancelCallback&&""!==d.cancelCallback){var a=eval(d.cancelCallback);if("function"===typeof a){var b={propertyName:d.propertyName,ruleClass:d.ruleClass};n&&(b.params=n);a(b)}}H()}function H(){pega.u.d.modalDialog.unsubscribe("show",x);window.removeEventListener("resize",G);g.off("updateDiff",E);h=g=t=null}var d=[],g,h,n,t,f,k,l,F,p="event language fetch currentString compareString propertyName currentLabel compareWithLabel doneCallback cancelCallback ruleClass".split(" "),
G=function(){document.getElementById("ce-diff-view")&&(document.getElementById("ce-diff-view").style.height="");y()},x=function(){pega.u.d.modalDialog.setHeader("Compare text");P(t)};return{showDiff:function(){N.apply(this,arguments);pega.u.d.gBusyInd&&pega.u.d.gBusyInd.show();if("inskey"===d.fetch){var a=new SafeURL("@baseclass.pzFetchCompareSources");a.put("currentInskey",d.currentString);a.put("compareWithInskey",d.compareString);a.put("propertyName",d.propertyName);pega.u.d.asyncRequest("POST",
a,{success:w,failure:I})}else"string"===d.fetch&&w({currentValue:d.currentString,compareWithValue:d.compareString})},cancelDiff:r,doneDiff:function(){document.querySelectorAll("div[data-node-id\x3d'pzCompareTextModalTemplate'] .container-close").length&&document.querySelectorAll("div[data-node-id\x3d'pzCompareTextModalTemplate'] .container-close")[0].removeEventListener("click",r);pega.u.d.hideModalWindow();var a=g.getValue();if("undefined"!==d.doneCallback&&""!==d.doneCallback){var b=eval(d.doneCallback);
"function"===typeof b&&(a={updatedCurrentString:a,fetch:d.fetch,propertyName:d.propertyName,ruleClass:d.ruleClass},n&&(a.params=n),b(a))}H()},getDiffViewObj:function(){return h}}}();
pega.namespace("pega.ui.components");pega.ui.components.Inspector=function(H){if(!H||!H.elementFoundCallback){throw new Error("elementFoundCallback is a required parameter")}var F={};F.elementFoundCallback=H.elementFoundCallback;F.eventMonitored=H.eventMonitored||"mouseover";F.selectorList=H.selectorList||["*"];F.ignoreList=H.ignoreList||[];F.isValidElement=H.isValidElement||function(I){return true};var A=false;function D(J,I){var K=$(J).closest(I);if(K.length<1){return null}return K[0]}function G(M){var K=F.ignoreList.join(",");if(D(M.target,K)){return }var J={};J.eventObj=M;var L=F.selectorList.join(",");var I=D(M.target,L);while(I&&!F.isValidElement(I)){I=D(I.parentNode,L)}if(!I){J.foundElement=null;F.elementFoundCallback(J);return false}else{J.foundElement=I;F.elementFoundCallback(J)}}function E(I){this.removeEventListener(F.eventMonitored,G,true);this.removeEventListener("unload",E,true)}function B(){var J=pega.util.Dom.getFrames(window);for(var I=0;I<J.length;I++){J[I].addEventListener(F.eventMonitored,G,true);J[I].addEventListener("unload",E,true)}}function C(){var J=pega.util.Dom.getFrames(window);for(var I=0;I<J.length;I++){J[I].removeEventListener(F.eventMonitored,G,true);J[I].removeEventListener("unload",E,true)}}this.disable=function(){A=false;C();pega.ui.composer.cancelEventListener("Inspector.WindowLoad",B);window.removeEventListener("unload",this.disable,true)};this.enable=function(){if(!A){A=true;B();pega.ui.composer.registerEventListener("Inspector.WindowLoad",B);window.addEventListener("unload",this.disable,true)}};this.isEnabled=function(){return A}};if(pega.ui&&pega.ui.composer&&pega.ui.composer.sendEvent){pega.ui.composer.sendEvent("Inspector.WindowLoad",window)};
pega.namespace("pega.ui");
pega.ui.panelConstants=function(){var a={};a.DOCK_LOCATION=Object.freeze({RIGHT:"RIGHT",LEFT:"LEFT",TOP:"TOP"});a.DOCK_CLASS=Object.freeze({RIGHT:"right-panel-dock",LEFT:"left-panel-dock",TOP:"top-panel-dock"});a.HARNESS_SELECTOR="body \x3e [data-portalharnessinsname]";a.ClassNames=Object.freeze({BASE_DOCK:"panel-dock",MANAGER_TRANSITION:"panel-manager-transitions",DOCK_TRANSITION:"panel-dock-transitions",DOCK_SHOW:"panel-dock-show",PANEL_MANAGER:"panel-manager",BASE_PANEL:"panel-component",SHOW_PANEL:"show-panel-component",
CHILD_PANEL:"panel-component-child"});a.EventMessages=Object.freeze({DOCK_SHOW:"PanelDock.show",DOCK_HIDE:"PanelDock.hide",DOCK_RESIZE:"PanelDock.resize",BASE_DOCK_STATE_CHANGED:"PanelDock.baseStateChanged",INHERITED_DOCK_STATE_CHANGED:"PanelDock.inheritedStateChanged",PANEL_SHOW:"PanelComponent.show",PANEL_HIDE:"PanelComponent.hide",PANEL_DESTROY:"PanelComponent.destroy",CLOSE_ICON_CLICK:"PanelComponent.closeIconClick"});return a}();
pega.namespace("pega.ui.components.panels");
pega.ui.components.panels.Base=function(f,m){function h(a){d.getElement()===a.target&&(b.showCallback&&b.showCallback(),d.getElement().removeEventListener("transitionend",h))}function k(a){d.getElement()===a.target&&(b.hideCallback&&b.hideCallback(),d.getElement().removeEventListener("transitionend",k))}var d=this,b=m||{},g=Object.freeze({HIDDEN:"HIDDEN",SHOWING:"SHOWING"}),c=document.createElement("div");c.id=f;c.className=pega.ui.panelConstants.ClassNames.BASE_PANEL;document.body.appendChild(c);
var e={},l=g.HIDDEN;this.getElement=function(){return c};this.getId=function(){return f};this.isShowing=function(){return l===g.SHOWING};this.show=function(){if(!d.isShowing()){b.preShow&&b.preShow();c.classList.add(pega.ui.panelConstants.ClassNames.SHOW_PANEL);l=g.SHOWING;var a=c.parentNode;a&&pega.ctxmgr.registerContextSwitching(a);pega.desktop.sendEvent(pega.ui.panelConstants.EventMessages.PANEL_SHOW,{id:f});d.getElement().addEventListener("transitionend",h)}};this.hide=function(){if(d.isShowing()){for(var a in e)e[a].hide();
b.preHide&&b.preHide();c.classList.remove(pega.ui.panelConstants.ClassNames.SHOW_PANEL);l=g.HIDDEN;pega.desktop.sendEvent(pega.ui.panelConstants.EventMessages.PANEL_HIDE,{id:f});d.getElement().addEventListener("transitionend",k)}};this.addChild=function(a){var b=a.getId();if(e[b])return!1;var d=a.getElement();d.classList.add(pega.ui.panelConstants.ClassNames.CHILD_PANEL);c.appendChild(d);e[b]=a;return!0};this.removeChild=function(a){a=a.getId();if(!e[a])return!1;var b=e[a].getElement();b.classList.remove(pega.ui.panelConstants.ClassNames.CHILD_PANEL);
document.body.appendChild(b);e[a]=null;delete e[a];return!0};this.setContent=function(a){c.appendChild(a)};this.doesPushContent=function(){return null==b.pushesContent||b.pushesContent};this.destroy=function(){c.parentNode&&c.parentNode.removeChild(c);for(var a in e)e[a].destroy();pega.desktop.sendEvent(pega.ui.panelConstants.EventMessages.PANEL_DESTROY,{id:f});window.removeEventListener("transitionend",h);window.removeEventListener("transitionend",k)}};
pega.namespace("pega.ui.components.panels");
pega.ui.components.panels.ClassLoader=function(m,n){function f(a,b){var c=new SafeURL;c.put("panelClass",a);for(var d in b)void 0!==b[d]&&c.put(d,b[d]);return c}function g(a){(a=$(a.target).closest(".panel-component")[0])&&a.id==this.getId()&&this.hide()}function h(){e&&(e.style.width=null,k.getElement().removeEventListener("transitionend",h))}function l(){e&&(e.style.width="360px",k.getElement().addEventListener("transitionend",h))}pega.ui.components.panels.Base.call(this,m,n);pega.desktop.registerEventListener(pega.ui.panelConstants.EventMessages.CLOSE_ICON_CLICK,
g,null,this);var k=this,p=this.destroy,q=this.show,r=this.hide,e=null;this.show=function(){l();q()};this.hide=function(){l();r()};this.loadByClass=function(a,b,c){if(null!=e){var d=pega.u.d.getSectionByName("pzPanel","",e);a=f(a,c);pega.u.d.reloadSection(d,"pzLoadPanel",a.toQueryString(),!1,!1,-1,!1,null,null,null,b)}else e=document.createElement("div"),this.getElement().insertBefore(e,this.getElement().firstChild),a=f(a,c),a.put("panelName",this.getId()),pega.u.d.loadSectionIntoDom("pzPega_UI_Panel",
"@baseclass",e,b,"","pzLoadPegaUIPanel",a.toQueryString())};this.loadByDynamic=function(a,b,c,d){d=d||{};d.streamName=a;d.pageContext=b;this.loadByClass("Pega-UI-PanelContent-Dynamic",c,d)};this.loadSectionInPanel=function(a){if(!a.sectionName||"string"!==typeof a.sectionName)throw Error("Section name is not specified and / or is not a string!");if(!a.sectionClass||"string"!==typeof a.sectionClass)throw Error("Section class is not specified and / or is not a string!");a.callback&&"function"===typeof a.callback||
(a.callback=function(){});a.pageContext&&"string"===typeof a.pageContext||(a.pageContext="");a.preActivityName&&"string"===typeof a.preActivityName||(a.preActivityName="");if(!a.preActivityParams||!a.preActivityParams instanceof SafeURL)a.preActivityParams=new SafeURL;for(var b=this.getElement();b.firstChild;){var c=b.firstChild.getAttribute("uniqueid");pega.u.d.removeFromMemory(c);b.removeChild(b.firstChild)}a.disableHeader||(a.headerSectionName&&"string"===typeof a.headerSectionName&&a.headerSectionClass&&
"string"===typeof a.headerSectionClass||(a.headerSectionName="pzPanelHeader",a.headerSectionClass="@baseclass"),c=b.appendChild(document.createElement("div")),pega.u.d.loadSectionIntoDom(a.headerSectionName,a.headerSectionClass,c,function(){},a.pageContext,"",""));b=b.appendChild(document.createElement("div"));pega.u.d.loadSectionIntoDom(a.sectionName,a.sectionClass,b,a.callback,a.pageContext,a.preActivityName,a.preActivityParams.toQueryString()).classList.add("panel-content")};this.destroy=function(){e=
null;p();pega.desktop.cancelEventListener(pega.ui.panelConstants.EventMessages.CLOSE_ICON_CLICK,g)}};
pega.namespace("pega.ui.components.panelDocks");
pega.ui.components.panelDocks.Base=function(e,h,d){var k=this,b={};d=d||{};var f=d.startingWidth||360,g=d.startingHeight||46;d=d.enableResize||!1;var c=document.createElement("div");c.id=e;c.classList.add(h);c.classList.add(pega.ui.panelConstants.ClassNames.BASE_DOCK);c.classList.add(pega.ui.panelConstants.ClassNames.DOCK_TRANSITION);document.body.appendChild(c);d&&(e=$("\x3cdiv class\x3d'panel-dock-resize-handle ui-resizable-handle ui-resizable-w'\x3e\x3c/div\x3e"),$(c).prepend(e),$(c).resizable({handles:{w:".panel-dock-resize-handle"},
resize:function(a,b){k.resize(b.size)},start:function(a,b){a=document.getElementsByTagName("iframe");for(b=0;b<a.length;b++)a[b].style.pointerEvents="none";pega.desktop.sendEvent(pega.ui.panelConstants.EventMessages.BASE_DOCK_STATE_CHANGED,!1);c.classList.remove(pega.ui.panelConstants.ClassNames.DOCK_TRANSITION)},stop:function(a,b){a=document.getElementsByTagName("iframe");for(b=0;b<a.length;b++)a[b].style.pointerEvents="auto";pega.desktop.sendEvent(pega.ui.panelConstants.EventMessages.BASE_DOCK_STATE_CHANGED,
!0);c.classList.add(pega.ui.panelConstants.ClassNames.DOCK_TRANSITION)}}));this.addPanel=function(a){if(b[a.getId()])return!1;b[a.getId()]=a;c.appendChild(a.getElement());return!0};this.destroyPanelHandler=function(a){a=a.id;if(!b[a])return!1;delete b[a];return!0};this.showHandler=function(a){a=a.id;if(!b[a])return!1;for(var d in b)a!==d&&b[d].hide();pega.desktop.sendEvent(pega.ui.panelConstants.EventMessages.BASE_DOCK_STATE_CHANGED,!0);c.classList.add(pega.ui.panelConstants.ClassNames.DOCK_SHOW);
return!0};this.hideHandler=function(a){if(!b[a.id])return!1;for(var d in b)if(b[d].isShowing())return!1;var e=function(){pega.desktop.sendEvent(pega.ui.panelConstants.EventMessages.BASE_DOCK_STATE_CHANGED,!1);c.removeEventListener("transitionend",e)};c.addEventListener("transitionend",e);c.classList.remove(pega.ui.panelConstants.ClassNames.DOCK_SHOW);return!0};this.isShowing=function(){for(var a in b)if(b[a].isShowing())return!0;return!1};this.isPanelInDock=function(a){return a in b};this.getDockElement=
function(){return c};this.doesPanelPushContent=function(a){return a in b?b[a].doesPushContent():!0};this.hide=function(){for(var a in b)b[a].hide()};this.resize=function(a){f=a.width;g=a.height};this.getWidth=function(){return f};this.getHeight=function(){return g};this.destroy=function(){c.parentNode.removeChild(c);pega.desktop.sendEvent(pega.ui.panelConstants.EventMessages.BASE_DOCK_STATE_CHANGED,!1);pega.desktop.cancelEventListener(pega.ui.panelConstants.EventMessages.PANEL_DESTROY,this.destroyPanelHandler);
pega.desktop.cancelEventListener(pega.ui.panelConstants.EventMessages.PANEL_SHOW,this.showHandler);pega.desktop.cancelEventListener(pega.ui.panelConstants.EventMessages.PANEL_HIDE,this.hideHandler)};pega.desktop.registerEventListener(pega.ui.panelConstants.EventMessages.PANEL_DESTROY,this.destroyPanelHandler);pega.desktop.registerEventListener(pega.ui.panelConstants.EventMessages.PANEL_SHOW,this.showHandler);pega.desktop.registerEventListener(pega.ui.panelConstants.EventMessages.PANEL_HIDE,this.hideHandler)};
pega.namespace("pega.ui.components.panelDocks");
pega.ui.components.panelDocks.Right=function(d,e,f){function c(){document.querySelector(pega.ui.panelConstants.HARNESS_SELECTOR).style.right="0px"}pega.ui.components.panelDocks.Base.call(this,d,e,f);pega.desktop.cancelEventListener(pega.ui.panelConstants.EventMessages.PANEL_SHOW,this.showHandler);pega.desktop.cancelEventListener(pega.ui.panelConstants.EventMessages.PANEL_HIDE,this.hideHandler);pega.desktop.cancelEventListener(pega.ui.panelConstants.EventMessages.PANEL_DESTROY,this.destroyPanelHandler);
var g=this.showHandler,h=this.hideHandler,k=this.resize,l=this.destroyPanelHandler,m=this.destroy,a=this;this.showHandler=function(b){a.isPanelInDock(b.id)&&(g(b),a.getDockElement().style.width=a.getWidth()+"px",a.doesPanelPushContent(b.id)?document.querySelector(pega.ui.panelConstants.HARNESS_SELECTOR).style.right=a.getWidth()+"px":c(),pega.desktop.sendEvent(pega.ui.panelConstants.EventMessages.HARNESS_RESIZE))};this.hideHandler=function(b){a.isPanelInDock(b.id)&&(h(b),a.isShowing()||(a.getDockElement().style.width=
"0px",a.doesPanelPushContent(b.id)&&c()))};this.destroyPanelHandler=function(b){l(b);a.isShowing()||(c(),a.getDockElement().style.width="0px")};this.destroy=function(){c();m()};this.resize=function(b){k(b);document.querySelector(pega.ui.panelConstants.HARNESS_SELECTOR).style.right=a.getWidth()+"px"};pega.desktop.registerEventListener(pega.ui.panelConstants.EventMessages.PANEL_SHOW,this.showHandler);pega.desktop.registerEventListener(pega.ui.panelConstants.EventMessages.PANEL_HIDE,this.hideHandler);
pega.desktop.registerEventListener(pega.ui.panelConstants.EventMessages.PANEL_DESTROY,this.destroyPanelHandler)};
pega.namespace("pega.ui.components.panelDocks");
pega.ui.components.panelDocks.Left=function(d,e,f){function c(){document.querySelector(pega.ui.panelConstants.HARNESS_SELECTOR).style.left="0px"}pega.ui.components.panelDocks.Base.call(this,d,e,f);pega.desktop.cancelEventListener(pega.ui.panelConstants.EventMessages.PANEL_SHOW,this.showHandler);pega.desktop.cancelEventListener(pega.ui.panelConstants.EventMessages.PANEL_HIDE,this.hideHandler);pega.desktop.cancelEventListener(pega.ui.panelConstants.EventMessages.PANEL_DESTROY,this.destroyPanelHandler);
var g=this.showHandler,h=this.hideHandler,k=this.resize,l=this.destroyPanelHandler,m=this.destroy,b=this;this.showHandler=function(a){b.isPanelInDock(a.id)&&(g(a),b.getDockElement().style.width=b.getWidth()+"px",b.doesPanelPushContent(a.id)?document.querySelector(pega.ui.panelConstants.HARNESS_SELECTOR).style.left=b.getWidth()+"px":c(),pega.desktop.sendEvent(pega.ui.panelConstants.EventMessages.INHERITED_DOCK_STATE_CHANGED))};this.hideHandler=function(a){b.isPanelInDock(a.id)&&(h(a),b.isShowing()||
(b.getDockElement().style.width="0px",b.doesPanelPushContent(a.id)&&c()))};this.destroyPanelHandler=function(a){l(a);b.isShowing()||(c(),b.getDockElement().style.width="0px")};this.destroy=function(a){c();m(a)};this.resize=function(a){k(a);document.querySelector(pega.ui.panelConstants.HARNESS_SELECTOR).style.left=b.getWidth()+"px"};pega.desktop.registerEventListener(pega.ui.panelConstants.EventMessages.PANEL_SHOW,this.showHandler);pega.desktop.registerEventListener(pega.ui.panelConstants.EventMessages.PANEL_HIDE,
this.hideHandler);pega.desktop.registerEventListener(pega.ui.panelConstants.EventMessages.PANEL_DESTROY,this.destroyPanelHandler)};
pega.namespace("pega.ui.components.panelDocks");
pega.ui.components.panelDocks.Top=function(d,e,f){function c(){document.querySelector(pega.ui.panelConstants.HARNESS_SELECTOR).style.top="0px"}pega.ui.components.panelDocks.Base.call(this,d,e,f);pega.desktop.cancelEventListener(pega.ui.panelConstants.EventMessages.PANEL_SHOW,this.showHandler);pega.desktop.cancelEventListener(pega.ui.panelConstants.EventMessages.PANEL_HIDE,this.hideHandler);pega.desktop.cancelEventListener(pega.ui.panelConstants.EventMessages.PANEL_DESTROY,this.destroyPanelHandler);
var g=this.showHandler,h=this.hideHandler,k=this.resize,l=this.destroyPanelHandler,m=this.destroy,a=this;this.showHandler=function(b){a.isPanelInDock(b.id)&&(g(b),a.getDockElement().style.width="100%",a.getDockElement().style.height=a.getHeight()+"px",a.doesPanelPushContent(b.id)?document.querySelector(pega.ui.panelConstants.HARNESS_SELECTOR).style.top=a.getHeight()+"px":c(),pega.desktop.sendEvent(pega.ui.panelConstants.EventMessages.INHERITED_DOCK_STATE_CHANGED))};this.hideHandler=function(b){a.isPanelInDock(b.id)&&
(h(b),a.isShowing()||(a.getDockElement().style.height="0",a.doesPanelPushContent(b.id)&&(c(),pega.desktop.sendEvent(pega.ui.panelConstants.EventMessages.INHERITED_DOCK_STATE_CHANGED))))};this.destroyPanelHandler=function(b){l(b);a.isShowing()||(c(),a.getDockElement().style.height="0px")};this.destroy=function(){c();m()};this.resize=function(b){k(b);document.querySelector(pega.ui.panelConstants.HARNESS_SELECTOR).style.top=a.getHeight()+"px"};pega.desktop.registerEventListener(pega.ui.panelConstants.EventMessages.PANEL_SHOW,
this.showHandler);pega.desktop.registerEventListener(pega.ui.panelConstants.EventMessages.PANEL_HIDE,this.hideHandler);pega.desktop.registerEventListener(pega.ui.panelConstants.EventMessages.PANEL_DESTROY,this.destroyPanelHandler)};
var $pNamespace=pega.namespace;$pNamespace("pega.ui");pega.ui.panelManager=(function(){var A={};var H={};var D=false;function F(){pega.desktop.registerEventListener(pega.ui.panelConstants.EventMessages.INHERITED_DOCK_STATE_CHANGED,E);pega.desktop.registerEventListener(pega.ui.panelConstants.EventMessages.BASE_DOCK_STATE_CHANGED,G);var L=document.querySelector(pega.ui.panelConstants.HARNESS_SELECTOR);L.classList.add(pega.ui.panelConstants.ClassNames.PANEL_MANAGER);for(var K in pega.ui.panelConstants.DOCK_LOCATION){var J=pega.ui.panelConstants.DOCK_LOCATION[K];var I=pega.ui.panelConstants.DOCK_CLASS[K];H[J]=pega.ui.PanelDockFactory.createPanelDock(J,I,null)}window.addEventListener("unload",B);D=true}function C(P){var L=document.querySelector(".top-panel-dock");var J=window.getComputedStyle(L);var Q=J.height;var N=J.top;var M=Q===""?0:parseInt(Q.substring(0,Q.indexOf("px")));var K=N===""?0:parseInt(N.substring(0,N.indexOf("px")));var O=M+K;var I=O===0?"":O+"px";P.getDockElement().style.top=I}function E(){C(H.LEFT);C(H.RIGHT);setTimeout(function(){C(H.LEFT);C(H.RIGHT)},250)}function G(I){var J=document.querySelector(pega.ui.panelConstants.HARNESS_SELECTOR);if(I){J.classList.add(pega.ui.panelConstants.ClassNames.MANAGER_TRANSITION)}else{J.classList.remove(pega.ui.panelConstants.ClassNames.MANAGER_TRANSITION)}}function B(){for(var J in pega.ui.panelConstants.DOCK_LOCATION){var I=pega.ui.panelConstants.DOCK_LOCATION[J];H[I].destroy()}pega.desktop.cancelEventListener(pega.ui.panelConstants.EventMessages.INHERITED_DOCK_STATE_CHANGED,E);pega.desktop.cancelEventListener(pega.ui.panelConstants.EventMessages.BASE_DOCK_STATE_CHANGED,G)}A.registerPanel=function(J,I){if(!D){F()}H[I].addPanel(J)};A.hideAllPanels=function(){for(var J in pega.ui.panelConstants.DOCK_LOCATION){var I=pega.ui.panelConstants.DOCK_LOCATION[J];if(H[I]!=null){H[I].hide()}}};return A}());pega.ui.PanelDockFactory=(function(){var A={};A.createPanelDock=function(D,C,B){switch(D){case pega.ui.panelConstants.DOCK_LOCATION.RIGHT:return new pega.ui.components.panelDocks.Right(D,C,B);case pega.ui.panelConstants.DOCK_LOCATION.LEFT:return new pega.ui.components.panelDocks.Left(D,C,B);case pega.ui.panelConstants.DOCK_LOCATION.TOP:return new pega.ui.components.panelDocks.Top(D,C,B);default:throw"Panel Dock type "+dockType+" is not supported"}};return A}());
pega.ui.components.Highlight=function(d){function l(){clearTimeout(m);m=setTimeout(function(){k.show(p)},25)}function q(a){"width"!=a.propertyName&&"height"!=a.propertyName||l()}function r(){clearTimeout(m);for(var a=pega.util.Dom.getFrames(window),b=0;b<a.length;b++)a[b].pega&&(a[b].removeEventListener("scroll",l,!0),a[b].removeEventListener("resize",l,!0),a[b].removeEventListener("transitionend",q,!0),a[b].pega.u.d.detachOnload(l))}var e=d||{},k=this,p,f,b=document.createElement("div");b.classList.add("highlight-base");
b.style.display="none";"string"==typeof e.container&&(d=e.container.split(" ").map(function(a){return"."+a}).join(""),e.container=document.querySelector(d));e.container?e.container.appendChild(b):document.body.appendChild(b);e.id&&(b.id=e.id);e["class"]&&(b.className+=" "+e["class"]);var n=document.createElement("div");n.classList.add("highlight-decoration");b.appendChild(n);e.hasMask&&(d=document.createElement("div"),d.classList.add("highlight-mask"),b.appendChild(d));var m;k.show=function(a){if(!b)return!1;
p=a;var h={};if(a){var h=0<$(a).closest("#modalWrapper").length,c=a.ownerDocument.defaultView,d=a.getBoundingClientRect(),g={};g.left=d.left+$(c).scrollLeft();for(g.top=d.top+$(c).scrollTop();c;)if(c!=window&&c.parent)d=c.frameElement.getBoundingClientRect(),g.left+=d.left,g.top+=d.top,a.ownerDocument.defaultView!=c||h||(g.top-=$(c).scrollTop(),g.left-=$(c).scrollLeft()),c=c.parent;else break;h=g;h.width=a.scrollWidth;h.height=a.scrollHeight;!0===e.useOffsetSize&&(h.width=a.offsetWidth,h.height=a.offsetHeight)}else b.classList.add("highlight-centered");
if(!k.isShowing())for(a=pega.util.Dom.getFrames(window),c=0;c<a.length;c++)a[c].pega&&(a[c].addEventListener("scroll",l,!0),a[c].addEventListener("resize",l,!0),a[c].addEventListener("transitionend",q,!0),a[c].pega.u.d.attachOnload(l,!0));a=b;c=h;a.style.width=c.width+"px";a.style.height=c.height+"px";a.style.left=c.left+"px";a.style.top=c.top+"px";f&&(f.style.top="",21>=c.top&&(f.style.top="0px"));b.style.display=0!==h.width&&0!==h.height?"block":"none"};k.hide=function(){b.style.display="none";
r()};k.isShowing=function(){return b?"block"==b.style.display:!1};k.destroy=function(){r();b&&b.parentElement&&b.parentElement.removeChild(b);e=n=f=b=null};k.getElement=function(){return b};k.setInfoBarContent=function(a){f||(f=document.createElement("div"),f.classList.add("highlight-infobar"),b.appendChild(f));a.outerHTML?(f.innerHTML="",f.appendChild(a)):f.innerHTML=a}};
pega.ui.roboticAutomationAction=pega.ui.roboticAutomationAction||function(){var d={},c={clientAction:function(a,b){a=c.prepareRequest(a);successHandler=function(a){c.successHandlerInner(a,b)};errorHandler=function(a){c.errorHandlerInner(a,b)};pega.ui.roboticAutomationApi.invokeAutomation("datapage",a,successHandler,errorHandler,"false","")},prepareRequest:function(a){var b={};if(a&&a.response){a=a.response;a.pxRDAAutomationId&&(b.automationName=a.pxRDAAutomationId);a.pxTimeout&&(b.timeout=1E3*a.pxTimeout);
if(a.pxAutomationMetadata){if(a.pxAutomationMetadata.pyRDAURL){var c=a.pxAutomationMetadata.pyRDAURL;c.startsWith("http://")||c.startsWith("https://")?b.automationURL=c+"/api/v1/runtime":b.automationURL="https://"+c+"/api/v1/runtime"}a.pxAutomationMetadata.pyJWTString&&(b.jwtString=a.pxAutomationMetadata.pyJWTString)}a.pyRequestParameters&&(a=a.pyRequestParameters,delete a.pxObjClass,b.payload=JSON.stringify(a))}return b}};d.registerClientAction=function(){pega.ui.MessagingManager&&pega.ui.MessagingManager.registerClientAction("executeRDA",
c.clientAction)};d.unregisterClientAction=function(){pega.ui.MessagingManager&&pega.ui.MessagingManager.unregisterClientAction("executeRDA")};c.successHandlerInner=function(a,b){b(a.ModifiedFields,null)};c.errorHandlerInner=function(a,b){b(null,a)};pega.u.d.attachOnload(function(){d.registerClientAction()},!0);pega.u.d.attachOnUnload(function(){d.unregisterClientAction()},!1);d.testObject=c;return d}();
pega.namespace("pega.ui.components");pega.ui.components.Tree=function(F,A){var H=this;var I={ENABLED:"enabled",DISABLED:"disabled"};if(!F){throw new Error("Element is a required parameter")}if(!A){A={}}var G={};var E=F;E.classList.add("tree-component");G.readyCallback=A.readyCallback||function(){};G.selectCallback=A.selectCallback||function(){};G.hoverCallback=A.hoverCallback||function(){};G.dehoverCallback=A.dehoverCallback||function(){};G.wholeRowHighlight=A.wholeRowHighlight||false;if(A.icons==null){A.icons=true}G.icons=A.icons;var B=false;var J=null;var K="";var C=I.ENABLED;function D(){$(E).on("ready.jstree",function(M,L){if(C==I.DISABLED){H.disable()}G.readyCallback()});$(E).on("hover_node.jstree",function(M,L){if(B||C==I.DISABLED){return false}var N;if(L.node.original&&L.node.original.lookup){N=L.node.original.lookup}else{N=L.node.id}G.hoverCallback(N)});$(E).on("dehover_node.jstree",function(M,L){if(B||C==I.DISABLED){return false}G.dehoverCallback()});$(E).on("select_node.jstree",function(b,d){if(C==I.DISABLED){return false}var Q;if(d.node.original&&d.node.original.lookup){Q=d.node.original.lookup}else{Q=d.node.id}var a=$(E);var X=E.querySelector("#"+Q);var L=$(X).offset();var M=$(X.querySelector("a.jstree-anchor.jstree-clicked")).outerWidth();M+=$(X.querySelector("i.jstree-icon.jstree-ocl")).outerWidth();M+=18;var S=a.css("position");a.css({position:"relative"});var U=a.scrollTop();var V=X.offsetTop;var N=(V<U||V>(U+a.height()-40));a.css({position:S});var c=$(window).width()-a.width();var O=L.left-c;var P=O+M;var Z=(O<0||P>a.width());var R=V-(a.height()/3);var T=Math.max(0,a.scrollLeft()+O-a.width()/3);var Y=P+a.scrollLeft()-T;if(Y>a.width()){T=T+(Y-a.width());var W=O+a.scrollLeft()-T;if(W<0){T=a.scrollLeft()+O}}if(N&&Z){a.animate({scrollTop:(R),scrollLeft:(T)},1000)}else{if(N){a.animate({scrollTop:(R)},1000)}else{if(Z){a.animate({scrollLeft:(T+30)},1000)}}}if(B){return false}G.selectCallback(Q)})}this.populate=function(L){this.destroy();$(E).jstree({core:{multiple:false,data:L,themes:{icons:G.icons}},plugins:[G.wholeRowHighlight?"wholerow":""]});J=$.jstree.reference(E);D()};this.destroy=function(){$(E).jstree("destroy")};this.selectNode=function(M,L){B=L;J.deselect_all();J.select_node(M);B=false};this.hoverNode=function(N,L){B=L;var M=!(J.hover_node(N)===false);if(M&&K!=""&&K!=N){this.dehoverNode(K,L)}K=N;B=false};this.dehoverNode=function(M,L){B=L;J.dehover_node(M);B=false;K=""};this.dehoverAll=function(L){this.dehoverNode(K,L)};this.getElement=function(){return E};this.enable=function(){E.classList.remove("tree-component-readonly");C=I.ENABLED};this.disable=function(){E.classList.add("tree-component-readonly");C=I.DISABLED}};
var domUtils={firstBaseRefElement:null,getOuterHeight:function(a,b){var c=a.offsetHeight;"scroll"==b&&(c=a.scrollHeight);a=getComputedStyle(a);c+=parseInt(a.marginTop)+parseInt(a.marginBottom);return c},isDisplayNone:function(){return"none"!=$(this).css("display")},getSectionByName:function(a,b,c){"undefined"==typeof b&&(b="");if(c=pega.util.Dom.getElementsById("RULE_KEY",c,"div")){for(var d=c.length,e=-1,f=0;f<d;f++)if("MAIN_RULE"==c[f].getAttribute("node_type")){if(c[f].parentNode&&"RULE_KEY"==
c[f].parentNode.id&&c[f].parentNode.getAttribute("node_name")==a&&this.getRelativeBaseRef(c[f])==b){e=f;break}if(c[f].getAttribute("node_name")==a){if(this.getRelativeBaseRef(c[f])==b){e=f;break}-1==e&&(e=f)}}if(-1<e)return c[e]}return null},getSectionsByName:function(a,b){var c=[];if(b=pega.util.Dom.getElementsById("RULE_KEY",b,"div"))for(var d=b.length,e=0;e<d;e++)"MAIN_RULE"==b[e].getAttribute("node_type")&&b[e].getAttribute("node_name")==a&&c.push(b[e]);return 0<c.length?c:null},findParentNamed:function(a,
b){for(a=a.parentNode;a&&!a.getElementById&&"HARNESS_CONTENT"!=a.id&&"PEGA_HARNESS"!=a.id&&!a.getAttribute("data-mdc-recordid");){if(a.getAttribute("NAME")==b)return a;a=a.parentNode}return null},findParentWithAtrribute:function(a,b){for(a=a.parentNode;a&&!a.getElementById;){if(a.getAttribute(b))return a;a=a.parentNode}return null},getRelativeBaseRef:function(a){a||(a=event.srcElement);var b=a.BASE_REF?a.BASE_REF:"";if(""==b)var c=this.findParentNamed(a,"BASE_REF"),b=c?c.getAttribute("BASE_REF"):
"";return c&&""==b?this.getRelativeBaseRef(c):b},getPanelDiv:function(){for(var a=window.frameElement.parentNode.parentNode;a&&a!=window.parent.document.body;){var b=a.id;if("PEGA_LU_C"==b||"PEGA_LU_B"==b||"PEGA_LU_L"==b||"PEGA_LU_T"==b||"PEGA_LU_R"==b)return a;a=a.parentNode}},getRowAndEntryHandle:function(a){var b=null,c=null;if(a){var d;"undefined"!=typeof Grids&&(d=Grids.getElementsGrid(a));if(d){var e;pega.util.Dom.isAncestor(d.leftBodyUL,a)?e=d.leftBodyUL:pega.util.Dom.isAncestor(d.rightBodyTbl,
a)&&(e=d.rightBodyTbl);if(e){e=d.findCell(null,e,a);var f;e&&(f=d.getRowIndex(e));-1!=f&&(b=d.getEntryHandle(f),c=d.getRightRow(f))}}a=pega.u.d.getRepeatRow(a,!0);c&&a?pega.util.Dom.isAncestor(c,a)&&(c=a):a&&(c=a);c&&(b=c.getAttribute("hPref")||c.id)}return{row:c,rowEntryHandle:b}},getEnclosingSection:function(a){for(;"RULE_KEY"!=a.id;){a=a.parentNode;if(a.getElementById)return null;if("RULE_KEY"==a.id&&("MAIN_RULE"==a.getAttribute("node_type")||"SECTION"!=a.getAttribute("node_type")))break}return"SECTION"==
a.getAttribute("node_type")?this.getIncludedSection(a):a},getIncludedSection:function(a){if(a=pega.util.Dom.getElementsById("RULE_KEY",a,"div"))for(var b=a.length,c=0;c<b;c++){if("MAIN_RULE"==a[c].getAttribute("node_type"))return a[c]}else return null},getBaseRef:function(a,b,c){var d="";a||(a=pega.util.Event.getTarget(b));if("RULE_KEY"==a.id&&"MAIN_RULE"==a.getAttribute("node_type")&&a.getAttribute("BASE_REF"))c=a;else if(b=null,c&&(b=c.gridDiv),c=this.findParentNamed(a,"BASE_REF"),b&&pega.util.Dom.isAncestor(c,
b))return a.getAttribute("sec_baseref")&&a.setAttribute("sec_baseref",""),"";b=c;null==c&&pega.util.Event.isIE&&a.tagName&&(a=document.querySelectorAll(a.tagName.toLowerCase()+"[name\x3d'"+a.getAttribute("name")+"']"),1==a.length&&(a=a[0],c=this.findParentNamed(a,"BASE_REF")));if(b&&b.getAttribute("FULL_BASE_REF")){a=b.getAttribute("FULL_BASE_REF");var e=b.getAttribute("BASE_REF");if(e&&0!=e.length&&-1!==a.indexOf(e,a.length-e.length))return a}for(;null!=c&&(d=c.getAttribute("BASE_REF")+d,""==c.getAttribute("BASE_REF")||
0==c.getAttribute("BASE_REF").indexOf("."));)c=this.findParentNamed(c,"BASE_REF");0==d.indexOf(".")&&(d=SafeURL_createFromURL(pega.u.d.url).get("pzPrimaryPageName")+d);b&&null!=b&&b.getAttribute("FULL_BASE_REF")!==d&&b.setAttribute("FULL_BASE_REF",d);return d},getTemplatePath:function(a){var b="";if(!a)return"";var c=a.getAttribute("data-rel-path");if(null==c||"undefined"==typeof c)a=this.findParentWithAtrribute(a,"data-rel-path");if(null!=a){var d=a;if(d&&d.getAttribute("FULL_TEMPLATE_PATH"))b=d.getAttribute("FULL_TEMPLATE_PATH");
else{for(;null!=d;){c=d.getAttribute("data-rel-path");if(null!=c&&"undefined"!=typeof c)b=c+b;else{b="";break}d=this.findParentWithAtrribute(d,"data-rel-path")}""!=b&&a.setAttribute("FULL_TEMPLATE_PATH",b)}}return b},findParentTable:function(a){return this.findParentWithTagName(a,"TABLE")},findParentAnchor:function(a){return this.findParentWithTagName(a,"A")},findParentDiv:function(a){return this.findParentWithTagName(a,"DIV")},findParentWithTagName:function(a,b){for(a=a.parentNode;null!=a&&a.tagName!=
b;)a=a.parentNode;return a},calcAndAttachSectionBaseRef:function(a,b){var c="",d;d=b?pega.u.d.getSectionDiv(a):pega.u.d.getIncludedSection(a);if(!d)return{sectionBaseRef:"nosection"};var e=a.getAttribute("sec_baseRef"),f=!1;e?c="PEGA_NA"==e?"":e:(e=null,"undefined"!=typeof Grids&&(e=Grids.getElementsGrid(a)),e&&""==pega.u.d.getBaseRef(a,null,e)?f=!0:c=pega.u.d.getBaseRef(d),b&&(""==c&&(e=pega.u.d.getRowAndEntryHandle(a).rowEntryHandle,null!=e&&"undefined"!=typeof e&&(c=pega.u.property.toReference(e))),
c?"."==c.charAt(0)&&(c=SafeURL_createFromURL(pega.u.d.url).get("pzPrimaryPageName")+c):c=SafeURL_createFromURL(pega.u.d.url).get("pzPrimaryPageName")),c?a.setAttribute("sec_baseRef",c):a.setAttribute("sec_baseRef","PEGA_NA"),f&&a.setAttribute("sec_baseRef",""));a=d.getAttribute("BASE_REF");f=c;a&&!b&&(f=c.replace(new RegExp(a+"$"),""));return{includedSec:d,sectionBaseRef:c,baseRef4ConditionEval:f}},getSourceIndex:function(a,b){null==b&&(b=document);b=b.getElementsByTagName("*");for(var c=0;c<b.length;c++)if(b[c]==
a)return c},findParentTD:function(a){for(a=a.parentNode;!a.getElementById;){if("TD"==a.tagName)return a;a=a.parentNode}return null},showErrors:function(){var a;a=pega.util.Dom.getElementsById("PegaRULESErrorFlag",document);var b=0;if(a)var b=a.length,c=pega.u.d.shadeError,d=pega.u.d.expandIt;for(var e=0;e<b;e++){var f=a[e].parentNode;for("ERRORTEXT"==pega.u.d.fieldErrorType&&c(f);!f.getElementById;){if("none"==f.style.display){var g=pega.util.Dom.getElementsById("EXPAND-INNERDIV",f);null!=g&&(null!=
g.length&&(g=g[0]),"none"==pega.util.Dom.getStyle(g,"display")&&"function"===typeof d&&d(f))}f=f.parentNode}}if("function"!=typeof h_displayErrorTable&&"NONE"!=pega.u.d.formErrorType){if("true"!=pega.u.d.alwaysShowFormLevelErrors&&0<b)pega.u.d.hideErrorBox();else try{var k=pega.ctx.dom.getElementById("ERRORMESSAGES_ALL");null!=k&&pega.u.d.displayFormErrors(k.innerHTML)}catch(l){}"function"===typeof markTabErrors&&pega.u.d.markTabErrors()}},hideErrorBox:function(){var a=pega.util.Dom.getElementsById("ERRORTABLE",
document),b=0;a&&(b=a.length);if(0<b)for(var c=0;c<b;c++)pega.util.Dom.setStyle(a[c],"display","none");if("FLOAT"==pega.u.d.formErrorType&&(a=pega.util.Dom.getElementsById("ErrorTableSpacer",document),b=0,a&&(b=a.length),0<b))for(c=0;c<b;c++)pega.util.Dom.setStyle(a[c],"display","none")},shadeError:function(a){for(var b,c=a.id.substring(0,a.id.lastIndexOf("Error")),d=pega.u.d.addClass,e=pega.util.Dom.getElementsByName;!a.getElementById;)if(a=a.parentNode,b=e(c,a)){a=b.length;for(c=0;c<a;c++)if("hidden"!=
b[c].type){var e=pega.util.Dom.getFirstChild(b[c].parentNode),f=b[c].parentNode.nodeName.toLowerCase();"span"!=f&&"td"!=f||!(-1<e.className.indexOf("textAreaStyle")||-1<e.className.indexOf("TextAreaEC"))?d(b[c],"errorShade"):"td"!=f?d(b[c].parentNode,"errorShade"):d(pega.util.Dom.getAncestorByTagName(b[c],"TABLE"),"errorShade")}break}},addClass:function(a,b){pega.util.Dom.addClass(a,b)},removeClass:function(a,b){pega.util.Dom.removeClass(a,b)},doButtonAction:function(a,b){for(a=0;a<document.getElementsByTagName("Button").length;a++)"iconClose"==
document.getElementsByTagName("Button")[a].className&&("hide"==b?document.getElementsByTagName("Button")[a].style.display="none":"show"==b&&(document.getElementsByTagName("Button")[a].style.display="block"))},doButtonMouseOver:function(a){a=void 0==a?window.event:a;a=pega.util.Event.getTarget(a);try{a.className="_on"}catch(b){}},doButtonMouseOut:function(a){a=void 0==a?window.event:a;a=pega.util.Event.getTarget(a);try{a.className=a.buttonClass}catch(b){}},findParent:function(a,b){for(a=a.parentNode;null!=
a;){if(a.id==b)return a;a=a.parentNode}return null},moveStyles:function(){try{for(var a=parent.frames.document.getElementsByTagName("LINK"),b=document.getElementsByTagName("HEAD").item(0),c=0;c<a.length;c++){for(var d=a.item(c).href,e=document.getElementsByTagName("LINK"),f=e.length,g=!1,k=0;k<f;k++)e.item(k).href==d&&(g=!0);if(!g){var l=document.createElement("LINK");l.rel="Stylesheet";l.type="text/css";l.href=d;b.appendChild(l)}}}catch(h){}},getFirstInputElement:function(a,b){if(void 0!=b||void 0!=
a&&"pyActionArea"!=a)return b=void 0==b?document:b,b=pega.util.Dom.getElementsById(void 0==a?"PEGA_HARNESS":a,b),a=null,b&&(b=b[0])&&(a=this.parseChildNodes(b)),null==a?void 0:a;b=document.forms[0];a=[];b?a=b.getElementsByTagName("*"):(b=document.getElementsByTagName("BODY")[0],b.hasAttribute("data-harness-id")&&(b=b.getElementsByClassName("screen-layout")[0])&&(b=b.getElementsByTagName("main")[0])&&(a=b.getElementsByTagName("*")));b=a.length;for(var c=0;c<b;c++){var d=a[c];if(null!=d&&"hidden"!=
d.type&&d.style&&"none"!=d.style.display&&0<d.offsetHeight&&1!=d.disabled&&(1!=d.readOnly||d.hasAttribute("data-editable"))&&("INPUT"==d.nodeName||"SELECT"==d.nodeName||"TEXTAREA"==d.nodeName||"A"==d.nodeName&&"false"!==d.getAttribute("data-focusable")||pega.u&&pega.u.d&&pega.u.d.isAccessible&&"DIV"==d.nodeName&&"0"==d.getAttribute("tabindex"))&&"ActionOptions"!=d.id)return d}},parseChildNodes:function(a){if(a.hasChildNodes())for(var b=a.getElementsByTagName("*"),c=0;c<b.length;c++){if(a=b[c],null!=
a&&("INPUT"==a.nodeName||"SELECT"==a.nodeName||"TEXTAREA"==a.nodeName)&&"hidden"!=a.type&&"none"!=a.style.display)return a}else if("INPUT"==a.nodeName&&(null!=a.type&&"radio"==a.type&&a.checked||null!=a.type&&"radio"!=a.type))return a},getScrollObj:function(a){a=a.parentNode;for(var b=window,c=0;a;){var d;d=window.getComputedStyle?window.getComputedStyle(a,null).overflow||a.style.overflow:a.currentStyle?a.currentStyle.overflow:a.style.overflow||0;if(a.offsetHeight<a.scrollHeight&&"hidden"!=d&&"visible"!=
d)return[a,b,c];a=a.parentNode;d=window.getComputedStyle?window.getComputedStyle(a,null).overflow||a.style.overflow:a.currentStyle?a.currentStyle.overflow:a.style.overflow||0;if(a==b.document.body)try{b.frameElement&&(d=window.getComputedStyle?window.getComputedStyle(b.frameElement,null).overflow||b.frameElement.style.overflow:b.frameElement.currentStyle?b.frameElement.currentStyle.overflow:b.frameElement.style.overflow||0);if(a.offsetHeight<a.scrollHeight&&"hidden"!=d&&"visible"!=d)return[a,b,c];
if(b.frameElement)a=b.frameElement,c+=getAbsoluteTop(a),b=b.parent;else return null}catch(e){return[b.document.body,b,c]}}},getInputElements:function(){for(var a=[],b=["input","select","textarea"],c=0;c<b.length;c++)for(var d=document.getElementsByTagName(b[c]),e=0;e<d.length;e++)"hidden"!=d[e].type&&a.push(d[e]);return a},getOtherElements:function(){for(var a=[],b=["button","a"],c=0;c<b.length;c++)for(var d=document.getElementsByTagName(b[c]),e=0;e<d.length;e++)a.push(d[e]);return a},getHarnessElements:function(a,
b,c,d){var e=[];a&&(e=e.concat(this.getInputElements()));b&&(e=e.concat(this.getOtherElements()));c&&(d&&d.length?(a=this.harnessElements.filter(function(a){return-1!=d.indexOf(a.sectionID)}),e=e.concat(a)):e=e.concat(this.harnessElements));return e},getFirstChildObj:function(a){for(a=a.firstChild;null!=a;)if(3==a.nodeType||"input"==a.tagName.toLowerCase()&&"hidden"==a.type)a=a.nextSibling;else break;return a},formatNumberAsPerLocale:function(a){if(!a||""==a)return a;var b=window.decimal_separator;
pega.u.d.Locale.replace("_","-");if("."!==b){var c=a.indexOf(".");if(0<=c){var d=a.substring(0,c);a=a.substring(c+1);d=d.replace(/\D/g,"");a=a.replace(/\D/g,"");b=d+b+a}else b=a.replace(/\D/g,"");return b}return a},formatNumberWithSeparators:function(a){if(!a||""==a)return a;var b=window.decimal_separator,c=window.numeric_separator,d=a.indexOf(b),e=!1;0<=a.indexOf("-")&&(e=!0);if(-1!=d){var f=a.slice(0,d);a=a.slice(d+1);f=f.replace(/\D/g,"");f=f.replace(/\B(?=(\d{3})+(?!\d))/g,c);a=a.replace(/\D/g,
"");b=f+b+a}else a=a.replace(/\D/g,""),b=a.replace(/\B(?=(\d{3})+(?!\d))/g,c);e&&(b="-"+b);return b},formatNumberWithOutSeparators:function(a){if(!a||""==a)return a;var b=window.decimal_separator,c=a.indexOf(b),d=!1;0<=a.indexOf("-")&&(d=!0);if(-1!=c){var e=a.slice(0,c);a=a.slice(c+1);e=e.replace(/\D/g,"");a=a.replace(/\D/g,"");b=e+b+a}else b=a=a.replace(/\D/g,"");d&&(b="-"+b);return b},setProperty:function(a,b,c,d){var e;e=c?pega.u.property.toHandle(a,c):pega.u.property.toHandle(a);c=pega.ctx.dom.getElementsByName(e);
try{c||-1==navigator.userAgent.toLowerCase().indexOf("outlook")||(c=document.getElementsByName(e))}catch(h){}e=!1;if(1<c.length)for(var f=0;f<c.length;f++)if(c[f].getAttribute("data-ac-numeric-prop")&&"true"===c[f].getAttribute("data-ac-numeric-prop")){e=!0;break}if(e)for(f=0;f<c.length;f++)c[f].getAttribute("data-ac-numeric-prop")||c[f].setAttribute("data-ac-numeric-prop",!0);var g;if(c)for(e=0;e<c.length;e++)if("complex"==c[e].type)c[e].element.setProperty?c[e].element.setProperty(a,b):c[e].value=
b,pega.util.Event.isSafari?(f=document.createEvent("MouseEvents"),f.initMouseEvent("mousedown",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),f.preventDefault(),c[e].dispatchEvent(f)):pega.util.Event.fireEvent(c[e],"onmousedown"),pega.u.d.fromSetValue=!0,pega.env.ua.ie?pega.util.Event.fireEvent(c[e],"onfocusin"):pega.util.Event.fireEvent(c[e],"onfocus"),pega.control.actionSequencer.fireTopPriorityEvent(c[e],"change"),pega.util.Event.fireEvent(c[e],"onblur"),pega.env.ua.ie&&pega.util.Event.fireEvent(c[e],
"onfocusout"),pega.u.d.fromSetValue=!1;else{var k=c[e].type;if(!$(c[e]).siblings(".checkbox")||!$(c[e]).siblings("input[type\x3d'checkbox']").get(0)||$(c[e]).siblings("input[type\x3d'checkbox']").get(0).getAttribute("name")!=c[e].getAttribute("name"))if("checkbox"==k)f=c[e].checked,(!f||0!=b&&"false"!=b)&&(f||1!=b&&"true"!=b)||pega.control.actionSequencer.fireTopPriorityEvent(c[e],"click");else if("textarea"==k&&c[e].id.startsWith("PEGACKEDITOR"))CKEDITOR.instances[c[e].id].setData(b),pega.control.actionSequencer.fireTopPriorityEvent(c[e],
"change");else{if("radio"==k)b==c[e].value?(c[e].checked=!0,g=c[e]):c[e].checked=!1;else{var l=c[e].getAttribute&&c[e].getAttribute("data-formatting")&&document.activeElement!=c[e];l&&(c[e].getAttribute("data-format-method")||""==c[e].getAttribute("data-template")?(c[e].setAttribute("data-formatting","yes"),c[e].setAttribute("data-display-value",c[e].value)):c[e].setAttribute("data-value",b));d&&(b=pega.u.d.CalendarUtil.convertDateTimeBtwnTimezones(b,d,c[e].getAttribute("data-custom-timezone")||pega.u.d.TimeZone));
"true"===c[e].getAttribute("data-ac-numeric-prop")?pega.control.PlaceHolder.setValue(c[e],this.formatNumberAsPerLocale(b)):pega.control.PlaceHolder.setValue(c[e],b);d&&"hidden"==c[e].type&&c[e].setAttribute("data-value",b);pega.util.Event.isSafari?(f=document.createEvent("MouseEvents"),f.initMouseEvent("mousedown",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),f.preventDefault(),c[e].dispatchEvent(f)):pega.util.Event.fireEvent(c[e],"onmousedown")}pega.u.d.fromSetValue=!0;if(!g||g&&c[e].checked)document.activeElement!=
c[e]&&(l?pega.util.Event.fireEvent(c[e],"onfocus"):pega.env.ua.ie&&pega.util.Event.fireEvent(c[e],"onfocusin")),("radio"!==k||g)&&pega.control.actionSequencer.fireTopPriorityEvent(c[e],"change"),document.activeElement!=c[e]&&(l?pega.util.Event.fireEvent(c[e],"onblur"):pega.env.ua.ie&&pega.util.Event.fireEvent(c[e],"onfocusout")),pega.u.d.fromSetValue=!1}}},getProperty:function(a,b){var c;c=b?pega.u.property.toHandle(a,b):pega.u.property.toHandle(a);if(b=pega.ctx.dom.getElementsByName(c))for(var d=
0;d<b.length;d++)if("complex"==b[d].type)if(b[d].element.getProperty)b[d].element.getProperty(a);else return b[d].value;else{if(b[d].type&&"TEXTAREA"==b[d].type.toUpperCase()&&b[d].id&&-1!=b[d].id.indexOf("PEGAEDITOR")){a=pega.u.d.getHarnessElements(!1,!1,!0);for(var e=a.length,f=0;f<e;f++){var g=a[f].element;if(g&&1==g.isRichTextEditor&&void 0!=g.myEditor&&g.myEditor.get("element").name==c)return g.myEditor.getEditorHTML()}}if(b[d].name&&b[d].name==c&&b[d].type&&"TEXTAREA"==b[d].type.toUpperCase()&&
b[d].id&&-1!=b[d].id.indexOf("PEGACKEDITOR")&&CKEDITOR&&CKEDITOR.instances[b[d].id]&&CKEDITOR.instances[b[d].id].getData)return CKEDITOR.instances[b[d].id].getData();for(c=0;c<b.length;c++){a=b[c].type;if("checkbox"==a)return b[c].checked?!0:!1;if("radio"==a&&b[c].checked)return b[c].value}return"radio"===b[d].type?"":pega.control.PlaceHolder.getValue(b[d])}},getDOMElementValue:function(a){var b="";if("checkbox"==a.type)b=a.checked;else if("radio"==a.type){var c=document.getElementsByName(a.name);
c&&0===c.length&&(c=a.ownerDocument.getElementsByName(a.name));for(a=0;a<c.length;a++)if(c[a].checked){b=c[a].value;break}}else if("select"==a.tagName.toLowerCase()){if(0<a.length&&-1!=a.selectedIndex){var b=a.options[a.selectedIndex],c=pega.util.Dom.getInnerText(b),d=a.options[a.selectedIndex].getAttributeNode("value");null!=d&&d.specified&&(c=b.value);b=c}!b&&a.getAttribute("DSSource")&&(0==a.selectedIndex&&1<a.options.length||(b=a.getAttribute("DSDefault")))}else b=pega.control.PlaceHolder.getValue(a);
return b},getContainerSectionElement:function(a){if(null==a||void 0==a)return null;a=document.getElementById(a);return pega.u.d.getSectionId(pega.u.d.getSectionDiv(a))},isPanelSetHarness:function(){return this.harnessType&&"layout"==this.harnessType},getSectionIds:function(a){if(!a)return[];0<a.length&&(a=a[0]);var b=pega.util.Dom.getElementsByAttribute("node_type","MAIN_RULE","DIV",a),c=b.length,d=[];d.push(a.getAttribute("uniqueID"));for(a=0;a<c;a++){var e=b[a],f=b[a].getAttribute("uniqueID");e&&
"RULE_KEY"==e.id&&f&&""!=f&&d.push(f)}return d},doPrintDiv:function(a){var b=null,c=null,d=null,e="",f=[],g=[],k,l;if(null!=a){try{b=document.getElementById(a).innerHTML,c=document.getElementsByTagName("LINK"),d=document.getElementsByTagName("SCRIPT"),e=document.getElementsByTagName("INPUT")}catch(n){b=[];b["$(strDiv)"]=a;alert(getLocalString("pyMessageLabel","Function doPrintDiv($(strDiv)) Error Element $(strDiv) does not exist.",b));return}a=window.open("","thePrintWindow","toolbar\x3dno,scrollbars\x3dyes").document;
var h="";a.write("\x3chtml\x3e\x3chead\x3e");for(m=0;m<e.length;m++)"hidden"==e[m].type&&"EXPAND-INDICATOR"!=e[m].id&&(g.push(e[m].outerHTML),l=g.join(" "));a.write(l);for(var m=0;m<c.length;m++)f.push("\x3clink href\x3d'"+c[m].href+"' rel\x3d'stylesheet' type\x3d'text/css'\x3e"),k=f.join(" ");c=d.length;for(e=0;e<c;e++)""!=d[e].src?(f=a.getElementsByTagName("head")[0],g=a.createElement("script"),g.type="text/javascript",g.src=d[e].src):(f=a.getElementsByTagName("head")[0],g=a.createElement("script"),
g.type="text/javascript",g.text=d[e].innerHTML),f.appendChild(g);a.write("\x3cSCRIPT\x3evar gClosePrintWindow\x3dtrue; var printView\x3dtrue;\x3c/SCRIPT\x3e");a.write(k);a.write("\x3c/head\x3e");h=h+'\x3cbody class\x3d"forPrinting" onafterprint\x3d"window.opener" onload\x3d""\x3e\x3cdiv style\x3d"position:absolute; width:100%; height:100%"\x3e'+b+'\x3c/div\x3e\x3cdiv style\x3d"position:absolute; width:100%; height:100%; z-index:1000"\x3e';h+="\x3c/div\x3e";h+="\x3cscript\x3e";h+='var arrBodyElements \x3d document.getElementsByTagName("body");';
h+='if ( typeof(arrBodyElements ) !\x3d "undefined") arrBodyElements[0].onload\x3d"";';h+="\x3c/script\x3e";h+="\x3cSCRIPT src\x3d'harness_print.js' type\x3d'text/javascript'\x3e\x3c/script\x3e";h+="\x3c/body\x3e";h+="\x3c/html\x3e";a.write(h);a.close()}},fireButtonClick:function(a){a=a.getElementsByTagName("BUTTON");null!=a[0].onclick&&pega.util.Event.fireEvent(a[0],"click")},getCoordinates:function(a){for(var b=0,c=0,d=0;a&&"unknown"!=typeof a.offsetParent;){if(pega.u.d&&pega.u.d.modalDialog&&pega.u.d.modalDialog.body){if(a.id==
pega.u.d.modalDialog.body.id)break;d=a.offsetTop}var e="";a.offsetParent&&a.offsetParent.offsetParent&&(e=a.offsetParent.offsetParent.id);if("PEGA_LU_L"==e||"PEGA_LU_R"==e||"PEGA_LU_C"==e||"PEGA_LU_T"==e||"PEGA_LU_B"==e)break;b+=a.offsetLeft;c+=a.offsetTop;a=a.offsetParent}pega.u.d.inStandardsMode||(c-=d);return[b,c]},getReadOnlyValue:function(a,b){var c=pega.ui.HarnessContextMgr;void 0!=a&&a||void 0!=b||b||(a=pega.util.Event.getEvent(a));for(var d=b;d&&d.getAttribute;){if("true"==d.getAttribute("readonly"))return"-1";
if("false"==d.getAttribute("readonly"))return"0";d=d.parentNode}if("ACTION"==c.get("strHarnessMode")||document.getElementById("HarnessMode")&&"ACTION"==document.getElementById("HarnessMode").value){var d=pega.util.Dom.getElementsById("pyActionArea"),e=window.frames.actionIFrame,f=c.get("bActionIframe"),g=!1;if(e&&null!=e||f)g=!0;if(d||!g){for(void 0!=b&&b||!a||(b=pega.util.Event.getTarget(a));b;){if("pyActionArea"==b.id||"pyFlowActionHTML"==b.id)return"0";b=b.parentNode}return"-1"}}return c.get("bReadOnly")},
getGroupElementValue:function(a){var b=pega.u.d.getDOMElementValue(a[0]);1<a.length&&"checkbox"==a[1].type&&(b=pega.u.d.getDOMElementValue(a[1]));return b},getCaretPosition:function(a){try{if(void 0!=a&&/^(text|textarea|number|password|email|tel|url)$/.test(a.type)){if("selectionStart"in a)return a.selectionStart||document.getElementsByName(a.name)[0].selectionStart;if(document.selection){var b=document.selection.createRange();if(null==b)return 0;if(void 0!=a.createTextRange){var c,d;try{c=a.createTextRange()}catch(e){a=
document.getElementsByName(a.name)[0],c=a.createTextRange()}d=c.duplicate();c.moveToBookmark(b.getBookmark());d.setEndPoint("EndToStart",c);return d.text.length}}}}catch(e){}return 0},setCaretPosition:function(a,b){try{if(void 0!=a&&/^(text|textarea|number|password|email|tel|url)$/.test(a.type))if(a.setSelectionRange)a.setSelectionRange(b,b);else if(a.createTextRange){var c=a.createTextRange();c.collapse(!0);c.moveEnd("character",b);c.moveStart("character",b);c.select()}}catch(d){}},getTrackedPagePointer:function(a,
b){a=a.getAttribute(b);return pega.ui.ChangeTrackerMap.getTracker().trackedPropertiesList[a]},getObjectKeys:function(a){if(a&&"object"==typeof a){if(Object.keys)return Object.keys(a);var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(c);return b}},registerSinglePageNav:function(a,b){var c=b?jQuery(b):jQuery(document);jQuery(a).find("a[href^\x3d'#']").filter(function(){return this.href.match(/#[a-zA-Z]/)}).click(function(){var a=c.find("a[id\x3d'"+this.hash.substring(1)+"']").first(),a=a.next(),b=pega.u.d.getScrollObj(a.get(0)),
b=b?jQuery(b[0]):jQuery("body"),a=b.scrollTop()+a.offset().top-b.offset().top;"BODY"===b.prop("tagName").toUpperCase()&&(pega.util.Dom.hasClass(document.documentElement,"ff")||pega.util.Dom.hasClass(document.documentElement,"chrome")||pega.util.Dom.hasClass(document.documentElement,"ie"))?jQuery(document.documentElement).animate({scrollTop:a},250):b.animate({scrollTop:a},250);return!1})},setRequestAnimationFrame:function(a){window.requestAnimationFrame?window.requestAnimationFrame(a):setTimeout(a,
0)},isInRepeat:function(a){for(a=a.parentNode;null!=a;)if(!a.getAttribute||null==a.getAttribute("PL_PROP")&&null==a.getAttribute("PG_PROP"))a=a.parentNode;else return!0;return!1},getRepeatObject:function(a,b){var c=a.parentNode;if(b&&(a.getAttribute&&"MAIN_RULE"==a.getAttribute("node_type")||c&&c.getAttribute&&"MAIN_RULE"==c.getAttribute("node_type")))return null;for(;c&&c!=document.body;)if(!c.getAttribute||null==c.getAttribute("PL_PROP")&&null==c.getAttribute("PG_PROP")){if(c=c.parentNode,null!=
c&b&&c.getAttribute&&"MAIN_RULE"==c.getAttribute("node_type"))break}else return c;return null},getDocumentElement:function(){var a=document;if(pega&&pega.ui&&pega.ui.HarnessContextMgr&&pega.ui.HarnessContextMgr.get("isMDC")){var b=pega.ui.HarnessContextMgr.get("mdcName"),c=pega.ui.HarnessContextMgr.get("recordId");(b=c?document.querySelector("div[data-mdc-id\x3d'"+b+"'] div[data-mdc-recordid\x3d'"+c+"']"):document.querySelector("div[data-mdc-id\x3d'"+b+"']"))&&(a=b)}return a},getFormElement:function(){var a=
document.forms[0];if(pega&&pega.ui&&pega.ui.HarnessContextMgr&&pega.ui.HarnessContextMgr.get("isMDC")){var b=pega.ui.HarnessContextMgr.get("mdcName"),c=pega.ui.HarnessContextMgr.get("recordId");(b=c?document.querySelector("div[data-mdc-id\x3d'"+b+"'] div[data-mdc-recordid\x3d'"+c+"'] fieldset.mdc-fieldset"):document.querySelector("div[data-mdc-id\x3d'"+b+"'] fieldset.mdc-fieldset"))&&(a=b)}return a},scrollIntoViewIfOutOfView:function(a){var b=window.pageYOffset||document.documentElement.scrollTop||
document.body.scrollTop,c=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,d=0,e;if(document.layers)d=a.y,e=a.height;else{for(e=a;e&&"BODY"!=e.tagName;e=e.offsetParent)d+=e.offsetTop;e=a.offsetHeight}b+c<d+e?a.scrollIntoView(!0):d<b&&a.scrollIntoView(!1)},getMDCFieldSets:function(){return document.querySelectorAll("fieldset.mdc-fieldset")},getAllMDCContainers:function(){var a=document.getElementsByTagName("main");return a&&1==a.length?a[0].querySelectorAll("div[data-mdc-id]"):
document.querySelectorAll("div[data-mdc-id]")},getMicroDCDocs:function(a){var b=[];if(a=document.querySelector("div[data-mdc-id\x3d'"+a+"']"))b=a.children;return b},closeOnlyMDCDocs:function(a,b,c,d,e){function f(){var d=SafeURL_createFromURL(pega.u.d.url);b&&d.put("forceClose",b);c&&d.put("closeSynchronously",c);var f=e||pega.ctx.mdcName;if(a&&null!=a){var h=pega.util.Event.getTarget(a);h&&(h=h.closest("div[data-mdc-recordid]"))&&"openSection"===h.getAttribute("action")&&(f=h.closest("div[data-mdc-id]").getAttribute("data-mdc-id"))}f&&
d.put("mdcTarget",f);d.put("isOuterDocClose",f?!1:!0);pega.redux.store.dispatch(pega.redux.actions(pega.redux.actionTypes.CLOSEALL,d));return g}if(pega.ui.hasAjaxContainer){var g=!1;!d&&pega.u.d.isFormDirty(!0,null,null,!0,f)?g=pega.u.d.isFormDirty(!0,null,null,!0,f):f()}},getOuterDocumentContext:function(){var a=pega.ctxmgr.getHarnessContextMap(),b;for(b in a)if(a.hasOwnProperty(b)){var c=a[b];if(!c.isMDC&&!c.isStatic)return c}return null},getScrollParent:function(a){return a?a.scrollHeight>a.clientHeight?
a:this.getScrollParent(a.parentNode):null},filterRichText:function(a){return a},extendObj:function(a){a=a||{};for(var b=1;b<arguments.length;b++){var c=arguments[b];if(c)for(var d in c)c.hasOwnProperty(d)&&("object"===typeof c[d]?Array.isArray(c[d])&&!a[d]?a[d]=this.extendObj([],c[d]):a[d]=this.extendObj(a[d],c[d]):a[d]=c[d])}return a},deepExtendObj:function(a){a=a||{};for(var b=1;b<arguments.length;b++){var c=arguments[b];if(c)for(var d in c)c.hasOwnProperty(d)&&(a[d]=!c[d]||"object"!==typeof c[d]||
c[d].constructor!==Object&&c[d].constructor!==Array?c[d]:this.deepExtendObj(a[d],c[d]))}return a}};pega.lang.augmentObject(pega.ui.Doc.prototype,domUtils);
!function(k,a){"object"==typeof exports&&"undefined"!=typeof module?module.exports=a():"function"==typeof define&&define.amd?define(a):(k=k||self).DOMPurify=a()}(this,function(){function k(m){return function(a){for(var c=arguments.length,g=Array(1<c?c-1:0),e=1;e<c;e++)g[e-1]=arguments[e];return y(m,a,g)}}function a(m,a){M&&M(m,null);for(var c=a.length;c--;){var g=a[c];if("string"==typeof g){var e=z(g);e!==g&&(X(a)||(a[c]=e),g=e)}m[g]=!0}return m}function B(a){var m=Y(null),c=void 0;for(c in a)y(Z,
a,[c])&&(m[c]=a[c]);return m}function N(a,e){for(;null!==a;){var c=aa(a,e);if(c){if(c.get)return k(c.get);if("function"==typeof c.value)return k(c.value)}a=ba(a)}return function(c){return console.warn("fallback value for",c),null}}function r(a){if(Array.isArray(a)){for(var m=0,c=Array(a.length);m<a.length;m++)c[m]=a[m];return c}return Array.from(a)}var Z=Object.hasOwnProperty,M=Object.setPrototypeOf,X=Object.isFrozen,ba=Object.getPrototypeOf,aa=Object.getOwnPropertyDescriptor,l=Object.freeze,f=Object.seal,
Y=Object.create,O="undefined"!=typeof Reflect&&Reflect,y=O.apply,C=O.construct;y||(y=function(a,e,c){return a.apply(e,c)});l||(l=function(a){return a});f||(f=function(a){return a});C||(C=function(a,e){return new (Function.prototype.bind.apply(a,[null].concat(function(a){if(Array.isArray(a)){for(var c=0,m=Array(a.length);c<a.length;c++)m[c]=a[c];return m}return Array.from(a)}(e))))});var P,Ya=k(Array.prototype.forEach),wa=k(Array.prototype.pop),H=k(Array.prototype.push),z=k(String.prototype.toLowerCase),
xa=k(String.prototype.match),v=k(String.prototype.replace),Za=k(String.prototype.indexOf),$a=k(String.prototype.trim),w=k(RegExp.prototype.test),ya=(P=TypeError,function(){for(var a=arguments.length,e=Array(a),c=0;c<a;c++)e[c]=arguments[c];return C(P,e)}),za=l("a abbr acronym address area article aside audio b bdi bdo big blink blockquote body br button canvas caption center cite code col colgroup content data datalist dd decorator del details dfn dialog dir div dl dt element em fieldset figcaption figure font footer form h1 h2 h3 h4 h5 h6 head header hgroup hr html i img input ins kbd label legend li main map mark marquee menu menuitem meter nav nobr ol optgroup option output p picture pre progress q rp rt ruby s samp section select shadow small source spacer span strike strong style sub summary sup table tbody td template textarea tfoot th thead time tr track tt u ul var video wbr".split(" ")),
ca=l("svg a altglyph altglyphdef altglyphitem animatecolor animatemotion animatetransform circle clippath defs desc ellipse filter font g glyph glyphref hkern image line lineargradient marker mask metadata mpath path pattern polygon polyline radialgradient rect stop style switch symbol text textpath title tref tspan view vkern".split(" ")),da=l("feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence".split(" ")),
ab=l("animate color-profile cursor discard fedropshadow feimage font-face font-face-format font-face-name font-face-src font-face-uri foreignobject hatch hatchpath mesh meshgradient meshpatch meshrow missing-glyph script set solidcolor unknown use".split(" ")),ea=l("math menclose merror mfenced mfrac mglyph mi mlabeledtr mmultiscripts mn mo mover mpadded mphantom mroot mrow ms mspace msqrt mstyle msub msup msubsup mtable mtd mtext mtr munder munderover".split(" ")),bb=l("maction maligngroup malignmark mlongdiv mscarries mscarry msgroup mstack msline msrow semantics annotation annotation-xml mprescripts none".split(" ")),
Aa=l(["#text"]),Ba=l("accept action align alt autocapitalize autocomplete autopictureinpicture autoplay background bgcolor border capture cellpadding cellspacing checked cite class clear color cols colspan controls controlslist coords crossorigin datetime decoding default dir disabled disablepictureinpicture disableremoteplayback download draggable enctype enterkeyhint face for headers height hidden high href hreflang id inputmode integrity ismap kind label lang list loading loop low max maxlength media method min minlength multiple muted name noshade novalidate nowrap open optimum pattern placeholder playsinline poster preload pubdate radiogroup readonly rel required rev reversed role rows rowspan spellcheck scope selected shape size sizes span srclang start src srcset step style summary tabindex title translate type usemap valign value width xmlns slot".split(" ")),
fa=l("accent-height accumulate additive alignment-baseline ascent attributename attributetype azimuth basefrequency baseline-shift begin bias by class clip clippathunits clip-path clip-rule color color-interpolation color-interpolation-filters color-profile color-rendering cx cy d dx dy diffuseconstant direction display divisor dur edgemode elevation end fill fill-opacity fill-rule filter filterunits flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight fx fy g1 g2 glyph-name glyphref gradientunits gradienttransform height href id image-rendering in in2 k k1 k2 k3 k4 kerning keypoints keysplines keytimes lang lengthadjust letter-spacing kernelmatrix kernelunitlength lighting-color local marker-end marker-mid marker-start markerheight markerunits markerwidth maskcontentunits maskunits max mask media method mode min name numoctaves offset operator opacity order orient orientation origin overflow paint-order path pathlength patterncontentunits patterntransform patternunits points preservealpha preserveaspectratio primitiveunits r rx ry radius refx refy repeatcount repeatdur restart result rotate scale seed shape-rendering specularconstant specularexponent spreadmethod startoffset stddeviation stitchtiles stop-color stop-opacity stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke stroke-width style surfacescale systemlanguage tabindex targetx targety transform text-anchor text-decoration text-rendering textlength type u1 u2 unicode values viewbox visibility version vert-adv-y vert-origin-x vert-origin-y width word-spacing wrap writing-mode xchannelselector ychannelselector x x1 x2 xmlns y y1 y2 z zoomandpan".split(" ")),
Ca=l("accent accentunder align bevelled close columnsalign columnlines columnspan denomalign depth dir display displaystyle encoding fence frame height href id largeop length linethickness lspace lquote mathbackground mathcolor mathsize mathvariant maxsize minsize movablelimits notation numalign open rowalign rowlines rowspacing rowspan rspace rquote scriptlevel scriptminsize scriptsizemultiplier selection separator separators stretchy subscriptshift supscriptshift symmetric voffset width xmlns".split(" ")),
Q=l(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ga=f(/\{\{[\s\S]*|[\s\S]*\}\}/gm),ha=f(/<%[\s\S]*|[\s\S]*%>/gm),cb=f(/^data-[\-\w.\u00B7-\uFFFF]/),db=f(/^aria-[\-\w]+$/),eb=f(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),fb=f(/^(?:\w+script|data):/i),Da=f(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==
typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},gb=function(a,e){if("object"!==(void 0===a?"undefined":I(a))||"function"!=typeof a.createPolicy)return null;var c=null;e.currentScript&&e.currentScript.hasAttribute("data-tt-policy-suffix")&&(c=e.currentScript.getAttribute("data-tt-policy-suffix"));e="dompurify"+(c?"#"+c:"");try{return a.createPolicy(e,{createHTML:function(a){return a}})}catch(g){return console.warn("TrustedTypes policy "+e+" could not be created."),null}};
return function e(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"undefined"==typeof window?null:window,g=function(b){return e(b)};if(g.version="2.2.9",g.removed=[],!c||!c.document||9!==c.document.nodeType)return g.isSupported=!1,g;var k=c.document,f=c.document,y=c.DocumentFragment,q=c.HTMLTemplateElement,R=c.Node,C=c.Element,ia=c.NodeFilter,S=c.NamedNodeMap,M=void 0===S?c.NamedNodeMap||c.MozNamedAttrMap:S,O=c.Text,P=c.Comment,X=c.DOMParser,S=c.trustedTypes,T=C.prototype,Y=N(T,"cloneNode"),
Z=N(T,"nextSibling"),aa=N(T,"childNodes"),ja=N(T,"parentNode");"function"==typeof q&&(q=f.createElement("template"),q.content&&q.content.ownerDocument&&(f=q.content.ownerDocument));var x=gb(S,k),Ea=x&&U?x.createHTML(""):"",q=f,ka=q.implementation,ba=q.createNodeIterator,hb=q.createDocumentFragment,ib=k.importNode,q={};try{q=B(f).documentMode?f.documentMode:{}}catch(b){}var t={};g.isSupported="function"==typeof ja&&ka&&void 0!==ka.createHTMLDocument&&9!==q;var la=eb,h=null,Fa=a({},[].concat(r(za),
r(ca),r(da),r(ea),r(Aa))),n=null,Ga=a({},[].concat(r(Ba),r(fa),r(Ca),r(Q))),ma=null,Ha=null,Ia=!0,na=!0,Ja=!1,D=!1,J=!1,oa=!1,pa=!1,E=!1,V=!1,Ka=!0,U=!1,La=!0,qa=!0,K=!1,F={},jb=a({},"annotation-xml audio colgroup desc foreignobject head iframe math mi mn mo ms mtext noembed noframes noscript plaintext script style svg template thead title video xmp".split(" ")),Ma=null,Na=a({},"audio video img source image track".split(" ")),ra=null,Oa=a({},"alt class for id label name pattern placeholder summary title value style xmlns".split(" ")),
sa="http://www.w3.org/1999/xhtml",Pa=!1,G=null,kb=f.createElement("form"),ta=function(b){G&&G===b||(b&&"object"===(void 0===b?"undefined":I(b))||(b={}),b=B(b),h="ALLOWED_TAGS"in b?a({},b.ALLOWED_TAGS):Fa,n="ALLOWED_ATTR"in b?a({},b.ALLOWED_ATTR):Ga,ra="ADD_URI_SAFE_ATTR"in b?a(B(Oa),b.ADD_URI_SAFE_ATTR):Oa,Ma="ADD_DATA_URI_TAGS"in b?a(B(Na),b.ADD_DATA_URI_TAGS):Na,ma="FORBID_TAGS"in b?a({},b.FORBID_TAGS):{},Ha="FORBID_ATTR"in b?a({},b.FORBID_ATTR):{},F="USE_PROFILES"in b&&b.USE_PROFILES,Ia=!1!==b.ALLOW_ARIA_ATTR,
na=!1!==b.ALLOW_DATA_ATTR,Ja=b.ALLOW_UNKNOWN_PROTOCOLS||!1,D=b.SAFE_FOR_TEMPLATES||!1,J=b.WHOLE_DOCUMENT||!1,E=b.RETURN_DOM||!1,V=b.RETURN_DOM_FRAGMENT||!1,Ka=!1!==b.RETURN_DOM_IMPORT,U=b.RETURN_TRUSTED_TYPE||!1,pa=b.FORCE_BODY||!1,La=!1!==b.SANITIZE_DOM,qa=!1!==b.KEEP_CONTENT,K=b.IN_PLACE||!1,la=b.ALLOWED_URI_REGEXP||la,sa=b.NAMESPACE||"http://www.w3.org/1999/xhtml",D&&(na=!1),V&&(E=!0),F&&(h=a({},[].concat(r(Aa))),n=[],!0===F.html&&(a(h,za),a(n,Ba)),!0===F.svg&&(a(h,ca),a(n,fa),a(n,Q)),!0===F.svgFilters&&
(a(h,da),a(n,fa),a(n,Q)),!0===F.mathMl&&(a(h,ea),a(n,Ca),a(n,Q))),b.ADD_TAGS&&(h===Fa&&(h=B(h)),a(h,b.ADD_TAGS)),b.ADD_ATTR&&(n===Ga&&(n=B(n)),a(n,b.ADD_ATTR)),b.ADD_URI_SAFE_ATTR&&a(ra,b.ADD_URI_SAFE_ATTR),qa&&(h["#text"]=!0),J&&a(h,["html","head","body"]),h.table&&(a(h,["tbody"]),delete ma.tbody),l&&l(b),G=b)},Qa=a({},["mi","mo","mn","ms","mtext"]),Ra=a({},["foreignobject","desc","title","annotation-xml"]),W=a({},ca);a(W,da);a(W,ab);var ua=a({},ea);a(ua,bb);var lb=function(b){var d=ja(b);d&&d.tagName||
(d={namespaceURI:"http://www.w3.org/1999/xhtml",tagName:"template"});var p=z(b.tagName),c=z(d.tagName);if("http://www.w3.org/2000/svg"===b.namespaceURI)return"http://www.w3.org/1999/xhtml"===d.namespaceURI?"svg"===p:"http://www.w3.org/1998/Math/MathML"===d.namespaceURI?"svg"===p&&("annotation-xml"===c||Qa[c]):!!W[p];if("http://www.w3.org/1998/Math/MathML"===b.namespaceURI)return"http://www.w3.org/1999/xhtml"===d.namespaceURI?"math"===p:"http://www.w3.org/2000/svg"===d.namespaceURI?"math"===p&&Ra[c]:
!!ua[p];if("http://www.w3.org/1999/xhtml"===b.namespaceURI){if("http://www.w3.org/2000/svg"===d.namespaceURI&&!Ra[c]||"http://www.w3.org/1998/Math/MathML"===d.namespaceURI&&!Qa[c])return!1;b=a({},["title","style","font","a","script"]);return!ua[p]&&(b[p]||!W[p])}return!1},A=function(b){H(g.removed,{element:b});try{b.parentNode.removeChild(b)}catch(d){try{b.outerHTML=Ea}catch(p){b.remove()}}},Sa=function(b,d){try{H(g.removed,{attribute:d.getAttributeNode(b),from:d})}catch(p){H(g.removed,{attribute:null,
from:d})}if(d.removeAttribute(b),"is"===b&&!n[b])if(E||V)try{A(d)}catch(p){}else try{d.setAttribute(b,"")}catch(p){}},Ta=function(b){var d=void 0,a=void 0;pa?b="\x3cremove\x3e\x3c/remove\x3e"+b:a=(a=xa(b,/^[\r\n\t ]+/))&&a[0];var c=x?x.createHTML(b):b;if("http://www.w3.org/1999/xhtml"===sa)try{d=(new X).parseFromString(c,"text/html")}catch(mb){}if(!d||!d.documentElement){d=ka.createDocument(sa,"template",null);try{d.documentElement.innerHTML=Pa?"":c}catch(mb){}}c=d.body||d.documentElement;return b&&
a&&c.insertBefore(f.createTextNode(a),c.childNodes[0]||null),J?d.documentElement:c},Ua=function(b){return ba.call(b.ownerDocument||b,b,ia.SHOW_ELEMENT|ia.SHOW_COMMENT|ia.SHOW_TEXT,null,!1)},L=function(b){return"object"===(void 0===R?"undefined":I(R))?b instanceof R:b&&"object"===(void 0===b?"undefined":I(b))&&"number"==typeof b.nodeType&&"string"==typeof b.nodeName},u=function(b,d,a){t[b]&&Ya(t[b],function(b){b.call(g,d,a,G)})},Va=function(b){var d=void 0;if((u("beforeSanitizeElements",b,null),!(b instanceof
O||b instanceof P||"string"==typeof b.nodeName&&"string"==typeof b.textContent&&"function"==typeof b.removeChild&&b.attributes instanceof M&&"function"==typeof b.removeAttribute&&"function"==typeof b.setAttribute&&"string"==typeof b.namespaceURI&&"function"==typeof b.insertBefore))||xa(b.nodeName,/[\u0080-\uFFFF]/))return A(b),!0;var a=z(b.nodeName);if(u("uponSanitizeElement",b,{tagName:a,allowedTags:h}),!(L(b.firstElementChild)||L(b.content)&&L(b.content.firstElementChild))&&w(/<[/\w]/g,b.innerHTML)&&
w(/<[/\w]/g,b.textContent))return A(b),!0;if(!h[a]||ma[a]){if(qa&&!jb[a]&&(d=ja(b)||b.parentNode,(a=aa(b)||b.childNodes)&&d))for(var c=a.length-1;0<=c;--c)d.insertBefore(Y(a[c],!0),Z(b));return A(b),!0}return b instanceof C&&!lb(b)?(A(b),!0):"noscript"!==a&&"noembed"!==a||!w(/<\/no(script|embed)/i,b.innerHTML)?(D&&3===b.nodeType&&(d=b.textContent,d=v(d,ga," "),d=v(d,ha," "),b.textContent!==d&&(H(g.removed,{element:b.cloneNode()}),b.textContent=d)),u("afterSanitizeElements",b,null),!1):(A(b),!0)},
Wa=function(b,a,c){if(La&&("id"===a||"name"===a)&&(c in f||c in kb))return!1;if(!na||!w(cb,a))if(!Ia||!w(db,a))if(!n[a]||Ha[a]||!(ra[a]||w(la,v(c,Da,""))||("src"===a||"xlink:href"===a||"href"===a)&&"script"!==b&&0===Za(c,"data:")&&Ma[b]||Ja&&!w(fb,v(c,Da,"")))&&c)return!1;return!0},Xa=function(b){var a,c=void 0,va=void 0,e;u("beforeSanitizeAttributes",b,null);var k=b.attributes;if(k){var f={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:n};for(e=k.length;e--;){var h=a=k[e],l=h.name,h=h.namespaceURI;
if(c=$a(a.value),va=z(l),f.attrName=va,f.attrValue=c,f.keepAttr=!0,f.forceKeepAttr=void 0,u("uponSanitizeAttribute",b,f),c=f.attrValue,!f.forceKeepAttr&&(Sa(l,b),f.keepAttr))if(w(/\/>/i,c))Sa(l,b);else if(D&&(c=v(c,ga," "),c=v(c,ha," ")),a=b.nodeName.toLowerCase(),Wa(a,va,c))try{h?b.setAttributeNS(h,l,c):b.setAttribute(l,c),wa(g.removed)}catch(ob){}}u("afterSanitizeAttributes",b,null)}},nb=function d(a){var c,g=Ua(a);for(u("beforeSanitizeShadowDOM",a,null);c=g.nextNode();)u("uponSanitizeShadowNode",
c,null),Va(c)||(c.content instanceof y&&d(c.content),Xa(c));u("afterSanitizeShadowDOM",a,null)};return g.sanitize=function(a,e){var d=void 0,f=void 0,h=void 0;if((Pa=!a)&&(a="\x3c!--\x3e"),"string"!=typeof a&&!L(a)){if("function"!=typeof a.toString)throw ya("toString is not a function");if("string"!=typeof(a=a.toString()))throw ya("dirty is not a string, aborting");}if(!g.isSupported){if("object"===I(c.toStaticHTML)||"function"==typeof c.toStaticHTML){if("string"==typeof a)return c.toStaticHTML(a);
if(L(a))return c.toStaticHTML(a.outerHTML)}return a}if(oa||ta(e),g.removed=[],"string"==typeof a&&(K=!1),!K)if(a instanceof R)1===(f=(d=Ta("\x3c!----\x3e")).ownerDocument.importNode(a,!0)).nodeType&&"BODY"===f.nodeName||"HTML"===f.nodeName?d=f:d.appendChild(f);else{if(!E&&!D&&!J&&-1===a.indexOf("\x3c"))return x&&U?x.createHTML(a):a;if(!(d=Ta(a)))return E?null:Ea}d&&pa&&A(d.firstChild);for(f=Ua(K?a:d);e=f.nextNode();)3===e.nodeType&&e===h||Va(e)||(e.content instanceof y&&nb(e.content),Xa(e),h=e);if(K)return a;
if(E){if(V)for(a=hb.call(d.ownerDocument);d.firstChild;)a.appendChild(d.firstChild);else a=d;return Ka&&(a=ib.call(k,a,!0)),a}d=J?d.outerHTML:d.innerHTML;return D&&(d=v(d,ga," "),d=v(d,ha," ")),x&&U?x.createHTML(d):d},g.setConfig=function(a){ta(a);oa=!0},g.clearConfig=function(){G=null;oa=!1},g.isValidAttribute=function(a,c,e){G||ta({});a=z(a);c=z(c);return Wa(a,c,e)},g.addHook=function(a,c){"function"==typeof c&&(t[a]=t[a]||[],H(t[a],c))},g.removeHook=function(a){t[a]&&wa(t[a])},g.removeHooks=function(a){t[a]&&
(t[a]=[])},g.removeAllHooks=function(){t={}},g}()});